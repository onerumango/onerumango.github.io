{"version":3,"file":"src_app_pages_changempin_changempin_module_ts.js","mappings":"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","sources":["./src/app/pages/changempin/changempin-routing.module.ts","./src/app/pages/changempin/changempin.module.ts","./src/app/pages/changempin/changempin.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { ChangempinPage } from './changempin.page';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ChangempinPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ChangempinPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ChangempinPageRoutingModule } from './changempin-routing.module';\r\n\r\nimport { ChangempinPage } from './changempin.page';\r\nimport { NgOtpInputModule } from 'ng-otp-input';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,\r\n    ChangempinPageRoutingModule,\r\n    NgOtpInputModule\r\n  ],\r\n  declarations: [ChangempinPage]\r\n})\r\nexport class ChangempinPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\nimport { NavigationExtras, Router } from '@angular/router';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { mpinObjects } from '../setmpin/setmpin.page';\r\nimport { DeviceAccess } from 'src/app/services/device-access.service';\r\nimport { DataService } from 'src/app/services/data.service';\r\nimport { UniqueDeviceID } from '@ionic-native/unique-device-id/ngx';\r\n\r\n@Component({\r\n  selector: 'app-changempin',\r\n  templateUrl: './changempin.page.html',\r\n  styleUrls: ['./changempin.page.scss'],\r\n})\r\nexport class ChangempinPage implements OnInit {\r\n  currentmpin = new FormControl('');\r\n  setnewmpin = new FormControl('');\r\n  confirmnewmpin = new FormControl('');\r\n  mpinobj = new mpinObjects();\r\n  customerPhonenum: string;\r\n  deviceUUID: string;\r\n  config = {\r\n    allowNumbersOnly: true,\r\n    length: 4,\r\n    isPasswordInput: false,\r\n    disableAutoFocus: false,\r\n    placeholder: '*',\r\n    inputStyles: {\r\n      'width': '50px',\r\n      'height': '50px'\r\n    }\r\n  }\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private toastCtrl: ToastController,\r\n    private api: ApiService,\r\n    private device: DeviceAccess,\r\n    private dataService: DataService,\r\n    private uniqueDeviceID: UniqueDeviceID,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.customerPhonenum = localStorage.getItem('customerPhonenum');\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.getUniqueDeviceID();\r\n  }\r\n\r\n  getUniqueDeviceID() {\r\n    this.uniqueDeviceID.get()\r\n      .then((uuid: any) => {\r\n        console.log(uuid);\r\n        this.deviceUUID = uuid;\r\n      })\r\n      .catch((error: any) => {\r\n        console.log(error);\r\n        this.deviceUUID = \"\";\r\n      });\r\n  }\r\n\r\n  async changePin() {\r\n    if (!this.currentmpin.value || !this.setnewmpin.value || !this.confirmnewmpin) {\r\n      this.openToast('Fill all mPin fields');\r\n      return;\r\n    }\r\n\r\n    if (this.setnewmpin.value !== this.confirmnewmpin.value) {\r\n      this.openToast(\"New and confirm mPin didn't match\");\r\n      return;\r\n    }\r\n\r\n    if (this.currentmpin.value == this.setnewmpin.value) {\r\n      this.openToast(\"New mPin must be different from previous\");\r\n      return;\r\n    }\r\n\r\n    this.mpinobj.phoneNumber = this.customerPhonenum;\r\n    this.mpinobj.mpin = this.setnewmpin.value;\r\n    this.mpinobj.currentMpin = this.currentmpin.value;\r\n    this.mpinobj.deviceId = this.deviceUUID;\r\n\r\n    this.api\r\n      .changeMpin(this.mpinobj)\r\n      .subscribe((res: any) => {\r\n        if (res.status == 200) {\r\n          console.log(\"data\");\r\n          localStorage.setItem(\r\n            'customer_details',\r\n            JSON.stringify(res.data)\r\n          );\r\n          this.dataService.isLoggedIn.next(true);\r\n          const navigationExtras: NavigationExtras = {\r\n            queryParams: {\r\n              'screenDetails': 'mPIN Password Changed!',\r\n              'screenDescription': 'Your mPIN password has been changed successfully',\r\n              'screenName': 'changempin'\r\n            },\r\n          };\r\n          this.api.sendNavParam(navigationExtras);\r\n          this.router.navigateByUrl('/success-message');\r\n        } else {\r\n          this.openToast(res.message);\r\n        }\r\n      });\r\n  }\r\n\r\n  goToSecuritycenter() {\r\n    this.router.navigate(['securitycenter']);\r\n  }\r\n\r\n  async openToast(errorMessage: string) {\r\n    const toast = await this.toastCtrl.create({\r\n      message: `${errorMessage}`,\r\n      duration: 2500,\r\n      position: 'bottom',\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n}"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}