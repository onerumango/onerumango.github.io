{"version":3,"file":"default-src_app_pages_transaction-popup_transaction-popup_page_ts.js","mappings":"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","sources":["./src/app/pages/transaction-popup/transaction-popup.page.ts","./src/app/services/toast.service.ts"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { ModalController, NavController } from '@ionic/angular';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { ToastService } from 'src/app/services/toast.service';\r\nimport { DataService } from \"src/app/services/data.service\";\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Router } from '@angular/router';\r\n\r\nexport class TokenObjects {\r\n  transactionId: any;\r\n  accountId: string;\r\n  productCode: string;\r\n  transactionDate: string;\r\n  timeSlot: string;\r\n  phoneNumber: any;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-transaction-popup',\r\n  templateUrl: './transaction-popup.page.html',\r\n  styleUrls: ['./transaction-popup.page.scss'],\r\n})\r\nexport class TransactionPopupPage implements OnInit {\r\n  @Input() value: any;\r\n  data: any;\r\n  tokenObjects = new TokenObjects();\r\n  imageToShow: string | ArrayBuffer;\r\n  productCode: any;\r\n  phoneNumber: string;\r\n  accountInfo: {};\r\n  image: any;\r\n  trans: any;\r\n  tellerId: any;\r\n  // sanitizer: any;\r\n\r\n  constructor(public navCtrl: NavController, private api: ApiService, private modalCtrl: ModalController, private sanitizer: DomSanitizer, private shareDataService: DataService, private apiService: ApiService, private router: Router, private toastService: ToastService,) { }\r\n\r\n  ngOnInit() {\r\n\r\n    setTimeout(() => {\r\n      this.generateQRCode(this.tokenObjects);\r\n    }, 100);\r\n\r\n    this.getData();\r\n    this.generateQRCode(this.tokenObjects);\r\n  }\r\n\r\n  getData() {\r\n\r\n    this.shareDataService.getAccountInfo.subscribe(data => {\r\n      console.log(\"Data\", data);\r\n      this.accountInfo = data;\r\n\r\n    });\r\n\r\n\r\n    this.apiService.getByTransactionId(this.value).subscribe(response => {\r\n      this.tellerId = response.tellerId;\r\n      this.trans = JSON.stringify(response);\r\n      this.trans = JSON.parse(this.trans);\r\n\r\n      let objectURL = 'data:image/jpeg;base64,' + this.trans.qrCodeImage\r\n      this.image = this.sanitizer.bypassSecurityTrustUrl(objectURL);\r\n    });\r\n  }\r\n\r\n  generateQRCode(token) {\r\n\r\n    this.api.generateQRCode(this.tokenObjects).subscribe(tokenResp => {\r\n      console.log(\"Token Response\", tokenResp);\r\n      this.createImageFromBlob(tokenResp);\r\n    }, err => {\r\n    });\r\n\r\n  }\r\n\r\n  createImageFromBlob(image: Blob) {\r\n    let reader = new FileReader();\r\n    reader.addEventListener(\"load\", () => {\r\n      this.imageToShow = reader.result;\r\n    }, false);\r\n\r\n    if (image) {\r\n      console.log(\"i->\", image)\r\n      reader.readAsDataURL(image);\r\n    }\r\n  }\r\n\r\n  async next() {\r\n    console.log(\"before\");\r\n    // this.router.navigate(['/tabs/transaction']);\r\n\r\n    await this.modalCtrl.dismiss();\r\n    console.log(\"after\", this.router);\r\n  }\r\n\r\n  async addToWallet() {\r\n    this.toastService.showToast(\"Added Successfully!\");\r\n    this.router.navigate(['tabs']);\r\n    await this.modalCtrl.dismiss();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ToastController } from '@ionic/angular';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ToastService {\r\n\r\n  private myToast: any;\r\n\r\n  constructor(\r\n    private toast: ToastController\r\n  ) { }\r\n\r\n  showToast(msg: string) {\r\n    this.myToast = this.toast.create({\r\n      message: msg,\r\n      duration: 3000,\r\n      buttons: [\r\n        {\r\n          text: 'Dismiss',\r\n          role: 'cancel',\r\n          handler: () => { }\r\n        }\r\n      ]\r\n    }).then((toastData) => {\r\n      toastData.present();\r\n    });\r\n  }\r\n\r\n  dismissToast() {\r\n    this.myToast = this.toast.dismiss();\r\n  }\r\n\r\n}"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}