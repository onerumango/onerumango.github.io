{"version":3,"sources":["webpack:///src/app/views/card-account/digital-signing/upload-signature-or-esign/upload-signature-or-esign.component.ts","webpack:///src/app/views/card-account/digital-signing/upload-signature-or-esign/upload-signature-or-esign.component.html","webpack:///src/app/views/card-account/digital-signing/esignature-pop/esignature-pop.component.ts","webpack:///src/app/views/card-account/digital-signing/esignature-pop/esignature-pop.component.html"],"names":["UploadSignatureOrEsignComponent","data","router","apiService","dialogService","dialog","dialogRef","ls","location","snack","isDone","previousUrl","disableDone","res","enable","image","isCardDigitalSigningDone","getItem","isCardDigitalSigning","imageURL1","accountId","screen","close","setItem","response","undefined","isSignLater","customerId","show","open","width","disableClose","afterClosed","subscribe","console","log","event","target","files","selectedFile","reader","FileReader","readAsDataURL","onload","event2","result","cId","url","uploadData","FormData","documentName","documentType","fileType","type","fileName","name","verificationType","append","JSON","stringify","uploadDocument","doConfirmDialog","removeItem","profileFile","nativeElement","value","deleteCustomerDoc","profileId","selector","templateUrl","styleUrls","EsignaturePopComponent","accountService","appEntryService","cdr","signaturePadOptions","minWidth","canvasWidth","canvasHeight","count","signupload","cardId","markForCheck","signaturePad","set","clear","toDataURL","esignUrl","toString","includes","base64Data","signatureImg","uploadModel","getByAccountId","getAccountIdByCusId","dataURL","datam","atob","substring","length","asArray","Uint8Array","i","len","charCodeAt","blob","Blob","noOfSignatures","uploadSignature","op","err","getCardInitiationDetails","resp","accountdetailsForStatusUpdate","updateCardAccountStatus","statusModel","status","updateCardStatus","updateResp"],"mappings":"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","file":"default~views-card-account-card-account-module~views-tasks-tasks-module-es5.js","sourcesContent":["import { Location } from \"@angular/common\";\r\nimport {\r\n  Component,\r\n  ElementRef,\r\n  Inject,\r\n  OnInit,\r\n  ViewChild,\r\n} from \"@angular/core\";\r\nimport {\r\n  MatDialog,\r\n  MatDialogRef,\r\n  MAT_DIALOG_DATA,\r\n} from \"@angular/material/dialog\";\r\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\r\nimport { Router } from \"@angular/router\";\r\nimport { ApiService } from \"app/shared/services/api.service\";\r\nimport { DialogService } from \"app/shared/services/dialogs/dialog.service\";\r\nimport { LocalStoreService } from \"app/shared/services/local-store.service\";\r\nimport { EsignaturePopComponent } from \"../esignature-pop/esignature-pop.component\";\r\n\r\n@Component({\r\n  selector: \"app-upload-signature-or-esign\",\r\n  templateUrl: \"./upload-signature-or-esign.component.html\",\r\n  styleUrls: [\"./upload-signature-or-esign.component.scss\"],\r\n})\r\nexport class UploadSignatureOrEsignComponent implements OnInit {\r\n  isDone: boolean = false;\r\n  show: any;\r\n  // dialog: any;\r\n  accountId: any;\r\n  // apiService: any;\r\n  accountdetailsForStatusUpdate: any;\r\n  previousUrl: string = \"\";\r\n  // accountService: any;\r\n  customerId: any;\r\n  disableDone: boolean = true;\r\n  image: any;\r\n  imageURL1: any;\r\n  urlService: any;\r\n  selectedFile: any;\r\n  res: Object = { enable: false, image: null };\r\n  profileId: any;\r\n  isCardDigitalSigningDone: boolean;\r\n  isCardDigitalSigning: boolean;\r\n  esignUrl: any;\r\n  @ViewChild(\"profileFile\") profileFile: ElementRef;\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    private router: Router,\r\n    private apiService: ApiService,\r\n    private dialogService: DialogService,\r\n    private dialog: MatDialog,\r\n    public dialogRef: MatDialogRef<UploadSignatureOrEsignComponent>,\r\n    private ls: LocalStoreService,\r\n    private location: Location,\r\n    private snack: MatSnackBar\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.isCardDigitalSigningDone = this.ls.getItem(\"CARD_DIGITAL_STAGE_DONE\");\r\n    this.isCardDigitalSigning = this.ls.getItem(\"CARD_DIGITAL_SIGN_DONE\");\r\n\r\n    this.image = this.ls.getItem(\"cardSignedImage\");\r\n\r\n    if (this.image) {\r\n      this.imageURL1 = this.image;\r\n      // this.disableDone = false;\r\n    } else {\r\n      this.imageURL1 = \"not_available\";\r\n      //this.disableDone = true;\r\n    }\r\n    this.accountId = this.ls.getItem(\"cardId\");\r\n    // this.urlService.previousUrl$.subscribe((previousUrl: string) => {\r\n    //   this.previousUrl = previousUrl;\r\n    // });\r\n  }\r\n\r\n  close1() {\r\n    if (this.data.screen === \"NewCustomerOnboarding\") {\r\n      this.dialogRef.close(this.res);\r\n    } else {\r\n      this.dialogRef.close(true);\r\n      this.ls.setItem(\"enable\", this.ls.getItem('cardSignedImage')?true:false);\r\n    }\r\n  }\r\n\r\n  openPopUp(data?: any) {\r\n    let response: any;\r\n    if (data === undefined || data === null) {\r\n      response = {\r\n        isSignLater: false,\r\n        screen: \"Create Account\",\r\n        accountId: this.accountId,\r\n        customerId: this.ls.getItem(\"cId\"),\r\n      };\r\n    }\r\n    if (!this.show) {\r\n      let dialogRef: MatDialogRef<any> = this.dialog.open(\r\n        EsignaturePopComponent,\r\n        {\r\n          width: \"720px\",\r\n          disableClose: true,\r\n          data: data === undefined || data === null ? response : data,\r\n        }\r\n      );\r\n      dialogRef.afterClosed().subscribe((res) => {\r\n        console.log(\"dismiss res\", res);\r\n        if (res) {\r\n          this.ls.setItem(\"enable\", true);\r\n          this.imageURL1 = res?.image?res?.image:'not_available';\r\n          this.disableDone = res?.image ? false : true;\r\n          //this.res = true;\r\n          //this.isDone = true;\r\n          // this.getByAccountId(this.accountId);\r\n        }\r\n      });\r\n    }\r\n  }\r\n  // getByAccountId(accountId: any) {\r\n  //   this.apiService.getByAccountId(accountId)\r\n  // .subscribe(resp => {\r\n  //   this.accountdetailsForStatusUpdate = resp;\r\n  //       this.updateAccountStatus(resp);\r\n  // });\r\n  // }\r\n\r\n  // updateAccountStatus(accData) {\r\n  //   accData.status = 'BACKLOG';\r\n  //   this.apiService.updateAccountStatusService(accData)\r\n  //   .subscribe(updateResp => {\r\n  //     console.log(\"updateResp:: \", updateResp);\r\n  //   });\r\n  // }\r\n\r\n  // goBack() {\r\n  //   this.ls.setItem('CARD_DIGITAL_STAGE_DONE', true);\r\n  //   this.ls.setItem('CARD_DIGITAL_SIGN_DONE', true);\r\n  //   this.ls.setItem('eSignStage', true);\r\n  //   this.location.back();\r\n  // }\r\n\r\n  onFileSelect(event) {\r\n    console.log(\"event -- \", event.target.files);\r\n    this.selectedFile = event.target.files[0];\r\n    console.log(this.selectedFile);\r\n\r\n    let reader = new FileReader();\r\n    reader.readAsDataURL(event.target.files[0]);\r\n    //   let extName=this.selectedFile.name;\r\n    //   const restArr=extName.split(\".\");\r\n    //  if(restArr[restArr.length-1]!=='xlsx'){\r\n    reader.onload = (event2) => {\r\n      this.imageURL1 = reader.result;\r\n    };\r\n\r\n    const cId: string = this.customerId;\r\n    const url: string = this.selectedFile;\r\n    const uploadData = new FormData();\r\n    const data = {\r\n      customerId: this.customerId,\r\n      documentName: \"Signature\",\r\n      documentType: \"10\",\r\n      fileType: event.type,\r\n      fileName: event.name,\r\n      verificationType: \"Digital Signing\",\r\n    };\r\n    uploadData.append(\"data\", JSON.stringify(data));\r\n    uploadData.append(\"file\", url);\r\n    debugger\r\n    this.apiService.uploadDocument(uploadData).subscribe((res) => {\r\n      // console.log(res);\r\n      // this.disableDone = false;\r\n      if (res) {\r\n        // this.res = res;\r\n        // this.ls.setItem('signedImage', res.fileUrl);\r\n        // this.ls.setItem('enable', true);\r\n      }\r\n    });\r\n    // }else{\r\n    //   this.snack.open(\"Excel files cannot be uploaded!\", \"OK\", {\r\n    //     duration: 3000,\r\n    //     verticalPosition: \"top\",\r\n    //     horizontalPosition: \"right\",\r\n    //   });\r\n    // }\r\n  }\r\n  deleteImg() {\r\n    this.dialogService.doConfirmDialog(\"\").subscribe((response) => {\r\n      if (response == \"Yes\") {\r\n        this.ls.removeItem(\"cardSignedImage\");\r\n        this.disableDone = true;\r\n        this.imageURL1 = \"not_available\";\r\n        this.profileFile.nativeElement.value = \"\";\r\n        this.apiService\r\n          .deleteCustomerDoc(this.customerId, this.profileId)\r\n          .subscribe((data) => {});\r\n        this.disableDone = true;\r\n        this.ls.setItem(\"enable\",false);\r\n      }\r\n    });\r\n  }\r\n\r\n  // resetState() {\r\n  //   this.ls.removeItem('appEntryStage');\r\n  //   this.ls.removeItem('ACC_DONE');\r\n  //   this.ls.removeItem('ACC_OPEN_DONE');\r\n  //   this.ls.removeItem('ACC_SERVICE_DONE');\r\n  //   this.ls.removeItem('ACC_MANDATE_DONE');\r\n  //   this.ls.removeItem('ACC_NOMINEE_DONE');\r\n\r\n  //   this.ls.removeItem('limitEntryStage');\r\n  //   this.ls.removeItem('LIMIT_SECURED_DONE');\r\n  //   this.ls.removeItem('LIMIT_UNSECURED_DONE');\r\n  //   this.ls.removeItem('LIMIT_FIN_DONE');\r\n\r\n  //   // Parent 3\r\n  //   this.ls.removeItem('enrichmentStage');\r\n  //   // Subnave of parent 3\r\n  //   this.ls.removeItem('ENRICHMENT_CHARGES_DONE');\r\n  //   this.ls.removeItem('ENRICHMENT_INTEREST_DONE');\r\n\r\n  //   // PArent 4\r\n  //   this.ls.removeItem('assessmentStage');\r\n  //   // Subnave of parent 4\r\n  //   this.ls.removeItem('ASSESSMENT_QA_DONE');\r\n  //   this.ls.removeItem('ASSESSMENT_REPORT_DONE');\r\n  //   // PArent 5\r\n  //   this.ls.removeItem('fundingStage');\r\n  //   // Subnave of parent 5\r\n  //   this.ls.removeItem('FUNDING_INI_DONE');\r\n\r\n  //   // Parent 6\r\n  //   this.ls.removeItem('approvalStage');\r\n  //   // Parent 6 childs nav\r\n  //   this.ls.removeItem('APPROVAL_DETAILS_DONE');\r\n  //   this.ls.removeItem('accountId');\r\n  //   this.ls.removeItem('eSignStage');\r\n  //   this.ls.removeItem('PRODUCT_CUSTOMER_ID');\r\n  //   this.ls.removeItem('accountType');\r\n  //   this.ls.removeItem('intrestFlag');\r\n  //   this.ls.removeItem('Status');\r\n  //   this.ls.removeItem(\"CIF_NUM_PRIMARY\");\r\n  //   this.ls.removeItem(\"cId\");\r\n  //   this.ls.removeItem(\"fundByStatus\");\r\n  //   this.ls.removeItem(\"overDraftByStatus\");\r\n  //   sessionStorage.clear();\r\n  //   this.accountService.refresh.next();\r\n  //   this.router.navigate(['/loan-account']);\r\n  // }\r\n  onSubmit() {\r\n    this.isDone = true;\r\n    this.dialogRef.close(true);\r\n  }\r\n}\r\n","<div fxLayout=\"row wrap\">\r\n  <div fxFlex=\"100\" fxLayoutAlign=\"end center\">\r\n    <button mat-icon-button (click)=\"close1()\" *ngIf=\"!isDone\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n    <button mat-icon-button (click)=\"close()\" *ngIf=\"isDone\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div fxFlex=\"100\" *ngIf=\"!isDone\">\r\n    <div class=\"propic text-center\">\r\n      <img src=\"assets/images/esign.png\" alt=\"\" />\r\n    </div>\r\n  </div>\r\n\r\n  <div fxFlex=\"100\">\r\n    <div fxLayout=\"row\" fxLayoutAlign=\"center center\">\r\n      <div fxFlex=\"50\" fxFlexOffset=\"20px\" *ngIf=\"!isDone\">\r\n        <h5 class=\"text-center mt-16 size\">Signature!</h5>\r\n        <!-- <mat-card class=\"mat-elevation-z0\">\r\n            <mat-card-content> -->\r\n        <div fxLayout=\"row\" fxLayoutAlign=\"center center\" fxLayoutGap=\"20px\">\r\n          <div class=\"sub-section-1\">\r\n            <button\r\n              class=\"scanButton\"\r\n              appearence=\"outline\"\r\n              (click)=\"openPopUp()\"\r\n            >\r\n              Digital Sign\r\n            </button>\r\n          </div>\r\n          <div class=\"sub-section-2\">\r\n            <button class=\"Upload scanButton\" (click)=\"fileInput.click()\">\r\n              Upload\r\n              <input\r\n                style=\"display: none\"\r\n                type=\"file\"\r\n                class=\"changeInput\"\r\n                required\r\n                (change)=\"onFileSelect($event)\"\r\n                #fileInput\r\n              />\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div fxLayout=\"row\" fxLayoutAlign=\"center center\">\r\n          <div class=\"sub-section-1\">\r\n            <div class=\"insertDriveImg\">\r\n              <div *ngIf=\"imageURL1 == 'not_available'; else showAvatar\">\r\n                <img\r\n                  class=\"formImg\"\r\n                  [src]=\"'assets/images/no-image.jpg'\"\r\n                  alt=\"No Image\"\r\n                />\r\n              </div>\r\n              <ng-template #showAvatar>\r\n                <img class=\"formImg\" required [src]=\"imageURL1\" alt=\"\" />\r\n              </ng-template>\r\n            </div>\r\n            <!-- <button\r\n              mat-raised-button\r\n              style=\"margin-left: 300px\"\r\n              (click)=\"deleteImg()\"\r\n              [disabled]=\"imageURL1 === 'not_available' ? true : false\"\r\n            >\r\n              <mat-icon style=\"color: red\">delete</mat-icon>\r\n            </button> -->\r\n            <div fxLayout=\"row\" fxLayoutAlign=\"center center\" fxLayoutGap=\"20px\">\r\n              <button mat-raised-button color=\"red\" class=\"dltbtn\" (click)=\"deleteImg()\" >\r\n                  DELETE\r\n              </button>\r\n              <button mat-raised-button color=\"primary\" class=\"dbtn\" (click)=\"onSubmit()\" [disabled]=\"disableDone\">\r\n                  SUBMIT\r\n              </button>  \r\n             </div>   \r\n          </div>\r\n        </div>\r\n        <!-- </mat-card-content>\r\n        </mat-card> -->\r\n        <!-- <div class=\"text-center\">\r\n          <button\r\n            mat-raised-button\r\n            class=\"Next\"\r\n            (click)=\"onSubmit()\"\r\n            [disabled]=\"disableDone\"\r\n          >\r\n            SUBMIT\r\n          </button>\r\n        </div> -->\r\n      </div>\r\n      <!-- <div fxFlex=\"50\" fxFlexOffset=\"20px\" *ngIf=\"isDone\" class=\"text-center\">\r\n        <div class=\"propic text-center\">\r\n          <img src=\"assets/images/esignlater.png\" alt=\"\" />\r\n        </div>\r\n        <br />\r\n        \r\n        <p *ngIf=\"accountId != null\">\r\n          Keep Card Number for your future Reference: <b>{{ accountId }}</b>\r\n        </p>\r\n        \r\n        <div class=\"text-center\">\r\n          <button mat-raised-button class=\"Next\" (click)=\"close1()\">\r\n            DONE\r\n          </button>\r\n        </div>\r\n      </div> -->\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {\r\n  ChangeDetectorRef,\r\n  Component,\r\n  Inject,\r\n  OnInit,\r\n  ViewChild,\r\n} from \"@angular/core\";\r\nimport {\r\n  MatDialog,\r\n  MatDialogRef,\r\n  MAT_DIALOG_DATA,\r\n} from \"@angular/material/dialog\";\r\nimport { Router } from \"@angular/router\";\r\nimport { SignaturePad } from \"angular2-signaturepad\";\r\nimport { ApiService } from \"app/shared/services/api.service\";\r\nimport { ApplicationEntryStageService } from \"app/shared/services/application-entry-stage.service\";\r\nimport { LocalStoreService } from \"app/shared/services/local-store.service\";\r\nimport { AccountService } from \"app/views/home/account.service\";\r\n\r\n@Component({\r\n  selector: \"app-esignature-pop\",\r\n  templateUrl: \"./esignature-pop.component.html\",\r\n  styleUrls: [\"./esignature-pop.component.scss\"],\r\n})\r\nexport class EsignaturePopComponent implements OnInit {\r\n  signatureImg: string;\r\n  @ViewChild(SignaturePad) signaturePad: SignaturePad;\r\n  isDone: boolean = false;\r\n  signaturePadOptions: Object = {\r\n    minWidth: 2,\r\n    canvasWidth: 700,\r\n    canvasHeight: 300,\r\n  };\r\n  accountdetailsForStatusUpdate: Object;\r\n  count: any = 0;\r\n  show: boolean;\r\n  res: Object = { enable: false, image: null };\r\n  disableDone: boolean = true;\r\n  signupload: boolean = true;\r\n  selectedFile: any;\r\n  imageurl: any;\r\n  cardId: any;\r\n  esignUrl: string;\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    public dialogRef: MatDialogRef<EsignaturePopComponent>,\r\n    private ls: LocalStoreService,\r\n    private router: Router,\r\n    private accountService: AccountService,\r\n    private apiService: ApiService,\r\n    private appEntryService: ApplicationEntryStageService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.cardId = this.ls.getItem(\"cardId\");\r\n    console.log(\"popup response data:\", this.data);\r\n    this.isDone = this.data.isSignLater;\r\n    this.cdr.markForCheck();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // this.signaturePad is now available\r\n    this.signaturePad.set(\"minWidth\", 2);\r\n    this.signaturePad.clear();\r\n  }\r\n\r\n  drawComplete() {\r\n    console.log(this.signaturePad.toDataURL());\r\n    this.esignUrl = this.signaturePad.toDataURL();\r\n    if (this.esignUrl.toString().includes(\"data:image/png;base64\")) {\r\n      this.disableDone = false;\r\n    } else {\r\n      this.disableDone = true;\r\n    }\r\n  }\r\n\r\n  drawStart() {\r\n    console.log(\"begin drawing\");\r\n  }\r\n\r\n  clearSignature() {\r\n    this.signaturePad.clear();\r\n  }\r\n\r\n  savePad() {\r\n    const base64Data = this.signaturePad.toDataURL();\r\n    this.signatureImg = base64Data;\r\n  }\r\n\r\n  close1() {\r\n    if (this.data.screen === \"NewCustomerOnboarding\") {\r\n      this.dialogRef.close(this.res);\r\n    } else {\r\n      this.dialogRef.close({ image: this.ls.getItem('cardSignedImage')?this.ls.getItem('cardSignedImage'):'' });\r\n      this.ls.setItem(\"enable\", false);\r\n    }\r\n  }\r\n\r\n  close() {\r\n    if (this.data.screen === \"NewCustomerOnboarding\") {\r\n      this.dialogRef.close(this.res);\r\n    } else {\r\n      this.dialogRef.close({ image: this.esignUrl });\r\n      // this.ls.setItem('enable', true);\r\n    }\r\n  }\r\n\r\n  // onFileChanged(event) {\r\n  //   this.selectedFile = event.target.files[0];\r\n  //   console.log(this.selectedFile);\r\n\r\n  //   this.disableDone = false;\r\n  // }\r\n\r\n  onSubmit() {\r\n    console.log(this.signaturePad.toDataURL());\r\n    let data: any = {};\r\n    let uploadModel: any = {};\r\n    console.log(\"this.data::\", this.data);\r\n    if (this.data.screen !== \"NewCustomerOnboarding\") {\r\n      uploadModel.cardId = this.data.accountId;\r\n      this.getByAccountId(uploadModel.cardId);\r\n    } else {\r\n      let customerId = this.data.customerId;\r\n      this.apiService.getAccountIdByCusId(customerId).subscribe((res) => {\r\n        console.log(\"Account Id response -- \", res);\r\n        data.accountId = res;\r\n      });\r\n      this.res = { enable: true, image: this.signaturePad.toDataURL() };\r\n    }\r\n\r\n    uploadModel.customerId = this.data.customerId;\r\n    uploadModel.documentName = this.data.customerId + \"Signature\";\r\n    uploadModel.documentType = \"10\";\r\n    uploadModel.fileType = \"image/jpeg\";\r\n    uploadModel.fileName = \"signature\";\r\n\r\n    const dataURL = this.signaturePad.toDataURL(\"image/png\");\r\n    this.ls.setItem('cardSignedImage',dataURL);\r\n    const datam = atob(dataURL.substring(\"data:image/png;base64,\".length)),\r\n      asArray = new Uint8Array(datam.length);\r\n    for (var i = 0, len = datam.length; i < len; ++i) {\r\n      asArray[i] = datam.charCodeAt(i);\r\n    }\r\n    const blob = new Blob([asArray], { type: \"image/png\" });\r\n    data[\"uploadModel\"] = uploadModel;\r\n    data.noOfSignatures = \"1\";\r\n\r\n    const uploadData = new FormData();\r\n    uploadData.append(\"data\", JSON.stringify(data));\r\n    console.log(\"data\", data);\r\n    uploadData.append(\"file\", blob);\r\n    uploadData.append(\"accType\", \"cardOrigin\");\r\n\r\n    this.apiService.uploadSignature(uploadData).subscribe(\r\n      (op) => {\r\n        console.log(op);\r\n        if (op) {\r\n          this.close();\r\n          this.show = true;\r\n          this.ls.setItem(\"enable\", true);\r\n          this.res = op;\r\n        }\r\n      },\r\n      (err) => {\r\n        this.close();\r\n        this.res = false;\r\n      }\r\n    );\r\n    if (this.data.screen !== \"NewCustomerOnboarding\") {\r\n      this.isDone = false;\r\n    } else {\r\n      this.close();\r\n    }\r\n    console.log(this.isDone);\r\n    this.ls.setItem(\"eSignStage\", true);\r\n  //   this.router.navigateByUrl('/', {skipLocationChange: true}).then(() => {\r\n  //     this.router.navigate([\"cardaccount/digitalsigning/options\"]);\r\n  // });\r\n  }\r\n\r\n  getByAccountId(cardId: any) {\r\n    this.apiService.getCardInitiationDetails(cardId).subscribe((resp) => {\r\n      console.log(\"updateStatus :: \", resp);\r\n      this.accountdetailsForStatusUpdate = resp;\r\n      this.updateCardAccountStatus();\r\n    });\r\n  }\r\n\r\n  updateCardAccountStatus() {\r\n    let statusModel = {\r\n      cardId: this.cardId,\r\n      status: \"BACKLOG\",\r\n    };\r\n    this.apiService.updateCardStatus(statusModel).subscribe((updateResp) => {\r\n      console.log(\"updateResp:: \", updateResp);\r\n    });\r\n  }\r\n}\r\n","<div fxLayout=\"row wrap\">\r\n  <div fxFlex=\"100\" fxLayoutAlign=\"end center\">\r\n    <button mat-icon-button (click)=\"close1()\" *ngIf=\"!isDone\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n    <button mat-icon-button (click)=\"close()\" *ngIf=\"isDone\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div fxFlex=\"100\" *ngIf=\"!isDone\">\r\n    <div class=\"propic text-center\">\r\n      <img src=\"assets/images/esign.png\" alt=\"\" />\r\n    </div>\r\n  </div>\r\n\r\n  <div fxFlex=\"100\">\r\n    <div fxLayout=\"row\" fxLayoutAlign=\"center center\">\r\n      <div fxFlex=\"50\" fxFlexOffset=\"20px\" *ngIf=\"!isDone\">\r\n        <!-- <div class=\"text-center\">\r\n            <button mat-raised-button color=\"primary\" (click)=\"fileInput.click()\">Upload\r\n              <input style=\"display: none\" type=\"file\" (change)=\"onFileChanged($event)\" #fileInput>\r\n            </button>\r\n          </div>\r\n\r\n            <div class=\"text-center\">\r\n              <button mat-button class=\"full-width\">OR</button>\r\n            </div> -->\r\n\r\n        <h5 class=\"text-center mt-16\">Please e-sign the application!</h5>\r\n        <mat-card  class=\"mt-16 signbox\">\r\n          <mat-card-content>\r\n            <signature-pad\r\n              [options]=\"signaturePadOptions\"\r\n              (onBeginEvent)=\"drawStart()\"\r\n              (onEndEvent)=\"drawComplete()\"\r\n            ></signature-pad>\r\n          </mat-card-content>\r\n        </mat-card>\r\n        <div class=\"text-center\">\r\n          <button\r\n            mat-raised-button\r\n           class=\"Next\"\r\n            (click)=\"onSubmit()\"\r\n            [disabled]=\"disableDone\"\r\n          >\r\n            SUBMIT\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <!-- <div fxFlex=\"50\" fxFlexOffset=\"20px\" *ngIf=\"isDone\" class=\"text-center\">\r\n        <div class=\"propic text-center\">\r\n          <img src=\"assets/images/esignlater.png\" alt=\"\" />\r\n        </div>\r\n        <br />\r\n        \r\n        <p *ngIf=\"accountId != null\">\r\n          Keep Card Number for your future Reference: <b>{{ accountId }}</b>\r\n        </p>\r\n        \r\n        <div class=\"text-center\">\r\n\r\n          <button mat-raised-button class=\"Next\" (click)=\"close()\">\r\n\r\n          \r\n\r\n            SUBMIT\r\n          </button>\r\n        </div> \r\n      </div>-->\r\n    </div>\r\n  </div>\r\n</div>\r\n"]}