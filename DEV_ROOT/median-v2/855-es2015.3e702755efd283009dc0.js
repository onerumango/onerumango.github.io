"use strict";(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[855],{17988:function(e,t,i){i.d(t,{G:function(){return r},T:function(){return a}});var n=i(37716),r=function(){function e(e,t,i){this.el=e,this.vcr=t,this.renderer=i,this.dtOptions={}}return e.prototype.ngOnInit=function(){var e=this;this.dtTrigger?this.dtTrigger.subscribe(function(t){e.displayTable(t)}):this.displayTable(null)},e.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},e.prototype.displayTable=function(e){var t=this;e&&(this.dtOptions=e),this.dtInstance=new Promise(function(e,i){Promise.resolve(t.dtOptions).then(function(n){0===Object.keys(n).length&&0===$("tbody tr",t.el.nativeElement).length?i("Both the table and dtOptions cannot be empty"):setTimeout(function(){var i={rowCallback:function(e,i,r){if(n.columns){var o=n.columns;t.applyNgPipeTransform(e,o),t.applyNgRefTemplate(e,o,i)}n.rowCallback&&n.rowCallback(e,i,r)}};i=Object.assign({},n,i),t.dt=$(t.el.nativeElement).DataTable(i),e(t.dt)})})})},e.prototype.applyNgPipeTransform=function(e,t){t.filter(function(e){return e.ngPipeInstance&&!e.ngTemplateRef}).forEach(function(i){var n=i.ngPipeInstance,r=t.findIndex(function(e){return e.data===i.data}),o=e.childNodes.item(r),a=$(o).text(),s=n.transform(a);$(o).text(s)})},e.prototype.applyNgRefTemplate=function(e,t,i){var n=this;t.filter(function(e){return e.ngTemplateRef&&!e.ngPipeInstance}).forEach(function(r){var o=r.ngTemplateRef,a=o.ref,s=o.context,c=t.findIndex(function(e){return e.data===r.data}),d=e.childNodes.item(c);$(d).html("");var l=Object.assign({},s,null==s?void 0:s.userData,{adtData:i}),u=n.vcr.createEmbeddedView(a,l);n.renderer.appendChild(d,u.rootNodes[0])})},e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(n.s_b),n.Y36(n.Qsj))},e.\u0275dir=n.lG2({type:e,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),e}(),o=i(38583),a=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[o.ez]]}),e}()},33855:function(e,t,i){i.r(t),i.d(t,{ChargeMaintaineneceModule:function(){return L}});var n=i(38583),r=i(39895),o=i(50215),a=i(79765),s=i(35383),c=i(88259),d=i.n(c),l=i(37716),u=i(77382),g=i(3118),h=i(26215),p=i(91841);const Z=g.$.acctCloserUrl;let f=(()=>{class e{constructor(e){this.http=e,this.Index=new h.X({index:""})}setIndex(e){this.Index.next(e)}getIndex(){return this.Index.asObservable()}onchargeMaintenanceSubmit(e,t){return this.http.post(`${Z}/charges/save/${e}`,t)}onAuthofChargeMaintenance(e,t){return this.http.get(`${Z}/charges/verify/${e}/${t}`)}gettingChargeMaintenance(){return this.http.get(`${Z}/charges/getSummary`)}submittingTheEditedRecord(e,t){return console.log("in sevice",e),this.http.put(`${Z}/charges/modify/${t}`,e)}sendingIdforchargeMaintenanceEdit(e){return this.http.get(`${Z}/charges/getById/${e}`)}onClosingTheRecord(e,t){return this.http.get(`${Z}/charges/close/${e}/${t}`)}onReopningTheRecord(e,t){return this.http.get(`${Z}/charges/reopen/${e}/${t}`)}onDeletTheRecord(e,t){return this.http.delete(`${Z}/charges/delete/${e}/${t}`)}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(p.eN))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=i(17988);function T(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"a",12),l.NdJ("click",function(){return l.CHM(e),l.oxw().new()}),l._uU(1),l.qZA()}if(2&e){const e=l.oxw();l.xp6(1),l.Oqu(e.roleCodes.new.labelDescription)}}function v(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"button",19),l.NdJ("click",function(){l.CHM(e);const t=l.oxw().$implicit;return l.oxw().close(t)}),l._UZ(1,"img",20),l.qZA()}}function A(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"button",21),l.NdJ("click",function(){l.CHM(e);const t=l.oxw().$implicit;return l.oxw().open(t)}),l._UZ(1,"img",22),l.qZA()}}function x(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"button",23),l.NdJ("click",function(){l.CHM(e);const t=l.oxw().$implicit;return l.oxw().delete(t)}),l._UZ(1,"img",24),l.qZA()}}function b(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td"),l.TgZ(2,"a",13),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().edit(t)}),l._uU(3),l.qZA(),l.qZA(),l.TgZ(4,"td"),l._uU(5),l.qZA(),l.TgZ(6,"td"),l._uU(7),l.qZA(),l.TgZ(8,"td"),l._uU(9),l.qZA(),l.TgZ(10,"td"),l._uU(11),l.qZA(),l.TgZ(12,"td"),l._uU(13),l.ALo(14,"date"),l.qZA(),l.TgZ(15,"td"),l.TgZ(16,"button",14),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().auth(t)}),l._UZ(17,"img",15),l.qZA(),l.YNc(18,v,2,0,"button",16),l.YNc(19,A,2,0,"button",17),l.YNc(20,x,2,0,"button",18),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit,i=l.oxw();l.xp6(3),l.Oqu(e.currency),l.xp6(2),l.Oqu(e.chargeAmount),l.xp6(2),l.Oqu(e.taxAmount),l.xp6(2),l.Oqu(e.verifiedStatus),l.xp6(2),l.Oqu(e.recordStatus),l.xp6(2),l.Oqu(l.xi3(14,10,e.inputTime,"medium")),l.xp6(3),l.Q6J("disabled",!("U"==e.verifiedStatus||"UNAUTHORIZED"==e.verifiedStatus||"Unauthorized"==e.verifiedStatus)),l.xp6(2),l.Q6J("ngIf",!("O"!=e.recordStatus&&"Open"!=e.recordStatus||"Y"!=e.verifiedOnce&&"YES"!=e.verifiedOnce)),l.xp6(1),l.Q6J("ngIf",!("C"!=e.recordStatus&&"CLOSED"!=e.recordStatus&&"Close"!=e.recordStatus||"Y"!=e.verifiedOnce&&"YES"!=e.verifiedOnce)),l.xp6(1),l.Q6J("ngIf","NO"==e.verifiedOnce||"N"==e.verifiedOnce&&i.roleCodes.delete)}}function q(e,t){1&e&&(l.ynx(0),l.TgZ(1,"div",25),l.TgZ(2,"span",26),l._uU(3,"Please wait... "),l._UZ(4,"span",27),l.qZA(),l.qZA(),l.BQk())}const C=function(){return["/dashboard"]};let y=(()=>{class e{constructor(e,t,i,n,r){this.roleService=e,this.apiService=t,this.router=i,this.cdr=n,this.chargeMaintenanceService=r,this.isLoading=!1,this.respArray=[],this.roleCodes=new s.yv,this.dtOptions={},this.dtTrigger=new a.xQ,this.statusArr=["Authorized","Unauthorized","Open","Close"]}ngOnInit(){setTimeout(()=>{this.newRolePermissions()},2e3),this.roleService.screenLabelList.subscribe(e=>this.roleCodes=e),setTimeout(()=>{console.log(this.roleCodes)},3e3),this.currentUser=localStorage.getItem("userFromLogin"),this.dtOptions={pagingType:"full_numbers",pageLength:5,columnDefs:[{type:"date",targets:[5]}],order:[[5,"desc"]],processing:!0,lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]],retrieve:!0},this.getChargeMaintainenceSummary()}newRolePermissions(){this.roleService.fetchScreenPermissions("Charge Maintenance")}getChargeMaintainenceSummary(){this.isLoading=!0,this.apiService.gettingChargeMaintenance().subscribe(e=>{for(let t of e)t.verifiedStatus=this.statusArr.find(e=>e.startsWith(t.verifiedStatus)),t.recordStatus=this.statusArr.find(e=>e.startsWith(t.recordStatus));console.log(e),this.respArray=e,this.isLoading=!1,this.dtTrigger.next()})}new(){localStorage.removeItem("idValue"),this.apiService.setIndex({index:""}),this.router.navigateByUrl("/charge-maintainence/create")}edit(e){this.apiService.setIndex({index:e.id}),localStorage.setItem("idValue",e.id),this.router.navigateByUrl("/charge-maintainence/create")}ngOnDestroy(){this.dtTrigger.unsubscribe()}close(e){console.log(e),d().fire({text:"You are trying to Close record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(t=>{console.log("this is reopen ",t),!0===t.isConfirmed&&(console.log("this is close"),this.chargeMaintenanceService.onClosingTheRecord(this.currentUser,e.id).subscribe(e=>{console.log(e),e&&(d().fire({text:"Record is Closed"}),this.refreshPage(),this.ngOnInit())}))})}open(e){d().fire({text:"You are trying to Reopen record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(t=>{console.log("this is reopen ",t),!0===t.isConfirmed&&this.chargeMaintenanceService.onReopningTheRecord(this.currentUser,e.id).subscribe(e=>{console.log(e),"O"==e.recordStatus?(d().fire({text:"Record is Reopened"}),this.refreshPage(),this.ngOnInit()):d().fire({text:"Record cannot be opened "})})})}delete(e){d().fire({text:"You are trying to Delete record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES.",icon:"info",iconColor:"#d33"}).then(t=>{console.log("this is reopen ",t),!0===t.isConfirmed&&this.chargeMaintenanceService.onDeletTheRecord(this.currentUser,e.id).subscribe(e=>{console.log(e),null==e.chargeAmount?(d().fire({text:"Record is Deleted"}),this.refreshPage(),this.ngOnInit(),this.router.navigate(["/charge-maintainence"])):d().fire({text:"Record cannot be delete "})})}),console.log("this is delete")}auth(e){d().fire({text:"You are trying to Authorize record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(t=>{if(console.log("this is reopen ",t),!0===t.isConfirmed){if(this.currentUser===e.inputBy)return void d().fire({text:"Maker Cannot Authorize Record!",icon:"error"});console.log("this is authorzation"),this.chargeMaintenanceService.onAuthofChargeMaintenance(this.currentUser,e.id).subscribe(e=>{console.log(e),null!=e.verifiedBy?(d().fire({text:"Record is Authorized"}),this.refreshPage(),this.ngOnInit()):d().fire({text:"Maker cannot authorize the record"})})}})}check(e){console.log(e)}refreshPage(){window.location.reload()}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(u.N),l.Y36(f),l.Y36(r.F0),l.Y36(l.sBO),l.Y36(f))},e.\u0275cmp=l.Xpm({type:e,selectors:[["npr-charge-maintainence-summary"]],decls:32,vars:7,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"dbCardStyle"],[1,"row","g-3","pb-3","justify-content-end"],[1,"col-auto"],["class","btn smBtn minWdSmBtn btnPrimary",3,"click",4,"ngIf"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],[1,"table-responsive"],["datatable","",1,"dataTable","table","tableStyle","nowrap","vAlignMdl",2,"width","100%",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[1,"primaryColor",2,"cursor","pointer",3,"click"],["title","Authorize",1,"btn",2,"color","red",3,"disabled","click"],["src","assets/images/authorize.svg","alt","Authorize"],["class","btn","style","color: red","title","Close",3,"click",4,"ngIf"],["class","btn","style","color: red","title","Reopen",3,"click",4,"ngIf"],["class","btn","style","color: red","title","Delete.",3,"click",4,"ngIf"],["title","Close",1,"btn",2,"color","red",3,"click"],["src","assets/images/CROSS1.svg","alt","..."],["title","Reopen",1,"btn",2,"color","red",3,"click"],["src","assets/images/open.svg","alt","..."],["title","Delete.",1,"btn",2,"color","red",3,"click"],["src","assets/images/delete.svg","alt","..."],[1,"loading-page-center"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"h2",2),l._uU(3,"Charge Maintenance Summary"),l.qZA(),l.qZA(),l.TgZ(4,"div",3),l.TgZ(5,"div",4),l.TgZ(6,"div",5),l.YNc(7,T,2,1,"a",6),l.qZA(),l.TgZ(8,"div",5),l.TgZ(9,"a",7),l._uU(10,"Exit"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",8),l.TgZ(12,"table",9),l.TgZ(13,"thead"),l.TgZ(14,"tr"),l.TgZ(15,"th"),l._uU(16,"Currency"),l.qZA(),l.TgZ(17,"th"),l._uU(18,"Charge Amount"),l.qZA(),l.TgZ(19,"th"),l._uU(20,"Tax Amount"),l.qZA(),l.TgZ(21,"th"),l._uU(22,"Auth Status"),l.qZA(),l.TgZ(23,"th"),l._uU(24,"Record Status"),l.qZA(),l.TgZ(25,"th"),l._uU(26,"Date"),l.qZA(),l.TgZ(27,"th"),l._uU(28,"Actions"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(29,"tbody"),l.YNc(30,b,21,13,"tr",10),l.qZA(),l.qZA(),l.qZA(),l.YNc(31,q,5,0,"ng-container",11),l.qZA(),l.qZA()),2&e&&(l.xp6(7),l.Q6J("ngIf",t.roleCodes.new),l.xp6(2),l.Q6J("routerLink",l.DdM(6,C)),l.xp6(3),l.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),l.xp6(18),l.Q6J("ngForOf",t.respArray),l.xp6(1),l.Q6J("ngIf",t.isLoading))},directives:[n.O5,r.yS,m.G,n.sg],pipes:[n.uU],styles:[".iconBtn[_ngcontent-%COMP%]{background:none;border:none;outline:none;position:relative}.btnTooltip[_ngcontent-%COMP%]{position:absolute;background-color:#fff;display:none;top:24px;left:12px;border:1px solid black;padding:4px}.iconBtn[_ngcontent-%COMP%]:hover   .btnTooltip[_ngcontent-%COMP%]{display:block}"]}),e})();var S=i(3679),U=i(58117),O=i(31443);function B(e,t){1&e&&(l.TgZ(0,"div",21),l._uU(1," Max value allowed is 100 "),l.qZA())}function D(e,t){if(1&e&&(l.TgZ(0,"div",21),l._uU(1),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.hij(" ",e.chargeForm.controls.taxAmount.errors.lessThan.message," ")}}function k(e,t){1&e&&(l.TgZ(0,"div",21),l._uU(1," Max value allowed is 100 "),l.qZA())}function w(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",18),l.TgZ(1,"button",22),l.NdJ("click",function(){return l.CHM(e),l.oxw().onSubmittingofChargeMaintenance("edit")}),l._uU(2,"Save"),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(1),l.Q6J("disabled",!e.chargeForm.dirty)}}function I(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",18),l.TgZ(1,"button",23),l.NdJ("click",function(){return l.CHM(e),l.oxw().onSubmitEditChargeMaintenance()}),l._uU(2),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.roleCodes.edit.labelDescription)}}function _(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",18),l.TgZ(1,"button",24),l.NdJ("click",function(){return l.CHM(e),l.oxw().onAuthorizingTheRecord()}),l._uU(2),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.roleCodes.auth.labelDescription)}}function N(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",18),l.TgZ(1,"button",25),l.NdJ("click",function(){return l.CHM(e),l.oxw().onClosingTheRecord()}),l._uU(2),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.roleCodes.close.labelDescription)}}function M(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",18),l.TgZ(1,"button",26),l.NdJ("click",function(){return l.CHM(e),l.oxw().onReopningTheRecord()}),l._uU(2),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.roleCodes.reopen.labelDescription)}}function F(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",18),l.TgZ(1,"button",26),l.NdJ("click",function(){return l.CHM(e),l.oxw().onDeletingTheRecord()}),l._uU(2),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.roleCodes.delete.labelDescription)}}function R(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",18),l.TgZ(1,"button",27),l.NdJ("click",function(){return l.CHM(e),l.oxw().onSubmittingofChargeMaintenance("submit")}),l._uU(2,"Save"),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(1),l.Q6J("disabled",!e.chargeForm.valid||e.submitDisab)}}function Y(e,t){if(1&e&&(l.TgZ(0,"div",4),l.TgZ(1,"div",28),l.TgZ(2,"div",29),l.TgZ(3,"div",30),l.TgZ(4,"div",31),l.TgZ(5,"div",18),l.TgZ(6,"div",32),l._UZ(7,"i",33),l.qZA(),l.qZA(),l.TgZ(8,"div",34),l.TgZ(9,"div",35),l.TgZ(10,"h2"),l._uU(11,"Maker"),l.qZA(),l.TgZ(12,"p"),l._uU(13),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(14,"div",29),l.TgZ(15,"div",30),l.TgZ(16,"div",31),l.TgZ(17,"div",18),l.TgZ(18,"div",36),l._UZ(19,"img",37),l.qZA(),l.qZA(),l.TgZ(20,"div",34),l.TgZ(21,"div",35),l.TgZ(22,"h2"),l._uU(23,"Maker Time Stamp"),l.qZA(),l.TgZ(24,"p"),l._uU(25),l.ALo(26,"date"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(27,"div",29),l.TgZ(28,"div",30),l.TgZ(29,"div",31),l.TgZ(30,"div",18),l.TgZ(31,"div",38),l._UZ(32,"i",39),l.qZA(),l.qZA(),l.TgZ(33,"div",34),l.TgZ(34,"div",35),l.TgZ(35,"h2"),l._uU(36,"Record Status"),l.qZA(),l.TgZ(37,"p"),l._uU(38),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(39,"div",29),l.TgZ(40,"div",30),l.TgZ(41,"div",31),l.TgZ(42,"div",18),l.TgZ(43,"div",40),l._UZ(44,"i",41),l.qZA(),l.qZA(),l.TgZ(45,"div",34),l.TgZ(46,"div",35),l.TgZ(47,"h2"),l._uU(48,"Checker"),l.qZA(),l.TgZ(49,"p"),l._uU(50),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(51,"div",29),l.TgZ(52,"div",30),l.TgZ(53,"div",31),l.TgZ(54,"div",18),l.TgZ(55,"div",42),l._UZ(56,"img",43),l.qZA(),l.qZA(),l.TgZ(57,"div",34),l.TgZ(58,"div",35),l.TgZ(59,"h2"),l._uU(60,"Checker Time Stamp"),l.qZA(),l.TgZ(61,"p"),l._uU(62),l.ALo(63,"date"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(64,"div",29),l.TgZ(65,"div",30),l.TgZ(66,"div",31),l.TgZ(67,"div",18),l.TgZ(68,"div",44),l._UZ(69,"i",45),l.qZA(),l.qZA(),l.TgZ(70,"div",34),l.TgZ(71,"div",35),l.TgZ(72,"h2"),l._uU(73,"First Time Authorization"),l.qZA(),l.TgZ(74,"p"),l._uU(75),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(76,"div",29),l.TgZ(77,"div",30),l.TgZ(78,"div",31),l.TgZ(79,"div",18),l.TgZ(80,"div",46),l._UZ(81,"img",47),l.qZA(),l.qZA(),l.TgZ(82,"div",34),l.TgZ(83,"div",35),l.TgZ(84,"h2"),l._uU(85,"Authorization Status"),l.qZA(),l.TgZ(86,"p"),l._uU(87),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(88,"div",29),l.TgZ(89,"div",30),l.TgZ(90,"div",31),l.TgZ(91,"div",18),l.TgZ(92,"div",38),l._UZ(93,"img",48),l.qZA(),l.qZA(),l.TgZ(94,"div",34),l.TgZ(95,"div",35),l.TgZ(96,"h2"),l._uU(97,"Modification Number"),l.qZA(),l.TgZ(98,"p"),l._uU(99),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(13),l.Oqu(e.respData.inputBy),l.xp6(12),l.Oqu(l.xi3(26,8,e.respData.inputTime,"MM/dd/yyyy, h:mm a")),l.xp6(13),l.Oqu(e.respData.recordStatus),l.xp6(12),l.Oqu(e.respData.verifiedBy),l.xp6(12),l.Oqu(l.xi3(63,11,e.respData.verifiedTime,"MM/dd/yyyy, h:mm a")),l.xp6(13),l.Oqu(e.respData.verifiedOnce),l.xp6(12),l.Oqu(e.respData.verifiedStatus),l.xp6(12),l.Oqu(e.respData.modNo)}}const E=function(){return["/charge-maintainence"]},J=[{path:"",component:y},{path:"create",component:(()=>{class e{constructor(e,t,i,n,r,o){this.toastService=e,this.formBuilder=t,this.chargeMaintenanceService=i,this.roleService=n,this.router=r,this.cdr=o,this.editFlag=!0,this.roleCodes=new s.yv,this.formTouched=!0,this.showDialog=!1,this.subject=new a.xQ}ngOnInit(){this.idValue=localStorage.getItem("idValue"),setTimeout(()=>{this.newRolePermissions()},2e3),this.roleService.screenLabelList.subscribe(e=>this.roleCodes=e),setTimeout(()=>{console.log(this.roleCodes)},3e3),console.log("role codes",this.roleCodes),this.currentUser=localStorage.getItem("userFromLogin"),this.buildForm(""),null!=this.idValue&&this.chargeMaintenanceService.setIndex({index:this.idValue}),this.chargeMaintenanceService.getIndex().subscribe(e=>{e.index&&(this.index=e.index,this.onEditCharge(e.index))}),U.jc.set({validationMessage:{lessThan:"Tax Amount should be less than Charge amount."}})}buildForm(e){this.chargeForm=this.formBuilder.group({currency:[e?e.currency:"",S.kI.required],chargeAmount:[e?e.chargeAmount:"",S.kI.required],chargePercentage:[e?e.chargePercentage:"",[S.kI.required,S.kI.max(100),S.kI.min(0)]],taxAmount:[e?e.taxAmount:"",[S.kI.required,U.CM.lessThan({fieldName:"chargeAmount"})]],taxPercentage:[e?e.taxPercentage:"",[S.kI.required,S.kI.max(100),S.kI.min(0)]],inputBy:[e?e.inputBy:""],inputTime:[e?e.inputTime:""],recordStatus:[e?e.recordStatus:""],verifiedOnce:[e?e.verifiedOnce:""],verifiedBy:[e?e.verifiedBy:""],verifiedTime:[e?e.verifiedTime:""],verifiedStatus:[e?e.verifiedStatus:""],modNo:[e?e.modNo:""],id:[e?e.id:""]})}canExit(){let e=!1;return this.chargeForm.touched&&1==this.formTouched?d().fire({text:"There are unsaved changes in the screen. Would you like to navigate to other screen?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(t=>!0===t.isConfirmed?(e=!0,this.cdr.markForCheck(),e):(e=!1,this.cdr.markForCheck(),e)):(e=!0,new Promise((t,i)=>{!0===e&&(e=!0,this.cdr.markForCheck(),t(!0))}))}onSubmittingofChargeMaintenance(e){this.chargeForm.value.chargeAmount<this.chargeForm.value.taxAmount?d().fire({text:"Tax Amount should not be greater than Charge Amount!",icon:"warning"}):("submit"===e&&this.chargeMaintenanceService.onchargeMaintenanceSubmit(this.currentUser,this.chargeForm.value).subscribe(e=>{console.log(e),null==e.currency?(d().fire({text:"Record Already Exist",icon:"warning"}),this.submitDisab=!0):(this.respData=e,this.auditLog(),this.editFlag=!1,this.index=this.respData.id,this.formTouched=!this.chargeForm.touched,d().fire({text:"Record is Created ",icon:"success"}))}),"edit"===e&&this.chargeMaintenanceService.submittingTheEditedRecord(this.chargeForm.value,this.currentUser).subscribe(e=>{console.log(e),e?(this.respData=e,this.editFlag=!1,this.index=this.respData.id,this.auditLog(),this.formTouched=!this.chargeForm.touched,d().fire({text:"Record is Updated "})):d().fire({text:"Cannot update the record"})}))}onEditCharge(e){this.editFlag=!1,this.chargeMaintenanceService.sendingIdforchargeMaintenanceEdit(e).subscribe(e=>{console.log(e),this.respData=e,this.buildForm(e),this.auditLog()})}auditLog(){"O"==this.respData.recordStatus&&(this.respData.recordStatus="OPEN"),"C"==this.respData.recordStatus&&(this.respData.recordStatus="CLOSE"),"U"==this.respData.verifiedStatus&&(this.respData.verifiedStatus="UNAUTHORIZED"),"A"==this.respData.verifiedStatus&&(this.respData.verifiedStatus="AUTHORIZED"),"Y"==this.respData.verifiedOnce&&(this.respData.verifiedOnce="YES"),"N"==this.respData.verifiedOnce&&(this.respData.verifiedOnce="NO")}newRolePermissions(){this.roleService.fetchScreenPermissions("Charge Maintenance")}onAuthorizingTheRecord(){d().fire({text:"You are trying to Authorize record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(e=>{if(console.log("this is reopen ",e),!0===e.isConfirmed){if(this.currentUser===this.respData.inputBy)return void d().fire({text:"Maker Cannot Authorize Record!",icon:"error"});console.log("this is authorzation"),this.chargeMaintenanceService.onAuthofChargeMaintenance(this.currentUser,this.chargeForm.value.id).subscribe(e=>{console.log(e),this.respData=e,this.auditLog(),null!=this.respData.verifiedBy?d().fire({text:"Record is Authorized"}):d().fire({text:"Maker cannot authorize the record"})})}})}chargeAmountchecking(e){console.log("event",e.target.value),this.chargeAmount=e.target.value}taxAmountchecking(e){if(console.log("event",e.target.value),e.target.value>this.chargeAmount)return console.log("validation true"),{error:"Tax amount should be less than Charge Amount!"}}onSubmitEditChargeMaintenance(){console.log("This is Edit Charge Maintenance"),this.editFlag=!0,console.log(this.editFlag)}onClosingTheRecord(){d().fire({text:"You are trying to Close record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(e=>{console.log("this is reopen ",e),!0===e.isConfirmed&&(console.log("this is close"),this.chargeMaintenanceService.onClosingTheRecord(this.currentUser,this.chargeForm.value.id).subscribe(e=>{console.log(e),this.respData=e,this.auditLog(),this.respData&&d().fire({text:"Record is Closed"})}))})}onReopningTheRecord(){d().fire({text:"You are trying to Reopen record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(e=>{console.log("this is reopen ",e),!0===e.isConfirmed&&this.chargeMaintenanceService.onReopningTheRecord(this.currentUser,this.chargeForm.value.id).subscribe(e=>{console.log(e),this.respData=e,this.respData=e,"O"==this.respData.recordStatus?(this.auditLog(),d().fire({text:"Record is Reopened"})):d().fire({text:"Record cannot be opened "})})})}onDeletingTheRecord(){d().fire({text:"You are trying to Delete record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES.",icon:"info",iconColor:"#d33"}).then(e=>{console.log("this is reopen ",e),!0===e.isConfirmed&&this.chargeMaintenanceService.onDeletTheRecord(this.currentUser,this.chargeForm.value.id).subscribe(e=>{console.log(e),this.respData=e,this.respData=e,null==this.respData.chargeAmount?(this.auditLog(),d().fire({text:"Record is Deleted"}),this.router.navigate(["/charge-maintainence"])):d().fire({text:"Record cannot be delete "})})}),console.log("this is delete")}charOnly(e){return isNaN(Number(e.key))&&" "!==e.key}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(O.k),l.Y36(S.qu),l.Y36(f),l.Y36(u.N),l.Y36(r.F0),l.Y36(l.sBO))},e.\u0275cmp=l.Xpm({type:e,selectors:[["npr-charge-maintainenece"]],decls:58,vars:19,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],["action","",1,"formStyle",3,"formGroup"],[1,"dbCardStyle"],[1,"row","gy-4"],[1,"col-lg-4"],["for","",1,"formLbl"],[1,"colorRed"],["id","fname","oninput","this.value = this.value.toUpperCase()","formControlName","currency","maxlength","3","type","text","placeholder","Currency","value","",1,"form-control",3,"readonly","keypress"],["id","lname","type","number","formControlName","chargeAmount","placeholder","Charge Amount","value","",1,"form-control",3,"readonly","keyup"],["id","accNumber","type","number","formControlName","chargePercentage","placeholder","Charge Percentage","value","",1,"form-control",3,"readonly"],["class","invalid-feedback",4,"ngIf"],["id","cName","type","number","formControlName","taxAmount","placeholder","Tax Amount","value","",1,"form-control",3,"readonly","keyup"],["id","nationalID","formControlName","taxPercentage","type","number","placeholder","Tax Percentage","value","",1,"form-control",3,"readonly"],[1,"col-lg-12"],[1,"row","g-3","pb-3","justify-content-end","pt-3"],["class","col-auto",4,"ngIf"],[1,"col-auto"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],["class","dbCardStyle",4,"ngIf"],[1,"invalid-feedback"],["color","primary",1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"disabled","click"],["color","primary",1,"btn","smBtn","minWdSmBtn","btnUpdate",3,"click"],["color","primary",1,"btn","smBtn","minWdSmBtn","btnAuth",3,"click"],["color","primary",1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],["color","warn",1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"disabled","click"],[1,"row"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"csCardStyle"],[1,"row","g-2","align-items-center"],[1,"csCardStyleIcon","csCardStyleIconBg1"],[1,"fa","fa-edit","faClass"],[1,"col"],[1,"csCardStyleText"],[1,"csCardStyleIcon","csCardStyleIconBg2"],["src","assets/images/time-stamp-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg3"],["aria-hidden","true",1,"fa","fa-files-o","faRecordStatus"],[1,"csCardStyleIcon","csCardStyleIconBg4"],[1,"fa","fa-check-square-o","faClassChecker"],[1,"csCardStyleIcon","csCardStyleIconBg5"],["src","assets/images/checker-time-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg6"],[1,"fa","fa-shield","faClassFirstTimeAuth"],[1,"csCardStyleIcon","csCardStyleIconBg7"],["src","assets/images/authorize.svg","alt","...",1,"modImage"],["src","assets/images/modification.svg","alt","...",1,"modImage"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"h2",2),l._uU(3,"Charge Maintenance"),l.qZA(),l.qZA(),l.TgZ(4,"form",3),l.TgZ(5,"div",4),l.TgZ(6,"div",5),l.TgZ(7,"div",6),l.TgZ(8,"label",7),l._uU(9,"Currency"),l.TgZ(10,"span",8),l._uU(11,"*"),l.qZA(),l.qZA(),l.TgZ(12,"input",9),l.NdJ("keypress",function(e){return t.charOnly(e)}),l.qZA(),l.qZA(),l.qZA(),l._UZ(13,"br"),l.TgZ(14,"div",5),l.TgZ(15,"div",6),l.TgZ(16,"label",7),l._uU(17,"Charge Amount"),l.TgZ(18,"span",8),l._uU(19,"*"),l.qZA(),l.qZA(),l.TgZ(20,"input",10),l.NdJ("keyup",function(e){return t.chargeAmountchecking(e)}),l.qZA(),l.qZA(),l.TgZ(21,"div",6),l.TgZ(22,"label",7),l._uU(23,"Charge Percentage"),l.TgZ(24,"span",8),l._uU(25,"*"),l.qZA(),l.qZA(),l._UZ(26,"input",11),l.YNc(27,B,2,0,"div",12),l.qZA(),l.qZA(),l._UZ(28,"br"),l.TgZ(29,"div",5),l.TgZ(30,"div",6),l.TgZ(31,"label",7),l._uU(32,"Tax Amount"),l.TgZ(33,"span",8),l._uU(34,"*"),l.qZA(),l.qZA(),l.TgZ(35,"input",13),l.NdJ("keyup",function(e){return t.taxAmountchecking(e)}),l.qZA(),l.YNc(36,D,2,1,"div",12),l.qZA(),l.TgZ(37,"div",6),l.TgZ(38,"label",7),l._uU(39,"Tax Percentage"),l.TgZ(40,"span",8),l._uU(41,"*"),l.qZA(),l.qZA(),l._UZ(42,"input",14),l.YNc(43,k,2,0,"div",12),l.qZA(),l.qZA(),l._UZ(44,"br"),l.TgZ(45,"div",15),l.TgZ(46,"div",16),l.YNc(47,w,3,1,"div",17),l.YNc(48,I,3,1,"div",17),l.YNc(49,_,3,1,"div",17),l.YNc(50,N,3,1,"div",17),l.YNc(51,M,3,1,"div",17),l.YNc(52,F,3,1,"div",17),l.YNc(53,R,3,1,"div",17),l.TgZ(54,"div",18),l.TgZ(55,"a",19),l._uU(56,"Exit"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(57,Y,100,14,"div",20),l.qZA(),l.qZA()),2&e&&(l.xp6(4),l.Q6J("formGroup",t.chargeForm),l.xp6(8),l.Q6J("readonly",!t.editFlag),l.xp6(8),l.Q6J("readonly",!t.editFlag),l.xp6(6),l.Q6J("readonly",!t.editFlag),l.xp6(1),l.Q6J("ngIf",null==t.chargeForm.controls.chargePercentage.errors?null:t.chargeForm.controls.chargePercentage.errors.max),l.xp6(8),l.Q6J("readonly",!t.editFlag),l.xp6(1),l.Q6J("ngIf",t.chargeForm.controls.taxAmount.errors),l.xp6(6),l.Q6J("readonly",!t.editFlag),l.xp6(1),l.Q6J("ngIf",null==t.chargeForm.controls.taxPercentage.errors?null:t.chargeForm.controls.taxPercentage.errors.max),l.xp6(4),l.Q6J("ngIf",t.respData&&t.editFlag&&t.index),l.xp6(1),l.Q6J("ngIf",t.respData&&!t.editFlag&&"OPEN"==t.respData.recordStatus&&t.roleCodes.edit),l.xp6(1),l.Q6J("ngIf",t.respData&&!t.editFlag&&"UNAUTHORIZED"==t.respData.verifiedStatus&&t.roleCodes.auth),l.xp6(1),l.Q6J("ngIf",t.respData&&"OPEN"==t.respData.recordStatus&&!t.editFlag&&"YES"==t.respData.verifiedOnce&&t.roleCodes.close),l.xp6(1),l.Q6J("ngIf",t.respData&&"CLOSE"==t.respData.recordStatus&&!t.editFlag&&"YES"==t.respData.verifiedOnce&&t.roleCodes.reopen),l.xp6(1),l.Q6J("ngIf",t.respData&&!t.editFlag&&"NO"==t.respData.verifiedOnce&&t.roleCodes.delete),l.xp6(1),l.Q6J("ngIf",t.editFlag&&!t.index),l.xp6(2),l.Q6J("routerLink",l.DdM(18,E)),l.xp6(2),l.Q6J("ngIf",t.respData))},directives:[S._Y,S.JL,S.sg,S.Fj,S.JJ,S.u,S.nD,S.wV,n.O5,r.yS],pipes:[n.uU],styles:[""]}),e})(),canDeactivate:[o.I]}];let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[r.Bz.forChild(J)],r.Bz]}),e})(),L=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[n.ez,P,m.T,S.UX]]}),e})()}}]);