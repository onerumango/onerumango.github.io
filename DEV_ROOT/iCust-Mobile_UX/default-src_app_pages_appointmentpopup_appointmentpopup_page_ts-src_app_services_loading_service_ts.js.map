{"version":3,"file":"default-src_app_pages_appointmentpopup_appointmentpopup_page_ts-src_app_services_loading_service_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAyD;AAEA;AAKjC;AACS;AACyB;AACE;AACE;AACa;IAO9D,oBAAoB,SAApB,oBAAoB;IAwB/B,YACU,MAAc,EACd,SAAyB,EACzB,GAAe,EACf,YAA0B,EAAS,eAAgC,EAAU,SAA0B,EACvG,gBAA6B;QAJ7B,WAAM,GAAN,MAAM,CAAQ;QACd,cAAS,GAAT,SAAS,CAAgB;QACzB,QAAG,GAAH,GAAG,CAAY;QACf,iBAAY,GAAZ,YAAY,CAAc;QAAS,oBAAe,GAAf,eAAe,CAAiB;QAAU,cAAS,GAAT,SAAS,CAAiB;QACvG,qBAAgB,GAAhB,gBAAgB,CAAa;QA3BvC,iBAAY,GAAG,IAAI,mFAAY,EAAE,CAAC;QAK3B,qBAAgB,GAAW,IAAI,CAAC;QAUvC,mBAAc,GAAG,EAAE,CAAC;QACpB,gBAAW,GAAG,EAAE,CAAC;QAYf,IAAI,CAAC,gBAAgB,GAAG,0BAA0B,CAAC;QACnD,yDAAyD;QACzD,iEAAiE;QACjE,IAAI;QAEJ,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;IAC3E,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,WAAW,GAAG,YAAY,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC;QAC5D,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YACnC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;YACvB,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACrC,CAAC,CAAC;QAGF,qBAAqB;QACrB,2BAA2B;QAC3B,WAAW;QAEX,YAAY,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;QACtC,YAAY,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;QAExC,YAAY,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;QACxC,wDAAwD;QAExD,wEAAwE;QACxE,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;QAChF,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACrC,IAAG,IAAI,CAAC,kBAAkB,EAAC;YACzB,IAAI,CAAC,iBAAiB,GAAC,IAAI,CAAC,kBAAkB,CAAC,iBAAiB,CAAC;YACjE,IAAI,CAAC,aAAa,GAAC,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC;YACzD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,kBAAkB,CAAC,iBAAiB,CAAC;YAC7D,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC;YACzD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC;YACzD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,kBAAkB,CAAC,iBAAiB,CAAC;YACxD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC;YACxD,IAAI,CAAC,cAAc,EAAE,CAAC;SACvB;aACG;YACF,IAAI,CAAC,OAAO,EAAE,CAAC;SAChB;QAED,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAC/B,yBAAyB;IAC3B,CAAC;IACD,iBAAiB,CAAC,KAAU;QAC1B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;IAC3B,CAAC;IAED,IAAI;QACF,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;QACzB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;QACtC,YAAY,CAAC,UAAU,CAAC,oBAAoB,CAAC,CAAC;IAChD,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE;YACzD,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,OAAO,CAAC;YACjC,IAAI,OAAO,IAAI,IAAI,EAAE;gBACnB,IAAI,CAAC,YAAY,CAAC,aAAa,GAAG,MAAM,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,IAAI,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC;aAC7H;QACH,CAAC,CAAC;QACF,OAAO,CAAC,GAAG,CAAC,qCAAqC,EAAE,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;QACpF,OAAO,CAAC,GAAG,CAAC,8BAA8B,EAAC,YAAY,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;QAElF,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC;QAC9C,IAAI,CAAC,YAAY,CAAC,eAAe,GAAG,mCAAM,CAAC,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QACnH,IAAI,CAAC,YAAY,CAAC,eAAe,GAAG,YAAY,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;QAC5E,IAAI,CAAC,YAAY,CAAC,QAAQ,GAAG,YAAY,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;QACrE,IAAI,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;QACjD,IAAI,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;QAEjD,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE;YAC/D,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,SAAS,CAAC,CAAC;YACzC,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC;QACtC,CAAC,EACC,GAAG,CAAC,EAAE;YACJ,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;QAE7B,CAAC,CAAC,CAAC;IAEP,CAAC;IAED,mBAAmB,CAAC,KAAW;QAC7B,IAAI,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;QAC9B,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,GAAG,EAAE;YACnC,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC;QACnC,CAAC,EAAE,KAAK,CAAC,CAAC;QAEV,IAAI,KAAK,EAAE;YACT,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;SAC7B;IACH,CAAC;IACO,YAAY,CAAC,KAAK;;YACtB,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACrB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,MAAM,EAAE,mDAAmD;gBAC3D,OAAO,EAAE;oBACP;wBACE,IAAI,EAAE,QAAQ;wBACd,IAAI,EAAE,SAAS;wBACf,OAAO,EAAE,GAAG,EAAE;4BACZ,IAAI,CAAC,cAAc,GAAG,iBAAiB,CAAC;4BACxC,IAAI,CAAC,MAAM,EAAE,CAAC;wBAChB,CAAC;qBACF;oBACD;wBACE,IAAI,EAAE,MAAM;wBACZ,IAAI,EAAE,QAAQ;wBACd,OAAO,EAAE,GAAG,EAAE;4BACZ,IAAI,CAAC,cAAc,GAAG,gBAAgB,CAAC;wBACzC,CAAC;qBACF;iBACF;aACF,CAAC,CAAC;YACH,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YACjC,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;YAEtB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,KAAK,CAAC,YAAY,EAAE,CAAC;YAC5C,IAAI,CAAC,WAAW,GAAG,wBAAwB,IAAI,EAAE,CAAC;QACpD,CAAC;KAAA;IAEK,eAAe;;YACnB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;YACrC,IAAI,CAAC,KAAK,GAAC,IAAI,CAAC,kBAAkB,CAAC;YACnC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC;YAE/D,IAAI,CAAC,MAAM,CAAC,aAAa,CACvB,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EACvD;gBACE,KAAK,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,EAAE;aAC5B,CACF,CAAC;YACH,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAClC,YAAY,CAAC,UAAU,CAAC,oBAAoB,CAAC,CAAC;QAEhD,CAAC;KAAA;IAEC,MAAM;QACN,MAAM,IAAI,GAAG;YACX,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa;YACvC,SAAS,EAAE,QAAQ;SACpB;QACD,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QAChC,IAAI,CAAC,GAAG,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YACjD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAClB,IAAI,CAAC,iBAAiB,GAAC,IAAI,CAAC,iBAAiB,CAAC;YAC9C,IAAI,CAAC,aAAa,GAAC,IAAI,CAAC,aAAa,CAAC;YACtC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,iBAAiB,CAAC;YAC1C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC;YACtC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC;YACtC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC;YACrC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC;QACvC,CAAC,CAAC,CAAC;IAEL,CAAC;IAED,OAAO;QACL,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE;YACtD,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAC1B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QAC1B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,GAAG,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,SAAS,CAAC,CAAC,QAAQ,EAAE,EAAE;YAC3E,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACtB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;YAClC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;YACtC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACpC,IAAI,CAAC,kBAAkB,GAAC,IAAI,CAAC,KAAK,CAAC;YACnC,IAAI,CAAC,iBAAiB,GAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC;YACpD,IAAI,CAAC,aAAa,GAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC;YAC5C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC;YAChD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC;YAC5C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC;YAC5C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC;YAC3C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC;YAC3C,IAAI,CAAC,QAAQ,GAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;YACjC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;YAErC,IAAI,CAAC,cAAc,EAAE,CAAC;YAChB,sEAAsE;YACtE,iEAAiE;QACnE,CAAC,CAAC,CAAC;IACL,CAAC;IAGD,WAAW;QACT,IAAI,OAAO,GAAG;YACZ,aAAa,EAAE,IAAI,CAAC,YAAY,CAAC,aAAa;YAC9C,WAAW,EAAE,IAAI;SAClB,CAAC;QAEF,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE;YAClD,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,oBAAoB,CAAC,CAAC;YAClD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACjC,CAAC,EAAE,CAAC,GAAQ,EAAE,EAAE;YACd,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACrB,CAAC,CAAC;IACJ,CAAC;;;;;;;;;;;;oBA/MA,iDAAK;;AAtBK,oBAAoB;IALhC,yDAAS,CAAC;QACT,QAAQ,EAAE,sBAAsB;QAChC,6EAA2C;;KAE5C,CAAC;GACW,oBAAoB;AAAA;;;;;;;;;;;;;;;;;;;ACnBU;AACQ;IAKtC,cAAc,SAAd,cAAc;IAIzB,YAAmB,iBAAoC;QAApC,sBAAiB,GAAjB,iBAAiB,CAAmB;QAFvD,cAAS,GAAG,KAAK,CAAC;IAEyC,CAAC;IAEtD,OAAO;;YACX,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,OAAO,MAAM,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;YACzC,kBAAkB;aACnB,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;gBACV,CAAC,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;oBACpB,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;oBACzB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;wBACnB,CAAC,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC,CAAC;qBACzD;gBACH,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;IAEK,OAAO;;YACX,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,OAAO,MAAM,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC;QACrF,CAAC;KAAA;;;;;AAvBU,cAAc;IAH1B,yDAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,cAAc;AAAA","sources":["./src/app/pages/appointmentpopup/appointmentpopup.page.ts","./src/app/services/loading.service.ts"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport {\r\n  NavController,\r\n  ModalController,\r\n  AlertController,\r\n} from '@ionic/angular';\r\nimport * as moment from 'moment';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { DataService } from 'src/app/services/data.service';\r\nimport { ToastService } from 'src/app/services/toast.service';\r\nimport { TokenObjects } from '../transaction-popup/transaction-popup.page';\r\n\r\n@Component({\r\n  selector: 'app-appointmentpopup',\r\n  templateUrl: './appointmentpopup.page.html',\r\n  styleUrls: ['./appointmentpopup.page.scss'],\r\n})\r\nexport class AppointmentpopupPage implements OnInit {\r\n  dataTransactionId: any;\r\n  tokenObjects = new TokenObjects();\r\n  tokenResponse: any;\r\n  transAmount: any;\r\n  transDate: any;\r\n  transTime: any;\r\n  public myAngularxQrCode: string = null;\r\n  blobUrl: any;\r\n  imageToShow: any;\r\n  branch: string;\r\n  phoneNumber: string;\r\n  productCode: any;\r\n  accountNum: string;\r\n  appointmentId: string;\r\n  appointmentDetails: any;\r\n  appointmentStatus: any;\r\n  handlerMessage = '';\r\n  roleMessage = '';\r\n  accountInfo: {};\r\n  trans: any;\r\n  tellerId: any;\r\n  @Input() value: any;\r\n  tranType: any;\r\n  constructor(\r\n    private router: Router,\r\n    private dataRoute: ActivatedRoute,\r\n    private api: ApiService,\r\n    private toastService: ToastService,private alertController: AlertController, private modalCtrl: ModalController,\r\n    private shareDataService: DataService) {\r\n    this.myAngularxQrCode = 'Your QR code data string';\r\n    // if (this.router.getCurrentNavigation().extras.state) {\r\n    //   console.log(this.router.getCurrentNavigation().extras.state)\r\n    // }\r\n\r\n    this.dataTransactionId = this.dataRoute.snapshot.params['transactionId'];\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.phoneNumber = localStorage.getItem('customerPhonenum');\r\n    this.api.getIndex().subscribe(resp => {\r\n      console.log(resp.index)\r\n      this.assignProductCode(resp.index);\r\n    })\r\n\r\n\r\n    // setTimeout(() => {\r\n    //   this.generateQRCode();\r\n    // }, 100);\r\n  \r\n    localStorage.getItem('AccountNumber');\r\n    localStorage.getItem('TransactionDate');\r\n\r\n    localStorage.getItem('TransactionTime');\r\n    // console.log(localStorage.getItem('TransactionTime'));\r\n   \r\n    // this.appointmentDetails = localStorage.getItem('AppointmentDetails');\r\n    this.appointmentDetails = JSON.parse(localStorage.getItem('AppointmentDetails'))\r\n    console.log(this.appointmentDetails);\r\n    if(this.appointmentDetails){\r\n      this.appointmentStatus=this.appointmentDetails.appointmentStatus;\r\n      this.appointmentId=this.appointmentDetails.appointmentId;\r\n      this.transAmount = this.appointmentDetails.transactionAmount;\r\n      this.transDate = this.appointmentDetails.transactionDate;\r\n      this.transTime = this.appointmentDetails.transactionTime;\r\n      this.branch = this.appointmentDetails.transactionBranch;\r\n      this.accountNum = this.appointmentDetails.accountNumber;\r\n      this.generateQRCode();\r\n    }\r\n    else{\r\n      this.getData();\r\n    }\r\n  \r\n    console.log(this.tokenObjects);\r\n    // this.generateQRCode();\r\n  }\r\n  assignProductCode(index: any) {\r\n    this.productCode = index;\r\n  }\r\n  \r\n  next() {\r\n    this.modalCtrl.dismiss();\r\n    this.router.navigate(['appointment']);\r\n    localStorage.removeItem('AppointmentDetails');\r\n  }\r\n\r\n  generateQRCode() {\r\n    this.shareDataService.getTransactionId.subscribe(transId => {\r\n      console.log(\"transId::\", transId)\r\n      if (transId != null) {\r\n        this.tokenObjects.transactionId = Object.getOwnPropertyNames(transId).length === 0 ? this.dataTransactionId || '' : transId;\r\n      }\r\n    })\r\n    console.log('this.tokenObjects.transactionId -- ', this.tokenObjects.transactionId);\r\n    console.log('this.tokenObjects.accnum -- ',localStorage.getItem('AccountNumber'));\r\n\r\n    this.tokenObjects.accountId = this.accountNum;\r\n    this.tokenObjects.transactionDate = moment(new Date(localStorage.getItem('TransactionDate'))).format(\"DD-MM-YYYY\");\r\n    this.tokenObjects.transactionDate = localStorage.getItem('TransactionDate');\r\n    this.tokenObjects.timeSlot = localStorage.getItem('TransactionTime');\r\n    this.tokenObjects.productCode = this.productCode;\r\n    this.tokenObjects.phoneNumber = this.phoneNumber;\r\n\r\n    this.api.generateQRCode(this.tokenObjects).subscribe(tokenResp => {\r\n      console.log(\"Token Response\", tokenResp);\r\n      this.createImageFromBlob(tokenResp);\r\n    },\r\n      err => {\r\n        console.log(\"err : \", err);\r\n\r\n      });\r\n\r\n  }\r\n\r\n  createImageFromBlob(image: Blob) {\r\n    let reader = new FileReader();\r\n    reader.addEventListener(\"load\", () => {\r\n      this.imageToShow = reader.result;\r\n    }, false);\r\n\r\n    if (image) {\r\n      reader.readAsDataURL(image);\r\n    }\r\n  }\r\n    async presentAlert(event) {\r\n      console.log(event);\r\n    const alert = await this.alertController.create({\r\n      header: 'Are you sure you want to Cancle this appointment?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          role: 'confirm',\r\n          handler: () => {\r\n            this.handlerMessage = 'Alert confirmed';\r\n            this.delete();\r\n          },\r\n        },\r\n        {\r\n          text: 'Back',\r\n          role: 'cancel',\r\n          handler: () => {\r\n            this.handlerMessage = 'Alert canceled';\r\n          },\r\n        },\r\n      ],\r\n    });\r\n    console.log(this.handlerMessage);\r\n    await alert.present();\r\n\r\n    const { role } = await alert.onDidDismiss();\r\n    this.roleMessage = `Dismissed with role: ${role}`;\r\n  }\r\n\r\n  async editTransaction() {\r\n    console.log(this.appointmentDetails);\r\n    this.value=this.appointmentDetails;\r\n    console.log(this.value.trnType.toLowerCase().replace(' ', ''));\r\n   \r\n    this.router.navigateByUrl(\r\n      `/${this.value.trnType.toLowerCase().replace(' ', '')}`,\r\n      {\r\n        state: { data: this.value },\r\n      }\r\n    );\r\n   this.modalCtrl.dismiss(this.value);\r\n    localStorage.removeItem('AppointmentDetails');\r\n    \r\n  }\r\n \r\n    delete() {\r\n    const data = {\r\n      appointmentId: this.trans.appointmentId,\r\n      operation: 'cancel'\r\n    }\r\n    console.log('cancelled!', data);\r\n    this.api.appointmentBooking(data).subscribe(resp => {\r\n      console.log(resp);\r\n      this.appointmentStatus=resp.appointmentStatus;\r\n      this.appointmentId=resp.appointmentId;\r\n      this.transAmount = resp.transactionAmount;\r\n      this.transDate = resp.transactionDate;\r\n      this.transTime = resp.transactionTime;\r\n      this.branch = resp.transactionBranch;\r\n      this.accountNum = resp.accountNumber;\r\n    });\r\n    \r\n  }\r\n\r\n  getData() {\r\n    this.shareDataService.getAccountInfo.subscribe((data) => {\r\n      console.log('Data', data);\r\n      this.accountInfo = data;\r\n    });\r\n\r\n    this.api.getByTransactionId(this.value.transactionId).subscribe((response) => {\r\n      console.log(response);\r\n      this.tellerId = response.tellerId;\r\n      this.trans = JSON.stringify(response);\r\n      this.trans = JSON.parse(this.trans);\r\n      this.appointmentDetails=this.trans;\r\n      this.appointmentStatus=this.trans.appointmentStatus;\r\n      this.appointmentId=this.trans.appointmentId;\r\n      this.transAmount = this.trans.transactionAmount;\r\n      this.transDate = this.trans.transactionDate;\r\n      this.transTime = this.trans.transactionTime;\r\n      this.branch = this.trans.transactionBranch;\r\n      this.accountNum = this.trans.accountNumber;\r\n      this.tranType=this.trans.trnType;\r\n      console.log(this.trans.trnType)\r\n\r\nthis.generateQRCode();\r\n      // let objectURL = 'data:image/jpeg;base64,' + this.trans.qrCodeImage;\r\n      // this.image = this.sanitizer.bypassSecurityTrustUrl(objectURL);\r\n    });\r\n  }\r\n\r\n\r\n  addToWallet() {\r\n    let payload = {\r\n      transactionId: this.tokenObjects.transactionId,\r\n      addToWallet: true\r\n    };\r\n\r\n    this.api.updateAddToWallet(payload).subscribe(res => {\r\n      this.toastService.showToast(\"Added Successfully\");\r\n      this.router.navigate(['tabs']);\r\n    }, (err: any) => {\r\n      console.error(err);\r\n    })\r\n  }\r\n\r\n//   @Input() value: any;\r\n//   data: any;\r\n//   tokenObjects = new TokenObjects();\r\n//   imageToShow: string | ArrayBuffer;\r\n//   productCode: any;\r\n//   phoneNumber: string;\r\n//   accountInfo: {};\r\n//   image: any;\r\n//   trans: any;\r\n//   tellerId: any;\r\n//   // sanitizer: any;\r\n\r\n//   constructor(\r\n//     public navCtrl: NavController,\r\n//     private alertController: AlertController,\r\n//     private api: ApiService,\r\n//     private modalCtrl: ModalController,\r\n//     private sanitizer: DomSanitizer,\r\n//     private shareDataService: DataService,\r\n//     private apiService: ApiService,\r\n//     private router: Router,\r\n//     private toastService: ToastService\r\n//   ) {}\r\n\r\n//   ngOnInit() {\r\n//     setTimeout(() => {\r\n//       this.generateQRCode(this.tokenObjects);\r\n//     }, 100);\r\n\r\n//     this.getData();\r\n//     this.generateQRCode(this.tokenObjects);\r\n//   }\r\n//   handlerMessage = '';\r\n//   roleMessage = '';\r\n//   async presentAlert(event) {\r\n//     const alert = await this.alertController.create({\r\n//       header: 'Are you sure you want to Cancle this appointment?',\r\n//       buttons: [\r\n//         {\r\n//           text: 'Cancel',\r\n//           role: 'confirm',\r\n//           handler: () => {\r\n//             this.handlerMessage = 'Alert confirmed';\r\n//             this.delete();\r\n//           },\r\n//         },\r\n//         {\r\n//           text: 'Back',\r\n//           role: 'cancel',\r\n//           handler: () => {\r\n//             this.handlerMessage = 'Alert canceled';\r\n//           },\r\n//         },\r\n//       ],\r\n//     });\r\n//     console.log(this.handlerMessage);\r\n//     await alert.present();\r\n\r\n//     const { role } = await alert.onDidDismiss();\r\n//     this.roleMessage = `Dismissed with role: ${role}`;\r\n//   }\r\n\r\n//   async editTransaction() {\r\n//     await this.modalCtrl.dismiss();\r\n//     this.router.navigateByUrl(\r\n//       `/${this.value.trnType.toLowerCase().replace(' ', '')}`,\r\n//       {\r\n//         state: { data: this.value },\r\n//       }\r\n//     );\r\n//   }\r\n\r\n//   delete() {\r\n//     const data = {\r\n//       appointmentId: this.trans.appointmentId,\r\n//       operation: 'cancel'\r\n//     }\r\n//     console.log('cancelled!', data);\r\n//     this.api.appointmentBooking(data).subscribe(resp => {\r\n//       console.log(resp);\r\n//     });\r\n//   }\r\n\r\n//   getData() {\r\n//     this.shareDataService.getAccountInfo.subscribe((data) => {\r\n//       console.log('Data', data);\r\n//       this.accountInfo = data;\r\n//     });\r\n\r\n//     this.apiService.getByTransactionId(this.value.transactionId).subscribe((response) => {\r\n//       this.tellerId = response.tellerId;\r\n//       this.trans = JSON.stringify(response);\r\n//       this.trans = JSON.parse(this.trans);\r\n\r\n//       let objectURL = 'data:image/jpeg;base64,' + this.trans.qrCodeImage;\r\n//       this.image = this.sanitizer.bypassSecurityTrustUrl(objectURL);\r\n//     });\r\n//   }\r\n\r\n//   generateQRCode(token) {\r\n//     this.api.generateQRCode(this.tokenObjects).subscribe(\r\n//       (tokenResp) => {\r\n//         console.log('Token Response', tokenResp);\r\n//         this.createImageFromBlob(tokenResp);\r\n//       },\r\n//       (err) => {}\r\n//     );\r\n//   }\r\n\r\n//   createImageFromBlob(image: Blob) {\r\n//     let reader = new FileReader();\r\n//     reader.addEventListener(\r\n//       'load',\r\n//       () => {\r\n//         this.imageToShow = reader.result;\r\n//       },\r\n//       false\r\n//     );\r\n\r\n//     if (image) {\r\n//       console.log('i->', image);\r\n//       reader.readAsDataURL(image);\r\n//     }\r\n//   }\r\n\r\n//   async next() {\r\n//     console.log('before');\r\n//     // this.router.navigate(['/tabs/transaction']);\r\n\r\n//     await this.modalCtrl.dismiss();\r\n//     console.log('after', this.router);\r\n//   }\r\n\r\n//   async addToWallet() {\r\n//     this.toastService.showToast('Added Successfully!');\r\n//     this.router.navigate(['tabs']);\r\n//     await this.modalCtrl.dismiss();\r\n//   }\r\n// }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { LoadingController } from '@ionic/angular';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LoadingService {\r\n\r\n  isLoading = false;\r\n\r\n  constructor(public loadingController: LoadingController) { }\r\n\r\n  async present() {\r\n    this.isLoading = true;\r\n    return await this.loadingController.create({\r\n      // duration: 5000,\r\n    }).then(a => {\r\n      a.present().then(() => {\r\n        console.log('presented');\r\n        if (!this.isLoading) {\r\n          a.dismiss().then(() => console.log('abort presenting'));\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async dismiss() {\r\n    this.isLoading = false;\r\n    return await this.loadingController.dismiss().then(() => console.log('dismissed'));\r\n  }\r\n}"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}