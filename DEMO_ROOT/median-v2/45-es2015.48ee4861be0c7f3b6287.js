"use strict";(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[45],{17988:function(e,t,i){i.d(t,{G:function(){return c},T:function(){return o}});var s=i(37716),c=function(){function e(e,t,i){this.el=e,this.vcr=t,this.renderer=i,this.dtOptions={}}return e.prototype.ngOnInit=function(){var e=this;this.dtTrigger?this.dtTrigger.subscribe(function(t){e.displayTable(t)}):this.displayTable(null)},e.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},e.prototype.displayTable=function(e){var t=this;e&&(this.dtOptions=e),this.dtInstance=new Promise(function(e,i){Promise.resolve(t.dtOptions).then(function(s){0===Object.keys(s).length&&0===$("tbody tr",t.el.nativeElement).length?i("Both the table and dtOptions cannot be empty"):setTimeout(function(){var i={rowCallback:function(e,i,c){if(s.columns){var r=s.columns;t.applyNgPipeTransform(e,r),t.applyNgRefTemplate(e,r,i)}s.rowCallback&&s.rowCallback(e,i,c)}};i=Object.assign({},s,i),t.dt=$(t.el.nativeElement).DataTable(i),e(t.dt)})})})},e.prototype.applyNgPipeTransform=function(e,t){t.filter(function(e){return e.ngPipeInstance&&!e.ngTemplateRef}).forEach(function(i){var s=i.ngPipeInstance,c=t.findIndex(function(e){return e.data===i.data}),r=e.childNodes.item(c),o=$(r).text(),n=s.transform(o);$(r).text(n)})},e.prototype.applyNgRefTemplate=function(e,t,i){var s=this;t.filter(function(e){return e.ngTemplateRef&&!e.ngPipeInstance}).forEach(function(c){var r=c.ngTemplateRef,o=r.ref,n=r.context,l=t.findIndex(function(e){return e.data===c.data}),u=e.childNodes.item(l);$(u).html("");var a=Object.assign({},n,null==n?void 0:n.userData,{adtData:i}),h=s.vcr.createEmbeddedView(o,a);s.renderer.appendChild(u,h.rootNodes[0])})},e.\u0275fac=function(t){return new(t||e)(s.Y36(s.SBq),s.Y36(s.s_b),s.Y36(s.Qsj))},e.\u0275dir=s.lG2({type:e,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),e}(),r=i(38583),o=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[r.ez]]}),e}()},52045:function(e,t,i){i.r(t),i.d(t,{InitiateAccountClosureModule:function(){return re}});var s=i(38583),c=i(39895),r=i(50215),o=i(3679),n=i(79765);class l{map(e){throw new Error("Method not implemented.")}}var u=i(35383),a=i(88259),h=i.n(a),g=i(37716),d=i(60965),f=i(80463),S=i(77382);function m(e,t){1&e&&(g.TgZ(0,"div"),g._uU(1," Please Select Account Type "),g.qZA())}function p(e,t){if(1&e&&(g.TgZ(0,"div",23),g.YNc(1,m,2,0,"div",24),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngIf",e.accountClosureForm.get("accountType").errors.required)}}function T(e,t){1&e&&(g.TgZ(0,"div"),g._uU(1," Please Enter Account Number "),g.qZA())}function U(e,t){if(1&e&&(g.TgZ(0,"div",23),g.YNc(1,T,2,0,"div",24),g.qZA()),2&e){const e=g.oxw(2);g.xp6(1),g.Q6J("ngIf",e.accountClosureForm.get("accountNumber").errors.required)}}function Z(e,t){if(1&e&&(g.TgZ(0,"div",6),g.TgZ(1,"label",14),g._uU(2,"Account Number"),g.TgZ(3,"span",15),g._uU(4,"*"),g.qZA(),g.qZA(),g._UZ(5,"input",25),g.YNc(6,U,2,1,"div",21),g.qZA()),2&e){const e=g.oxw();g.xp6(5),g.Q6J("readonly",e.editFlag),g.xp6(1),g.Q6J("ngIf",e.accountClosureForm.get("accountNumber").invalid&&(e.accountClosureForm.get("accountNumber").dirty||e.accountClosureForm.get("accountNumber").touched))}}function A(e,t){1&e&&(g.TgZ(0,"div"),g._uU(1," Please Enter Branch Code "),g.qZA())}function C(e,t){if(1&e&&(g.TgZ(0,"div",23),g.YNc(1,A,2,0,"div",24),g.qZA()),2&e){const e=g.oxw(2);g.xp6(1),g.Q6J("ngIf",e.accountClosureForm.get("branchCode").errors.required)}}function y(e,t){if(1&e&&(g.TgZ(0,"div",6),g.TgZ(1,"label",14),g._uU(2,"Branch Code"),g.TgZ(3,"span",15),g._uU(4,"*"),g.qZA(),g.qZA(),g._UZ(5,"input",26),g.YNc(6,C,2,1,"div",21),g.qZA()),2&e){const e=g.oxw();g.xp6(5),g.Q6J("readonly",e.editFlag),g.xp6(1),g.Q6J("ngIf",e.accountClosureForm.get("branchCode").invalid&&(e.accountClosureForm.get("branchCode").dirty||e.accountClosureForm.get("branchCode").touched))}}function v(e,t){1&e&&(g.TgZ(0,"div"),g._uU(1," Please Enter Reason For Closure "),g.qZA())}function q(e,t){if(1&e&&(g.TgZ(0,"div",23),g.YNc(1,v,2,0,"div",24),g.qZA()),2&e){const e=g.oxw(2);g.xp6(1),g.Q6J("ngIf",e.accountClosureForm.get("reasonForClosure").errors.required)}}function b(e,t){if(1&e&&(g.TgZ(0,"div",6),g.TgZ(1,"label",14),g._uU(2,"Reason For Closure"),g.TgZ(3,"span",15),g._uU(4,"*"),g.qZA(),g.qZA(),g._UZ(5,"input",27),g.YNc(6,q,2,1,"div",21),g.qZA()),2&e){const e=g.oxw();g.xp6(5),g.Q6J("readonly",e.editFlag),g.xp6(1),g.Q6J("ngIf",e.accountClosureForm.get("reasonForClosure").invalid&&(e.accountClosureForm.get("reasonForClosure").dirty||e.accountClosureForm.get("reasonForClosure").touched))}}const N=function(e){return{"--display":e}};function x(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"div",28),g.TgZ(2,"div",29),g.TgZ(3,"div",30),g.TgZ(4,"input",31),g.NdJ("change",function(t){return g.CHM(e),g.oxw().selectFile(t)}),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.xp6(3),g.Akn(g.VKq(5,N,e.fileName?"none":"flex")),g.uIk("data-text",e.fetchUserSingle.fileName?e.fetchUserSingle.fileName:e.fileName?e.fileName:"Upload File"),g.xp6(1),g.Q6J("readonly",e.editFlag)("disabled",e.accountClosureForm.disabled)}}function k(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",34),g.TgZ(1,"button",37),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).onSubmitFile()}),g._uU(2,"Submit File"),g.qZA(),g.qZA()}if(2&e){const e=g.oxw(2);g.xp6(1),g.Q6J("disabled",e.submitFile&&e.accountClosureForm.controls.accountType.invalid)}}function w(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",34),g.TgZ(1,"button",37),g.NdJ("click",function(t){return g.CHM(e),g.oxw(2).onSubmitSingle(t)}),g._uU(2,"Submit"),g.qZA(),g.qZA()}if(2&e){const e=g.oxw(2);g.xp6(1),g.Q6J("disabled",e.accountClosureForm.invalid)}}function O(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"div",32),g.YNc(2,k,3,1,"div",33),g.YNc(3,w,3,1,"div",33),g.TgZ(4,"div",34),g.TgZ(5,"button",35),g.NdJ("click",function(){return g.CHM(e),g.oxw().generateExcel()}),g._uU(6,"View Report"),g.qZA(),g.qZA(),g.TgZ(7,"div",34),g.TgZ(8,"button",36),g._uU(9,"Exit"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.xp6(2),g.Q6J("ngIf",!e.singleCall),g.xp6(1),g.Q6J("ngIf",e.singleCall)}}function I(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",34),g.TgZ(1,"button",38),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).editValues()}),g._uU(2," Edit"),g.qZA(),g.qZA()}}function F(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",34),g.TgZ(1,"button",37),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).onSubmitFile()}),g._uU(2,"Submit File"),g.qZA(),g.qZA()}if(2&e){const e=g.oxw(2);g.xp6(1),g.Q6J("disabled",e.submitFile&&e.accountClosureForm.controls.accountType.invalid)}}function P(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",34),g.TgZ(1,"button",37),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).onSubmitOfSingleClosure()}),g._uU(2,"Submit"),g.qZA(),g.qZA()}if(2&e){const e=g.oxw(2);g.xp6(1),g.Q6J("disabled",e.accountClosureForm.invalid)}}function B(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",34),g.TgZ(1,"button",39),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).onclickOfAuth()}),g._uU(2),g.qZA(),g.qZA()}if(2&e){const e=g.oxw(2);g.xp6(2),g.hij(" ",e.roleCodes.auth.labelDescription,"")}}function _(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",34),g.TgZ(1,"button",35),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).onclickOfReopen()}),g._uU(2),g.qZA(),g.qZA()}if(2&e){const e=g.oxw(2);g.xp6(2),g.hij(" ",e.roleCodes.reopen.labelDescription,"")}}function E(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",34),g.TgZ(1,"button",35),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).onclickOfClose()}),g._uU(2),g.qZA(),g.qZA()}if(2&e){const e=g.oxw(2);g.xp6(2),g.hij(" ",e.roleCodes.close.labelDescription,"")}}function J(e,t){if(1&e&&(g.TgZ(0,"div",34),g.TgZ(1,"button",40),g._uU(2),g.qZA(),g.qZA()),2&e){const e=g.oxw(2);g.xp6(2),g.Oqu(e.roleCodes.delete.labelDescription)}}function D(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",34),g.TgZ(1,"button",35),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).onClickOfViewToData()}),g._uU(2,"View Report"),g.qZA(),g.qZA()}}function Y(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",34),g.TgZ(1,"button",41),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).onClickOfViewToDatabulk()}),g._uU(2,"View Report"),g.qZA(),g.qZA()}}function R(e,t){if(1&e&&(g.TgZ(0,"div",6),g.TgZ(1,"div",32),g.YNc(2,I,3,0,"div",33),g.YNc(3,F,3,1,"div",33),g.YNc(4,P,3,1,"div",33),g.YNc(5,B,3,1,"div",33),g.YNc(6,_,3,1,"div",33),g.YNc(7,E,3,1,"div",33),g.YNc(8,J,3,1,"div",33),g.YNc(9,D,3,0,"div",33),g.YNc(10,Y,3,0,"div",33),g.TgZ(11,"div",34),g.TgZ(12,"button",36),g._uU(13,"Exit"),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){const e=g.oxw();g.xp6(2),g.Q6J("ngIf",!e.editFlag),g.xp6(1),g.Q6J("ngIf",!e.singleCall&&e.editFlag),g.xp6(1),g.Q6J("ngIf",e.singleCall&&e.editFlag),g.xp6(1),g.Q6J("ngIf",("UNAUTHORIZED"==e.fetchUserSingle.verifiedStatus||"U"==e.fetchUserSingle.verifiedStatus||"Unauthorized"==e.fetchUserSingle.verifiedStatus)&&e.roleCodes.auth),g.xp6(1),g.Q6J("ngIf",("CLOSE"==e.fetchUserSingle.recordStatus||"C"==e.fetchUserSingle.recordStatus||"Close"==e.fetchUserSingle.recordStatus)&&("YES"==e.fetchUserSingle.verifiedOnce||"Y"==e.fetchUserSingle.verifiedOnce)&&e.roleCodes.reopen),g.xp6(1),g.Q6J("ngIf",("OPEN"==e.fetchUserSingle.recordStatus||"O"==e.fetchUserSingle.recordStatus||"Open"==e.fetchUserSingle.recordStatus)&&("YES"==e.fetchUserSingle.verifiedOnce||"Y"==e.fetchUserSingle.verifiedOnce)&&e.roleCodes.close),g.xp6(1),g.Q6J("ngIf",("NO"==e.fetchUserSingle.verifiedOnce||"N"==e.fetchUserSingle.verifiedOnce)&&e.roleCodes.delete),g.xp6(1),g.Q6J("ngIf","SINGLE"==e.fetchUserSingle.closureType),g.xp6(1),g.Q6J("ngIf","BULK"==e.fetchUserSingle.closureType)}}let L=(()=>{class e{constructor(e,t,i,s,c,r,o,a){this.formBuilder=e,this.cdr=t,this.router=i,this.accClosure=s,this.canDeactivateGuard=c,this.iziToast=r,this.route=o,this.roleService=a,this.fetchUserSingle=new l,this.fetch=new l,this.editFlag=!1,this.selected="dormant",this.accountClosure=new l,this.submitFile=!0,this.bulk=!0,this.roleCodes=new u.yv,this.formTouched=!0,this.showDialog=!1,this.subject=new n.xQ,this.modifyScreen=!1}ngOnInit(){this.accClosureNavObj=localStorage.getItem("AccountClosureNavObj"),this.accClosureNavigationObject=JSON.parse(this.accClosureNavObj),this.accClosure.getIndexValue().subscribe(e=>{this.paramScreen=e,""===e.index&&this.createAccClosure()}),this.currentUser=localStorage.getItem("currentUser").replace(/['"]+/g,""),this.navSubscription=this.roleService.getNavParam.subscribe(e=>this.initiateAccClosure=e),console.log(this.initiateAccClosure,"Initiate Account Closure"),console.log(this.accClosureNavigationObject,"accClosureNavigationObject"),this.fetchUserSingle.id=this.initiateAccClosure.queryParams.id,this.fetchUserSingle.modNo=this.initiateAccClosure.queryParams.modNo,this.fetchUserSingle.closureType=this.initiateAccClosure.queryParams.closureType,this.fetchUserSingle.accountNumber=this.initiateAccClosure.queryParams.accountNumber,this.fetchUserSingle.accountType=this.initiateAccClosure.queryParams.accountType,this.fetchUserSingle.recordStatus=this.initiateAccClosure.queryParams.recordStatus,this.fetchUserSingle.verifiedStatus=this.initiateAccClosure.queryParams.verifiedStatus,this.fetchUserSingle.inputBy=this.initiateAccClosure.queryParams.inputBy,this.fetchUserSingle.inputTime=this.initiateAccClosure.queryParams.inputTime,this.fetchUserSingle.verifiedOnce=this.initiateAccClosure.queryParams.verifiedfirst,this.fetchUserSingle.verifiedBy=this.initiateAccClosure.queryParams.verifiedBy,this.fetchUserSingle.fileName=this.initiateAccClosure.queryParams.fileName,this.fetchUserSingle.branchCode=this.initiateAccClosure.queryParams.branch,this.fetchUserSingle.reasonForClosure=this.initiateAccClosure.queryParams.reason,this.fetchUserSingle.processStatus=this.initiateAccClosure.queryParams.processStatus,this.fetchUserSingle.accountLinkageDesc=this.initiateAccClosure.queryParams.Desc,this.fetchUserSingle.closeStatusInputBy=this.initiateAccClosure.queryParams.closeStatusInputBy,this.fetchUserSingle.closeStatusInputTime=this.initiateAccClosure.queryParams.closeStatusInputTime,this.fetchUserSingle.closeStatus=this.initiateAccClosure.queryParams.closeStatus,this.fetchUserSingle.icliqAvlBal=this.initiateAccClosure.queryParams.icliqAvlBal,this.fetchUserSingle.icliqBalance=this.initiateAccClosure.queryParams.icliqBalance,this.fetchUserSingle.icliqStatus=this.initiateAccClosure.queryParams.icliqStatus,this.fetchUserSingle.makerId=this.initiateAccClosure.queryParams.makerId,this.fetchUserSingle.makerInputTime=this.initiateAccClosure.queryParams.makerInputTime,this.fetchUserSingle.accls=this.initiateAccClosure.queryParams.accls,this.fetchUserSingle.lastTransactionDetail=this.initiateAccClosure.queryParams.lastTransactionDetail,this.fetchUserSingle.blockedAmount=this.initiateAccClosure.queryParams.blockedAmount,this.fetchUserSingle.deStatus=this.initiateAccClosure.queryParams.deStatus,this.fetchUserSingle.linkedAccounts=this.initiateAccClosure.queryParams.linkedAccounts,this.fetchUserSingle.checkerId=this.initiateAccClosure.queryParams.checkerId,this.fetchUserSingle.checkerInputTime=this.initiateAccClosure.queryParams.checkerInputTime,console.log(this.roleCodes),"SINGLE"==this.fetchUserSingle.closureType?this.data="SINGLE":(this.data="BULK",this.data=this.singleCall),this.cdr.markForCheck(),this.selected=this.fetchUserSingle.accountType,this.radioSelectred=this.fetchUserSingle.closureType,console.log("inside bulk",this.fetchUserSingle),this.cdr.markForCheck(),null==this.fetchUserSingle.closureType&&this.buildAccClosureForm(this.fetchUserSingle,!1),("BULK"==this.fetchUserSingle.closureType||"SINGLE"==this.fetchUserSingle.closureType||null==this.fetchUserSingle.closureType)&&("BULK"==this.fetchUserSingle.closureType&&(this.bulk=!0),"SINGLE"==this.fetchUserSingle.closureType&&(this.bulk=!1),console.log("YJHGJH"),this.buildAccClosureForm(this.fetchUserSingle,!0)),console.log(this.initiateAccClosure),("BULK"!=this.initiateAccClosure.queryParams.closureType||"SINGLE"!=this.initiateAccClosure.queryParams.closureType)&&null!=JSON.parse(this.accClosureNavObj)&&"new"!=this.paramScreen.index&&(this.fetchUserSingle=this.accClosureNavigationObject,console.log("YJHGJH"),this.buildAccClosureForm(this.accClosureNavigationObject),this.fileName=this.accClosureNavigationObject.fileName,this.accountClosureForm.disable()),this.accountClosureForm.get("closureType").setValue("BULK"),localStorage.setItem("CLOSURETYPE",this.accountClosureForm.value.closureType),this.roleService.screenLabelList.subscribe(e=>this.roleCodes=e),setTimeout(()=>{},100),console.log(this.fetchUserSingle),this.auditLog()}auditLog(){("C"==this.fetchUserSingle.recordStatus||"CLOSE"==this.fetchUserSingle.recordStatus)&&(this.fetchUserSingle.recordStatus="CLOSE"),("O"==this.fetchUserSingle.recordStatus||"OPEN"==this.fetchUserSingle.recordStatus)&&(this.fetchUserSingle.recordStatus="OPEN"),"U"==this.fetchUserSingle.verifiedStatus&&(this.fetchUserSingle.verifiedStatus="UNAUTHORIZED"),"A"==this.fetchUserSingle.verifiedOnce&&(this.fetchUserSingle.verifiedOnce="AUTHORIZED"),"Y"==this.fetchUserSingle.verifiedOnce&&(this.fetchUserSingle.verifiedOnce="YES"),"N"==this.fetchUserSingle.verifiedOnce&&(this.fetchUserSingle.verifiedOnce="NO")}onClickOfBulk(){this.singleCall=!1,this.accountClosureForm.get("closureType").setValue("BULK"),localStorage.setItem("CLOSURETYPE",this.accountClosureForm.value.closureType)}onclickOfSingle(){this.singleCall=!0,this.accountClosureForm.get("closureType").setValue("SINGLE"),localStorage.setItem("CLOSURETYPE",this.accountClosureForm.value.closureType)}buildAccClosureForm(e,t){console.log(e),this.accountClosureForm=this.formBuilder.group({closureType:[e.closureType?e.closureType:"",o.kI.required],accountType:[e.accountType?e.accountType:"",o.kI.required],accountNumber:[e.accountNumber?e.accountNumber:"",[o.kI.required,o.kI.pattern("^[0-9 -']+")]],branchCode:[e.branchCode?e.branchCode:"",[o.kI.required,o.kI.pattern("^[0-9 -']+")]],reasonForClosure:[e.reasonForClosure?e.reasonForClosure:"",o.kI.required]})}selectFile(e){this.accountClosureForm.get("accountType").value?(this.selectedFiles=e.target.files,this.sizeOfFile=this.selectedFiles.item(0).size,this.fileName=this.selectedFiles[0].name,setTimeout(()=>{},8e3),this.submitFile=!1):h().fire({text:"Please enter Account Type",icon:"error"})}onSubmitSingle(e){this.fetchUserSingle.inputBy=this.currentUser,this.accClosure.onSingleClosure(this.accountClosureForm.value,this.fetchUserSingle.inputBy).subscribe(e=>{if(e){let t=e.errorDesc;"S"==t||"S"===t?(this.fetchUserSingle=e,this.auditLog(),h().fire({text:"Record Successfully Uploaded"}),this.formTouched=!this.accountClosureForm.touched):h().fire({text:t,icon:"warning"})}else h().fire({text:"Server Error",icon:"error"})})}editValues(){this.editFlag=!0,this.accountClosureForm.enable()}onClickOfViewToDatabulk(){"BULK"==this.fetchUserSingle.closureType&&(this.accClosure.sendNavParam({queryParams:{closureTypeViewBulk:this.fetchUserSingle.closureType,fileName:this.fetchUserSingle.fileName,accountTypeBulk:this.fetchUserSingle.accountType,record:this.fetchUserSingle.recordStatus,authorizer:this.fetchUserSingle.verifiedBy,authFirsTime:this.fetchUserSingle.verifiedOnce,authStatus:this.fetchUserSingle.verifiedStatus,authDate:this.fetchUserSingle.verifiedTime,creator:this.fetchUserSingle.inputBy,creatorDate:this.fetchUserSingle.inputTime,modficationNo:this.fetchUserSingle.modNo,processStatus:this.fetchUserSingle.processStatus,Desc:this.fetchUserSingle.accountLinkageDesc,closeStatusInputBy:this.fetchUserSingle.closeStatusInputBy,closeStatusInputTime:this.fetchUserSingle.closeStatusInputTime,closeStatus:this.fetchUserSingle.closeStatus,icliqAvlBal:this.fetchUserSingle.icliqAvlBal,icliqBalance:this.fetchUserSingle.icliqBalance,icliqStatus:this.fetchUserSingle.icliqStatus,makerId:this.fetchUserSingle.makerId,makerInputTime:this.fetchUserSingle.makerInputTime,accls:this.fetchUserSingle.accls,lastTransactionDetail:this.fetchUserSingle.lastTransactionDetail,blockedAmount:this.fetchUserSingle.blockedAmount,deStatus:this.fetchUserSingle.deStatus,linkedAccounts:this.fetchUserSingle.linkedAccounts,checkerId:this.fetchUserSingle.checkerId,checkerInputTime:this.fetchUserSingle.checkerInputTime}}),this.router.navigate(["initiate-account-closure/viewReport"]))}onClickOfViewToData(){localStorage.setItem("accountTypeForProcess",this.fetchUserSingle.accountType),localStorage.setItem("closureTypeForBulk",this.fetchUserSingle.closureType),"SINGLE"==this.fetchUserSingle.closureType&&this.accClosure.onViewOfSingleClsureType(this.fetchUserSingle.accountType,this.fetchUserSingle.closureType,this.fetchUserSingle.accountNumber).subscribe(e=>{this.fetch=e,this.router.navigate(["initiate-account-closure/viewReport"])})}onSubmitFile(){this.accountClosureForm.get("closureType").setValue("BULK"),console.log(this.accountClosureForm.value),console.log(this.accountClosureForm.controls.accountType.value),this.sendAccountType=this.accountClosureForm.controls.accountType.value,console.log(this.accountClosureForm.controls.closureType.value),this.sendClosureType=this.accountClosureForm.controls.closureType.value,this.currentFileUpload=this.selectedFiles.item(0),this.showSubmitProgressBar=!0,this.sendAccountType?this.accClosure.onFileUpload(this.currentFileUpload,this.sendAccountType,this.sendClosureType,this.currentUser).subscribe(e=>{e?(this.fetchUserSingle=e,console.log(this.fetchUserSingle),"S"==this.fetchUserSingle.errorDesc?(this.enableView=!0,this.submitFile=!0,h().fire({text:"File uploaded sucessfully",icon:"success"}),this.formTouched=!this.accountClosureForm.touched,this.showSubmitProgressBar=!1,this.showAuditlog=!0):(this.accountClosureForm.get("accountType").setValue(this.sendAccountType),h().fire({text:this.fetchUserSingle.errorDesc,icon:"error"}),this.showSubmitProgressBar=!1)):h().fire({text:"Server Error",icon:"error"})}):(h().fire({text:"AccountType is Mandatory",icon:"warning"}),this.showSubmitProgressBar=!1)}canExit(){let e=!1;return this.accountClosureForm.touched&&1==this.formTouched?h().fire({text:"There are unsaved changes in the screen. Would you like to navigate to other screen?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(t=>!0===t.isConfirmed?(e=!0,this.cdr.markForCheck(),e):(e=!1,this.cdr.markForCheck(),e)):(e=!0,new Promise((t,i)=>{!0===e&&(e=!0,this.cdr.markForCheck(),t(!0))}))}generateExcel(){this.router.navigate(["initiate-account-closure/viewReport"]),"BULK"==this.fetchUserSingle.closureType&&(console.log("insdie bulk",this.fetchUserSingle),console.log("accont Type",this.fetchUserSingle.accountType),console.log("closure Tpye",this.fetchUserSingle.closureType),console.log("finle Name",this.fetchUserSingle.fileName),this.router.navigate(["initiate-account-closure/viewReport"],{queryParams:{closureTypeViewBulk:this.fetchUserSingle.closureType,fileNmaeBulk:this.fetchUserSingle.fileName,accountTypeBulk:this.fetchUserSingle.accountType,record:this.fetchUserSingle.recordStatus,authorizer:this.fetchUserSingle.verifiedBy,authFirsTime:this.fetchUserSingle.verifiedOnce,authStatus:this.fetchUserSingle.verifiedStatus,authDate:this.fetchUserSingle.verifiedTime,creator:this.fetchUserSingle.inputBy,creatorDate:this.fetchUserSingle.inputTime,modficationNo:this.fetchUserSingle.modNo,processStatus:this.fetchUserSingle.processStatus}}))}onSubmitOfSingleClosure(){this.accClosure.submiitingSingleClosureRecordAfterEdit(this.fetchUserSingle,this.currentUser,this.fetchUserSingle.id).subscribe(e=>{if(console.log(e.errorDesc),this.fetchUserSingle=e,"S"==this.fetchUserSingle.errorDesc)h().fire({title:"Record successfuly modified and uploaded"});else{let t=e.errorDesc;h().fire({title:t,icon:"warning"})}this.cdr.markForCheck()})}onclickOfAuth(){console.log("this is auth"),console.log(this.fetchUserSingle.accountNumber),this.accClosure.onAuthorizingTheRecord(this.fetchUserSingle.accountNumber,this.currentUser).subscribe(e=>{console.log(e),e?h().fire({title:"Record is Authorized"}):h().fire({title:"Authorization Failed",icon:"warning"})})}onclickOfClose(){console.log("this is close"),this.accClosure.onClosingTheRecord(this.fetchUserSingle.accountNumber,this.currentUser).subscribe(e=>{console.log(e),this.fetchUserSingle=e,this.auditLog()})}onclickOfReopen(){console.log("this is reopen"),this.accClosure.onReopningTheRecord(this.fetchUserSingle.accountNumber,this.currentUser).subscribe(e=>{console.log(e),this.fetchUserSingle=e,"C"==this.fetchUserSingle.recordStatus&&(this.fetchUserSingle.recordStatus="CLOSE"),"O"==this.fetchUserSingle.recordStatus&&(this.fetchUserSingle.recordStatus="OPEN")})}createAccClosure(){this.roleService.sendNavParam({queryParams:{}})}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(o.qu),g.Y36(g.sBO),g.Y36(c.F0),g.Y36(d.b),g.Y36(r.I),g.Y36(f.I),g.Y36(c.gz),g.Y36(S.N))},e.\u0275cmp=g.Xpm({type:e,selectors:[["npr-account-closure-details"]],decls:41,vars:12,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],["action","",1,"formStyle",3,"formGroup"],[1,"dbCardStyle","cardWidth"],[1,"row","gy-4","justify-content-center"],[1,"col-12"],[1,"row","g-2","justify-content-center"],[1,"col-sm-4","col-5"],[1,"radio","radioStyle"],["id","radio-1","name","radio","type","radio",3,"readonly","checked","click"],["for","radio-1",1,"radio-label"],["id","radio-2","name","radio","type","radio",3,"readonly","checked","click"],["for","radio-2",1,"radio-label"],["for","roleName",1,"formLbl"],[1,"colorRed"],["formControlName","accountType","aria-label","Default select example",1,"form-select"],["hidden","","value","","disabled","","selected",""],["value","dormant"],["value","overDrawn"],["value","unclaimed"],["class","errorColor",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"errorColor"],[4,"ngIf"],["id","accountNumber","placeholder","Account Number","required","","formControlName","accountNumber","value","",1,"form-control",3,"readonly"],["id","branchCode","placeholder","Branch Code","required","","formControlName","branchCode","value","",1,"form-control",3,"readonly"],["id","","placeholder","Reason For Closure","required","","formControlName","reasonForClosure","value","",1,"form-control",3,"readonly"],[1,"fileUpload"],[1,"formS"],[1,"file-upload-wrapper","upIcon"],["name","file-upload-field","type","file","value","",1,"file-upload-field",3,"readonly","disabled","change"],[1,"row","g-3","pb-3","justify-content-center","pt-3"],["class","col-auto",4,"ngIf"],[1,"col-auto"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],["routerLink","/initiate-account-closure",1,"btn","smBtn","minWdSmBtn","btnSecondary"],["href","javascript:void(0)",1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"disabled","click"],[1,"btn","smBtn","minWdSmBtn","btnUpdate",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnAuth",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnPrimary"],["type","button",1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"h2",2),g._uU(3,"Initiate Account Closure"),g.qZA(),g.qZA(),g.TgZ(4,"form",3),g.TgZ(5,"div",4),g.TgZ(6,"div",5),g.TgZ(7,"div",6),g.TgZ(8,"div",7),g.TgZ(9,"div",8),g.TgZ(10,"div",9),g.TgZ(11,"input",10),g.NdJ("click",function(){return t.onClickOfBulk()}),g.qZA(),g.TgZ(12,"label",11),g._uU(13,"Bulk"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(14,"div",8),g.TgZ(15,"div",9),g.TgZ(16,"input",12),g.NdJ("click",function(){return t.onclickOfSingle()}),g.qZA(),g.TgZ(17,"label",13),g._uU(18,"Single"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(19,"div",6),g.TgZ(20,"label",14),g._uU(21,"Account Type"),g.TgZ(22,"span",15),g._uU(23,"*"),g.qZA(),g.qZA(),g.TgZ(24,"select",16),g.TgZ(25,"option",17),g._uU(26,"--Please select--"),g.qZA(),g.TgZ(27,"option",18),g._uU(28,"Dormant "),g.qZA(),g.TgZ(29,"option",19),g._uU(30,"OverDrawn Accounts"),g.qZA(),g.TgZ(31,"option",20),g._uU(32,"Unclaimed "),g.qZA(),g.qZA(),g.YNc(33,p,2,1,"div",21),g.qZA(),g.YNc(34,Z,7,2,"div",22),g.YNc(35,y,7,2,"div",22),g.YNc(36,b,7,2,"div",22),g.YNc(37,x,5,7,"div",22),g.YNc(38,O,10,2,"div",22),g.YNc(39,R,14,9,"div",22),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g._UZ(40,"br")),2&e&&(g.xp6(4),g.Q6J("formGroup",t.accountClosureForm),g.xp6(7),g.Q6J("readonly",t.editFlag)("checked",t.bulk),g.xp6(5),g.Q6J("readonly",t.editFlag)("checked",!t.bulk),g.xp6(17),g.Q6J("ngIf",t.accountClosureForm.get("accountType").invalid&&(t.accountClosureForm.get("accountType").dirty||t.accountClosureForm.get("accountType").touched)),g.xp6(1),g.Q6J("ngIf",t.singleCall),g.xp6(1),g.Q6J("ngIf",t.singleCall),g.xp6(1),g.Q6J("ngIf",t.singleCall),g.xp6(1),g.Q6J("ngIf",!t.singleCall),g.xp6(1),g.Q6J("ngIf",null==t.fetchUserSingle.closureType),g.xp6(1),g.Q6J("ngIf",null!=t.fetchUserSingle.closureType))},directives:[o._Y,o.JL,o.sg,o.EJ,o.JJ,o.u,o.YN,o.Kr,s.O5,o.Fj,o.Q7,c.rH],styles:[".errorColor[_ngcontent-%COMP%]{color:#e6224a}"]}),e})();var V=i(17988);function Q(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"a",11),g.NdJ("click",function(){return g.CHM(e),g.oxw().createAccClosure()}),g._uU(2),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.xp6(2),g.Oqu(e.roleCodes.new.labelDescription)}}function j(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",18),g.NdJ("click",function(){g.CHM(e);const t=g.oxw().$implicit;return g.oxw().close(t)}),g._UZ(1,"img",19),g.qZA()}}function H(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",20),g.NdJ("click",function(){g.CHM(e);const t=g.oxw().$implicit;return g.oxw().open(t)}),g._UZ(1,"img",21),g.qZA()}}function M(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",22),g.NdJ("click",function(){g.CHM(e);const t=g.oxw().$implicit;return g.oxw().delete(t)}),g._UZ(1,"img",23),g.qZA()}}function z(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td"),g.TgZ(2,"a",12),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw().getDataFromSummary(t)}),g._uU(3),g.qZA(),g.qZA(),g.TgZ(4,"td"),g._uU(5),g.qZA(),g.TgZ(6,"td"),g._uU(7),g.qZA(),g.TgZ(8,"td"),g._uU(9),g.qZA(),g.TgZ(10,"td"),g._uU(11),g.qZA(),g.TgZ(12,"td"),g._uU(13),g.qZA(),g.TgZ(14,"td"),g._uU(15),g.ALo(16,"date"),g.qZA(),g.TgZ(17,"td"),g.TgZ(18,"button",13),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw().auth(t)}),g._UZ(19,"img",14),g.qZA(),g.YNc(20,j,2,0,"button",15),g.YNc(21,H,2,0,"button",16),g.YNc(22,M,2,0,"button",17),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit;g.xp6(2),g.MGl("routerLink","/initiate-account-closure/create/",e.closureType,""),g.xp6(1),g.Oqu(e.closureType),g.xp6(2),g.Oqu(e.accountType),g.xp6(2),g.Oqu(e.status),g.xp6(2),g.Oqu(e.makerId),g.xp6(2),g.Oqu(e.verifiedStatus),g.xp6(2),g.Oqu(e.recordStatus),g.xp6(2),g.Oqu(g.xi3(16,12,e.inputTime,"medium")),g.xp6(3),g.Q6J("disabled",!("U"==e.verifiedStatus||"UNAUTHORIZED"==e.verifiedStatus||"Unauthorized"==e.verifiedStatus)),g.xp6(2),g.Q6J("ngIf",!("O"!=e.recordStatus&&"Open"!=e.recordStatus&&"OPEN"!=e.recordStatus||"Y"!=e.verifiedOnce&&"YES"!=e.verifiedOnce)),g.xp6(1),g.Q6J("ngIf",!("CLOSED"!=e.recordStatus&&"Close"!=e.recordStatus&&"C"!=e.recordStatus||"YES"!=e.verifiedOnce&&"Y"!=e.verifiedOnce)),g.xp6(1),g.Q6J("ngIf","N"==e.verifiedOnce||"NO"==e.verifiedOnce)}}const G=function(){return["/dashboard"]};let W=(()=>{class e{constructor(e,t,i){this.accClosureServiceSum=e,this.roleService=t,this.router=i,this.dtOptions={},this.roleCodes=new u.yv,this.dtTrigger=new n.xQ,this.statusArr=["Authorized","Unauthorized","Open","Close"]}ngOnInit(){setTimeout(()=>{this.newRolePermissions()},2e3),this.dtOptions={pagingType:"full_numbers",pageLength:5,columnDefs:[{type:"date",targets:[6]}],order:[[6,"desc"]],processing:!0,lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]]},this.currentUser=localStorage.getItem("currentUser").replace(/['"]+/g,""),this.gettingAccClosureSummary(this.currentUser),this.roleService.fetchScreenPermissions("Initiate Account Closure"),this.roleService.screenLabelList.subscribe(e=>this.roleCodes=e),console.log(this.roleCodes)}createAccClosure(){this.router.navigate(["/initiate-account-closure/create"]),this.roleService.sendNavParam({queryParams:{}}),this.accClosureServiceSum.setIndexValue({index:"new"})}getDataFromSummary(e){console.log("this is row",e),this.fileName=e.fileName,localStorage.setItem("fileName",this.fileName),this.viewAccountType=e.accountType,localStorage.setItem("typeOfAccount",this.viewAccountType);const t={queryParams:{modifyNo:e.modNo,closureType:e.closureType,accountNumber:e.accountNumber,accountType:e.accountType,recordStatus:e.recordStatus,verifiedStatus:e.verifiedStatus,inputBy:e.inputBy,inputTime:e.inputTime,modNo:e.modNo,authorizedTime:e.authorizedTime,verifiedfirst:e.verifiedOnce,verifiedBy:e.verifiedBy,fileName:e.fileName,branch:e.branchCode,reason:e.reasonForClosure,id:e.id,processStatus:e.processStatus,Desc:e.accountLinkageDesc,closeStatusInputBy:e.closeStatusInputBy,closeStatusInputTime:e.closeStatusInputTime,closeStatus:e.closeStatus,icliqAvlBal:e.icliqAvlBal,icliqBalance:e.icliqBalance,icliqStatus:e.icliqStatus,makerId:e.makerId,makerInputTime:e.makerInputTime,accls:e.accls,lastTransactionDetail:e.lastTransactionDetail,blockedAmount:e.blockedAmount,deStatus:e.deStatus,linkedAccounts:e.linkedAccounts,checkerId:e.checkerId,checkerInputTime:e.checkerInputTime}};console.log("navigationExtras",t),localStorage.setItem("AccountClosureNavObj",JSON.stringify(e)),this.roleService.sendNavParam(t),this.router.navigate(["/initiate-account-closure/create"]),this.accClosureServiceSum.setIndexValue({index:"edit"})}newRolePermissions(){this.roleService.fetchScreenPermissions("Initiate Account Closure")}gettingAccClosureSummary(e){console.log("this account closure Summary"),this.accClosureServiceSum.gettingAccountClosureSummary(e).subscribe(e=>{console.log(e),this.SummaryData=e;for(let t of this.SummaryData)t.verifiedStatus=this.statusArr.find(e=>e.startsWith(t.verifiedStatus)),t.recordStatus=this.statusArr.find(e=>e.startsWith(t.recordStatus));this.summaryDetails=e,this.dtTrigger.next()})}auth(e){console.log(e),console.log("this is auth"),console.log(e.accountNumber),this.accClosureServiceSum.onAuthorizingTheRecord(e.accountNumber,this.currentUser).subscribe(e=>{console.log(e),e?h().fire({title:"Record is Authorized"}).then(()=>window.location.reload()):h().fire({title:"Authorization Failed",icon:"warning"})})}open(e){console.log("this is reopen"),this.accClosureServiceSum.onReopningTheRecord(this.fetchUserSingle.accountNumber,this.currentUser).subscribe(e=>{console.log(e),this.fetchUserSingle=e,"C"==this.fetchUserSingle.recordStatus&&(this.fetchUserSingle.recordStatus="CLOSE"),"O"==this.fetchUserSingle.recordStatus&&(this.fetchUserSingle.recordStatus="OPEN")})}close(e){console.log("this is close"),this.accClosureServiceSum.onClosingTheRecord(e.accountNumber,this.currentUser).subscribe(e=>{console.log(e),this.fetchUserSingle=e,this.auditLog()})}delete(e){}auditLog(){("C"==this.fetchUserSingle.recordStatus||"CLOSE"==this.fetchUserSingle.recordStatus)&&(this.fetchUserSingle.recordStatus="CLOSE"),("O"==this.fetchUserSingle.recordStatus||"OPEN"==this.fetchUserSingle.recordStatus)&&(this.fetchUserSingle.recordStatus="OPEN"),"U"==this.fetchUserSingle.verifiedStatus&&(this.fetchUserSingle.verifiedStatus="UNAUTHORIZED"),"A"==this.fetchUserSingle.verifiedOnce&&(this.fetchUserSingle.verifiedOnce="AUTHORIZED"),"Y"==this.fetchUserSingle.verifiedOnce&&(this.fetchUserSingle.verifiedOnce="YES"),"N"==this.fetchUserSingle.verifiedOnce&&(this.fetchUserSingle.verifiedOnce="NO")}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(d.b),g.Y36(S.N),g.Y36(c.F0))},e.\u0275cmp=g.Xpm({type:e,selectors:[["npr-initiate-account-closure"]],decls:32,vars:6,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"dbCardStyle"],[1,"row","g-3","pb-3","justify-content-end"],["class","col-auto",4,"ngIf"],[1,"col-auto"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],[1,"table-responsive"],["datatable","",1,"dataTable","table","tableStyle","nowrap","vAlignMdl",2,"width","100%",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[1,"primaryColor",3,"routerLink","click"],["title","Authorize",1,"btn",2,"color","red",3,"disabled","click"],["src","assets/images/authorize.svg","alt","Authorize",1,"summaryIcon"],["class","btn","style","color: red","title","Close",3,"click",4,"ngIf"],["class","btn","style","color: red","title","Reopen",3,"click",4,"ngIf"],["class","btn","style","color: red","title","Delete",3,"click",4,"ngIf"],["title","Close",1,"btn",2,"color","red",3,"click"],["src","assets/images/CROSS1.svg","alt","...",1,"summaryIcon"],["title","Reopen",1,"btn",2,"color","red",3,"click"],["src","assets/images/open.svg","alt","...",1,"summaryIcon"],["title","Delete",1,"btn",2,"color","red",3,"click"],["src","assets/images/delete.svg","alt","...",1,"summaryIcon"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"h2",2),g._uU(3,"Initiate Account Closure "),g.qZA(),g.qZA(),g.TgZ(4,"div",3),g.TgZ(5,"div",4),g.YNc(6,Q,3,1,"div",5),g.TgZ(7,"div",6),g.TgZ(8,"a",7),g._uU(9,"Exit"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(10,"div",8),g.TgZ(11,"table",9),g.TgZ(12,"thead"),g.TgZ(13,"tr"),g.TgZ(14,"th"),g._uU(15,"closure type"),g.qZA(),g.TgZ(16,"th"),g._uU(17,"account type"),g.qZA(),g.TgZ(18,"th"),g._uU(19,"status"),g.qZA(),g.TgZ(20,"th"),g._uU(21,"maker id"),g.qZA(),g.TgZ(22,"th"),g._uU(23,"auth status"),g.qZA(),g.TgZ(24,"th"),g._uU(25,"record status"),g.qZA(),g.TgZ(26,"th"),g._uU(27,"date"),g.qZA(),g.TgZ(28,"th"),g._uU(29,"action"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(30,"tbody"),g.YNc(31,z,23,15,"tr",10),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(6),g.Q6J("ngIf",t.roleCodes.new),g.xp6(2),g.Q6J("routerLink",g.DdM(5,G)),g.xp6(3),g.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),g.xp6(20),g.Q6J("ngForOf",t.summaryDetails))},directives:[s.O5,c.yS,V.G,s.sg],pipes:[s.uU],styles:[""]}),e})();var K=i(4108),$=i.n(K);function X(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",14),g.TgZ(1,"button",17),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).onProcessingTheBulkAccount()}),g._uU(2,"Process"),g.qZA(),g.qZA()}}function ee(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",14),g.TgZ(1,"button",17),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).onProcessingTheSingleAccount()}),g._uU(2,"Process"),g.qZA(),g.qZA()}}function te(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"div",7),g.TgZ(2,"label",8),g._uU(3,"Export As"),g.qZA(),g.TgZ(4,"select",9),g.NdJ("change",function(t){return g.CHM(e),g.oxw().modo(t.target.value)}),g.TgZ(5,"option",10),g._uU(6,"Excel"),g.qZA(),g.TgZ(7,"option",11),g._uU(8,"PDF"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(9,"div",7),g.TgZ(10,"div",12),g.YNc(11,X,3,0,"div",13),g.YNc(12,ee,3,0,"div",13),g.TgZ(13,"div",14),g.TgZ(14,"a",15),g.NdJ("click",function(){return g.CHM(e),g.oxw().onCancelingTheRecord()}),g._uU(15,"Delete"),g.qZA(),g.qZA(),g.TgZ(16,"div",14),g.TgZ(17,"button",16),g._uU(18,"Exit"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.xp6(11),g.Q6J("ngIf","BULK"==e.closureTypes),g.xp6(1),g.Q6J("ngIf","SINGLE"==e.closureTypes)}}function ie(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",18),g.TgZ(1,"div",19),g.TgZ(2,"table",20),g.TgZ(3,"thead"),g.TgZ(4,"tr"),g.TgZ(5,"th"),g._uU(6,"Account Type"),g.qZA(),g.TgZ(7,"th"),g._uU(8,"Closure Type"),g.qZA(),g.TgZ(9,"th"),g._uU(10,"Branch Code"),g.qZA(),g.TgZ(11,"th"),g._uU(12,"Account Number"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"tbody"),g.TgZ(14,"tr"),g.TgZ(15,"td"),g._uU(16),g.qZA(),g.TgZ(17,"td"),g._uU(18),g.qZA(),g.TgZ(19,"td"),g._uU(20),g.qZA(),g.TgZ(21,"td"),g._uU(22),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(23,"table",21),g.TgZ(24,"thead"),g.TgZ(25,"tr"),g.TgZ(26,"th"),g._uU(27,"Current Balance [ACY]"),g.qZA(),g.TgZ(28,"th"),g._uU(29,"Current Balance [LCY]"),g.qZA(),g.TgZ(30,"th"),g._uU(31,"Available Balance"),g.qZA(),g.TgZ(32,"th"),g._uU(33," No Debit"),g.qZA(),g.TgZ(34,"th"),g._uU(35,"No Credit"),g.qZA(),g.TgZ(36,"th"),g._uU(37,"Frozen"),g.qZA(),g.TgZ(38,"th"),g._uU(39,"Dormant"),g.qZA(),g.TgZ(40,"th"),g._uU(41,"Account Status"),g.qZA(),g.TgZ(42,"th"),g._uU(43,"Record Status"),g.qZA(),g.TgZ(44,"th"),g._uU(45,"Customer Id"),g.qZA(),g.TgZ(46,"th"),g._uU(47,"Value Date"),g.qZA(),g.TgZ(48,"th"),g._uU(49,"Account Block"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(50,"tbody"),g.TgZ(51,"tr"),g.TgZ(52,"td"),g._uU(53),g.qZA(),g.TgZ(54,"td"),g._uU(55),g.qZA(),g.TgZ(56,"td"),g._uU(57),g.qZA(),g.TgZ(58,"td"),g._uU(59),g.qZA(),g.TgZ(60,"td"),g._uU(61),g.qZA(),g.TgZ(62,"td"),g._uU(63),g.qZA(),g.TgZ(64,"td"),g._uU(65),g.qZA(),g.TgZ(66,"td"),g._uU(67),g.qZA(),g.TgZ(68,"td"),g._uU(69),g.qZA(),g.TgZ(70,"td"),g._uU(71),g.qZA(),g.TgZ(72,"td"),g._uU(73),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(74,"div",7),g.TgZ(75,"div",12),g.TgZ(76,"div",14),g.TgZ(77,"button",15),g.NdJ("click",function(){return g.CHM(e),g.oxw().onProcessingTheSingleAccount()}),g._uU(78,"Process"),g.qZA(),g.qZA(),g.TgZ(79,"div",14),g.TgZ(80,"button",15),g.NdJ("click",function(){return g.CHM(e),g.oxw().onCancelingTheSingleRecord()}),g._uU(81,"Delete"),g.qZA(),g.qZA(),g.TgZ(82,"div",14),g.TgZ(83,"button",16),g._uU(84,"Exit"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(85,"div",7),g.TgZ(86,"label",8),g._uU(87,"Export As"),g.qZA(),g.TgZ(88,"select",22),g.TgZ(89,"option",23),g.NdJ("click",function(){return g.CHM(e),g.oxw().downloadReportForSingle()}),g._uU(90,"Excel"),g.qZA(),g.TgZ(91,"option",24),g.NdJ("click",function(){return g.CHM(e),g.oxw().convertReportForSingle()}),g._uU(92,"PDF"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.xp6(2),g.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),g.xp6(14),g.Oqu(e.fetchUserSingle.accountType),g.xp6(2),g.Oqu(e.fetchUserSingle.closureType),g.xp6(2),g.Oqu(e.fetchUserSingle.branchCode),g.xp6(2),g.Oqu(e.fetchUserSingle.accountNumber),g.xp6(1),g.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),g.xp6(30),g.Oqu(e.fetchUserSingle.acyCurrBalance),g.xp6(2),g.hij(" ",e.fetchUserSingle.lcyCurrBalance,""),g.xp6(2),g.Oqu(e.fetchUserSingle.acyAvlBal),g.xp6(2),g.Oqu(e.fetchUserSingle.acStatNoDr),g.xp6(2),g.Oqu(e.fetchUserSingle.acSatNoCr),g.xp6(2),g.Oqu(e.fetchUserSingle.frozen),g.xp6(2),g.Oqu(e.fetchUserSingle.dorm),g.xp6(2),g.Oqu(e.fetchUserSingle.accountStatus),g.xp6(2),g.Oqu(e.fetchUserSingle.recordStatusFromFlexCube),g.xp6(2),g.Oqu(e.fetchUserSingle.customerId),g.xp6(2),g.Oqu(e.fetchUserSingle.valueDate)}}i(46481);const se=[{path:"",component:W},{path:"create",component:L,canDeactivate:[r.I]},{path:"viewReport",component:(()=>{class e{constructor(e,t,i,s,c){this.excelService=e,this.ref=t,this.iziToast=i,this.roleService=s,this.router=c,this.fetchUserSingle=new l,this.accountTypeForBulk="",this.excel=[],this.sendFileName="",this.dtTrigger=new n.xQ,this.dtOptions={},this.singleExcel=Array()}ngOnInit(){console.log("Inside View Report"),this.closureTypes=localStorage.getItem("CLOSURETYPE"),console.log(this.closureTypes),this.navSubscription=this.excelService.getNavParam.subscribe(e=>this.ViewAccClosure=e),console.log(this.ViewAccClosure),this.fetchUserSingle.accountTypeBulk=this.ViewAccClosure.queryParams.accountTypeBulk,this.fetchUserSingle.modNo=this.ViewAccClosure.queryParams.modNo,this.fetchUserSingle.closureType=this.ViewAccClosure.queryParams.closureType,this.fetchUserSingle.accountNumber=this.ViewAccClosure.queryParams.accountNumber,this.fetchUserSingle.accountType=this.ViewAccClosure.queryParams.accountType,this.fetchUserSingle.recordStatus=this.ViewAccClosure.queryParams.record,this.fetchUserSingle.verifiedStatus=this.ViewAccClosure.queryParams.verifiedStatus,this.fetchUserSingle.inputBy=this.ViewAccClosure.queryParams.inputBy,this.fetchUserSingle.inputTime=this.ViewAccClosure.queryParams.inputTime,this.fetchUserSingle.verifiedOnce=this.ViewAccClosure.queryParams.verifiedfirst,this.fetchUserSingle.verifiedBy=this.ViewAccClosure.queryParams.verifiedBy,this.fetchUserSingle.fileName=this.ViewAccClosure.queryParams.fileName,this.fetchUserSingle.branchCode=this.ViewAccClosure.queryParams.branch,this.fetchUserSingle.reasonForClosure=this.ViewAccClosure.queryParams.reason,this.fetchUserSingle.processStatus=this.ViewAccClosure.queryParams.processStatus,this.fetchUserSingle.accountLinkageDesc=this.ViewAccClosure.queryParams.Desc,this.fetchUserSingle.closeStatusInputBy=this.ViewAccClosure.queryParams.closeStatusInputBy,this.fetchUserSingle.closeStatusInputTime=this.ViewAccClosure.queryParams.closeStatusInputTime,this.fetchUserSingle.closeStatus=this.ViewAccClosure.queryParams.closeStatus,this.fetchUserSingle.icliqAvlBal=this.ViewAccClosure.queryParams.icliqAvlBal,this.fetchUserSingle.icliqBalance=this.ViewAccClosure.queryParams.icliqBalance,this.fetchUserSingle.icliqStatus=this.ViewAccClosure.queryParams.icliqStatus,this.fetchUserSingle.makerId=this.ViewAccClosure.queryParams.makerId,this.fetchUserSingle.makerInputTime=this.ViewAccClosure.queryParams.makerInputTime,this.fetchUserSingle.accls=this.ViewAccClosure.queryParams.accls,this.fetchUserSingle.lastTransactionDetail=this.ViewAccClosure.queryParams.lastTransactionDetail,this.fetchUserSingle.blockedAmount=this.ViewAccClosure.queryParams.blockedAmount,this.fetchUserSingle.deStatus=this.ViewAccClosure.queryParams.deStatus,this.fetchUserSingle.linkedAccounts=this.ViewAccClosure.queryParams.linkedAccounts,this.fetchUserSingle.checkerId=this.ViewAccClosure.queryParams.checkerId,this.fetchUserSingle.checkerInputTime=this.ViewAccClosure.queryParams.checkerInputTime,console.log(this.fetchUserSingle)}exportAsXLSX(){console.log("this is on click of download"),setTimeout(()=>{},2e3),console.log(this.fetchUserSingle.fileName);let e=this.fetchUserSingle.fileName.split(".").slice(0,-1).join(".");this.excelService.getExcel(e,this.fetchUserSingle.accountType).subscribe(e=>{console.log("this is backend data for excel",e),this.excel=e,e.forEach(e=>{}),this.excelService.exportAsExcelFile(this.excel,"BULK_ACCOUNT_CLOSURE")}),console.log(this.excel)}convert(){new($());var e=[["AccountNo","branchCode","closureReason","customerId","fileName","frozen"]],t=[];console.log(this.fetchUserSingle);let i=this.fetchUserSingle.fileName.split(".").slice(0,-1).join(".");this.excelService.getExcel(i,this.fetchUserSingle.accountType).subscribe(i=>{console.log("this is backend data for excel"),this.excel=i,this.excel.forEach(e=>{var i=new Date(e.timeForExport).toLocaleDateString("en-us");console.log(i),t.push([e.accountNo,e.branchCode,e.closureReason,e.customerId,e.fileName,e.frozen])});var s=new($());s.autoTable({head:e,body:t}),s.save("BULK_Account_Closure.pdf")})}modo(e){console.log(e),"PDF"==e&&this.convert(),"Excel"==e&&this.exportAsXLSX()}onProcessingTheBulkAccount(){console.log("this is bulk process",this.fetchUserSingle.fileName),this.excelService.processTheBulkRecord(this.fetchUserSingle.fileName,this.fetchUserSingle.accountType,this.fetchUserSingle.inputBy).subscribe(e=>{console.log(e);let t=e.errorDesc;1==e.var1?(this.process=!0,this.ref.markForCheck(),h().fire({text:"Record Processed SuccessFully",icon:"success"})):h().fire({text:t,icon:"warning"})})}onCancelingTheRecord(){console.log("this is deleteing the record",this.fetchUserSingle.fileName),this.excelService.onDeletingTheReocrd(this.fetchUserSingle.fileName,this.fetchUserSingle.accountTypeBulk,this.fetchUserSingle.makerId).subscribe(e=>{console.log(e),1==e?(this.delete=!0,h().fire({text:"Record is Deleted",icon:"success"}),this.router.navigate(["/initiate-account-closure"])):h().fire({text:"Failed To Delete The Record",icon:"warning"})})}onProcessingTheSingleAccount(){console.log("this is single process",this.fetchUserSingle.accountNumber),this.excelService.processTheSingleRecord(this.fetchUserSingle.accountNumber,this.fetchUserSingle.inputBy).subscribe(e=>{console.log(e);let t=e.errorDesc;1==e.var1?(this.process=!0,this.ref.markForCheck(),h().fire({text:"Record Processed SuccessFully",icon:"success"})):h().fire({text:t,icon:"warning"})})}onCancelingTheSingleRecord(){console.log("deleting Single",this.fetchUserSingle.accountNumber),console.log("deleting Single",this.fetchUserSingle.accountType),console.log("deleting Single",this.fetchUserSingle.closureType),console.log("deleting Single",this.fetchUserSingle.inputBy),this.excelService.onDeletingSingle(this.fetchUserSingle.accountNumber,this.fetchUserSingle.accountType,this.fetchUserSingle.closureType,this.fetchUserSingle.inputBy).subscribe(e=>{console.log(e),this.deleteSingle=!0,1==e?(h().fire({text:"Record is Deleted",icon:"success"}),this.router.navigate(["/initiate-account-closure"])):h().fire({text:"Failed To Delete The Record",icon:"warning"})})}downloadReportForSingle(){console.log("download for single"),this.singleExcel.push(this.fetchUserSingle),console.log(this.fetchUserSingle),console.log(this.singleExcel),this.excelService.exportAsExcelForSingleAccount(this.singleExcel,"SINGLE_ACCOUNT_CLOSURE"),console.log("this is single",this.singleExcel)}convertReportForSingle(){console.log(this.fetchUserSingle);var e=new($()),t=this.fetchUserSingle;Object.keys(t),Object.values(t),Object.entries(t),console.log(Object.entries(t)),Object.entries(t);const i=Object.keys(this.fetchUserSingle).map(e=>({type:e,value:this.fetchUserSingle[e]}));console.log(i),e.autoTable({body:i}),e.save("Single_Account_Closure.pdf")}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(d.b),g.Y36(g.sBO),g.Y36(f.I),g.Y36(S.N),g.Y36(c.F0))},e.\u0275cmp=g.Xpm({type:e,selectors:[["npr-view-report-acc-closure"]],decls:7,vars:2,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],["action","",1,"formStyle"],["class","dbCardStyle cardWidth",4,"ngIf"],["class","dbCardStyle",4,"ngIf"],[1,"dbCardStyle","cardWidth"],[1,"col-12"],["for","roleName",1,"formLbl"],["aria-label","Default select example",1,"form-select",3,"change"],["value","Excel"],["value","PDF"],[1,"row","g-3","pb-3","justify-content-center","pt-3"],["class","col-auto",4,"ngIf"],[1,"col-auto"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],["routerLink","/initiate-account-closure",1,"btn","smBtn","minWdSmBtn","btnSecondary"],["type","button",1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[1,"dbCardStyle"],[1,"row","g-3","pb-3","justify-content-end"],["datatable","",1,"dataTable","table","tableStyle","responsive","nowrap",2,"width","100%",3,"dtOptions","dtTrigger"],["datatable","",1,"dataTable","table","tableStyle","responsive","nowrap",3,"dtOptions","dtTrigger"],["aria-label","Default select example",1,"form-select"],["value","1",3,"click"],["value","2",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"h2",2),g._uU(3,"View Report"),g.qZA(),g.qZA(),g.TgZ(4,"form",3),g.YNc(5,te,19,2,"div",4),g.YNc(6,ie,93,19,"div",5),g.qZA(),g.qZA()),2&e&&(g.xp6(5),g.Q6J("ngIf","SINGLE"!=t.fetchUserSingle.closureType),g.xp6(1),g.Q6J("ngIf","SINGLE"==t.fetchUserSingle.closureType))},directives:[o._Y,o.JL,s.O5,o.YN,o.Kr,c.rH,V.G],styles:[""]}),e})()}];let ce=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[c.Bz.forChild(se)],c.Bz]}),e})(),re=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[s.ez,ce,V.T,o.UX]]}),e})()}}]);