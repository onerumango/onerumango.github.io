"use strict";(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[652],{17988:function(e,t,s){s.d(t,{G:function(){return r},T:function(){return n}});var o=s(37716),r=function(){function e(e,t,s){this.el=e,this.vcr=t,this.renderer=s,this.dtOptions={}}return e.prototype.ngOnInit=function(){var e=this;this.dtTrigger?this.dtTrigger.subscribe(function(t){e.displayTable(t)}):this.displayTable(null)},e.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},e.prototype.displayTable=function(e){var t=this;e&&(this.dtOptions=e),this.dtInstance=new Promise(function(e,s){Promise.resolve(t.dtOptions).then(function(o){0===Object.keys(o).length&&0===$("tbody tr",t.el.nativeElement).length?s("Both the table and dtOptions cannot be empty"):setTimeout(function(){var s={rowCallback:function(e,s,r){if(o.columns){var i=o.columns;t.applyNgPipeTransform(e,i),t.applyNgRefTemplate(e,i,s)}o.rowCallback&&o.rowCallback(e,s,r)}};s=Object.assign({},o,s),t.dt=$(t.el.nativeElement).DataTable(s),e(t.dt)})})})},e.prototype.applyNgPipeTransform=function(e,t){t.filter(function(e){return e.ngPipeInstance&&!e.ngTemplateRef}).forEach(function(s){var o=s.ngPipeInstance,r=t.findIndex(function(e){return e.data===s.data}),i=e.childNodes.item(r),n=$(i).text(),c=o.transform(n);$(i).text(c)})},e.prototype.applyNgRefTemplate=function(e,t,s){var o=this;t.filter(function(e){return e.ngTemplateRef&&!e.ngPipeInstance}).forEach(function(r){var i=r.ngTemplateRef,n=i.ref,c=i.context,l=t.findIndex(function(e){return e.data===r.data}),a=e.childNodes.item(l);$(a).html("");var p=Object.assign({},c,null==c?void 0:c.userData,{adtData:s}),g=o.vcr.createEmbeddedView(n,p);o.renderer.appendChild(a,g.rootNodes[0])})},e.\u0275fac=function(t){return new(t||e)(o.Y36(o.SBq),o.Y36(o.s_b),o.Y36(o.Qsj))},e.\u0275dir=o.lG2({type:e,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),e}(),i=s(38583),n=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez]]}),e}()},31443:function(e,t,s){s.d(t,{k:function(){return i}});var o=s(37716),r=s(80463);let i=(()=>{class e{constructor(e){this.iziToast=e}successMessage(e,t){this.iziToast.success({title:e,message:t,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}errorMessage(e,t){this.iziToast.error({title:e,message:t,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}infoMessage(e,t){this.iziToast.info({title:e,message:t,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(r.I))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},55652:function(e,t,s){s.r(t),s.d(t,{ProcessAccountClosureModule:function(){return y}});var o=s(38583),r=s(39895);class i{}var n=s(79765),c=s(37716),l=s(3118),a=s(49457),p=s(84487),g=s(91841);const h=l.$.acctCloserUrl;let u=(()=>{class e{constructor(e){this.http=e}gettingAllProcessedRecord(e){return console.log(e),this.http.get(`${h}/api2/getAllProcessedRecordsForBulkAndSingle/${e}`)}approveRecord(e,t,s,o,r,i){return this.http.get(`${h}/medAccount/closeAccount/${e}/${t}/${s}/${o}/${r}/${i}`)}approveRecordForSingle(e,t,s,o,r){return console.log(e,s,o,t),this.http.get(`${h}/medAccount/closeAccountSingle/${e}/${t}/${s}/${o}/${r}`)}exportAsExcel(e,t){console.log(t),console.log(e);const s=p.utils.json_to_sheet(e);s.blankRows=!1;const o=p.write({Sheets:{data:s},SheetNames:["data"]},{bookType:"xlsx",type:"array"});this.saveAsExcelSingle(o,t)}saveAsExcelSingle(e,t){const s=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});a.saveAs(s,t+"_export_"+(new Date).getTime()+".xlsx")}onClickofViewReport(e,t){return this.http.get(`${h}/file/viewReport/${e}/${t}`)}onClickofViewReportSingle(e,t,s,o){return this.http.get(`${h}/api2/viewReportForSingleAcc/${e}/${t}/${s}/${o}`)}onBulkReject(e,t,s,o,r){return console.log(e,t,s,o,r),this.http.get(`${h}/file/rejectBulk/${t}/${e}/${s}/${o}/${r}`)}onSingleReject(e,t,s,o,r){return console.log("in service",e,t,s,o),this.http.get(`${h}/api2/rejectSingle/${e}/${t}/${s}/${o}/${r}`)}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(g.eN))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=s(31443),f=s(17988);function T(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.ALo(9,"date"),c.qZA(),c.TgZ(10,"td"),c._uU(11),c.qZA(),c.TgZ(12,"td"),c.TgZ(13,"button",8),c.NdJ("click",function(){const t=c.CHM(e).index;return c.oxw().approveReason(t,"")}),c._uU(14," Approve "),c.qZA(),c.qZA(),c.TgZ(15,"td"),c.TgZ(16,"button",8),c.NdJ("click",function(){const t=c.CHM(e).index;return c.oxw().RejectReason(t,"")}),c._uU(17," Reject "),c.qZA(),c.qZA(),c.TgZ(18,"td"),c.TgZ(19,"button",9),c.NdJ("click",function(){const t=c.CHM(e),s=t.$implicit,o=t.index;return c.oxw().onClickofViewReport(s.accountType,s.fileName,s.closureType,o)}),c._uU(20," View Report "),c.qZA(),c.qZA(),c.TgZ(21,"td"),c._uU(22),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit,s=t.index,o=c.oxw();c.xp6(2),c.Oqu(e.fileName),c.xp6(2),c.Oqu(e.closureType),c.xp6(2),c.Oqu(e.accountType),c.xp6(2),c.Oqu(c.xi3(9,8,e.inputTime,"medium")),c.xp6(3),c.Oqu(e.status),c.xp6(2),c.Q6J("disabled",e.disabled||e.rejectButtonDisabled||o.flag[s]||o.flag1[s]),c.xp6(3),c.Q6J("disabled",e.rejectButtonDisabled||e.disabled||o.flag2[s]||o.flag3[s]),c.xp6(6),c.Oqu(e.checkerId)}}const b=function(){return["/dashboard"]},m=[{path:"",component:(()=>{class e{constructor(e,t,s){this.processService=e,this.ref=t,this.toastService=s,this.respArray=[],this.dtOptions={},this.dtTrigger=new n.xQ,this.reasonBoolean=[],this.showviewBtn=!1,this.toProcessTheClosureData=["fileName","closureType","accountType","inputTime","status","approve","reject","viewReport","checkerId"],this.excel=[],this.datafinal=[],this.flag=[],this.flag1=[],this.flag2=[],this.flag3=[],this.flagReject=[],this.processAccountClosureRespDTO=new i,this.excelSingle=Array(),this.showProgressBarReject=!1}openDialog(){}ngOnInit(){this.loginUser=localStorage.getItem("userFromLogin"),console.log(this.loginUser),this.gettingAllProcessedRecord(),this.dtOptions={pagingType:"full_numbers",pageLength:5,processing:!0,retrieve:!0,order:[[3,"desc"]],columnDefs:[{type:"date",targets:[3]}],lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]]}}ngOnDestroy(){this.dtTrigger.unsubscribe()}gettingAllProcessedRecord(){console.log("this is display processed record"),this.currentUser=localStorage.getItem("currentUser"),'"'===this.currentUser.charAt(0)&&'"'===this.currentUser.charAt(this.currentUser.length-1)&&(this.currentUser=this.currentUser.substr(1,this.currentUser.length-2)),this.processService.gettingAllProcessedRecord(this.currentUser.toString()).subscribe(e=>{console.log(e),console.log(this.currentUser),this.process=e.map(e=>(e.enableprogressbar=!1,console.log(e.status),Object.assign(Object.assign({},e),{rejectButtonDisabled:"Rejected"===e.status||e.inputBy===this.currentUser,disabled:"APPROVED"===e.status||e.inputBy===this.currentUser}))),this.dtTrigger.next(),console.log(this.process)})}onClickofApprove(e,t){console.log("This is approve"),this.fileName=this.process[e].fileName,this.accountType=this.process[e].accountType,this.inputBy=this.process[e].inputBy,this.id=this.process[e].id,this.closureType=this.process[e].closureType,this.process[e].showprogressbar=!0,console.log(this.process[e]),console.log(this.fileName),"BULK"==this.closureType?(console.log("this url for bulk",this.closureType),this.processService.approveRecord(this.fileName,this.accountType,this.loginUser,this.closureType,this.id,t).subscribe(t=>{console.log(t),t.checkerId&&(this.process[e].checkerId=t.checkerId);let s=t.respMeg;"Processed successfully"==t.respMeg&&(console.log("index is",e),this.flag[e]=!0,console.log("value of flag is",this.flag)),this.toastService.infoMessage(s,""),this.ref.markForCheck(),this.process[e].showprogressbar=!1,null!=t&&(console.log("enabled the process button"),this.process[e].showviewBtn=!0)})):(console.log(" this is for single"),this.processService.approveRecordForSingle(this.accountType,this.loginUser,this.closureType,this.id,t).subscribe(t=>{console.log(t);let s=t.respMeg;t.checkerId&&(this.process[e].checkerId=t.checkerId),"Processed successfully"==t.respMeg&&(console.log("index is",e),this.flag1[e]=!0,console.log("value of flag is",this.flag1)),this.toastService.infoMessage(s,""),null!=t&&(console.log("enabled the process button"),this.process[e].showviewBtn=!0)}))}onClickofViewReport(e,t,s,o){console.log("This is ViewReport"),console.log("process",e,t),"BULK"==s?(console.log("inside bulk excel download"),this.processService.onClickofViewReport(t,e).subscribe(e=>{console.log(e),this.excel=e,console.log(this.excel),this.processService.exportAsExcel(this.excel,"account_closure")})):(console.log("inside single excel download",this.process[o]),console.log(this.process[o].closureType),console.log(this.process[o].accountType),console.log(this.process[o].inputBy),console.log(this.process[o].id),this.processService.onClickofViewReportSingle(this.process[o].accountType,this.process[o].inputBy,this.process[o].closureType,this.process[o].id).subscribe(e=>{console.log(e),this.excelSingle.push(e),console.log(this.excelSingle),this.processService.exportAsExcel(this.excelSingle,"account_closure_Single"),this.excelSingle=[]}))}onclickOfReject(e,t){console.log("on clcik of reject",this.process[e]),this.process[e].enableprogressbar=!0,"BULK"==this.process[e].closureType?(console.log("this is for bulk"),this.processService.onBulkReject(this.process[e].fileName,this.process[e].accountType,this.loginUser,this.process[e].id,t).subscribe(t=>{this.ref.markForCheck(),console.log(t),this.ref.markForCheck(),t&&(console.log("index is",e),this.flag2[e]=!0,console.log("value of flag2 is",this.flag2),this.ref.markForCheck(),this.gettingAllProcessedRecord(),this.toastService.successMessage("Record Rejected successfully",""),this.reasonBoolean[e]=!1,this.ref.markForCheck(),this.process[e].enableprogressbar=!1)})):(console.log("this is for single"),this.processService.onSingleReject(this.process[e].accountNumber,this.process[e].accountType,this.process[e].closureType,this.loginUser,t).subscribe(t=>{this.ref.markForCheck(),console.log(t),this.ref.markForCheck(),t&&(console.log("index is",e),this.flag3[e]=!0,console.log("value of flag3 is",this.flag3),this.ref.markForCheck(),this.gettingAllProcessedRecord(),this.toastService.successMessage("Record Rejected successFully","")),this.reasonBoolean[e]=!1,this.ref.markForCheck()}))}approveReason(e,t){this.reasonBoolean[e]=!0,console.log("enter inside method"),console.log(t)}RejectReason(e,t){this.reasonBoolean[e]=!0,console.log("enter inside method"),console.log(t)}try(e){console.log(e),this.rejectReasonTextArea=e}Reject(e){console.log("rejectReasonTextArea from new method is",this.rejectReasonTextArea);const t=this.rejectReasonTextArea.trim();console.log(t),t?(console.log("valid string"),this.onclickOfReject(e,this.rejectReasonTextArea)):(console.log("invalid string"),this.toastService.infoMessage("Please enter reason for rejection",""))}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(u),c.Y36(c.sBO),c.Y36(d.k))},e.\u0275cmp=c.Xpm({type:e,selectors:[["npr-process-account-closure"]],decls:31,vars:5,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"dbCardStyle","table-responsive"],[1,"col-auto","exitclass"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],["id","dbTable1","datatable","",1,"dataTable","table","tableStyle","nowrap","vAlignMdl",2,"width","100%",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[3,"disabled","click"],[3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"h2",2),c._uU(3,"Process Account Closure"),c.qZA(),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"a",5),c._uU(7,"Exit"),c.qZA(),c.qZA(),c.TgZ(8,"table",6),c.TgZ(9,"thead"),c.TgZ(10,"tr"),c.TgZ(11,"th"),c._uU(12,"file name"),c.qZA(),c.TgZ(13,"th"),c._uU(14,"closure type"),c.qZA(),c.TgZ(15,"th"),c._uU(16,"account type"),c.qZA(),c.TgZ(17,"th"),c._uU(18,"upload date"),c.qZA(),c.TgZ(19,"th"),c._uU(20,"status"),c.qZA(),c.TgZ(21,"th"),c._uU(22,"approve"),c.qZA(),c.TgZ(23,"th"),c._uU(24,"reject"),c.qZA(),c.TgZ(25,"th"),c._uU(26,"view report"),c.qZA(),c.TgZ(27,"th"),c._uU(28,"checker id"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(29,"tbody"),c.YNc(30,T,23,11,"tr",7),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(6),c.Q6J("routerLink",c.DdM(4,b)),c.xp6(2),c.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),c.xp6(22),c.Q6J("ngForOf",t.process))},directives:[r.yS,f.G,o.sg],pipes:[o.uU],styles:[".exitclass[_ngcontent-%COMP%]{padding-left:90%;padding-bottom:2%}"]}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[r.Bz.forChild(m)],r.Bz]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[o.ez,v,f.T]]}),e})()}}]);