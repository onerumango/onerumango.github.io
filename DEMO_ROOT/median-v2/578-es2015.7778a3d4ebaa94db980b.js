"use strict";(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[578],{91973:function(e,t,i){i.d(t,{Z:function(){return p}});var s=i(91841),a=i(3118),n=i(79765),o=i(26215),r=i(37716);const l=a.$.baseURL;let p=(()=>{class e{constructor(e){this.http=e,this.api="http://192.168.0.14:8082",this.subject=new n.xQ,this.Index=new o.X({index:""}),this.Reference=new o.X({referenceId:""}),this.paramSource=new o.X({}),this.getNavParam=this.paramSource.asObservable()}setIndex(e){this.Index.next(e)}getIndex(){return this.Index.asObservable()}setReference(e){this.Reference.next(e)}getReference(){return this.Reference.asObservable()}submittingAddSystem(e,t){return this.http.post(`${l}/newExtApi/create/${t}`,e)}fecthingAddSystem(){return this.http.get(`${l}/newExtApi/getAllExternalSys/?pageNo=0&pageSize=1000`)}editaddsystem(e,t,i){return this.http.put(`${l}/newExtApi/${e}/${t}`,i)}fetchingAddSysBasedonId(e){return this.http.get(`${l}/newExtApi/getExternalSysDetails/${e}`)}deleteingAddSystem(){return this.http.delete(`${l}//`)}sendingAddSystemDataToEditScreen(e){this.subject.next(e)}editruleTranslation(e,t,i){return this.http.put(`${l}/msgApi/${e}/${t}`,i)}deleteRuleTranslation(e,t){return t=(new s.LE).append("transId",t),console.log("tra",t),this.http.delete(`${l}/msgApi/deleteRecord/${e}`,{params:t})}deleteAddSystem(e,t){return this.http.delete(`${l}/newExtApi/delete/${e}?systemId=${t}`)}getEditOfAddSystem(){return this.subject.asObservable()}sendNavParam(e){this.paramSource.next(e)}onAuthofAddSystem(e,t){return this.http.put(`${l}/newExtApi/authorizetherecord/${t}`,e)}onCloseOfAddSystem(e,t){return this.http.put(`${l}/newExtApi/toClosingTheRecord/${t}`,e)}onopenOfAddSystem(e,t){return this.http.put(`${l}/newExtApi/closeRecord/${t}`,e)}onDeleteAddSystem(e,t){return this.http.put(`${l}/newExtApi/delete/${t}`,e)}gettingHederofXMl(e){var t=new FormData;return t.append("file",e),t.append("key","header"),console.log(t),this.http.post(`${l}/convertMsg/convertXmlToNodeTagList`,t)}gettingBodyOfXml(e){var t=new FormData;return t.append("file",e),t.append("key","body"),console.log(t),this.http.post(`${l}/convertMsg/convertXmlToNodeTagList`,t)}selectFileFORHTTPXMLIncoming(e){var t=new FormData;return t.append("file",e),this.http.post(`${l}/file/getHeaders`,t)}fetchingXMLandHttp(){return this.http.get(`${l}/msgApi/getXmlMsgField`)}fetchingIsoForTcp(){return this.http.get(`${l}/msgApi/getIsoMsgField`)}gettinXMLmsgIncoming(){return this.http.get(`${l}/msgApi/getXmlMsgField`)}pingDataSource(e,t,i,s){let a=btoa(s);return this.http.get(`${l}/db/ping/${e}/${t}/${i}/${a}`)}coulmnNameBasedonTableName(e,t,i,s,a){let n=btoa(s);return this.http.get(`${l}/db/ping/${e}/${t}/${i}/${n}/${a}`)}fetchingHeaderTag(){return this.http.get(`${l}/newExtApi/getAllHeadTag`)}validateCode(e){return this.http.get(`${l}/newExtApi/addSystem/validateCode/${e}`)}validatePort(e){return this.http.post(`${l}/newExtApi/validate/addSystem`,e)}conversionApi(){return this.http.get(`${this.api}/MessageConverter/MT-MX`)}getMxApi(){return this.http.get(`${this.api}/MessageConverter/MXBodyInfo`)}getMtApi(){return this.http.get(`${this.api}/MessageConverter/MTBodyInfo`)}getIncomingOutgoingSummary(e){return this.http.get(`${this.api}/MessageConverter/fetchSummaryData?reqType=${e}`)}getRequestRespBody(e,t){return this.http.get(`${this.api}/MessageConverter/fetchReqRes?reqType=${e}&referenceId=${t}`)}fetchTableName(e){return this.http.post(`${l}/newExtApi/validate/addSystem`,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(s.eN))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},31443:function(e,t,i){i.d(t,{k:function(){return n}});var s=i(37716),a=i(80463);let n=(()=>{class e{constructor(e){this.iziToast=e}successMessage(e,t){this.iziToast.success({title:e,message:t,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}errorMessage(e,t){this.iziToast.error({title:e,message:t,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}infoMessage(e,t){this.iziToast.info({title:e,message:t,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(a.I))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},20578:function(e,t,i){i.r(t),i.d(t,{RuleMappingModule:function(){return Xt}});var s=i(38583),a=i(39895),n=i(50215),o=i(3679),r=i(79765),l=i(88259),p=i.n(l),d=i(37716),u=i(50511),c=i(91973);function g(e,t){1&e&&d._UZ(0,"th")}function h(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"td"),d.TgZ(1,"button",15),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).process()}),d._uU(2," Process "),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(2);d.xp6(1),d.Q6J("disabled",!e.conversionForm.valid)}}function m(e,t){if(1&e&&(d.TgZ(0,"table",10),d.TgZ(1,"thead"),d.TgZ(2,"tr"),d.TgZ(3,"th"),d._uU(4,"Request"),d.qZA(),d.YNc(5,g,1,0,"th",11),d.TgZ(6,"th"),d._uU(7,"Response"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"tbody"),d.TgZ(9,"tr",12),d.TgZ(10,"td"),d.TgZ(11,"textarea",13),d._uU(12),d.qZA(),d.qZA(),d.YNc(13,h,3,1,"td",11),d.TgZ(14,"td"),d.TgZ(15,"textarea",14),d._uU(16),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(5),d.Q6J("ngIf",""==e.referenceId),d.xp6(7),d.Oqu(e.dataReq),d.xp6(1),d.Q6J("ngIf",""==e.referenceId),d.xp6(3),d.Oqu(e.dataResp)}}function Z(e,t){1&e&&d._UZ(0,"th")}function f(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"td"),d.TgZ(1,"button",15),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).process()}),d._uU(2," Process "),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(2);d.xp6(1),d.Q6J("disabled",!e.conversionForm.valid)}}function T(e,t){if(1&e&&(d.TgZ(0,"table",10),d.TgZ(1,"thead"),d.TgZ(2,"tr"),d.TgZ(3,"th"),d._uU(4,"Request"),d.qZA(),d.YNc(5,Z,1,0,"th",11),d.TgZ(6,"th"),d._uU(7,"Response"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"tbody"),d.TgZ(9,"tr",12),d.TgZ(10,"td"),d.TgZ(11,"textarea",14),d._uU(12),d.qZA(),d.qZA(),d.YNc(13,f,3,1,"td",11),d.TgZ(14,"td"),d.TgZ(15,"textarea",13),d._uU(16),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(5),d.Q6J("ngIf",""==e.referenceId),d.xp6(7),d.Oqu(e.dataResp),d.xp6(1),d.Q6J("ngIf",""==e.referenceId),d.xp6(3),d.Oqu(e.dataReq)}}const v=function(){return["/rule-mapping/summary"]};let A=(()=>{class e{constructor(e,t,i,s){this.rulelist=e,this.router=t,this.addSystem=i,this.fb=s,this.dtTrigger=new r.xQ,this.dtOptions={},this.ruleMappingListResp=[],this.dataReq="6547457"}ngOnInit(){this.link=localStorage.getItem("link"),this.addSystem.getReference().subscribe(e=>{console.log(e.referenceId),null==e.referenceId&&(e.referenceI=""),this.referenceId=e.referenceId,""!=this.referenceId&&this.getRespAndRequest()}),this.conversionForm=this.fb.group({FCUBS_HEADER:["",o.kI.required]})}getRespAndRequest(){var e=new XMLHttpRequest;e.open("GET",`http://192.168.0.14:8082/MessageConverter/fetchReqRes?reqType=incoming&referenceNo=${this.referenceId}`);var t=this;e.onreadystatechange=function(){4==e.readyState&&200==e.status?(console.log(e),t.conversionForm.get("FCUBS_HEADER").setValue(this.response)):4==e.readyState&&400==e.status&&p().fire({text:"Provided Input is incorrect",icon:"error"})},e.setRequestHeader("Content-Type","application/xml"),e.send("");var i=new XMLHttpRequest;i.open("GET",`http://192.168.0.14:8082/MessageConverter/fetchReqRes?reqType=outgoing&referenceNo=${this.referenceId}`);var s=this;i.onreadystatechange=function(){4==i.readyState&&200==i.status?(console.log(i),s.dataResp=this.response):4==i.readyState&&400==i.status&&p().fire({text:"Provided Input is incorrect",icon:"error"})},i.setRequestHeader("Content-Type","application/xml"),i.send("")}process(){var e=new XMLHttpRequest;e.open("POST","http://192.168.0.14:8082/MessageConverter/MT-MX?mx=PAC008&mt=103");var t=this;e.onreadystatechange=function(){4==e.readyState&&200==e.status?(console.log(e),t.dataResp=this.response):4==e.readyState&&400==e.status&&p().fire({text:"Provided Input is incorrect",icon:"error"})},e.setRequestHeader("Content-Type","application/xml"),e.send(this.conversionForm.value.FCUBS_HEADER)}onSelect(e){this.conversionForm.get("FCUBS_HEADER").setValue(""),this.dataResp=null}ngOnDestroy(){this.dtTrigger.unsubscribe()}exit(){"incoming"==this.link&&this.router.navigate(["/incoming"]),"outgoing"==this.link&&this.router.navigate(["/outgoing"]),""==this.link&&this.router.navigate(["/rule-mapping/summary"]),this.addSystem.setReference({referenceId:""})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(u.Q),d.Y36(a.F0),d.Y36(c.Z),d.Y36(o.qu))},e.\u0275cmp=d.Xpm({type:e,selectors:[["npr-conversion"]],decls:13,vars:5,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"dbCardStyle"],[1,"row","g-3","pb-3","justify-content-end"],["novalidate","",3,"formGroup"],["style","width: 100%",4,"ngIf"],[1,"row","g-3","pb-3","justify-content-end","pt-3"],[1,"col-auto"],["routerLinkActive","router-link-active",1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink","click"],[2,"width","100%"],[4,"ngIf"],[2,"margin-top","2%"],["id","exampleFormControlTextarea1","rows","15","formControlName","FCUBS_HEADER",1,"form-control","rounded-0",2,"width","98%"],["id","exampleFormControlTextarea1","rows","15",1,"form-control","rounded-0",2,"width","98%"],[1,"btn","smBtn","minWdSmBtn","btnPrimary","buttonClass",3,"disabled","click"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"h2",2),d._uU(3,"Conversion"),d.qZA(),d.qZA(),d.TgZ(4,"div",3),d._UZ(5,"div",4),d.TgZ(6,"form",5),d.YNc(7,m,17,4,"table",6),d.YNc(8,T,17,4,"table",6),d.qZA(),d.qZA(),d.TgZ(9,"div",7),d.TgZ(10,"div",8),d.TgZ(11,"a",9),d.NdJ("click",function(){return t.exit()}),d._uU(12,"Exit"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(6),d.Q6J("formGroup",t.conversionForm),d.xp6(1),d.Q6J("ngIf","incoming"==t.link||""==t.link),d.xp6(1),d.Q6J("ngIf","outgoing"==t.link),d.xp6(3),d.Q6J("routerLink",d.DdM(4,v)))},directives:[o._Y,o.JL,o.sg,s.O5,a.yS,a.Od,o.Fj,o.JJ,o.u],styles:[".buttonClass[_ngcontent-%COMP%]{display:flex;margin:auto}.inputTextArea[_ngcontent-%COMP%]{font-size:12px}"]}),e})();var S=i(35383),y=i(77382),x=i(31443),q=i(24376);function b(e,t){if(1&e&&(d.TgZ(0,"ng-option",27),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw();d.Q6J("value",e)("hidden",e==i.sourseSys),d.xp6(1),d.hij(" ",e," ")}}function D(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"select",28),d.NdJ("change",function(t){return d.CHM(e),d.oxw().onSelectionOFMessageType(t)}),d.TgZ(2,"option",14),d._uU(3,"--Please select--"),d.qZA(),d.TgZ(4,"option",29),d._uU(5," Incoming "),d.qZA(),d.TgZ(6,"option",30),d._uU(7," Outgoing "),d.qZA(),d.qZA(),d.qZA()}}function R(e,t){1&e&&(d.TgZ(0,"div"),d._UZ(1,"input",31),d.qZA())}function M(e,t){if(1&e&&(d.TgZ(0,"option",34),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.headerValue),d.xp6(1),d.hij(" ",e.headerValue," ")}}function C(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"select",32),d.TgZ(2,"option",14),d._uU(3,"--Please select--"),d.qZA(),d.YNc(4,M,2,2,"option",33),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(4),d.Q6J("ngForOf",e.translationDataOperation)}}function N(e,t){1&e&&(d.TgZ(0,"div"),d._UZ(1,"input",35),d.qZA())}function I(e,t){if(1&e&&(d.TgZ(0,"option",34),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.headerValue),d.xp6(1),d.hij(" ",e.headerValue," ")}}function O(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"select",36),d.TgZ(2,"option",14),d._uU(3,"--Please select--"),d.qZA(),d.YNc(4,I,2,2,"option",33),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(4),d.Q6J("ngForOf",e.translationDataService)}}function U(e,t){1&e&&(d.TgZ(0,"div"),d._UZ(1,"input",37),d.qZA())}function w(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"select",28),d.NdJ("change",function(t){return d.CHM(e),d.oxw().msgTypeOfDestination(t)}),d.TgZ(2,"option",14),d._uU(3,"--Please select--"),d.qZA(),d.TgZ(4,"option",29),d._uU(5," Incoming "),d.qZA(),d.TgZ(6,"option",30),d._uU(7," Outgoing "),d.qZA(),d.qZA(),d.qZA()}}function E(e,t){1&e&&(d.TgZ(0,"div"),d._UZ(1,"input",31),d.qZA())}function _(e,t){if(1&e&&(d.TgZ(0,"option",34),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.headerValue),d.xp6(1),d.hij(" ",e.headerValue," ")}}function F(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"select",32),d.TgZ(2,"option",14),d._uU(3,"--Please select--"),d.qZA(),d.YNc(4,_,2,2,"option",33),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(4),d.Q6J("ngForOf",e.translationDestDataOperation)}}function J(e,t){1&e&&(d.TgZ(0,"div"),d._UZ(1,"input",35),d.qZA())}function Q(e,t){if(1&e&&(d.TgZ(0,"option",34),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.headerValue),d.xp6(1),d.hij(" ",e.headerValue," ")}}function B(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"select",36),d.TgZ(2,"option",14),d._uU(3,"--Please select--"),d.qZA(),d.YNc(4,Q,2,2,"option",33),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(4),d.Q6J("ngForOf",e.translationDestDataService)}}function Y(e,t){1&e&&(d.TgZ(0,"div"),d._UZ(1,"input",37),d.qZA())}function k(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Source System"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function L(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Field No"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function H(e,t){if(1&e&&(d.TgZ(0,"option",52),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("hidden",i.try(e.messagebasis))("value",e.messagebasis),d.xp6(1),d.Oqu(e.messagebasis)}}function P(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,L,4,0,"label",46),d.TgZ(2,"select",50),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onselectOfFieldNo(t,i)}),d.YNc(3,H,2,3,"option",51),d.qZA(),d.BQk()}if(2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(2),d.Q6J("ngForOf",t.updateRuleMappingSrc)}}function $(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Key"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function V(e,t){if(1&e&&(d.TgZ(0,"option",52),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("hidden",i.try(e.messagebasis))("value",e.messagebasis),d.xp6(1),d.Oqu(e.messagebasis)}}function j(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,$,4,0,"label",46),d.TgZ(2,"select",50),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onselectOfFieldNo(t,i)}),d.YNc(3,V,2,3,"option",51),d.qZA(),d.BQk()}if(2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(2),d.Q6J("ngForOf",t.updateRuleMappingSrc)}}function z(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Tag"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function K(e,t){if(1&e&&(d.TgZ(0,"option",52),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("hidden",i.try(e.messagebasis))("value",e.messagebasis),d.xp6(1),d.Oqu(e.messagebasis)}}function X(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,z,4,0,"label",46),d.TgZ(2,"select",50),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onselectOfFieldNo(t,i)}),d.YNc(3,K,2,3,"option",51),d.qZA(),d.BQk()}if(2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(2),d.Q6J("ngForOf",t.updateRuleMappingSrc)}}function G(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Column Name"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function W(e,t){if(1&e&&(d.TgZ(0,"option",52),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("hidden",i.try(e.messagebasis))("value",e.messagebasis),d.xp6(1),d.Oqu(e.messagebasis)}}function ee(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,G,4,0,"label",46),d.TgZ(2,"select",50),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onselectOfFieldNo(t,i)}),d.YNc(3,W,2,3,"option",51),d.qZA(),d.BQk()}if(2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(2),d.Q6J("ngForOf",t.updateRuleMappingSrc)}}function te(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Field No"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function ie(e,t){if(1&e&&(d.TgZ(0,"option",34),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.messagebasis),d.xp6(1),d.Oqu(e.messagebasis)}}function se(e,t){if(1&e&&(d.ynx(0),d.YNc(1,te,4,0,"label",46),d.TgZ(2,"select",53),d.YNc(3,ie,2,2,"option",33),d.qZA(),d.BQk()),2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(2),d.Q6J("ngForOf",t.updateRuleMappingSrc)}}function ae(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Destination system"),d.qZA())}function ne(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Field No"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function oe(e,t){if(1&e&&(d.TgZ(0,"option",52),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("hidden",i.try2(e.messagebasis))("value",e.messagebasis),d.xp6(1),d.hij(" ",e.messagebasis,"")}}function re(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,ne,4,0,"label",46),d.TgZ(2,"select",54),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onselectOfFieldNo2(t,i)}),d.YNc(3,oe,2,3,"option",51),d.qZA(),d.BQk()}if(2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(2),d.Q6J("ngForOf",t.updateRuleMappingDest)}}function le(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Key"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function pe(e,t){if(1&e&&(d.TgZ(0,"option",52),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("hidden",i.try2(e.messagebasis))("value",e.messagebasis),d.xp6(1),d.hij(" ",e.messagebasis,"")}}function de(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,le,4,0,"label",46),d.TgZ(2,"select",54),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onselectOfFieldNo2(t,i)}),d.YNc(3,pe,2,3,"option",51),d.qZA(),d.BQk()}if(2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(2),d.Q6J("ngForOf",t.updateRuleMappingDest)}}function ue(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Tag"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function ce(e,t){if(1&e&&(d.TgZ(0,"option",52),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("hidden",i.try2(e.messagebasis))("value",e.messagebasis),d.xp6(1),d.hij(" ",e.messagebasis,"")}}function ge(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,ue,4,0,"label",46),d.TgZ(2,"select",54),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onselectOfFieldNo2(t,i)}),d.YNc(3,ce,2,3,"option",51),d.qZA(),d.BQk()}if(2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(2),d.Q6J("ngForOf",t.updateRuleMappingDest)}}function he(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Column Name"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function me(e,t){if(1&e&&(d.TgZ(0,"option",52),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("hidden",i.try2(e.messagebasis))("value",e.messagebasis),d.xp6(1),d.Oqu(e.messagebasis)}}function Ze(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,he,4,0,"label",46),d.TgZ(2,"select",54),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onselectOfFieldNo2(t,i)}),d.YNc(3,me,2,3,"option",51),d.qZA(),d.BQk()}if(2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(2),d.Q6J("ngForOf",t.updateRuleMappingDest)}}function fe(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Field No"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function Te(e,t){if(1&e&&(d.TgZ(0,"option",34),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.messagebasis),d.xp6(1),d.Oqu(e.messagebasis)}}function ve(e,t){if(1&e&&(d.ynx(0),d.YNc(1,fe,4,0,"label",46),d.TgZ(2,"select",55),d.YNc(3,Te,2,2,"option",33),d.qZA(),d.BQk()),2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(2),d.Q6J("ngForOf",t.updateRuleMappingDest)}}function Ae(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Default value"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}const Se=function(e){return{"first-image":e,image:!0}};function ye(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"a",56),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().index;return d.oxw(2).deleteRuleMapGroup(t)}),d._UZ(1,"img",57),d.qZA()}if(2&e){const e=d.oxw().index;d.xp6(1),d.Q6J("ngClass",d.VKq(1,Se,0===e))}}const xe=function(e){return{first:e,"form-control":!0,path:!0}};function qe(e,t){if(1&e&&(d.ynx(0),d.ynx(1,42),d.TgZ(2,"div",43),d.TgZ(3,"div",8),d.TgZ(4,"div",44),d.TgZ(5,"div",45),d.YNc(6,k,4,0,"label",46),d.TgZ(7,"div",44),d.TgZ(8,"div",47),d.YNc(9,P,4,2,"ng-container",16),d.YNc(10,j,4,2,"ng-container",16),d.YNc(11,X,4,2,"ng-container",16),d.YNc(12,ee,4,2,"ng-container",16),d.YNc(13,se,4,2,"ng-container",16),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"div",45),d.YNc(15,ae,2,0,"label",46),d.TgZ(16,"div",44),d.TgZ(17,"div",47),d.YNc(18,re,4,2,"ng-container",16),d.YNc(19,de,4,2,"ng-container",16),d.YNc(20,ge,4,2,"ng-container",16),d.YNc(21,Ze,4,2,"ng-container",16),d.YNc(22,ve,4,2,"ng-container",16),d.qZA(),d.qZA(),d.qZA(),d.TgZ(23,"div",45),d.YNc(24,Ae,4,0,"label",46),d.TgZ(25,"div",44),d.TgZ(26,"div",47),d.ynx(27),d._UZ(28,"input",48),d.BQk(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(29,"div",45),d.TgZ(30,"div"),d.YNc(31,ye,2,3,"a",49),d.qZA(),d.qZA(),d.qZA(),d.BQk(),d.BQk()),2&e){const e=t.index,i=d.oxw(2);d.xp6(1),d.Q6J("formGroupName",e),d.xp6(5),d.Q6J("ngIf",0==e),d.xp6(3),d.Q6J("ngIf","TCP/IP"==i.sourceLabel),d.xp6(1),d.Q6J("ngIf","JSON"==i.sourceLabel),d.xp6(1),d.Q6J("ngIf","XML"==i.sourceLabel),d.xp6(1),d.Q6J("ngIf","DB Connection"==i.sourceLabel),d.xp6(1),d.Q6J("ngIf","MT"==i.sourceLabel||"MX"==i.sourceLabel),d.xp6(2),d.Q6J("ngIf",0==e),d.xp6(3),d.Q6J("ngIf","TCP/IP"==i.labelsDestination),d.xp6(1),d.Q6J("ngIf","JSON"==i.labelsDestination),d.xp6(1),d.Q6J("ngIf","XML"==i.labelsDestination),d.xp6(1),d.Q6J("ngIf","DB Connection"==i.labelsDestination),d.xp6(1),d.Q6J("ngIf","MT"==i.labelsDestination||"MX"==i.labelsDestination),d.xp6(2),d.Q6J("ngIf",0==e),d.xp6(4),d.Q6J("ngClass",d.VKq(16,xe,0===e)),d.xp6(3),d.Q6J("ngIf",i.submit)}}function be(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"a",58),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).addRuleDetail()}),d.TgZ(1,"span"),d._UZ(2,"img",59),d.qZA(),d.qZA()}}function De(e,t){if(1&e&&(d.TgZ(0,"div",5),d.TgZ(1,"div",38),d.YNc(2,qe,32,18,"ng-container",39),d.qZA(),d.TgZ(3,"div",40),d.TgZ(4,"div"),d.YNc(5,be,3,0,"a",41),d.qZA(),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(2),d.Q6J("ngForOf",e.rulemappingDetail.controls),d.xp6(3),d.Q6J("ngIf",e.submit)}}function Re(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",60),d.TgZ(1,"button",61),d.NdJ("click",function(){return d.CHM(e),d.oxw().editValues()}),d._uU(2),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.Q6J("hidden",e.submit),d.xp6(2),d.hij(" ",e.roleCodes.edit.labelDescription," ")}}function Me(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",60),d.TgZ(1,"button",62),d.NdJ("click",function(){return d.CHM(e),d.oxw().auditChangeRuleTranslation("auth")}),d._uU(2),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.Q6J("hidden",e.hideFetch),d.xp6(2),d.Oqu(e.roleCodes.auth.labelDescription)}}function Ce(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",60),d.TgZ(1,"button",63),d.NdJ("click",function(){return d.CHM(e),d.oxw().auditChangeRuleTranslation("close")}),d._uU(2),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.Q6J("hidden",e.hideFetch),d.xp6(2),d.Oqu(e.roleCodes.close.labelDescription)}}function Ne(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",60),d.TgZ(1,"button",63),d.NdJ("click",function(){return d.CHM(e),d.oxw().auditChangeRuleTranslation("open")}),d._uU(2),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.Q6J("hidden",e.hideFetch),d.xp6(2),d.Oqu(e.roleCodes.reopen.labelDescription)}}function Ie(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",60),d.TgZ(1,"button",63),d.NdJ("click",function(){return d.CHM(e),d.oxw().deleteRuleMapping()}),d._uU(2),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.Q6J("hidden",e.hideFetch),d.xp6(2),d.Oqu(e.roleCodes.delete.labelDescription)}}function Oe(e,t){if(1&e&&(d.TgZ(0,"div",64),d.TgZ(1,"div",65),d.TgZ(2,"div",66),d.TgZ(3,"div",67),d.TgZ(4,"div",68),d.TgZ(5,"div",23),d.TgZ(6,"div",69),d._UZ(7,"i",70),d.qZA(),d.qZA(),d.TgZ(8,"div",8),d.TgZ(9,"div",71),d.TgZ(10,"h2"),d._uU(11,"Maker"),d.qZA(),d.TgZ(12,"p"),d._uU(13),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"div",66),d.TgZ(15,"div",67),d.TgZ(16,"div",68),d.TgZ(17,"div",23),d.TgZ(18,"div",72),d._UZ(19,"img",73),d.qZA(),d.qZA(),d.TgZ(20,"div",8),d.TgZ(21,"div",71),d.TgZ(22,"h2"),d._uU(23,"Maker Time Stamp"),d.qZA(),d.TgZ(24,"p"),d._uU(25),d.ALo(26,"date"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(27,"div",66),d.TgZ(28,"div",67),d.TgZ(29,"div",68),d.TgZ(30,"div",23),d.TgZ(31,"div",74),d._UZ(32,"i",75),d.qZA(),d.qZA(),d.TgZ(33,"div",8),d.TgZ(34,"div",71),d.TgZ(35,"h2"),d._uU(36,"Record Status"),d.qZA(),d.TgZ(37,"p"),d._uU(38),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(39,"div",66),d.TgZ(40,"div",67),d.TgZ(41,"div",68),d.TgZ(42,"div",23),d.TgZ(43,"div",76),d._UZ(44,"i",77),d.qZA(),d.qZA(),d.TgZ(45,"div",8),d.TgZ(46,"div",71),d.TgZ(47,"h2"),d._uU(48,"Checker"),d.qZA(),d.TgZ(49,"p"),d._uU(50),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(51,"div",66),d.TgZ(52,"div",67),d.TgZ(53,"div",68),d.TgZ(54,"div",23),d.TgZ(55,"div",78),d._UZ(56,"img",79),d.qZA(),d.qZA(),d.TgZ(57,"div",8),d.TgZ(58,"div",71),d.TgZ(59,"h2"),d._uU(60,"Checker Time Stamp"),d.qZA(),d.TgZ(61,"p"),d._uU(62),d.ALo(63,"date"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(64,"div",66),d.TgZ(65,"div",67),d.TgZ(66,"div",68),d.TgZ(67,"div",23),d.TgZ(68,"div",80),d._UZ(69,"img",81),d.qZA(),d.qZA(),d.TgZ(70,"div",8),d.TgZ(71,"div",71),d.TgZ(72,"h2"),d._uU(73,"First Time Authorization"),d.qZA(),d.TgZ(74,"p"),d._uU(75),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(76,"div",66),d.TgZ(77,"div",67),d.TgZ(78,"div",68),d.TgZ(79,"div",23),d.TgZ(80,"div",82),d._UZ(81,"i",83),d.qZA(),d.qZA(),d.TgZ(82,"div",8),d.TgZ(83,"div",71),d.TgZ(84,"h2"),d._uU(85,"Authorization Status"),d.qZA(),d.TgZ(86,"p"),d._uU(87),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(88,"div",66),d.TgZ(89,"div",67),d.TgZ(90,"div",68),d.TgZ(91,"div",23),d.TgZ(92,"div",78),d._UZ(93,"img",84),d.qZA(),d.qZA(),d.TgZ(94,"div",8),d.TgZ(95,"div",71),d.TgZ(96,"h2"),d._uU(97,"Modification Number"),d.qZA(),d.TgZ(98,"p"),d._uU(99),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(13),d.Oqu(null==e.addSysRespData?null:e.addSysRespData.creatorId),d.xp6(12),d.Oqu(d.xi3(26,8,null==e.addSysRespData?null:e.addSysRespData.createdTime,"MM/dd/yyyy, h:mm a")),d.xp6(13),d.Oqu("O"==(null==e.addSysRespData?null:e.addSysRespData.recordStatus)?"OPEN":"C"==(null==e.addSysRespData?null:e.addSysRespData.recordStatus)?"CLOSED":null==e.addSysRespData?null:e.addSysRespData.recordStatus),d.xp6(12),d.Oqu(null==e.addSysRespData?null:e.addSysRespData.approverId),d.xp6(12),d.Oqu(d.xi3(63,11,null==e.addSysRespData?null:e.addSysRespData.approvedTime,"MM/dd/yyyy, h:mm a")),d.xp6(13),d.Oqu("N"==(null==e.addSysRespData?null:e.addSysRespData.approvedEver)?"NO":"Y"==(null==e.addSysRespData?null:e.addSysRespData.approvedEver)?"YES":null==e.addSysRespData?null:e.addSysRespData.approvedEver),d.xp6(12),d.Oqu("N"==(null==e.addSysRespData?null:e.addSysRespData.approvedStatus)||"U"==(null==e.addSysRespData?null:e.addSysRespData.approvedStatus)?"UNAUTHORIZED":"Y"==(null==e.addSysRespData?null:e.addSysRespData.approvedStatus)||"A"==(null==e.addSysRespData?null:e.addSysRespData.approvedStatus)?"AUTHORIZED":null==e.addSysRespData?null:e.addSysRespData.approvedStatus),d.xp6(12),d.Oqu(null==e.addSysRespData?null:e.addSysRespData.versionNo)}}const Ue=function(){return["/rule-mapping/summary"]};let we=(()=>{class e{constructor(e,t,i,s,a,n,o,l,p){this.rulemap=e,this.router=t,this.roleService=i,this.fb=s,this.addSystem=a,this.formBuilder=n,this.cdr=o,this.toastService=l,this.canDeactivateGuard=p,this.fieldNoData=[],this.disableFetchBtn=!1,this.disableSubmitBtn=!1,this.disableResetBtn=!1,this.showAuditLog=!1,this.isSelected=!0,this.hideFetch=!1,this.hideSubmit=!1,this.fieldValueData=[],this.showFieldNoValue=1,this.xmlLength=[],this.temparray=[],this.tempArrayList=[],this.tempArrayList2=[],this.rulemappingDest=new Ee,this.mappingObj=new Ee,this.messageBasisIso=[],this.destinationData=[],this.sourceData=[],this.ruleDto=new _e,this.afterSubmit=!1,this.submit=!0,this.roleCodes=new S.yv,this.formTouched=!0,this.showDialog=!1,this.subject=new r.xQ,this.externalCreateSystemFiltered=[],this.sourceMsg=!0,this.destinationMsg=!0,this.multipleOperation=!0,this.multipleService=!0}ngOnInit(){this.currentUser=localStorage.getItem("userFromLogin"),this.gettingExternalsystem(),this.ruleMappingForm=this.formBuilder.group({systemCode:["",o.kI.required],messageType:["",o.kI.required],serviceName:["",o.kI.required],operationName:["",o.kI.required],destinationSystems:this.getDestinationItem(),rulemappingDetail:this.formBuilder.array([])}),this.addRuleDetail(),this.fetchingIso(),this.roleService.fetchScreenPermissions("Rule Mapping"),this.roleService.screenLabelList.subscribe(e=>this.roleCodes=e),setTimeout(()=>{console.log(this.roleCodes)},100)}getDestinationItem(){return this.formBuilder.group({systemCode:["",o.kI.required],messageType:["",o.kI.required],serviceName:["",o.kI.required],operationName:["",o.kI.required]})}canExit(){let e=!1;return this.ruleMappingForm.touched&&1==this.formTouched?p().fire({text:"There are unsaved changes in the screen. Would you like to navigate to other screen?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(t=>!0===t.isConfirmed?(e=!0,this.cdr.markForCheck(),e):(e=!1,this.cdr.markForCheck(),e)):(e=!0,new Promise((t,i)=>{!0===e&&(e=!0,this.cdr.markForCheck(),t(!0))}))}auditChangeRuleTranslation(e){let t="",i="";switch(e){case"open":t="opened",i="open";break;case"close":t="closed",i="close";break;case"auth":t="authorized",i="authorize"}p().fire({text:`You are trying to ${i} record.  Do you want to proceed?`,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(s=>{if(!0===s.isConfirmed)if(this.currentUser==this.addSysRespData.creatorId)p().fire(`Maker cannot ${i} the record!`);else{let i={};i=this.ruleMappingDataForPayload,i.msgMappingDetails=this.rulemappingDetail,this.rulemap.editRuleMapping(e,this.currentUser,i).subscribe(e=>{this.addSysRespData=e,p().fire({text:`Record is ${t}`})})}})}deleteRuleMapping(){p().fire({text:"You are trying to delete record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(e=>{console.log("this is reopen ",e),!0===e.isConfirmed&&this.rulemap.ondeleteMapping(this.addSysRespData.mappingId,this.currentUser).subscribe(e=>{e?p().fire({title:"Record is Deleted",confirmButtonText:"Ok"}).then(e=>{e&&this.router.navigateByUrl("/rule-mapping/summary")}):p().fire("Failed to delete the reocrd")})})}editValues(){this.hideFetch=!0,this.hideSubmit=!0,this.submit=!0,this.ruleMappingForm.enable()}auditLog(){("U"==this.addSysRespData.authStatus||"Unauthorized"==this.addSysRespData.authStatus)&&(this.addSysRespData.authStatus="UNAUTHORIZED"),("A"==this.addSysRespData.authStatus||"Authorized"==this.addSysRespData.authStatus)&&(this.addSysRespData.authStatus="AUTHORIZED"),("O"==this.addSysRespData.recordStatus||"Open"==this.addSysRespData.recordStatus)&&(this.addSysRespData.recordStatus="OPEN"),("C"==this.addSysRespData.recordStatus||"Close"==this.addSysRespData.recordStatus)&&(this.addSysRespData.recordStatus="CLOSED"),("N"==this.addSysRespData.approvedEver||"No"==this.addSysRespData.approvedEver)&&(this.addSysRespData.approvedEver="NO"),"Y"==this.addSysRespData.approvedEver&&(this.addSysRespData.approvedEver="YES")}getRuleMappingDetail(){return this.formBuilder.group({id:[""],defaultValue:["",o.kI.required],messageMappingId:[""],sourceTransDetId:[""],targetTransDetId:[""],sourceKey:["",o.kI.required],destinationKey:["",o.kI.required]})}indexTracker(e,t){return e}get rulemappingDetail(){return this.ruleMappingForm.get("rulemappingDetail")}addRuleDetail(){this.rulemappingDetail.push(this.getRuleMappingDetail()),console.log(this.rulemappingDetail.value)}deleteRuleMapGroup(e){this.tempArrayList[e]&&this.tempArrayList.splice(e,1),this.tempArrayList2[e]&&this.tempArrayList2.splice(e,1),this.rulemappingDetail.removeAt(e)}gettingExternalsystem(){this.rulemap.gettingExternalsystem().subscribe(e=>{console.log(e),this.externalSystem=e.sort(),this.sourcesysdata=this.externalSystem,this.temparray=this.externalSystem,this.externalCreateSystemFiltered=this.externalSystem,console.log(this.externalSystem),console.log(this.externalCreateSystemFiltered)},e=>{console.log("err",e)})}fetchDestination(){console.log(this.rulemapping),console.log("Mapping",this.ruleMappingForm.value),this.disableFetchBtn=!0,this.showfetchAll=!0,this.showDestination=!0,this.showSource=!0}onFieldNameChange(e){console.log(e.value);let t=e.value;if(e.value){var i=this.sourceIsoResp.find(e=>e.fieldValue==t);console.log(i),this.showFieldNoValue=i.fieldNo,console.log("ssss",this.showFieldNoValue)}}fetchingIso(){this.addSystem.fetchingIsoForTcp().subscribe(e=>{console.log("iss",e),this.isoRespData=e,this.messageBasisIso=e.map(e=>e.messageBasis),this.fieldNoData=e.map(e=>e.messageBasis),this.fieldValueData=e.map(e=>e.messageKey)})}onSourseSelection(e){console.log(e),this.sourseSys=e,this.showSource=!1,this.showDestination=!1,console.log(this.externalSystem),console.log(this.sourseSys),this.externalCreateSystemFiltered=this.externalSystem.filter(e=>e!==this.sourseSys),this.rulemap.gettingTranslationData(this.sourseSys).subscribe(e=>{console.log(e),null!=e?(this.showfetchAll=!1,this.rulemapping=e,this.sourcesysdata=e,console.log("RuleMapping Res::",this.rulemapping.messageType),this.rulemapping.messageType&&("I"==this.rulemapping.messageType&&(this.rulemapping.messageType="Incoming"),"O"==this.rulemapping.messageType&&(this.rulemapping.messageType="OutGoing"),this.sourceMsg=!1),this.ruleMappingForm.patchValue(this.rulemapping),this.rulemapping.messageType&&("Incoming"==this.rulemapping.messageType&&(this.rulemapping.messageType="I"),"OutGoing"==this.rulemapping.messageType&&(this.rulemapping.messageType="O"),this.sourceMsg=!1),this.gettingoperationAandserv(e.systemCode,e.messageType),this.rulemapping.sourceTranslationId=e.transId,e.msgTransDetails.map(e=>{this.sourceTransDetId=e.translationId})):this.showfetchAll=!0},e=>{this.showfetchAll=!0}),this.externalSystem=this.temparray}onsearchingTablName(e){if(console.log(e.target.value),console.log("this is arr",this.sourcesysdata),this.sourcesysdata){let t=this.sourcesysdata.filter(function(t){let i=t.toLowerCase(),s=e.target.value.toLowerCase();return console.log(i,s),i.search(s)>-1});console.log(t),this.externalSystem=t}}onSelectionOFMessageType(e){console.log("e",e),this.showSource=!1,this.showDestination=!1,this.gettingoperationAandserv(this.sourseSys,e.value)}gettingoperationAandserv(e,t){this.rulemap.gettingoperationAndService(e,t,this.currentUser).subscribe(e=>{console.log(e),this.showfetchAll=!1,this.sourceoperation=e.OPERATION,this.sourceService=e.SERVICE,this.sourceData=e.MdmtSystemService,this.updateRuleMappingSrc=this.rulemapping.msgTransDetails,this.sourceLabel=e.MdmtSystemChannel[0].messageChannel,"Https/Http"===this.sourceLabel&&(this.sourceLabel=e.MdmtSystemChannel[0].messageFormat);let t=Object.keys(e)[2];if(console.log(t),("I"==t||"O"==t)&&3==Object.keys(e).length&&(console.log(e),e.I&&0!==e.I.SERVICE.length&&(this.translationDataService=e.I.SERVICE,e.I.SERVICE.length<1&&(console.log(this.translationDataService,"1st if"),this.multipleService=!0),e.I.SERVICE.length>=1&&(console.log(this.translationDataService,"2nd If"),this.multipleService=!1)),e.O&&0!==e.O.SERVICE.length&&(this.translationDataService=e.O.SERVICE,e.O.SERVICE.length<1&&(console.log(this.translationDataService,"1st if"),this.multipleService=!0),e.O.SERVICE.length>=1&&(console.log(this.translationDataService,"2nd If"),this.multipleService=!1)),e.I&&0!==e.I.OPERATION.length&&(this.translationDataOperation=e.I.OPERATION,this.translationDataOperation.length<1&&(console.log(this.translationDataOperation,"1st if"),this.multipleOperation=!0),this.translationDataOperation.length>=1&&(console.log(this.translationDataOperation,"2nd If"),this.multipleOperation=!1)),e.O&&0!==e.O.OPERATION.length&&(this.translationDataOperation=e.O.OPERATION,this.translationDataOperation.length<1&&(console.log(this.translationDataOperation,"1st if"),this.multipleOperation=!0),this.translationDataOperation.length>=1&&(console.log(this.translationDataOperation,"2nd If"),this.multipleOperation=!1))),console.log(this.translationDataService,"Source service"),console.log(this.translationDataOperation,"Source operation"),console.log("Rule Mapping After",this.updateRuleMappingSrc),"DB Connection"==this.sourceLabel)for(let i=0;i<this.sourceData.length;i++)this.sourceData[i].messageKey=this.sourceData[i].messageKey.split(",");"Https/Http"==this.sourceLabel&&(this.sourceLabel=e.MdmtSystemChannel[0].messageFormat,this.matlabelSource1="Tag",this.matlabelSource2=null),"TCP/IP"==this.sourceLabel&&(this.matlabelSource1="Filed No",this.matlabelSource2="Filed Name")},e=>{console.log(e),this.showfetchAll=!0})}ondestinationSource(e){console.log(e.value),this.showSource=!1,this.showDestination=!1,this.destinationSource=e,this.externalCreateSystemFiltered=this.externalSystem.filter(e=>e!==this.sourseSys),this.rulemap.gettingTranslationData(this.destinationSource).subscribe(e=>{console.log(e.msgTransDetails[0].transId),null!=e?(this.showfetchAll=!1,this.rulemappingDest=e,console.log(this.rulemappingDest),this.rulemappingDest.messageType&&("I"==this.rulemappingDest.messageType&&(this.rulemappingDest.messageType="Incoming"),"O"==this.rulemappingDest.messageType&&(this.rulemappingDest.messageType="OutGoing"),this.destinationMsg=!1),this.ruleMappingForm.get("destinationSystems").patchValue(this.rulemappingDest),e.msgTransDetails.map(e=>{this.targetTransDetId=e.translationId}),this.rulemappingDest.messageType&&("Incoming"==this.rulemappingDest.messageType&&(this.rulemappingDest.messageType="I"),"OutGoing"==this.rulemappingDest.messageType&&(this.rulemappingDest.messageType="O"),this.sourceMsg=!1),this.rulemappingDest.messageType&&("Incoming"==this.rulemappingDest.messageType&&(this.rulemappingDest.messageType="I"),"OutGoing"==this.rulemappingDest.messageType&&(this.rulemappingDest.messageType="O"),this.sourceMsg=!1),this.gettingmsgTypeAndDestination(e.systemCode,e.messageType)):this.showfetchAll=!0},e=>{this.showfetchAll=!0}),this.externalSystem=this.temparray}msgTypeOfDestination(e){console.log(e.value),this.showDestination=!1,this.showSource=!1,this.gettingmsgTypeAndDestination(this.destinationSource,e.value)}gettingmsgTypeAndDestination(e,t){this.rulemap.gettingoperationAndService(e,t,this.currentUser).subscribe(e=>{console.log(e),this.showfetchAll=!1,this.destinationOperation=e.OPERATION,this.destinationService=e.SERVICE,this.destinationData=e.MdmtSystemService,this.updateRuleMappingDest=this.rulemappingDest.msgTransDetails;let t=Object.keys(e)[2];("I"==t||"O"==t)&&3==Object.keys(e).length&&(console.log(e),e.I&&0!==e.I.SERVICE.length&&(this.translationDestDataService=e.I.SERVICE,e.I.SERVICE.length<1&&(this.multipleService=!0),e.I.SERVICE.length>=1&&(this.multipleService=!1)),e.O&&0!==e.O.SERVICE.length&&(this.translationDestDataService=e.O.SERVICE,e.O.SERVICE.length<1&&(this.multipleService=!0),e.O.SERVICE.length>=1&&(this.multipleService=!1)),e.I&&0!==e.I.OPERATION.length&&(this.translationDestDataOperation=e.I.OPERATION,this.translationDestDataOperation.length<1&&(this.multipleOperation=!0),this.translationDestDataOperation.length>=1&&(this.multipleOperation=!1)),e.O&&0!==e.O.OPERATION.length&&(this.translationDestDataOperation=e.O.OPERATION,this.translationDestDataOperation.length<1&&(this.multipleOperation=!0),this.translationDestDataOperation.length>=1&&(this.multipleOperation=!1))),console.log(this.translationDestDataOperation,"Destination service"),console.log(this.translationDestDataService,"Destination operation"),this.labelsDestination=e.MdmtSystemChannel[0].messageChannel,"Https/Http"==this.labelsDestination?(this.labelsDestination=e.MdmtSystemChannel[0].messageFormat,this.matLabel="Tag",this.matLabel2=null):"TCP/IP"==this.labelsDestination&&(this.matLabel="Filed No",this.matLabel2="Filed Name")},e=>{console.log(e),this.showfetchAll=!0})}onReset(){this.disableSubmitBtn=!1,this.ruleMappingForm.reset()}try(e){return!!this.tempArrayList.find(t=>t==e)}try2(e){return!!this.tempArrayList2.find(t=>t==e)}onselectOfFieldNo(e,t){console.log(e.target.value),console.log(this.tempArrayList[t]),this.tempArrayList[t]?this.tempArrayList[t]=e.target.value:this.tempArrayList.push(e.target.value)}onselectOfFieldNo2(e,t){console.log(e.target.value),console.log(this.tempArrayList2[t]),this.tempArrayList2[t]?this.tempArrayList2[t]=e.target.value:this.tempArrayList2.push(e.target.value)}onsaveRuleMapping(){console.log(this.ruleMappingForm.value.rulemappingDetail),this.mappingObj.msgMappingDetails=this.ruleMappingForm.value.rulemappingDetail,this.mappingObj.sourceTranslationId=this.rulemapping.sourceTranslationId,this.mappingObj.targetTranslationId=this.rulemappingDest.targetTranslationId,this.mappingObj.creatorId=this.currentUser.replace(/['"]+/g,""),this.mappingId?(this.mappingObj.mappingId=this.mappingId,this.mappingObj.createdTime=this.addSysRespData.createdTime,this.mappingObj.approverId=this.addSysRespData.approverId,this.mappingObj.approvedTime=this.addSysRespData.approvedTime,this.mappingObj.versionNo=this.addSysRespData.versionNo,this.mappingObj.approvedStatus=this.addSysRespData.approvedStatus,this.mappingObj.approvedEver=this.addSysRespData.approvedEver,this.mappingObj.recordStatus=this.addSysRespData.recordStatus,"UNAUTHORIZED"==this.mappingObj.approvedStatus&&(this.mappingObj.approvedStatus="U"),"AUTHORIZED"==this.mappingObj.approvedStatus&&(this.mappingObj.approvedStatus="A"),"OPEN"==this.mappingObj.recordStatus&&(this.mappingObj.recordStatus="O"),"CLOSED"==this.mappingObj.recordStatus&&(this.mappingObj.recordStatus="C"),"NO"==this.mappingObj.approvedEver&&(this.mappingObj.approvedEver="N"),"YES"==this.mappingObj.approvedEver&&(this.mappingObj.approvedEver="Y"),this.rulemap.updatingRuleMapping(this.mappingObj,this.currentUser).subscribe(e=>{console.log(e),e&&(this.mappingId=e.mappingId,this.rulemappingDetail.patchValue(e.msgMappingDetails),this.addSysRespData=e,this.auditLog(),this.showAuditLog=!0,this.afterSubmit=!0,this.ruleMappingForm.disable(),this.disableSubmitBtn=!0,this.disableResetBtn=!0,this.submit=!1,this.formTouched=!this.ruleMappingForm.touched,p().fire({text:"Record is Updated",icon:"success"}))},e=>{console.log(e.error.text),p().fire({text:"Unable to update the record, server error!",icon:"error"})})):(console.log(this.mappingObj),this.mappingObj.targetTranslationId=this.rulemappingDest.transId,console.log(this.mappingObj),this.rulemap.submittingruleMapping(this.mappingObj,this.currentUser).subscribe(e=>{console.log(e),e&&(this.mappingId=e.mappingId,this.rulemappingDetail.patchValue(e.msgMappingDetails),this.addSysRespData=e,this.auditLog(),this.showAuditLog=!0,this.afterSubmit=!0,this.ruleMappingForm.disable(),this.disableSubmitBtn=!0,this.disableResetBtn=!0,this.submit=!1,this.formTouched=!this.ruleMappingForm.touched,p().fire({text:"Record is Created",icon:"success"}))},e=>{console.log(e.error.text),p().fire({text:"Rule mapping data already present for source and destination systems.",icon:"error"})}))}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(u.Q),d.Y36(a.F0),d.Y36(y.N),d.Y36(o.qu),d.Y36(c.Z),d.Y36(o.qu),d.Y36(d.sBO),d.Y36(x.k),d.Y36(n.I))},e.\u0275cmp=d.Xpm({type:e,selectors:[["npr-rule-mapping-create"]],decls:78,vars:27,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],["novalidate","",1,"formStyle",3,"formGroup"],[3,"disabled"],[1,"dbCardStyle"],[1,"addformCol"],[1,"row","g-4","align-items-center"],[1,"col"],[1,"row","gy-4","align-items-end"],[1,"col-lg-3"],["for","roleName",1,"formLbl"],[1,"colorRed"],["formControlName","systemCode","aria-label","Default select example",1,"form-select",3,"change"],["hidden","","value","","disabled","","selected",""],[3,"value","hidden",4,"ngFor","ngForOf"],[4,"ngIf"],["formGroupName","destinationSystems"],["formControlName","systemCode",1,"form-select",3,"items","change"],[1,"btn","minWdSmBtn","btnPrimary",3,"click"],["class","dbCardStyle",4,"ngIf"],[1,"row","g-3","pb-3","pt-4","justify-content-end"],["class","col-auto",3,"hidden",4,"ngIf"],[1,"col-auto"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"hidden","disabled","click"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],["class","dbCardStyle mt-20",4,"ngIf"],[3,"value","hidden"],["formControlName","messageType","aria-label","Default select example",1,"form-select",3,"change"],["value","I"],["value","O"],["type","text","formControlName","messageType","placeholder","Message Type",1,"form-control"],["id","ruleName","formControlName","operationName","aria-label","Default select example",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","ruleName","type","text","formControlName","operationName","value","",1,"form-control"],["id","ruleName","formControlName","serviceName","aria-label","Default select example",1,"form-select"],["id","ruleName","type","text","formControlName","serviceName","value","",1,"form-control"],["formArrayName","rulemappingDetail",1,"addformCol"],[4,"ngFor","ngForOf"],[1,"row","g-3","pt-4"],["class","addIcon primarybg",3,"click",4,"ngIf"],[3,"formGroupName"],[1,"row","align-items-center"],[1,"row","gy-4"],[1,"col-lg-4"],["for","roleName","class","formLbl",4,"ngIf"],[1,"col-lg-12"],["type","text","id","defaultVal","formControlName","defaultValue","placeholder","Default value",3,"ngClass"],["class","deleteIcon2","style","cursor: pointer;",3,"click",4,"ngIf"],["formControlName","sourceKey","aria-label","Default select example",1,"form-select",3,"change"],[3,"hidden","value",4,"ngFor","ngForOf"],[3,"hidden","value"],["formControlName","sourceKey","aria-label","Default select example",1,"form-select"],["formControlName","destinationKey","aria-label","Default select example",1,"form-select",3,"change"],["formControlName","destinationKey","aria-label","Default select example",1,"form-select"],[1,"deleteIcon2",2,"cursor","pointer",3,"click"],["src","assets/images/delete-icon.svg","alt","...",1,"image",3,"ngClass"],[1,"addIcon","primarybg",3,"click"],["src","assets/images/plus-icon.svg","alt","..."],[1,"col-auto",3,"hidden"],[1,"btn","smBtn","minWdSmBtn","btnUpdate",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnAuth",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[1,"dbCardStyle","mt-20"],[1,"row"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"csCardStyle"],[1,"row","g-2","align-items-center"],[1,"csCardStyleIcon","csCardStyleIconBg1"],[1,"fa","fa-edit","faClass"],[1,"csCardStyleText"],[1,"csCardStyleIcon","csCardStyleIconBg2"],["src","assets/images/time-stamp-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg3"],["aria-hidden","true",1,"fa","fa-files-o","faRecordStatus"],[1,"csCardStyleIcon","csCardStyleIconBg4"],[1,"fa","fa-check-square-o","faClassChecker"],[1,"csCardStyleIcon","csCardStyleIconBg7"],["src","assets/images/modification.svg","alt","...",1,"modImage"],[1,"csCardStyleIcon","csCardStyleIconBg5"],["src","assets/images/checker-time-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg6"],[1,"fa","fa-shield","faClassFirstTimeAuth"],["src","assets/images/authorize.svg","alt","...",1,"modImage"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"h2",2),d._uU(3,"Rule Mapping "),d.qZA(),d.qZA(),d.TgZ(4,"form",3),d.TgZ(5,"fieldset",4),d.TgZ(6,"div",5),d.TgZ(7,"div",6),d.TgZ(8,"div",7),d.TgZ(9,"div",8),d.TgZ(10,"div",9),d.TgZ(11,"div",10),d.TgZ(12,"label",11),d._uU(13,"Source System"),d.TgZ(14,"span",12),d._uU(15,"*"),d.qZA(),d.qZA(),d.TgZ(16,"ng-select",13),d.NdJ("change",function(e){return t.onSourseSelection(e)}),d.TgZ(17,"ng-option",14),d._uU(18,"--Please select--"),d.qZA(),d.YNc(19,b,2,3,"ng-option",15),d.qZA(),d.qZA(),d.TgZ(20,"div",10),d.TgZ(21,"label",11),d._uU(22,"Message Type"),d.TgZ(23,"span",12),d._uU(24,"*"),d.qZA(),d.qZA(),d.YNc(25,D,8,0,"div",16),d.YNc(26,R,2,0,"div",16),d.qZA(),d.TgZ(27,"div",10),d.TgZ(28,"label",11),d._uU(29,"Operation"),d.qZA(),d.YNc(30,C,5,1,"div",16),d.YNc(31,N,2,0,"div",16),d.qZA(),d.TgZ(32,"div",10),d.TgZ(33,"label",11),d._uU(34,"Service"),d.qZA(),d.YNc(35,O,5,1,"div",16),d.YNc(36,U,2,0,"div",16),d.qZA(),d.ynx(37,17),d.TgZ(38,"div",10),d.TgZ(39,"label",11),d._uU(40,"Destination System"),d.TgZ(41,"span",12),d._uU(42,"*"),d.qZA(),d.qZA(),d.TgZ(43,"ng-select",18),d.NdJ("change",function(e){return t.ondestinationSource(e)}),d.qZA(),d.qZA(),d.TgZ(44,"div",10),d.TgZ(45,"label",11),d._uU(46,"Message Type"),d.TgZ(47,"span",12),d._uU(48,"*"),d.qZA(),d.qZA(),d.YNc(49,w,8,0,"div",16),d.YNc(50,E,2,0,"div",16),d.qZA(),d.TgZ(51,"div",10),d.TgZ(52,"label",11),d._uU(53,"Operation"),d.qZA(),d.YNc(54,F,5,1,"div",16),d.YNc(55,J,2,0,"div",16),d.qZA(),d.TgZ(56,"div",10),d.TgZ(57,"label",11),d._uU(58,"Service"),d.qZA(),d.YNc(59,B,5,1,"div",16),d.YNc(60,Y,2,0,"div",16),d.qZA(),d.BQk(),d.TgZ(61,"div",10),d.TgZ(62,"button",19),d.NdJ("click",function(){return t.fetchDestination()}),d._uU(63," Fetch "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(64,De,6,2,"div",20),d.qZA(),d.TgZ(65,"div",21),d.YNc(66,Re,3,2,"div",22),d.TgZ(67,"div",23),d.TgZ(68,"button",24),d.NdJ("click",function(){return t.onsaveRuleMapping()}),d._uU(69," Save "),d.qZA(),d.qZA(),d.YNc(70,Me,3,2,"div",22),d.YNc(71,Ce,3,2,"div",22),d.YNc(72,Ne,3,2,"div",22),d.YNc(73,Ie,3,2,"div",22),d.TgZ(74,"div",23),d.TgZ(75,"button",25),d._uU(76,"Exit"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(77,Oe,100,14,"div",26)),2&e&&(d.xp6(4),d.Q6J("formGroup",t.ruleMappingForm),d.xp6(1),d.Q6J("disabled",!t.submit),d.xp6(14),d.Q6J("ngForOf",t.externalSystem),d.xp6(6),d.Q6J("ngIf",t.sourceMsg),d.xp6(1),d.Q6J("ngIf",!t.sourceMsg),d.xp6(4),d.Q6J("ngIf",!t.multipleOperation),d.xp6(1),d.Q6J("ngIf",t.multipleOperation),d.xp6(4),d.Q6J("ngIf",!t.multipleService),d.xp6(1),d.Q6J("ngIf",t.multipleService),d.xp6(7),d.Q6J("items",t.externalCreateSystemFiltered),d.xp6(6),d.Q6J("ngIf",t.destinationMsg),d.xp6(1),d.Q6J("ngIf",!t.destinationMsg),d.xp6(4),d.Q6J("ngIf",!t.multipleOperation),d.xp6(1),d.Q6J("ngIf",t.multipleOperation),d.xp6(4),d.Q6J("ngIf",!t.multipleService),d.xp6(1),d.Q6J("ngIf",t.multipleService),d.xp6(4),d.Q6J("ngIf",t.showSource||t.showDestination),d.xp6(2),d.Q6J("ngIf",("O"==(null==t.addSysRespData?null:t.addSysRespData.recordStatus)||"OPEN"==(null==t.addSysRespData?null:t.addSysRespData.recordStatus))&&t.roleCodes.edit),d.xp6(2),d.Q6J("hidden",!t.submit)("disabled",t.ruleMappingForm.invalid),d.xp6(2),d.Q6J("ngIf",("U"==(null==t.addSysRespData?null:t.addSysRespData.approvedStatus)||"UNAUTHORIZED"==(null==t.addSysRespData?null:t.addSysRespData.approvedStatus))&&t.roleCodes.auth),d.xp6(1),d.Q6J("ngIf",("O"==(null==t.addSysRespData?null:t.addSysRespData.recordStatus)||"OPEN"==(null==t.addSysRespData?null:t.addSysRespData.recordStatus))&&"NO"!=(null==t.addSysRespData?null:t.addSysRespData.approvedEver)&&"N"!=(null==t.addSysRespData?null:t.addSysRespData.approvedEver)&&t.roleCodes.close),d.xp6(1),d.Q6J("ngIf",("C"==(null==t.addSysRespData?null:t.addSysRespData.recordStatus)||"CLOSED"==(null==t.addSysRespData?null:t.addSysRespData.recordStatus))&&"NO"!=(null==t.addSysRespData?null:t.addSysRespData.approvedEver)&&"N"!=(null==t.addSysRespData?null:t.addSysRespData.approvedEver)&&t.roleCodes.reopen),d.xp6(1),d.Q6J("ngIf",("NO"==(null==t.addSysRespData?null:t.addSysRespData.approvedEver)||"N"==(null==t.addSysRespData?null:t.addSysRespData.approvedEver))&&t.roleCodes.delete),d.xp6(2),d.Q6J("routerLink",d.DdM(26,Ue)),d.xp6(2),d.Q6J("ngIf",!t.submit))},directives:[o._Y,o.JL,o.sg,q.w9,o.JJ,o.u,q.jq,s.sg,s.O5,o.x0,a.rH,o.EJ,o.YN,o.Kr,o.Fj,o.CE,s.mk],pipes:[s.uU],styles:[".m-10[_ngcontent-%COMP%]{margin-top:10px}.path[_ngcontent-%COMP%]{vertical-align:top;margin-top:0;margin-bottom:20px;min-width:120px;border-spacing:1.5}.first[_ngcontent-%COMP%]{margin-top:31px}.image[_ngcontent-%COMP%]{vertical-align:top;top:-8px;position:relative}.first-image[_ngcontent-%COMP%]{top:24px}"]}),e})();class Ee{}class _e{}function Fe(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Source System"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function Je(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Field No"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function Qe(e,t){if(1&e&&(d.TgZ(0,"option",69),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("hidden",i.shouldHideSourceRuleMappingValue(e.messagebasis))("value",e.messagebasis),d.xp6(1),d.hij(" ",e.messagebasis," ")}}function Be(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,Je,4,0,"label",61),d.TgZ(2,"select",67),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onSourceRuleMappingChange(t,i)}),d.YNc(3,Qe,2,3,"option",68),d.qZA(),d.BQk()}if(2&e){const e=d.oxw(),t=e.index,i=e.$implicit,s=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==t),d.xp6(1),d.Q6J("disabled",!s.edit)("value",i.sourceKey),d.xp6(1),d.Q6J("ngForOf",s.updateRuleMappingSrc)}}function Ye(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Key"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function ke(e,t){if(1&e&&(d.TgZ(0,"option",69),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("hidden",i.shouldHideSourceRuleMappingValue(e.messagebasis))("value",e.messagebasis),d.xp6(1),d.hij(" ",e.messagebasis," ")}}function Le(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,Ye,4,0,"label",61),d.TgZ(2,"select",70),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onSourceRuleMappingChange(t,i)}),d.YNc(3,ke,2,3,"option",68),d.qZA(),d.BQk()}if(2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(1),d.Q6J("disabled",!t.edit),d.xp6(1),d.Q6J("ngForOf",t.updateRuleMappingSrc)}}function He(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Tag"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function Pe(e,t){if(1&e&&(d.TgZ(0,"option",69),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("hidden",i.shouldHideSourceRuleMappingValue(e.messagebasis))("value",e.messagebasis),d.xp6(1),d.hij(" ",e.messagebasis," ")}}function $e(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,He,4,0,"label",61),d.TgZ(2,"select",70),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onSourceRuleMappingChange(t,i)}),d.YNc(3,Pe,2,3,"option",68),d.qZA(),d.BQk()}if(2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(1),d.Q6J("disabled",!t.edit),d.xp6(1),d.Q6J("ngForOf",t.updateRuleMappingSrc)}}function Ve(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Column Name"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function je(e,t){if(1&e&&(d.TgZ(0,"option",69),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("hidden",i.shouldHideSourceRuleMappingValue(e.messagebasis))("value",e.messagebasis),d.xp6(1),d.hij(" ",e.messagebasis,"")}}function ze(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,Ve,4,0,"label",61),d.TgZ(2,"select",70),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onSourceRuleMappingChange(t,i)}),d.YNc(3,je,2,3,"option",68),d.qZA(),d.BQk()}if(2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(1),d.Q6J("disabled",!t.edit),d.xp6(1),d.Q6J("ngForOf",t.updateRuleMappingSrc)}}function Ke(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Field No"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function Xe(e,t){if(1&e&&(d.TgZ(0,"option",73),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.messagebasis),d.xp6(1),d.hij(" ",e.messagebasis,"")}}function Ge(e,t){if(1&e&&(d.ynx(0),d.YNc(1,Ke,4,0,"label",61),d.TgZ(2,"select",71),d.YNc(3,Xe,2,2,"option",72),d.qZA(),d.BQk()),2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(1),d.Q6J("disabled",!t.edit),d.xp6(1),d.Q6J("ngForOf",t.updateRuleMappingSrc)}}function We(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Destination system"),d.qZA())}function et(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Field No"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function tt(e,t){if(1&e&&(d.TgZ(0,"option",76),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("value",e.messagebasis)("hidden",i.shouldHideDestinationRuleMappingValue(e.messagebasis)),d.xp6(1),d.hij(" ",e.messagebasis,"")}}function it(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,et,4,0,"label",61),d.TgZ(2,"select",74),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onDestinationRuleMappingChange(t,i)}),d.YNc(3,tt,2,3,"option",75),d.qZA(),d.BQk()}if(2&e){const e=d.oxw(),t=e.index,i=e.$implicit,s=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==t),d.xp6(1),d.Q6J("value",i.destinationKey),d.xp6(1),d.Q6J("ngForOf",s.updateRuleMappingDest)}}function st(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Tag"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function at(e,t){if(1&e&&(d.TgZ(0,"option",76),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("value",e.messagebasis)("hidden",i.shouldHideDestinationRuleMappingValue(e.messagebasis)),d.xp6(1),d.hij(" ",e.messagebasis," ")}}function nt(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,st,4,0,"label",61),d.TgZ(2,"select",74),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onDestinationRuleMappingChange(t,i)}),d.YNc(3,at,2,3,"option",75),d.qZA(),d.BQk()}if(2&e){const e=d.oxw(),t=e.index,i=e.$implicit,s=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==t),d.xp6(1),d.Q6J("value",i.destinationKey),d.xp6(1),d.Q6J("ngForOf",s.updateRuleMappingDest)}}function ot(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Key"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function rt(e,t){if(1&e&&(d.TgZ(0,"option",76),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("value",e.messagebasis)("hidden",i.shouldHideDestinationRuleMappingValue(e.messagebasis)),d.xp6(1),d.hij(" ",e.messagebasis," ")}}function lt(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,ot,4,0,"label",61),d.TgZ(2,"select",74),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onDestinationRuleMappingChange(t,i)}),d.YNc(3,rt,2,3,"option",75),d.qZA(),d.BQk()}if(2&e){const e=d.oxw(),t=e.index,i=e.$implicit,s=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==t),d.xp6(1),d.Q6J("value",i.destinationKey),d.xp6(1),d.Q6J("ngForOf",s.updateRuleMappingDest)}}function pt(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Column Name"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function dt(e,t){if(1&e&&(d.TgZ(0,"option",76),d._uU(1),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.Q6J("value",e.messagebasis)("hidden",i.shouldHideDestinationRuleMappingValue(e.messagebasis)),d.xp6(1),d.Oqu(e.messagebasis)}}function ut(e,t){if(1&e){const e=d.EpF();d.ynx(0),d.YNc(1,pt,4,0,"label",61),d.TgZ(2,"select",77),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().index;return d.oxw(2).onDestinationRuleMappingChange(t,i)}),d.YNc(3,dt,2,3,"option",75),d.qZA(),d.BQk()}if(2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(2),d.Q6J("ngForOf",t.updateRuleMappingDest)}}function ct(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Field No"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function gt(e,t){if(1&e&&(d.TgZ(0,"option",73),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.messagebasis),d.xp6(1),d.Oqu(e.messagebasis)}}function ht(e,t){if(1&e&&(d.ynx(0),d.YNc(1,ct,4,0,"label",61),d.TgZ(2,"select",78),d.YNc(3,gt,2,2,"option",72),d.qZA(),d.BQk()),2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",0==e),d.xp6(2),d.Q6J("ngForOf",t.updateRuleMappingDest)}}function mt(e,t){1&e&&(d.TgZ(0,"label",11),d._uU(1,"Default value"),d.TgZ(2,"span",12),d._uU(3,"*"),d.qZA(),d.qZA())}function Zt(e,t){1&e&&d._UZ(0,"label",79)}const ft=function(e){return{first:e,"form-control":!0,path:!0}};function Tt(e,t){if(1&e&&(d.TgZ(0,"div"),d._UZ(1,"input",80),d.qZA()),2&e){const e=d.oxw().index,t=d.oxw(2);d.xp6(1),d.Q6J("ngClass",d.VKq(2,ft,0===e))("readonly",t.edit)}}function vt(e,t){if(1&e&&(d.TgZ(0,"div"),d._UZ(1,"input",81),d.qZA()),2&e){const e=d.oxw().index;d.xp6(1),d.Q6J("ngClass",d.VKq(1,ft,0===e))}}const At=function(e){return{"first-image":e,image:!0}};function St(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"a",82),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().index;return d.oxw(2).deleteRuleMapGroup(t)}),d._UZ(1,"img",83),d.qZA()}if(2&e){const e=d.oxw().index;d.xp6(1),d.Q6J("ngClass",d.VKq(1,At,0===e))}}const yt=function(e){return{"margin-top":e}};function xt(e,t){if(1&e&&(d.ynx(0),d.ynx(1,58),d.TgZ(2,"div",7),d.TgZ(3,"div",8),d.TgZ(4,"div",59),d.TgZ(5,"div",60),d.YNc(6,Fe,4,0,"label",61),d.TgZ(7,"div",59),d.TgZ(8,"div",62),d.YNc(9,Be,4,4,"ng-container",63),d.YNc(10,Le,4,3,"ng-container",63),d.YNc(11,$e,4,3,"ng-container",63),d.YNc(12,ze,4,3,"ng-container",63),d.YNc(13,Ge,4,3,"ng-container",63),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"div",60),d.YNc(15,We,2,0,"label",61),d.TgZ(16,"div",59),d.TgZ(17,"div",62),d.YNc(18,it,4,3,"ng-container",63),d.YNc(19,nt,4,3,"ng-container",63),d.YNc(20,lt,4,3,"ng-container",63),d.YNc(21,ut,4,2,"ng-container",63),d.YNc(22,ht,4,2,"ng-container",63),d.qZA(),d.qZA(),d.qZA(),d.TgZ(23,"div",60),d.YNc(24,mt,4,0,"label",61),d.TgZ(25,"div",59),d.TgZ(26,"div",62),d.YNc(27,Zt,1,0,"label",64),d.YNc(28,Tt,2,4,"div",63),d.YNc(29,vt,2,3,"div",63),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(30,"div",60),d.TgZ(31,"div",65),d.YNc(32,St,2,3,"a",66),d.qZA(),d.qZA(),d.qZA(),d._UZ(33,"br"),d.BQk(),d.BQk()),2&e){const e=t.index,i=d.oxw(2);d.xp6(1),d.Q6J("formGroupName",e),d.xp6(5),d.Q6J("ngIf",0==e),d.xp6(3),d.Q6J("ngIf","TCP/IP"==i.sourceLabel),d.xp6(1),d.Q6J("ngIf","JSON"==i.sourceLabel),d.xp6(1),d.Q6J("ngIf","XML"==i.sourceLabel),d.xp6(1),d.Q6J("ngIf","DB Connection"==i.sourceLabel),d.xp6(1),d.Q6J("ngIf","MT"==i.sourceLabel||"MX"==i.sourceLabel),d.xp6(2),d.Q6J("ngIf",0==e),d.xp6(3),d.Q6J("ngIf","TCP/IP"==i.labelsDestination),d.xp6(1),d.Q6J("ngIf","XML"==i.labelsDestination),d.xp6(1),d.Q6J("ngIf","JSON"==i.labelsDestination),d.xp6(1),d.Q6J("ngIf","DB Connection"==i.labelsDestination),d.xp6(1),d.Q6J("ngIf","MT"==i.labelsDestination||"MX"==i.labelsDestination),d.xp6(2),d.Q6J("ngIf",0==e),d.xp6(3),d.Q6J("ngIf",0==e),d.xp6(1),d.Q6J("ngIf",!i.editFlag),d.xp6(1),d.Q6J("ngIf",i.editFlag),d.xp6(2),d.Q6J("hidden",!i.hideFetch)("ngStyle",d.VKq(20,yt,0===e?"50px":"10px")),d.xp6(1),d.Q6J("ngIf",i.submit)}}function qt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"a",84),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).addRuleDetail()}),d.TgZ(1,"span"),d._UZ(2,"img",85),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(2);d.Q6J("hidden",!e.hideFetch)}}function bt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",26),d.TgZ(1,"button",86),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).editValues()}),d._uU(2),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(2);d.Q6J("hidden",e.hideFetch),d.xp6(2),d.hij(" ",e.roleCodes.edit.labelDescription," ")}}function Dt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",26),d.TgZ(1,"button",87),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).onAuthOfRuleMapping()}),d._uU(2),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(2);d.Q6J("hidden",e.hideFetch),d.xp6(2),d.Oqu(e.roleCodes.auth.labelDescription)}}function Rt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",26),d.TgZ(1,"button",88),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).onCloseOfRuleMapping()}),d._uU(2),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(2);d.Q6J("hidden",e.hideFetch),d.xp6(2),d.Oqu(e.roleCodes.close.labelDescription)}}function Mt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",26),d.TgZ(1,"button",88),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).onOpenRuleMapping()}),d._uU(2),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(2);d.Q6J("hidden",e.hideFetch),d.xp6(2),d.Oqu(e.roleCodes.reopen.labelDescription)}}function Ct(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",26),d.TgZ(1,"button",88),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).deleteRuleMapping()}),d._uU(2),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(2);d.Q6J("hidden",e.hideFetch),d.xp6(2),d.Oqu(e.roleCodes.delete.labelDescription)}}function Nt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",5),d.TgZ(1,"fieldset",4),d.TgZ(2,"div",51),d.YNc(3,xt,34,22,"ng-container",52),d.qZA(),d.qZA(),d.TgZ(4,"div",53),d.TgZ(5,"div",34),d.YNc(6,qt,3,1,"a",54),d.qZA(),d.qZA(),d.TgZ(7,"div",55),d.TgZ(8,"div",26),d.TgZ(9,"button",27),d.NdJ("click",function(){return d.CHM(e),d.oxw().onsaveRuleMapping()}),d._uU(10,"Save"),d.qZA(),d.qZA(),d.YNc(11,bt,3,2,"div",56),d.YNc(12,Dt,3,2,"div",56),d.YNc(13,Rt,3,2,"div",56),d.YNc(14,Mt,3,2,"div",56),d.YNc(15,Ct,3,2,"div",56),d.TgZ(16,"div",34),d.TgZ(17,"a",57),d._uU(18,"Exit"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(1),d.Q6J("disabled",!e.submit),d.xp6(2),d.Q6J("ngForOf",e.rulemappingDetails.controls),d.xp6(3),d.Q6J("ngIf",e.submit),d.xp6(2),d.Q6J("hidden",!e.hideSubmit),d.xp6(1),d.Q6J("disabled",!e.submit||!e.ruleMappingForm.dirty),d.xp6(2),d.Q6J("ngIf",("O"==e.addSysRespData.recordStatus||"OPEN"==e.addSysRespData.recordStatus)&&e.roleCodes.edit),d.xp6(1),d.Q6J("ngIf",("U"==e.addSysRespData.approvedStatus||"UNAUTHORIZED"==e.addSysRespData.approvedStatus||"Unauthorized"==e.addSysRespData.approvedStatus||"N"==e.addSysRespData.approvedStatus||"N"==e.addSysRespData.approvedEver)&&e.roleCodes.auth),d.xp6(1),d.Q6J("ngIf",("O"==e.addSysRespData.recordStatus||"OPEN"==e.addSysRespData.recordStatus)&&"NO"!=e.addSysRespData.approvedEver&&"N"!=e.addSysRespData.approvedEver&&e.roleCodes.close),d.xp6(1),d.Q6J("ngIf",("C"==e.addSysRespData.recordStatus||"CLOSED"==e.addSysRespData.recordStatus)&&"NO"!=e.addSysRespData.approvedEver&&"N"!=e.addSysRespData.approvedEver&&e.roleCodes.reopen),d.xp6(1),d.Q6J("ngIf",("NO"==e.addSysRespData.approvedEver||"N"==(null==e.addSysRespData?null:e.addSysRespData.approvedEver))&&e.roleCodes.delete),d.xp6(2),d.Q6J("routerLink","/rule-mapping/summary")}}let It=(()=>{class e{constructor(e,t,i,s,a,n,o,l,p){this.rulemap=e,this.roleService=t,this.router=i,this._location=s,this._route=a,this.addSystem=n,this.toastService=o,this.cdr=l,this.formBuilder=p,this.fieldNoData=[],this.disableFetchBtn=!1,this.disableSubmitBtn=!1,this.deleted=!1,this.disableFields=!1,this.authorizeDone=!1,this.fieldValueData=[],this.showFieldNoValue=1,this.xmlLength=[],this.sourceRuleMappingArray=[],this.destinationRuleMappingArray=[],this.rulemapping=new Ot,this.rulemappingdest=new Ot,this.isSelected=!0,this.rulemappingDetail=[],this.destinationData=[],this.sourceData=[],this.ruleDto=new Ut,this.submit=!0,this.hideFetch=!1,this.hideSubmit=!1,this.roleCodes=new S.yv,this.formTouched=!0,this.showDialog=!1,this.subject=new r.xQ,this.editFlag=!1}ngOnInit(){if(this.currentUser=localStorage.getItem("userFromLogin"),this.ruleMappingForm=this.formBuilder.group({systemCode:["",o.kI.required],messageType:["",o.kI.required],serviceName:["",o.kI.required],operationName:["",o.kI.required],destinationSystems:this.getDestinationItem(),rulemappingDetails:this.formBuilder.array([])}),this.navSubscription=this.addSystem.getNavParam.subscribe(e=>this.editruleMappingResp=e),console.log("Response ??",this.editruleMappingResp),this.ruleMappingDataForPayload=this.editruleMappingResp.responseData,this.editruleMappingResp&&0===Object.keys(this.editruleMappingResp).length&&Object.getPrototypeOf(this.editruleMappingResp)===Object.prototype)this._location.back();else{this.addSysRespData=this.ruleMappingDataForPayload.mdmtMessageMapping,this.auditLog(),this.rulemapping.sourceTranslationId=this.editruleMappingResp.sourceTransDetId,this.rulemapping.sourceTranslationId&&this.gettingTranslationData(this.rulemapping.sourceTranslationId),this.rulemapping.targetTranslationId=this.editruleMappingResp.targetTransDetId,this.rulemapping.targetTranslationId&&this.gettingTranslationDataForDest(this.rulemapping.targetTranslationId),"C"==this.addSysRespData.recordStatus&&(console.log(this.addSysRespData.recordStatus),this.reopenBtn=!1,this.authBtnHide=!0),this.rulemappingDetail=this.ruleMappingDataForPayload.mdmtMessageMapping.msgMappingDetails,this.auditLog();for(let e=0;e<this.rulemappingDetail.length;e++){this.addRuleDetail();const t=this.rulemappingDetail[e];this.rulemappingDetails.at(e).patchValue(t),console.log("Rule Mapping: ",this.rulemappingDetails)}this.sourceRuleMappingArray=this.ruleMappingDataForPayload.mdmtMessageMapping.msgMappingDetails.map(e=>e.sourceKey),this.destinationRuleMappingArray=this.ruleMappingDataForPayload.mdmtMessageMapping.msgMappingDetails.map(e=>e.destinationKey),this.gettingExternalsystem(),this.fetchingIso()}this.roleService.fetchScreenPermissions("Rule Mapping"),this.roleService.screenLabelList.subscribe(e=>this.roleCodes=e),setTimeout(()=>{console.log(this.roleCodes)},100),this.ruleMappingForm.disable()}getDestinationItem(){return this.formBuilder.group({systemCode:["",o.kI.required],messageType:["",o.kI.required],serviceName:["",o.kI.required],operationName:["",o.kI.required]})}auditLog(){("U"==this.addSysRespData.approvedStatus||"Unauthorized"==this.addSysRespData.approvedStatus)&&(this.addSysRespData.approvedStatus="UNAUTHORIZED"),("A"==this.addSysRespData.approvedStatus||"Authorized"==this.addSysRespData.approvedStatus)&&(this.addSysRespData.approvedStatus="AUTHORIZED"),("O"==this.addSysRespData.recordStatus||"Open"==this.addSysRespData.recordStatus)&&(this.addSysRespData.recordStatus="OPEN"),("C"==this.addSysRespData.recordStatus||"Close"==this.addSysRespData.recordStatus)&&(this.addSysRespData.recordStatus="CLOSED"),("N"==this.addSysRespData.approvedEver||"No"==this.addSysRespData.approvedEver)&&(this.addSysRespData.approvedEver="NO"),"Y"==this.addSysRespData.approvedEver&&(this.addSysRespData.approvedEver="YES")}canExit(){let e=!1;return this.ruleMappingForm.touched&&1==this.formTouched?p().fire({text:"There are unsaved changes in the screen. Would you like to navigate to other screen?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(t=>!0===t.isConfirmed?(e=!0,this.cdr.markForCheck(),e):(e=!1,this.cdr.markForCheck(),e)):(e=!0,new Promise((t,i)=>{!0===e&&(e=!0,this.cdr.markForCheck(),t(!0))}))}getRuleMappingDetails(){return this.formBuilder.group({id:[""],defaultValue:[""],messageMappingId:[""],sourceTransDetId:[""],targetTransDetId:[""],sourceKey:[""],destinationKey:[""]})}indexTracker(e,t){return e}get rulemappingDetails(){return this.ruleMappingForm.get("rulemappingDetails")}addRuleDetail(){this.rulemappingDetails.push(this.getRuleMappingDetails()),console.log(this.rulemappingDetails.value)}deleteRuleMapGroup(e){this.sourceRuleMappingArray.splice(e,1),this.destinationRuleMappingArray.splice(e,1),this.rulemappingDetails.removeAt(e)}gettingExternalsystem(){this.rulemap.gettingExternalsystem().subscribe(e=>{console.log("extSysResp",e),this.externalSystem=e},e=>{console.log("err",e)})}onDestinationRuleMappingChange(e,t){this.destinationRuleMappingArray[t]=e.target.value}onSourceRuleMappingChange(e,t){this.sourceRuleMappingArray[t]=e.target.value}shouldHideDestinationRuleMappingValue(e){return this.destinationRuleMappingArray.find(t=>t==e)}shouldHideSourceRuleMappingValue(e){return this.sourceRuleMappingArray.find(t=>t==e)}EditFetch(){this.editFetch=!0,console.log("edit"),"C"==this.addSysRespData.recordStatus&&(this.editFetch=!1,this.toastService.successMessage("Closed record can't be edited.",""))}Edit(){console.log("edit"),"U"==this.addSysRespData.approvedStatus&&(this.edit=!1,this.toastService.successMessage("UnAuthorized record can't be  edited","")),"C"==this.addSysRespData.recordStatus&&(this.edit=!1,this.toastService.successMessage("Closed record can't be edited.","")),this.edit=!0}gettingTranslationData(e){this.sourseSys=e,this.rulemap.gettingTranslationData(this.sourseSys).subscribe(e=>{console.log("trans ?",e),this.rulemapping=e,this.ruleMappingData=e,this.ruleMappingForm.patchValue(e),this.gettingoperationAandserv(e.systemCode,e.messageType),this.rulemapping.sourceTranslationId=e.systemCode}),this.fetchDestination()}gettingTranslationDataForDest(e){this.rulemap.gettingTranslationData(e).subscribe(e=>{console.log("Dset",e),this.rulemappingdest=e,this.rulemappingdestMapping=e,this.ruleMappingForm.get("destinationSystems").patchValue(e),this.gettingmsgTypeAndDestination(e.systemCode,e.messageType),this.rulemappingdest.targetTranslationId=e.systemCode})}onAuthOfRuleMapping(){p().fire({text:"You are trying to Authorize record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(e=>{if(console.log("this is reopen ",e),!0===e.isConfirmed)if(this.currentUser==this.addSysRespData.creatorId)p().fire("Maker cannot authorize the record!");else{let e={};console.log(this.ruleMappingDataForPayload),e=this.ruleMappingDataForPayload,e.msgMappingDetails=this.rulemappingDetail,console.log(e),"UNAUTHORIZED"==e.approvedStatus&&(e.approvedStatus="U"),"AUTHORIZED"==e.approvedStatus&&(e.approvedStatus="A"),"OPEN"==e.recordStatus&&(e.recordStatus="O"),"CLOSED"==e.recordStatus&&(e.recordStatus="C"),"NO"==e.approvedEver&&(e.approvedEver="N"),"YES"==e.approvedEver&&(e.approvedEver="Y"),this.rulemap.editRuleMapping("auth",this.currentUser,e).subscribe(e=>{this.authorizeDone=!0,this.addSysRespData=e,this.auditLog(),p().fire({text:"Record is Authorized"})})}})}onCloseOfRuleMapping(){p().fire({text:"You are trying to close record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(e=>{if(console.log("this is reopen ",e),!0===e.isConfirmed){let e={};e=this.ruleMappingDataForPayload,e.msgMappingDetails=this.rulemappingDetail,"UNAUTHORIZED"==e.approvedStatus&&(e.approvedStatus="U"),"AUTHORIZED"==e.approvedStatus&&(e.approvedStatus="A"),"OPEN"==e.recordStatus&&(e.recordStatus="O"),"CLOSED"==e.recordStatus&&(e.recordStatus="C"),"NO"==e.approvedEver&&(e.approvedEver="N"),"YES"==e.approvedEver&&(e.approvedEver="Y"),this.rulemap.editRuleMapping("close",this.currentUser,e).subscribe(e=>{this.addSysRespData=e,this.auditLog(),this.editBtn=!0,this.authBtn=!0,this.deleted=!1,this.reopenBtn=!1,p().fire({text:"Record is  Closed",icon:"success"})})}})}onOpenRuleMapping(){p().fire({text:"You are trying to re-open record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(e=>{if(console.log("this is reopen ",e),!0===e.isConfirmed){let e={};e=this.ruleMappingDataForPayload,e.msgMappingDetails=this.rulemappingDetail,"UNAUTHORIZED"==e.approvedStatus&&(e.approvedStatus="U"),"AUTHORIZED"==e.approvedStatus&&(e.approvedStatus="A"),"OPEN"==e.recordStatus&&(e.recordStatus="O"),"CLOSED"==e.recordStatus&&(e.recordStatus="C"),"NO"==e.approvedEver&&(e.approvedEver="N"),"YES"==e.approvedEver&&(e.approvedEver="Y"),this.rulemap.editRuleMapping("open",this.currentUser,e).subscribe(e=>{this.addSysRespData=e,this.auditLog(),this.authBtnHide=!1,this.editBtn=!1,this.authBtn=!1,p().fire({text:"Record is Opened",icon:"success"})})}})}deleteRuleMapping(){p().fire({text:"You are trying to delete record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(e=>{console.log("this is reopen ",e),!0===e.isConfirmed&&(console.log(this.addSysRespData.mappingId),this.rulemap.ondeleteMapping(this.addSysRespData.mappingId,this.currentUser).subscribe(e=>{e?(this.deleted=!0,this.editBtn=!0,this.authBtn=!0,this.closeBtn=!0,p().fire({title:"Record is Deleted",confirmButtonText:"Ok"}).then(e=>{e&&this.router.navigateByUrl("/rule-mapping/summary")})):p().fire("Failed to delete the reocrd")}))})}fetchDestination(){console.log(this.rulemapping),console.log("Rule ,apping",this.ruleMappingForm),this.disableFetchBtn=!0,this.showDestination=!0,this.showSource=!0}onFieldNameChange(e){console.log(e.value);let t=e.value;if(e.value){var i=this.sourceIsoResp.find(e=>e.fieldValue==t);console.log(i),this.showFieldNoValue=i.fieldNo,console.log("ssss",this.showFieldNoValue)}}editValues(){this.hideFetch=!0,this.hideSubmit=!0,this.ruleMappingForm.enable(),this.editFlag=!0}onSubmittingRuleMapping(){console.log("submit")}fetchingIso(){this.addSystem.fetchingIsoForTcp().subscribe(e=>{console.log("iss",e),this.isoRespData=e,this.messageBasisIso=e.map(e=>e.messageBasis),this.fieldNoData=e.map(e=>e.messageBasis),this.fieldValueData=e.map(e=>e.messageKey)})}onSourseSelection(e){console.log(e),this.sourseSys=e.value}onSelectionOFMessageType(e,t){console.log("e",t),this.sourseSys=e,this.gettingoperationAandserv(this.sourseSys,t.value)}gettingoperationAandserv(e,t){console.log(e),this.rulemap.gettingoperationAndService(e,t,this.currentUser).subscribe(e=>{console.log("sourceResp",e),this.sourceoperation=e.OPERATION,this.sourceService=e.SERVICE,this.sourceData=e.MdmtSystemService,this.updateRuleMappingSrc=this.ruleMappingData.msgTransDetails,this.sourceLabel=e.MdmtSystemChannel[0].messageChannel,console.log(this.sourceData),"Https/Http"==this.sourceLabel&&(this.sourceLabel=e.MdmtSystemChannel[0].messageFormat,this.matlabelSource1="Node",this.matlabelSource2="TagName"),"TCP/IP"==this.sourceLabel&&(this.matlabelSource1="Filed No",this.matlabelSource2="Filed Name")},e=>{console.log(e)})}ondestinationSource(e){console.log(e.value),this.destinationSource=e.value}msgTypeOfDestination(e){console.log(e.value),this.gettingmsgTypeAndDestination(this.destinationSource,e.value)}gettingmsgTypeAndDestination(e,t){this.rulemap.gettingoperationAndService(e,t,this.currentUser).subscribe(e=>{console.log("destinationResp",e),this.destinationOperation=e.OPERATION,this.destinationService=e.SERVICE,this.destinationData=e.MdmtSystemService,this.updateRuleMappingDest=this.rulemappingdestMapping.msgTransDetails,this.labelsDestination=e.MdmtSystemChannel[0].messageChannel,console.log(this.labelsDestination),"Https/Http"==this.labelsDestination?(this.labelsDestination=e.MdmtSystemChannel[0].messageFormat,this.matLabel="Node",this.matLabel2="Tag Name"):"TCP/IP"==this.labelsDestination&&(this.matLabel="Filed No",this.matLabel2="Filed Name"),console.log(this.rulemappingData)},e=>{console.log(e)})}onSelectingMessageBasis(e){console.log("option for fieldno",e.value),console.log(e.value);var t=this.isoRespData.find(t=>t.messageBasis==e.value);this.isoRespData.forEach(e=>{e.messageKey=t.messageKey,this.tagName=e.messageKey,e.dataType=t.dataType})}onsaveRuleMapping(){let e={};e=this.ruleMappingDataForPayload,e.creatorId=this.currentUser,e.msgMappingDetails=this.rulemappingDetails.value,"NO"==e.approvedEver&&(e.approvedEver="N"),"YES"==e.approvedEver&&(e.approvedEver="Y"),"UNAUTHORIZED"==e.approvedStatus&&(e.approvedStatus="U"),"AUTHORIZED"==e.approvedStatus&&(e.approvedStatus="A"),"OPEN"==e.recordStatus&&(e.recordStatus="O"),"CLOSE"==e.recordStatus&&(e.recordStatus="C"),this.rulemap.updatingRuleMapping(e,this.currentUser).subscribe(e=>{console.log(e),e&&(this.addSysRespData=e,this.auditLog(),this.disableSubmitBtn=!0,p().fire({text:"Record is Updated",icon:"success"}),this.submit=!1,this.hideFetch=!1,this.formTouched=!this.ruleMappingForm.touched)},e=>{console.log(e.error.text),p().fire({text:"Unable to update the record, server error!",icon:"error"})})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(u.Q),d.Y36(y.N),d.Y36(a.F0),d.Y36(s.Ye),d.Y36(a.gz),d.Y36(c.Z),d.Y36(x.k),d.Y36(d.sBO),d.Y36(o.qu))},e.\u0275cmp=d.Xpm({type:e,selectors:[["npr-rule-mapping-details"]],decls:181,vars:22,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"formStyle",3,"formGroup"],[3,"disabled"],[1,"dbCardStyle"],[1,"addformCol"],[1,"row","g-4","align-items-center"],[1,"col"],[1,"row","gy-4","align-items-end"],[1,"col-lg-3"],["for","roleName",1,"formLbl"],[1,"colorRed"],["type","text","id","ruleName","name","serviceNameS","placeholder","Service Name","formControlName","systemCode","readonly","",1,"form-control"],["formControlName","messageType","aria-label","Default select example",1,"form-select",3,"disabled","change"],["hidden","","value","","disabled","","selected",""],["value","I"],["value","O"],["value","A"],["type","text","name","operationName","placeholder","Operation Name","formControlName","operationName","readonly","",1,"form-control"],["type","text","name","serviceName","placeholder","Service Name","formControlName","serviceName","readonly","",1,"form-control"],["formGroupName","destinationSystems"],["readonly","","formControlName","messageType","aria-label","Default select example",1,"form-select",3,"disabled","change"],["readonly","","type","text","name","operationName","placeholder","Operation Name","formControlName","operationName","readonly","",1,"form-control"],["readonly","","type","text","name","serviceName","placeholder","Service Name","formControlName","serviceName",1,"form-control",3,"disabled"],[1,"row","g-3","pb-3","justify-content-end","pt-3"],[1,"col-auto",3,"hidden"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"disabled","click"],["class","dbCardStyle",4,"ngIf"],[1,"dbCardStyle","mt-20"],[1,"row"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"csCardStyle"],[1,"row","g-2","align-items-center"],[1,"col-auto"],[1,"csCardStyleIcon","csCardStyleIconBg1"],[1,"fa","fa-edit","faClass"],[1,"csCardStyleText"],[1,"csCardStyleIcon","csCardStyleIconBg2"],["src","assets/images/time-stamp-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg3"],["aria-hidden","true",1,"fa","fa-files-o","faRecordStatus"],[1,"csCardStyleIcon","csCardStyleIconBg4"],[1,"fa","fa-check-square-o","faClassChecker"],[1,"csCardStyleIcon","csCardStyleIconBg5"],["src","assets/images/checker-time-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg6"],[1,"fa","fa-shield","faClassFirstTimeAuth"],[1,"csCardStyleIcon","csCardStyleIconBg7"],["src","assets/images/authorize.svg","alt","...",1,"modImage"],["src","assets/images/modification.svg","alt","...",1,"modImage"],["formArrayName","rulemappingDetails",1,"addformCol"],[4,"ngFor","ngForOf"],[1,"row","g-3","pt-4"],["class","addIcon primarybg",3,"hidden","click",4,"ngIf"],[1,"row","g-3","pb-3","pt-4","justify-content-end"],["class","col-auto",3,"hidden",4,"ngIf"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],[3,"formGroupName"],[1,"row","gy-4"],[1,"col-lg-4"],["for","roleName","class","formLbl",4,"ngIf"],[1,"col-lg-12"],[4,"ngIf"],["for","defaultValue","class","formLbl",4,"ngIf"],[3,"hidden","ngStyle"],["class","deleteIcon2","style","cursor: pointer;",3,"click",4,"ngIf"],["formControlName","sourceKey","aria-label","Default select example",1,"form-select",3,"disabled","value","change"],[3,"hidden","value",4,"ngFor","ngForOf"],[3,"hidden","value"],["formControlName","sourceKey","aria-label","Default select example",1,"form-select",3,"disabled","change"],["formControlName","sourceKey","aria-label","Default select example",1,"form-select",3,"disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","destinationKey","aria-label","Default select example",1,"form-select",3,"value","change"],[3,"value","hidden",4,"ngFor","ngForOf"],[3,"value","hidden"],["formControlName","destinationKey","aria-label","Default select example",1,"form-select",3,"change"],["formControlName","destinationKey","aria-label","Default select example",1,"form-select"],["for","defaultValue",1,"formLbl"],["type","text","id","defaultVal","formControlName","defaultValue","placeholder","Default value",2,"background-color","#F8F9FA",3,"ngClass","readonly"],["type","text","id","defaultVal","formControlName","defaultValue","placeholder","Default value",2,"background-color","#FFFFFF",3,"ngClass"],[1,"deleteIcon2",2,"cursor","pointer",3,"click"],["src","assets/images/delete-icon.svg","alt","...",3,"ngClass"],[1,"addIcon","primarybg",3,"hidden","click"],["src","assets/images/plus-icon.svg","alt","..."],[1,"btn","smBtn","minWdSmBtn","btnUpdate",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnAuth",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"h2",2),d._uU(3,"Rule Mapping"),d.qZA(),d.qZA(),d.TgZ(4,"form",3),d.TgZ(5,"fieldset",4),d.TgZ(6,"div",5),d.TgZ(7,"div",6),d.TgZ(8,"div",7),d.TgZ(9,"div",8),d.TgZ(10,"div",9),d.TgZ(11,"div",10),d.TgZ(12,"label",11),d._uU(13,"Source System"),d.TgZ(14,"span",12),d._uU(15,"*"),d.qZA(),d.qZA(),d._UZ(16,"input",13),d.qZA(),d.TgZ(17,"div",10),d.TgZ(18,"label",11),d._uU(19,"Message Type"),d.TgZ(20,"span",12),d._uU(21,"*"),d.qZA(),d.qZA(),d.TgZ(22,"select",14),d.NdJ("change",function(e){return t.onSelectionOFMessageType(t.rulemapping.sourceTranslationId,e)}),d.TgZ(23,"option",15),d._uU(24,"--Please select--"),d.qZA(),d.TgZ(25,"option",16),d._uU(26," Incoming "),d.qZA(),d.TgZ(27,"option",17),d._uU(28," Outgoing "),d.qZA(),d.TgZ(29,"option",18),d._uU(30," All "),d.qZA(),d.qZA(),d.qZA(),d.TgZ(31,"div",10),d.TgZ(32,"label",11),d._uU(33,"Operation"),d.TgZ(34,"span",12),d._uU(35,"*"),d.qZA(),d.qZA(),d._UZ(36,"input",19),d.qZA(),d.TgZ(37,"div",10),d.TgZ(38,"label",11),d._uU(39,"Service"),d.TgZ(40,"span",12),d._uU(41,"*"),d.qZA(),d.qZA(),d._UZ(42,"input",20),d.qZA(),d.ynx(43,21),d.TgZ(44,"div",10),d.TgZ(45,"label",11),d._uU(46,"Destination System"),d.TgZ(47,"span",12),d._uU(48,"*"),d.qZA(),d.qZA(),d._UZ(49,"input",13),d.qZA(),d.TgZ(50,"div",10),d.TgZ(51,"label",11),d._uU(52,"Message Type"),d.TgZ(53,"span",12),d._uU(54,"*"),d.qZA(),d.qZA(),d.TgZ(55,"select",22),d.NdJ("change",function(e){return t.msgTypeOfDestination(e)}),d.TgZ(56,"option",15),d._uU(57,"--Please select--"),d.qZA(),d.TgZ(58,"option",16),d._uU(59," Incoming "),d.qZA(),d.TgZ(60,"option",17),d._uU(61," Outgoing "),d.qZA(),d.TgZ(62,"option",18),d._uU(63," All "),d.qZA(),d.qZA(),d.qZA(),d.TgZ(64,"div",10),d.TgZ(65,"label",11),d._uU(66,"Operation"),d.TgZ(67,"span",12),d._uU(68,"*"),d.qZA(),d.qZA(),d._UZ(69,"input",23),d.qZA(),d.TgZ(70,"div",10),d.TgZ(71,"label",11),d._uU(72,"Service"),d.TgZ(73,"span",12),d._uU(74,"*"),d.qZA(),d.qZA(),d._UZ(75,"input",24),d.qZA(),d.BQk(),d.TgZ(76,"div",25),d.TgZ(77,"div",26),d.TgZ(78,"button",27),d.NdJ("click",function(){return t.fetchDestination()}),d._uU(79," Fetch "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(80,Nt,19,11,"div",28),d.qZA(),d.qZA(),d.TgZ(81,"div",29),d.TgZ(82,"div",30),d.TgZ(83,"div",31),d.TgZ(84,"div",32),d.TgZ(85,"div",33),d.TgZ(86,"div",34),d.TgZ(87,"div",35),d._UZ(88,"i",36),d.qZA(),d.qZA(),d.TgZ(89,"div",8),d.TgZ(90,"div",37),d.TgZ(91,"h2"),d._uU(92,"Maker"),d.qZA(),d.TgZ(93,"p"),d._uU(94),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(95,"div",31),d.TgZ(96,"div",32),d.TgZ(97,"div",33),d.TgZ(98,"div",34),d.TgZ(99,"div",38),d._UZ(100,"img",39),d.qZA(),d.qZA(),d.TgZ(101,"div",8),d.TgZ(102,"div",37),d.TgZ(103,"h2"),d._uU(104,"Maker Time Stamp"),d.qZA(),d.TgZ(105,"p"),d._uU(106),d.ALo(107,"date"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(108,"div",31),d.TgZ(109,"div",32),d.TgZ(110,"div",33),d.TgZ(111,"div",34),d.TgZ(112,"div",40),d._UZ(113,"i",41),d.qZA(),d.qZA(),d.TgZ(114,"div",8),d.TgZ(115,"div",37),d.TgZ(116,"h2"),d._uU(117,"Record Status"),d.qZA(),d.TgZ(118,"p"),d._uU(119),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(120,"div",31),d.TgZ(121,"div",32),d.TgZ(122,"div",33),d.TgZ(123,"div",34),d.TgZ(124,"div",42),d._UZ(125,"i",43),d.qZA(),d.qZA(),d.TgZ(126,"div",8),d.TgZ(127,"div",37),d.TgZ(128,"h2"),d._uU(129,"Checker"),d.qZA(),d.TgZ(130,"p"),d._uU(131),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(132,"div",31),d.TgZ(133,"div",32),d.TgZ(134,"div",33),d.TgZ(135,"div",34),d.TgZ(136,"div",44),d._UZ(137,"img",45),d.qZA(),d.qZA(),d.TgZ(138,"div",8),d.TgZ(139,"div",37),d.TgZ(140,"h2"),d._uU(141,"Checker Time Stamp"),d.qZA(),d.TgZ(142,"p"),d._uU(143),d.ALo(144,"date"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(145,"div",31),d.TgZ(146,"div",32),d.TgZ(147,"div",33),d.TgZ(148,"div",34),d.TgZ(149,"div",46),d._UZ(150,"i",47),d.qZA(),d.qZA(),d.TgZ(151,"div",8),d.TgZ(152,"div",37),d.TgZ(153,"h2"),d._uU(154,"First Time Authorization"),d.qZA(),d.TgZ(155,"p"),d._uU(156),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(157,"div",31),d.TgZ(158,"div",32),d.TgZ(159,"div",33),d.TgZ(160,"div",34),d.TgZ(161,"div",48),d._UZ(162,"img",49),d.qZA(),d.qZA(),d.TgZ(163,"div",8),d.TgZ(164,"div",37),d.TgZ(165,"h2"),d._uU(166,"Authorization Status"),d.qZA(),d.TgZ(167,"p"),d._uU(168),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(169,"div",31),d.TgZ(170,"div",32),d.TgZ(171,"div",33),d.TgZ(172,"div",34),d.TgZ(173,"div",48),d._UZ(174,"img",50),d.qZA(),d.qZA(),d.TgZ(175,"div",8),d.TgZ(176,"div",37),d.TgZ(177,"h2"),d._uU(178,"Modification Number"),d.qZA(),d.TgZ(179,"p"),d._uU(180),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(4),d.Q6J("formGroup",t.ruleMappingForm),d.xp6(1),d.Q6J("disabled",!t.disableFields),d.xp6(17),d.Q6J("disabled",!t.editFetch),d.xp6(33),d.Q6J("disabled",!t.editFetch),d.xp6(20),d.Q6J("disabled",!t.editFetch),d.xp6(2),d.Q6J("hidden",!t.hideFetch),d.xp6(1),d.Q6J("disabled",t.disableFetchBtn),d.xp6(2),d.Q6J("ngIf",t.showSource||t.showDestination),d.xp6(14),d.Oqu(t.addSysRespData.creatorId),d.xp6(12),d.Oqu(d.xi3(107,16,t.addSysRespData.createdTime,"MM/dd/yyyy, h:mm a")),d.xp6(13),d.Oqu("O"==t.addSysRespData.recordStatus?"OPEN":"C"==t.addSysRespData.recordStatus?"CLOSED":t.addSysRespData.recordStatus),d.xp6(12),d.Oqu(t.addSysRespData.approverId),d.xp6(12),d.Oqu(d.xi3(144,19,t.addSysRespData.approvedTime,"MM/dd/yyyy, h:mm a")),d.xp6(13),d.Oqu("N"==t.addSysRespData.approvedEver?"NO":"Y"==t.addSysRespData.approvedEver?"YES":t.addSysRespData.approvedEver),d.xp6(12),d.Oqu("N"==t.addSysRespData.approvedStatus||"U"==t.addSysRespData.approvedStatus?"UNAUTHORIZED":"Y"==t.addSysRespData.approvedStatus||"A"==t.addSysRespData.approvedStatus?"AUTHORIZED":t.addSysRespData.approvedStatus),d.xp6(12),d.Oqu(t.addSysRespData.versionNo))},directives:[o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,o.EJ,o.YN,o.Kr,o.x0,s.O5,o.CE,s.sg,a.yS,s.PC,s.mk],pipes:[s.uU],styles:[".m-10[_ngcontent-%COMP%]{margin-top:10px}.path[_ngcontent-%COMP%]{vertical-align:top;margin-top:0;margin-bottom:20px;min-width:120px;border-spacing:1.5}.first[_ngcontent-%COMP%]{margin-top:10px}.image[_ngcontent-%COMP%]{vertical-align:top;top:-8px;position:relative}.first-image[_ngcontent-%COMP%]{top:8px}"]}),e})();class Ot{}class Ut{}var wt=i(3118),Et=i(91841),_t=i(17988);const Ft=function(){return["/rule-mapping/create"]},Jt=function(){return["active"]};function Qt(e,t){if(1&e&&(d.TgZ(0,"div",6),d.TgZ(1,"a",11),d._uU(2),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("routerLink",d.DdM(3,Ft))("routerLinkActive",d.DdM(4,Jt)),d.xp6(1),d.Oqu(e.roleCodes.new.labelDescription)}}function Bt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",20),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw(2).close(t)}),d._UZ(1,"img",21),d.qZA()}}function Yt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",22),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw(2).open(t)}),d._UZ(1,"img",23),d.qZA()}}function kt(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",24),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw(2).delete(t)}),d._UZ(1,"img",25),d.qZA()}}const Lt=function(){return["/rule-mapping/conversion"]};function Ht(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"td"),d.TgZ(2,"a",13),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw(2).getById(t)}),d._uU(3),d.qZA(),d.qZA(),d.TgZ(4,"td"),d._uU(5),d.qZA(),d.TgZ(6,"td"),d._uU(7),d.qZA(),d.TgZ(8,"td"),d._uU(9),d.qZA(),d.TgZ(10,"td"),d._uU(11),d.ALo(12,"date"),d.qZA(),d.TgZ(13,"td"),d.TgZ(14,"button",14),d._uU(15,"Conversion"),d.qZA(),d.qZA(),d.TgZ(16,"td"),d.TgZ(17,"button",15),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw(2).auth(t)}),d._UZ(18,"img",16),d.qZA(),d.YNc(19,Bt,2,0,"button",17),d.YNc(20,Yt,2,0,"button",18),d.YNc(21,kt,2,0,"button",19),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit;d.xp6(3),d.Oqu(e.sourceTransDetId),d.xp6(2),d.Oqu(e.targetTransDetId),d.xp6(2),d.Oqu(e.mdmtMessageMapping.approvedStatus),d.xp6(2),d.Oqu(e.mdmtMessageMapping.recordStatus),d.xp6(2),d.Oqu(d.xi3(12,10,e.mdmtMessageMapping.createdTime,"medium")),d.xp6(3),d.Q6J("routerLink",d.DdM(13,Lt)),d.xp6(3),d.Q6J("disabled",!("U"==e.mdmtMessageMapping.approvedStatus||"UNAUTHORIZED"==e.mdmtMessageMapping.approvedStatus||"Unauthorized"==e.mdmtMessageMapping.approvedStatus)),d.xp6(2),d.Q6J("ngIf",!("O"!=e.mdmtMessageMapping.recordStatus&&"Open"!=e.mdmtMessageMapping.recordStatus&&"OPEN"!=e.mdmtMessageMapping.recordStatus||"Y"!=e.mdmtMessageMapping.approvedEver&&"YES"!=e.mdmtMessageMapping.approvedEver)),d.xp6(1),d.Q6J("ngIf",!("CLOSED"!=e.mdmtMessageMapping.recordStatus&&"Close"!=e.mdmtMessageMapping.recordStatus||"YES"!=e.mdmtMessageMapping.approvedEver&&"Y"!=e.mdmtMessageMapping.approvedEver)),d.xp6(1),d.Q6J("ngIf","N"==e.mdmtMessageMapping.approvedEver||"NO"==e.mdmtMessageMapping.approvedEver)}}function Pt(e,t){if(1&e&&(d.TgZ(0,"tbody"),d.YNc(1,Ht,22,14,"tr",12),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngForOf",e.ruleMappingListResp)}}function $t(e,t){1&e&&(d.TgZ(0,"tbody"),d._UZ(1,"tr"),d.qZA())}function Vt(e,t){1&e&&(d.ynx(0),d.TgZ(1,"div",26),d.TgZ(2,"span",27),d._uU(3,"Please wait... "),d._UZ(4,"span",28),d.qZA(),d.qZA(),d.BQk())}const jt=function(){return["/dashboard"]},zt=[{path:"create",component:we,canDeactivate:[n.I]},{path:"edit/:mapId",component:It,canDeactivate:[n.I]},{path:"summary",component:(()=>{class e{constructor(e,t,i,s,a,n){this.rulelist=e,this.roleService=t,this.router=i,this.addSystem=s,this.cdr=a,this.http=n,this.dtTrigger=new r.xQ,this.dtOptions={},this.ruleMappingListResp=[],this.isLoading=!1,this.roleCodes=new S.yv,this.statusArr=["Authorized","Unauthorized","Open","Close"],this.API_URL=wt.$.baseURL}ngOnInit(){this.currentUser=localStorage.getItem("userFromLogin"),this.addSystem.setReference({referenceId:""}),localStorage.setItem("link",""),this.dtOptions={pagingType:"full_numbers",pageLength:5,serverSide:!0,columnDefs:[{type:"date",targets:[4]}],order:[[4,"desc"]],lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]],ajax:(e,t)=>{e.minNumber=e.start+1,e.maxNumber=e.start+e.length,console.log(e.minNumber,e.maxNumber);const i=Math.floor(e.minNumber/e.length);this.http.get(`${this.API_URL}/msgApi/getAllMapping?pageNo=${i}&pageSize=${e.length}&search=${e.search.value}`).subscribe(e=>{console.log(e);for(let t of e.result)t.recordStatus=this.statusArr.find(e=>e.startsWith(t.recordStatus)),t.approvedStatus=this.statusArr.find(e=>e.startsWith(t.approvedStatus));this.totalPages=e.totalNoOfPages,this.totalRecords=e.totalRecords,this.ruleMappingListResp=e.result;for(let t of this.ruleMappingListResp)this.auditLog(t);this.isLoading=!1,this.cdr.markForCheck(),t({recordsTotal:e.totalRecords,recordsFiltered:e.totalRecords,data:[]})})}},this.roleService.fetchScreenPermissions("Rule Mapping"),this.roleService.screenLabelList.subscribe(e=>this.roleCodes=e),console.log(this.roleCodes)}auditLog(e){console.log(e),("U"==e.mdmtMessageMapping.approvedStatus||"Unauthorized"==e.mdmtMessageMapping.approvedStatus||"UNAUTHORIZED"==e.mdmtMessageMapping.approvedStatus)&&(e.mdmtMessageMapping.approvedStatus="UNAUTHORIZED"),("A"==e.mdmtMessageMapping.approvedStatus||"Authorized"==e.mdmtMessageMapping.approvedStatus||"AUTHORIZED"==e.mdmtMessageMapping.approvedStatus)&&(e.mdmtMessageMapping.approvedStatus="AUTHORIZED"),("O"==e.mdmtMessageMapping.recordStatus||"Open"==e.mdmtMessageMapping.recordStatus)&&(e.mdmtMessageMapping.recordStatus="OPEN"),("C"==e.mdmtMessageMapping.recordStatus||"Close"==e.mdmtMessageMapping.recordStatus)&&(e.mdmtMessageMapping.recordStatus="CLOSED"),"N"==e.firstTimeAuth&&(console.log("NO"),e.firstTimeAuth="NO"),"Y"==e.firstTimeAuth&&(e.firstTimeAuth="YES")}fetchinglistRuleMapping(){this.isLoading=!0,this.rulelist.fetchingruleMapping().subscribe(e=>{for(let t of e.result)t.recordStatus=this.statusArr.find(e=>e.startsWith(t.recordStatus)),t.approvedStatus=this.statusArr.find(e=>e.startsWith(t.approvedStatus));console.log(e),this.ruleMappingListResp=e.result,this.isLoading=!1,this.cdr.markForCheck(),this.dtTrigger.next()})}getById(e){console.log("OnClick",e),e.mdmtMessageMapping.msgMappingDetails.length>0&&(e.mappingId=e.mdmtMessageMapping.msgMappingDetails[0].mappingId),console.log(0),this.rulelist.getruleMappingById(0,e.mappingId).subscribe(t=>{console.log(t),this.mappingDetailsArray=t.mdmtMessageMappingDet;let i={sourceTransDetId:t.sourceTransDetId,targetTransDetId:t.targetTransDetId,mdmtMessageMappingDet:t.mdmtMessageMappingDet,responseData:e};console.log(i),this.addSystem.sendNavParam(i),this.router.navigate(["/rule-mapping/edit",e.mappingId])})}open(e){console.log(e),p().fire({text:"You are trying to re-open record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(t=>{console.log("this is reopen ",t),!0===t.isConfirmed&&this.rulelist.editRuleMapping("open",this.currentUser,e).subscribe(e=>{this.addSysRespData=e,this.authBtnHide=!1,this.editBtn=!1,this.authBtn=!1,p().fire({text:"Record is Opened",icon:"success"}).then(()=>window.location.reload())})})}close(e){console.log(e),p().fire({text:"You are trying to close record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(t=>{console.log("this is reopen ",t),!0===t.isConfirmed&&this.rulelist.editRuleMapping("close",this.currentUser,e).subscribe(e=>{this.addSysRespData=e,this.editBtn=!0,this.authBtn=!0,this.deleted=!1,this.reopenBtn=!1,p().fire({text:"Record is  Closed",icon:"success"}).then(()=>window.location.reload())})})}delete(e){console.log(e),p().fire({text:"You are trying to delete record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(t=>{console.log("this is reopen ",t),!0===t.isConfirmed&&this.rulelist.ondeleteMapping(e.mappingId,this.currentUser).subscribe(e=>{e?(this.deleted=!0,this.editBtn=!0,this.authBtn=!0,this.closeBtn=!0,p().fire({title:"Record is Deleted",confirmButtonText:"Ok"}).then(()=>window.location.reload())):p().fire("Failed to delete the reocrd")})})}auth(e){console.log(e),p().fire({text:"You are trying to Authorize record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(t=>{console.log("this is reopen ",t),!0===t.isConfirmed&&(console.log(e.creatorId),this.currentUser==e.creatorId?p().fire("Maker cannot authorize the record!"):this.rulelist.editRuleMapping("auth",this.currentUser,e.mdmtMessageMapping).subscribe(e=>{this.authorizeDone=!0,this.addSysRespData=e,p().fire({text:"Record is Authorized"}).then(()=>window.location.reload())}))})}ngOnDestroy(){this.dtTrigger.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(u.Q),d.Y36(y.N),d.Y36(a.F0),d.Y36(c.Z),d.Y36(d.sBO),d.Y36(Et.eN))},e.\u0275cmp=d.Xpm({type:e,selectors:[["npr-rule-mapping"]],decls:31,vars:7,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"dbCardStyle"],[1,"row","g-3","pb-3","justify-content-end"],["class","col-auto",4,"ngIf"],[1,"col-auto"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],[1,"table-responsive"],["datatable","","id","dbTable1",1,"dataTable","table","tableStyle","nowrap","vAlignMdl",2,"width","100%",3,"dtOptions"],[4,"ngIf"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"routerLink","routerLinkActive"],[4,"ngFor","ngForOf"],[1,"primaryColor",2,"cursor","pointer",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"routerLink"],["title","Authorize",1,"btn",2,"color","red",3,"disabled","click"],["src","assets/images/authorize.svg","alt","Authorize",1,"summaryIcon"],["class","btn","style","color: red","title","Close",3,"click",4,"ngIf"],["class","btn","style","color: red","title","Reopen",3,"click",4,"ngIf"],["class","btn","style","color: red","title","Delete",3,"click",4,"ngIf"],["title","Close",1,"btn",2,"color","red",3,"click"],["src","assets/images/CROSS1.svg","alt","...",1,"summaryIcon"],["title","Reopen",1,"btn",2,"color","red",3,"click"],["src","assets/images/open.svg","alt","...",1,"summaryIcon"],["title","Delete",1,"btn",2,"color","red",3,"click"],["src","assets/images/delete.svg","alt","...",1,"summaryIcon"],[1,"loading-page-center"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"h2",2),d._uU(3,"Rule Mapping"),d.qZA(),d.qZA(),d.TgZ(4,"div",3),d.TgZ(5,"div",4),d.YNc(6,Qt,3,5,"div",5),d.TgZ(7,"div",6),d.TgZ(8,"a",7),d._uU(9,"Exit"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",8),d.TgZ(11,"table",9),d.TgZ(12,"thead"),d.TgZ(13,"tr"),d.TgZ(14,"th"),d._uU(15,"Source System"),d.qZA(),d.TgZ(16,"th"),d._uU(17,"Destination System"),d.qZA(),d.TgZ(18,"th"),d._uU(19,"Auth Status"),d.qZA(),d.TgZ(20,"th"),d._uU(21,"Record Status"),d.qZA(),d.TgZ(22,"th"),d._uU(23,"Date"),d.qZA(),d.TgZ(24,"th"),d._uU(25,"Conversion"),d.qZA(),d.TgZ(26,"th"),d._uU(27,"Action"),d.qZA(),d.qZA(),d.qZA(),d.YNc(28,Pt,2,1,"tbody",10),d.YNc(29,$t,2,0,"tbody",10),d.qZA(),d.qZA(),d.YNc(30,Vt,5,0,"ng-container",10),d.qZA(),d.qZA()),2&e&&(d.xp6(6),d.Q6J("ngIf",t.roleCodes.new),d.xp6(2),d.Q6J("routerLink",d.DdM(6,jt)),d.xp6(3),d.Q6J("dtOptions",t.dtOptions),d.xp6(17),d.Q6J("ngIf",0!=(null==t.ruleMappingListResp?null:t.ruleMappingListResp.length)),d.xp6(1),d.Q6J("ngIf",0==(null==t.ruleMappingListResp?null:t.ruleMappingListResp.length)),d.xp6(1),d.Q6J("ngIf",t.isLoading))},directives:[s.O5,a.yS,_t.G,a.Od,s.sg,a.rH],pipes:[s.uU],styles:[""]}),e})()},{path:"conversion",component:A}];let Kt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[a.Bz.forChild(zt)],a.Bz]}),e})(),Xt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[s.ez,Kt,_t.T,o.UX,o.u5,q.A0]]}),e})()}}]);