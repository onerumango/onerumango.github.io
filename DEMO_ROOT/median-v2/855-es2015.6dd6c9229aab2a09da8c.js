"use strict";(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[855],{17988:function(e,t,n){n.d(t,{G:function(){return r},T:function(){return a}});var i=n(37716),r=function(){function e(e,t,n){this.el=e,this.vcr=t,this.renderer=n,this.dtOptions={}}return e.prototype.ngOnInit=function(){var e=this;this.dtTrigger?this.dtTrigger.subscribe(function(t){e.displayTable(t)}):this.displayTable(null)},e.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},e.prototype.displayTable=function(e){var t=this;e&&(this.dtOptions=e),this.dtInstance=new Promise(function(e,n){Promise.resolve(t.dtOptions).then(function(i){0===Object.keys(i).length&&0===$("tbody tr",t.el.nativeElement).length?n("Both the table and dtOptions cannot be empty"):setTimeout(function(){var n={rowCallback:function(e,n,r){if(i.columns){var o=i.columns;t.applyNgPipeTransform(e,o),t.applyNgRefTemplate(e,o,n)}i.rowCallback&&i.rowCallback(e,n,r)}};n=Object.assign({},i,n),t.dt=$(t.el.nativeElement).DataTable(n),e(t.dt)})})})},e.prototype.applyNgPipeTransform=function(e,t){t.filter(function(e){return e.ngPipeInstance&&!e.ngTemplateRef}).forEach(function(n){var i=n.ngPipeInstance,r=t.findIndex(function(e){return e.data===n.data}),o=e.childNodes.item(r),a=$(o).text(),s=i.transform(a);$(o).text(s)})},e.prototype.applyNgRefTemplate=function(e,t,n){var i=this;t.filter(function(e){return e.ngTemplateRef&&!e.ngPipeInstance}).forEach(function(r){var o=r.ngTemplateRef,a=o.ref,s=o.context,c=t.findIndex(function(e){return e.data===r.data}),d=e.childNodes.item(c);$(d).html("");var u=Object.assign({},s,null==s?void 0:s.userData,{adtData:n}),l=i.vcr.createEmbeddedView(a,u);i.renderer.appendChild(d,l.rootNodes[0])})},e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(i.s_b),i.Y36(i.Qsj))},e.\u0275dir=i.lG2({type:e,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),e}(),o=n(38583),a=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[o.ez]]}),e}()},33855:function(e,t,n){n.r(t),n.d(t,{ChargeMaintaineneceModule:function(){return L}});var i=n(38583),r=n(39895),o=n(50215),a=n(79765),s=n(35383),c=n(88259),d=n.n(c),u=n(37716),l=n(77382),g=n(3118),h=n(26215),p=n(91841);const Z=g.$.acctCloserUrl;let f=(()=>{class e{constructor(e){this.http=e,this.Index=new h.X({index:""})}setIndex(e){this.Index.next(e)}getIndex(){return this.Index.asObservable()}onchargeMaintenanceSubmit(e,t){return this.http.post(`${Z}/charges/save/${e}`,t)}onAuthofChargeMaintenance(e,t){return this.http.get(`${Z}/charges/verify/${e}/${t}`)}gettingChargeMaintenance(){return this.http.get(`${Z}/charges/getSummary`)}submittingTheEditedRecord(e,t){return console.log("in sevice",e),this.http.put(`${Z}/charges/modify/${t}`,e)}sendingIdforchargeMaintenanceEdit(e){return this.http.get(`${Z}/charges/getById/${e}`)}onClosingTheRecord(e,t){return this.http.get(`${Z}/charges/close/${e}/${t}`)}onReopningTheRecord(e,t){return this.http.get(`${Z}/charges/reopen/${e}/${t}`)}onDeletTheRecord(e,t){return this.http.delete(`${Z}/charges/delete/${e}/${t}`)}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(p.eN))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=n(17988);function T(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"a",12),u.NdJ("click",function(){return u.CHM(e),u.oxw().new()}),u._uU(1),u.qZA()}if(2&e){const e=u.oxw();u.xp6(1),u.Oqu(e.roleCodes.new.labelDescription)}}function v(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",19),u.NdJ("click",function(){u.CHM(e);const t=u.oxw().$implicit;return u.oxw().close(t)}),u._UZ(1,"img",20),u.qZA()}}function A(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",21),u.NdJ("click",function(){u.CHM(e);const t=u.oxw().$implicit;return u.oxw().open(t)}),u._UZ(1,"img",22),u.qZA()}}function x(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",23),u.NdJ("click",function(){u.CHM(e);const t=u.oxw().$implicit;return u.oxw().delete(t)}),u._UZ(1,"img",24),u.qZA()}}function b(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u.TgZ(2,"a",13),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw().edit(t)}),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"td"),u._uU(5),u.qZA(),u.TgZ(6,"td"),u._uU(7),u.qZA(),u.TgZ(8,"td"),u._uU(9),u.qZA(),u.TgZ(10,"td"),u._uU(11),u.qZA(),u.TgZ(12,"td"),u._uU(13),u.ALo(14,"date"),u.qZA(),u.TgZ(15,"td"),u.TgZ(16,"button",14),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw().auth(t)}),u._UZ(17,"img",15),u.qZA(),u.YNc(18,v,2,0,"button",16),u.YNc(19,A,2,0,"button",17),u.YNc(20,x,2,0,"button",18),u.qZA(),u.qZA()}if(2&e){const e=t.$implicit,n=u.oxw();u.xp6(3),u.Oqu(e.currency),u.xp6(2),u.Oqu(e.chargeAmount),u.xp6(2),u.Oqu(e.taxAmount),u.xp6(2),u.Oqu(e.verifiedStatus),u.xp6(2),u.Oqu(e.recordStatus),u.xp6(2),u.Oqu(u.xi3(14,10,e.inputTime,"medium")),u.xp6(3),u.Q6J("disabled",!("U"==e.verifiedStatus||"UNAUTHORIZED"==e.verifiedStatus||"Unauthorized"==e.verifiedStatus)),u.xp6(2),u.Q6J("ngIf",!("O"!=e.recordStatus&&"Open"!=e.recordStatus||"Y"!=e.verifiedOnce&&"YES"!=e.verifiedOnce)),u.xp6(1),u.Q6J("ngIf",!("C"!=e.recordStatus&&"CLOSED"!=e.recordStatus&&"Close"!=e.recordStatus||"Y"!=e.verifiedOnce&&"YES"!=e.verifiedOnce)),u.xp6(1),u.Q6J("ngIf","NO"==e.verifiedOnce||"N"==e.verifiedOnce&&n.roleCodes.delete)}}function q(e,t){1&e&&(u.ynx(0),u.TgZ(1,"div",25),u.TgZ(2,"span",26),u._uU(3,"Please wait... "),u._UZ(4,"span",27),u.qZA(),u.qZA(),u.BQk())}const C=function(){return["/dashboard"]};let y=(()=>{class e{constructor(e,t,n,i,r){this.roleService=e,this.apiService=t,this.router=n,this.cdr=i,this.chargeMaintenanceService=r,this.isLoading=!1,this.respArray=[],this.roleCodes=new s.yv,this.dtOptions={},this.dtTrigger=new a.xQ,this.statusArr=["Authorized","Unauthorized","Open","Close"]}ngOnInit(){setTimeout(()=>{this.newRolePermissions()},2e3),this.roleService.screenLabelList.subscribe(e=>this.roleCodes=e),setTimeout(()=>{console.log(this.roleCodes)},3e3),this.currentUser=localStorage.getItem("userFromLogin"),this.dtOptions={pagingType:"full_numbers",pageLength:5,columnDefs:[{type:"date",targets:[5]}],order:[[5,"desc"]],processing:!0,lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]],retrieve:!0},this.getChargeMaintainenceSummary()}newRolePermissions(){this.roleService.fetchScreenPermissions("Charge Maintenance")}getChargeMaintainenceSummary(){this.isLoading=!0,this.apiService.gettingChargeMaintenance().subscribe(e=>{for(let t of e)t.verifiedStatus=this.statusArr.find(e=>e.startsWith(t.verifiedStatus)),t.recordStatus=this.statusArr.find(e=>e.startsWith(t.recordStatus));console.log(e),this.respArray=e,this.isLoading=!1,this.dtTrigger.next()})}new(){localStorage.removeItem("idValue"),this.apiService.setIndex({index:""}),this.router.navigateByUrl("/charge-maintainence/create")}edit(e){this.apiService.setIndex({index:e.id}),localStorage.setItem("idValue",e.id),this.router.navigateByUrl("/charge-maintainence/create")}ngOnDestroy(){this.dtTrigger.unsubscribe()}close(e){console.log(e),d().fire({text:"You are trying to Close record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(t=>{console.log("this is reopen ",t),!0===t.isConfirmed&&(console.log("this is close"),this.chargeMaintenanceService.onClosingTheRecord(this.currentUser,e.id).subscribe(e=>{console.log(e),e&&(d().fire({text:"Record is Closed"}),this.refreshPage(),this.ngOnInit())}))})}open(e){d().fire({text:"You are trying to Reopen record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(t=>{console.log("this is reopen ",t),!0===t.isConfirmed&&this.chargeMaintenanceService.onReopningTheRecord(this.currentUser,e.id).subscribe(e=>{console.log(e),"O"==e.recordStatus?(d().fire({text:"Record is Reopened"}),this.refreshPage(),this.ngOnInit()):d().fire({text:"Record cannot be opened "})})})}delete(e){d().fire({text:"You are trying to Delete record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES.",icon:"info",iconColor:"#d33"}).then(t=>{console.log("this is reopen ",t),!0===t.isConfirmed&&this.chargeMaintenanceService.onDeletTheRecord(this.currentUser,e.id).subscribe(e=>{console.log(e),null==e.chargeAmount?(d().fire({text:"Record is Deleted"}),this.refreshPage(),this.ngOnInit(),this.router.navigate(["/charge-maintainence"])):d().fire({text:"Record cannot be delete "})})}),console.log("this is delete")}auth(e){d().fire({text:"You are trying to Authorize record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(t=>{if(console.log("this is reopen ",t),!0===t.isConfirmed){if(this.currentUser===e.inputBy)return void d().fire({text:"Maker Cannot Authorize Record!",icon:"error"});console.log("this is authorzation"),this.chargeMaintenanceService.onAuthofChargeMaintenance(this.currentUser,e.id).subscribe(e=>{console.log(e),null!=e.verifiedBy?(d().fire({text:"Record is Authorized"}),this.refreshPage(),this.ngOnInit()):d().fire({text:"Maker cannot authorize the record"})})}})}check(e){console.log(e)}refreshPage(){window.location.reload()}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(l.N),u.Y36(f),u.Y36(r.F0),u.Y36(u.sBO),u.Y36(f))},e.\u0275cmp=u.Xpm({type:e,selectors:[["npr-charge-maintainence-summary"]],decls:32,vars:7,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"dbCardStyle"],[1,"row","g-3","pb-3","justify-content-end"],[1,"col-auto"],["class","btn smBtn minWdSmBtn btnPrimary",3,"click",4,"ngIf"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],[1,"table-responsive"],["datatable","",1,"dataTable","table","tableStyle","nowrap","vAlignMdl",2,"width","100%",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[1,"primaryColor",2,"cursor","pointer",3,"click"],["title","Authorize",1,"btn",2,"color","red",3,"disabled","click"],["src","assets/images/authorize.svg","alt","Authorize",1,"summaryIcon"],["class","btn","style","color: red","title","Close",3,"click",4,"ngIf"],["class","btn","style","color: red","title","Reopen",3,"click",4,"ngIf"],["class","btn","style","color: red","title","Delete.",3,"click",4,"ngIf"],["title","Close",1,"btn",2,"color","red",3,"click"],["src","assets/images/CROSS1.svg","alt","...",1,"summaryIcon"],["title","Reopen",1,"btn",2,"color","red",3,"click"],["src","assets/images/open.svg","alt","...",1,"summaryIcon"],["title","Delete.",1,"btn",2,"color","red",3,"click"],["src","assets/images/delete.svg","alt","...",1,"summaryIcon"],[1,"loading-page-center"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"h2",2),u._uU(3,"Charge Maintenance Summary"),u.qZA(),u.qZA(),u.TgZ(4,"div",3),u.TgZ(5,"div",4),u.TgZ(6,"div",5),u.YNc(7,T,2,1,"a",6),u.qZA(),u.TgZ(8,"div",5),u.TgZ(9,"a",7),u._uU(10,"Exit"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(11,"div",8),u.TgZ(12,"table",9),u.TgZ(13,"thead"),u.TgZ(14,"tr"),u.TgZ(15,"th"),u._uU(16,"Currency"),u.qZA(),u.TgZ(17,"th"),u._uU(18,"Charge Amount"),u.qZA(),u.TgZ(19,"th"),u._uU(20,"Tax Amount"),u.qZA(),u.TgZ(21,"th"),u._uU(22,"Auth Status"),u.qZA(),u.TgZ(23,"th"),u._uU(24,"Record Status"),u.qZA(),u.TgZ(25,"th"),u._uU(26,"Date"),u.qZA(),u.TgZ(27,"th"),u._uU(28,"Actions"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(29,"tbody"),u.YNc(30,b,21,13,"tr",10),u.qZA(),u.qZA(),u.qZA(),u.YNc(31,q,5,0,"ng-container",11),u.qZA(),u.qZA()),2&e&&(u.xp6(7),u.Q6J("ngIf",t.roleCodes.new),u.xp6(2),u.Q6J("routerLink",u.DdM(6,C)),u.xp6(3),u.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),u.xp6(18),u.Q6J("ngForOf",t.respArray),u.xp6(1),u.Q6J("ngIf",t.isLoading))},directives:[i.O5,r.yS,m.G,i.sg],pipes:[i.uU],styles:[".iconBtn[_ngcontent-%COMP%]{background:none;border:none;outline:none;position:relative}.btnTooltip[_ngcontent-%COMP%]{position:absolute;background-color:#fff;display:none;top:24px;left:12px;border:1px solid black;padding:4px}.iconBtn[_ngcontent-%COMP%]:hover   .btnTooltip[_ngcontent-%COMP%]{display:block}"]}),e})();var S=n(3679),U=n(58117),O=n(31443);function B(e,t){1&e&&(u.TgZ(0,"div",21),u._uU(1," Max value allowed is 100 "),u.qZA())}function D(e,t){if(1&e&&(u.TgZ(0,"div",21),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.hij(" ",e.chargeForm.controls.taxAmount.errors.lessThan.message," ")}}function k(e,t){1&e&&(u.TgZ(0,"div",21),u._uU(1," Max value allowed is 100 "),u.qZA())}function I(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",18),u.TgZ(1,"button",22),u.NdJ("click",function(){return u.CHM(e),u.oxw().onSubmittingofChargeMaintenance("edit")}),u._uU(2,"Save"),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(1),u.Q6J("disabled",!e.chargeForm.dirty)}}function w(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",18),u.TgZ(1,"button",23),u.NdJ("click",function(){return u.CHM(e),u.oxw().onSubmitEditChargeMaintenance()}),u._uU(2),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(2),u.Oqu(e.roleCodes.edit.labelDescription)}}function _(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",18),u.TgZ(1,"button",24),u.NdJ("click",function(){return u.CHM(e),u.oxw().onAuthorizingTheRecord()}),u._uU(2),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(2),u.Oqu(e.roleCodes.auth.labelDescription)}}function N(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",18),u.TgZ(1,"button",25),u.NdJ("click",function(){return u.CHM(e),u.oxw().onClosingTheRecord()}),u._uU(2),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(2),u.Oqu(e.roleCodes.close.labelDescription)}}function M(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",18),u.TgZ(1,"button",26),u.NdJ("click",function(){return u.CHM(e),u.oxw().onReopningTheRecord()}),u._uU(2),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(2),u.Oqu(e.roleCodes.reopen.labelDescription)}}function F(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",18),u.TgZ(1,"button",26),u.NdJ("click",function(){return u.CHM(e),u.oxw().onDeletingTheRecord()}),u._uU(2),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(2),u.Oqu(e.roleCodes.delete.labelDescription)}}function R(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",18),u.TgZ(1,"button",27),u.NdJ("click",function(){return u.CHM(e),u.oxw().onSubmittingofChargeMaintenance("submit")}),u._uU(2,"Save"),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(1),u.Q6J("disabled",!e.chargeForm.valid||e.submitDisab)}}function Y(e,t){if(1&e&&(u.TgZ(0,"div",4),u.TgZ(1,"div",28),u.TgZ(2,"div",29),u.TgZ(3,"div",30),u.TgZ(4,"div",31),u.TgZ(5,"div",18),u.TgZ(6,"div",32),u._UZ(7,"i",33),u.qZA(),u.qZA(),u.TgZ(8,"div",34),u.TgZ(9,"div",35),u.TgZ(10,"h2"),u._uU(11,"Maker"),u.qZA(),u.TgZ(12,"p"),u._uU(13),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(14,"div",29),u.TgZ(15,"div",30),u.TgZ(16,"div",31),u.TgZ(17,"div",18),u.TgZ(18,"div",36),u._UZ(19,"img",37),u.qZA(),u.qZA(),u.TgZ(20,"div",34),u.TgZ(21,"div",35),u.TgZ(22,"h2"),u._uU(23,"Maker Time Stamp"),u.qZA(),u.TgZ(24,"p"),u._uU(25),u.ALo(26,"date"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(27,"div",29),u.TgZ(28,"div",30),u.TgZ(29,"div",31),u.TgZ(30,"div",18),u.TgZ(31,"div",38),u._UZ(32,"i",39),u.qZA(),u.qZA(),u.TgZ(33,"div",34),u.TgZ(34,"div",35),u.TgZ(35,"h2"),u._uU(36,"Record Status"),u.qZA(),u.TgZ(37,"p"),u._uU(38),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(39,"div",29),u.TgZ(40,"div",30),u.TgZ(41,"div",31),u.TgZ(42,"div",18),u.TgZ(43,"div",40),u._UZ(44,"i",41),u.qZA(),u.qZA(),u.TgZ(45,"div",34),u.TgZ(46,"div",35),u.TgZ(47,"h2"),u._uU(48,"Checker"),u.qZA(),u.TgZ(49,"p"),u._uU(50),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(51,"div",29),u.TgZ(52,"div",30),u.TgZ(53,"div",31),u.TgZ(54,"div",18),u.TgZ(55,"div",42),u._UZ(56,"img",43),u.qZA(),u.qZA(),u.TgZ(57,"div",34),u.TgZ(58,"div",35),u.TgZ(59,"h2"),u._uU(60,"Checker Time Stamp"),u.qZA(),u.TgZ(61,"p"),u._uU(62),u.ALo(63,"date"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(64,"div",29),u.TgZ(65,"div",30),u.TgZ(66,"div",31),u.TgZ(67,"div",18),u.TgZ(68,"div",44),u._UZ(69,"i",45),u.qZA(),u.qZA(),u.TgZ(70,"div",34),u.TgZ(71,"div",35),u.TgZ(72,"h2"),u._uU(73,"First Time Authorization"),u.qZA(),u.TgZ(74,"p"),u._uU(75),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(76,"div",29),u.TgZ(77,"div",30),u.TgZ(78,"div",31),u.TgZ(79,"div",18),u.TgZ(80,"div",46),u._UZ(81,"img",47),u.qZA(),u.qZA(),u.TgZ(82,"div",34),u.TgZ(83,"div",35),u.TgZ(84,"h2"),u._uU(85,"Authorization Status"),u.qZA(),u.TgZ(86,"p"),u._uU(87),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(88,"div",29),u.TgZ(89,"div",30),u.TgZ(90,"div",31),u.TgZ(91,"div",18),u.TgZ(92,"div",38),u._UZ(93,"img",48),u.qZA(),u.qZA(),u.TgZ(94,"div",34),u.TgZ(95,"div",35),u.TgZ(96,"h2"),u._uU(97,"Modification Number"),u.qZA(),u.TgZ(98,"p"),u._uU(99),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e){const e=u.oxw();u.xp6(13),u.Oqu(e.respData.inputBy),u.xp6(12),u.Oqu(u.xi3(26,8,e.respData.inputTime,"MM/dd/yyyy, h:mm a")),u.xp6(13),u.Oqu(e.respData.recordStatus),u.xp6(12),u.Oqu(e.respData.verifiedBy),u.xp6(12),u.Oqu(u.xi3(63,11,e.respData.verifiedTime,"MM/dd/yyyy, h:mm a")),u.xp6(13),u.Oqu(e.respData.verifiedOnce),u.xp6(12),u.Oqu(e.respData.verifiedStatus),u.xp6(12),u.Oqu(e.respData.modNo)}}const E=function(){return["/charge-maintainence"]},J=[{path:"",component:y},{path:"create",component:(()=>{class e{constructor(e,t,n,i,r,o){this.toastService=e,this.formBuilder=t,this.chargeMaintenanceService=n,this.roleService=i,this.router=r,this.cdr=o,this.editFlag=!0,this.roleCodes=new s.yv,this.formTouched=!0,this.showDialog=!1,this.subject=new a.xQ}ngOnInit(){this.idValue=localStorage.getItem("idValue"),setTimeout(()=>{this.newRolePermissions()},2e3),this.roleService.screenLabelList.subscribe(e=>this.roleCodes=e),setTimeout(()=>{console.log(this.roleCodes)},3e3),console.log("role codes",this.roleCodes),this.currentUser=localStorage.getItem("userFromLogin"),this.buildForm(""),null!=this.idValue&&this.chargeMaintenanceService.setIndex({index:this.idValue}),this.chargeMaintenanceService.getIndex().subscribe(e=>{e.index&&(this.index=e.index,this.onEditCharge(e.index))}),U.jc.set({validationMessage:{lessThan:"Tax Amount should be less than Charge amount."}})}buildForm(e){this.chargeForm=this.formBuilder.group({currency:[e?e.currency:"",S.kI.required],chargeAmount:[e?e.chargeAmount:"",S.kI.required],chargePercentage:[e?e.chargePercentage:"",[S.kI.required,S.kI.max(100),S.kI.min(0)]],taxAmount:[e?e.taxAmount:"",[S.kI.required,U.CM.lessThan({fieldName:"chargeAmount"})]],taxPercentage:[e?e.taxPercentage:"",[S.kI.required,S.kI.max(100),S.kI.min(0)]],inputBy:[e?e.inputBy:""],inputTime:[e?e.inputTime:""],recordStatus:[e?e.recordStatus:""],verifiedOnce:[e?e.verifiedOnce:""],verifiedBy:[e?e.verifiedBy:""],verifiedTime:[e?e.verifiedTime:""],verifiedStatus:[e?e.verifiedStatus:""],modNo:[e?e.modNo:""],id:[e?e.id:""]})}canExit(){let e=!1;return this.chargeForm.touched&&1==this.formTouched?d().fire({text:"There are unsaved changes in the screen. Would you like to navigate to other screen?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(t=>!0===t.isConfirmed?(e=!0,this.cdr.markForCheck(),e):(e=!1,this.cdr.markForCheck(),e)):(e=!0,new Promise((t,n)=>{!0===e&&(e=!0,this.cdr.markForCheck(),t(!0))}))}onSubmittingofChargeMaintenance(e){this.chargeForm.value.chargeAmount<this.chargeForm.value.taxAmount?d().fire({text:"Tax Amount should not be greater than Charge Amount!",icon:"warning"}):("submit"===e&&this.chargeMaintenanceService.onchargeMaintenanceSubmit(this.currentUser,this.chargeForm.value).subscribe(e=>{console.log(e),null==e.currency?(d().fire({text:"Record Already Exist",icon:"warning"}),this.submitDisab=!0):(this.respData=e,this.auditLog(),this.editFlag=!1,this.index=this.respData.id,this.formTouched=!this.chargeForm.touched,d().fire({text:"Record is Created ",icon:"success"}))}),"edit"===e&&this.chargeMaintenanceService.submittingTheEditedRecord(this.chargeForm.value,this.currentUser).subscribe(e=>{console.log(e),e?(this.respData=e,this.editFlag=!1,this.index=this.respData.id,this.auditLog(),this.formTouched=!this.chargeForm.touched,d().fire({text:"Record is Updated "})):d().fire({text:"Cannot update the record"})}))}onEditCharge(e){this.editFlag=!1,this.chargeMaintenanceService.sendingIdforchargeMaintenanceEdit(e).subscribe(e=>{console.log(e),this.respData=e,this.buildForm(e),this.auditLog()})}auditLog(){"O"==this.respData.recordStatus&&(this.respData.recordStatus="OPEN"),"C"==this.respData.recordStatus&&(this.respData.recordStatus="CLOSE"),"U"==this.respData.verifiedStatus&&(this.respData.verifiedStatus="UNAUTHORIZED"),"A"==this.respData.verifiedStatus&&(this.respData.verifiedStatus="AUTHORIZED"),"Y"==this.respData.verifiedOnce&&(this.respData.verifiedOnce="YES"),"N"==this.respData.verifiedOnce&&(this.respData.verifiedOnce="NO")}newRolePermissions(){this.roleService.fetchScreenPermissions("Charge Maintenance")}onAuthorizingTheRecord(){d().fire({text:"You are trying to Authorize record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(e=>{if(console.log("this is reopen ",e),!0===e.isConfirmed){if(this.currentUser===this.respData.inputBy)return void d().fire({text:"Maker Cannot Authorize Record!",icon:"error"});console.log("this is authorzation"),this.chargeMaintenanceService.onAuthofChargeMaintenance(this.currentUser,this.chargeForm.value.id).subscribe(e=>{console.log(e),this.respData=e,this.auditLog(),null!=this.respData.verifiedBy?d().fire({text:"Record is Authorized"}):d().fire({text:"Maker cannot authorize the record"})})}})}chargeAmountchecking(e){console.log("event",e.target.value),this.chargeAmount=e.target.value}taxAmountchecking(e){if(console.log("event",e.target.value),e.target.value>this.chargeAmount)return console.log("validation true"),{error:"Tax amount should be less than Charge Amount!"}}onSubmitEditChargeMaintenance(){console.log("This is Edit Charge Maintenance"),this.editFlag=!0,console.log(this.editFlag)}onClosingTheRecord(){d().fire({text:"You are trying to Close record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(e=>{console.log("this is reopen ",e),!0===e.isConfirmed&&(console.log("this is close"),this.chargeMaintenanceService.onClosingTheRecord(this.currentUser,this.chargeForm.value.id).subscribe(e=>{console.log(e),this.respData=e,this.auditLog(),this.respData&&d().fire({text:"Record is Closed"})}))})}onReopningTheRecord(){d().fire({text:"You are trying to Reopen record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(e=>{console.log("this is reopen ",e),!0===e.isConfirmed&&this.chargeMaintenanceService.onReopningTheRecord(this.currentUser,this.chargeForm.value.id).subscribe(e=>{console.log(e),this.respData=e,this.respData=e,"O"==this.respData.recordStatus?(this.auditLog(),d().fire({text:"Record is Reopened"})):d().fire({text:"Record cannot be opened "})})})}onDeletingTheRecord(){d().fire({text:"You are trying to Delete record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES.",icon:"info",iconColor:"#d33"}).then(e=>{console.log("this is reopen ",e),!0===e.isConfirmed&&this.chargeMaintenanceService.onDeletTheRecord(this.currentUser,this.chargeForm.value.id).subscribe(e=>{console.log(e),this.respData=e,this.respData=e,null==this.respData.chargeAmount?(this.auditLog(),d().fire({text:"Record is Deleted"}),this.router.navigate(["/charge-maintainence"])):d().fire({text:"Record cannot be delete "})})}),console.log("this is delete")}charOnly(e){return isNaN(Number(e.key))&&" "!==e.key}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(O.k),u.Y36(S.qu),u.Y36(f),u.Y36(l.N),u.Y36(r.F0),u.Y36(u.sBO))},e.\u0275cmp=u.Xpm({type:e,selectors:[["npr-charge-maintainenece"]],decls:58,vars:19,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],["action","",1,"formStyle",3,"formGroup"],[1,"dbCardStyle"],[1,"row","gy-4"],[1,"col-lg-4"],["for","",1,"formLbl"],[1,"colorRed"],["id","fname","oninput","this.value = this.value.toUpperCase()","formControlName","currency","maxlength","3","type","text","placeholder","Currency","value","",1,"form-control",3,"readonly","keypress"],["id","lname","type","number","formControlName","chargeAmount","placeholder","Charge Amount","value","",1,"form-control",3,"readonly","keyup"],["id","accNumber","type","number","formControlName","chargePercentage","placeholder","Charge Percentage","value","",1,"form-control",3,"readonly"],["class","invalid-feedback",4,"ngIf"],["id","cName","type","number","formControlName","taxAmount","placeholder","Tax Amount","value","",1,"form-control",3,"readonly","keyup"],["id","nationalID","formControlName","taxPercentage","type","number","placeholder","Tax Percentage","value","",1,"form-control",3,"readonly"],[1,"col-lg-12"],[1,"row","g-3","pb-3","justify-content-end","pt-3"],["class","col-auto",4,"ngIf"],[1,"col-auto"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],["class","dbCardStyle",4,"ngIf"],[1,"invalid-feedback"],["color","primary",1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"disabled","click"],["color","primary",1,"btn","smBtn","minWdSmBtn","btnUpdate",3,"click"],["color","primary",1,"btn","smBtn","minWdSmBtn","btnAuth",3,"click"],["color","primary",1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],["color","warn",1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"disabled","click"],[1,"row"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"csCardStyle"],[1,"row","g-2","align-items-center"],[1,"csCardStyleIcon","csCardStyleIconBg1"],[1,"fa","fa-edit","faClass"],[1,"col"],[1,"csCardStyleText"],[1,"csCardStyleIcon","csCardStyleIconBg2"],["src","assets/images/time-stamp-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg3"],["aria-hidden","true",1,"fa","fa-files-o","faRecordStatus"],[1,"csCardStyleIcon","csCardStyleIconBg4"],[1,"fa","fa-check-square-o","faClassChecker"],[1,"csCardStyleIcon","csCardStyleIconBg5"],["src","assets/images/checker-time-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg6"],[1,"fa","fa-shield","faClassFirstTimeAuth"],[1,"csCardStyleIcon","csCardStyleIconBg7"],["src","assets/images/authorize.svg","alt","...",1,"modImage"],["src","assets/images/modification.svg","alt","...",1,"modImage"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"h2",2),u._uU(3,"Charge Maintenance"),u.qZA(),u.qZA(),u.TgZ(4,"form",3),u.TgZ(5,"div",4),u.TgZ(6,"div",5),u.TgZ(7,"div",6),u.TgZ(8,"label",7),u._uU(9,"Currency"),u.TgZ(10,"span",8),u._uU(11,"*"),u.qZA(),u.qZA(),u.TgZ(12,"input",9),u.NdJ("keypress",function(e){return t.charOnly(e)}),u.qZA(),u.qZA(),u.qZA(),u._UZ(13,"br"),u.TgZ(14,"div",5),u.TgZ(15,"div",6),u.TgZ(16,"label",7),u._uU(17,"Charge Amount"),u.TgZ(18,"span",8),u._uU(19,"*"),u.qZA(),u.qZA(),u.TgZ(20,"input",10),u.NdJ("keyup",function(e){return t.chargeAmountchecking(e)}),u.qZA(),u.qZA(),u.TgZ(21,"div",6),u.TgZ(22,"label",7),u._uU(23,"Charge Percentage"),u.TgZ(24,"span",8),u._uU(25,"*"),u.qZA(),u.qZA(),u._UZ(26,"input",11),u.YNc(27,B,2,0,"div",12),u.qZA(),u.qZA(),u._UZ(28,"br"),u.TgZ(29,"div",5),u.TgZ(30,"div",6),u.TgZ(31,"label",7),u._uU(32,"Tax Amount"),u.TgZ(33,"span",8),u._uU(34,"*"),u.qZA(),u.qZA(),u.TgZ(35,"input",13),u.NdJ("keyup",function(e){return t.taxAmountchecking(e)}),u.qZA(),u.YNc(36,D,2,1,"div",12),u.qZA(),u.TgZ(37,"div",6),u.TgZ(38,"label",7),u._uU(39,"Tax Percentage"),u.TgZ(40,"span",8),u._uU(41,"*"),u.qZA(),u.qZA(),u._UZ(42,"input",14),u.YNc(43,k,2,0,"div",12),u.qZA(),u.qZA(),u._UZ(44,"br"),u.TgZ(45,"div",15),u.TgZ(46,"div",16),u.YNc(47,I,3,1,"div",17),u.YNc(48,w,3,1,"div",17),u.YNc(49,_,3,1,"div",17),u.YNc(50,N,3,1,"div",17),u.YNc(51,M,3,1,"div",17),u.YNc(52,F,3,1,"div",17),u.YNc(53,R,3,1,"div",17),u.TgZ(54,"div",18),u.TgZ(55,"a",19),u._uU(56,"Exit"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(57,Y,100,14,"div",20),u.qZA(),u.qZA()),2&e&&(u.xp6(4),u.Q6J("formGroup",t.chargeForm),u.xp6(8),u.Q6J("readonly",!t.editFlag),u.xp6(8),u.Q6J("readonly",!t.editFlag),u.xp6(6),u.Q6J("readonly",!t.editFlag),u.xp6(1),u.Q6J("ngIf",null==t.chargeForm.controls.chargePercentage.errors?null:t.chargeForm.controls.chargePercentage.errors.max),u.xp6(8),u.Q6J("readonly",!t.editFlag),u.xp6(1),u.Q6J("ngIf",t.chargeForm.controls.taxAmount.errors),u.xp6(6),u.Q6J("readonly",!t.editFlag),u.xp6(1),u.Q6J("ngIf",null==t.chargeForm.controls.taxPercentage.errors?null:t.chargeForm.controls.taxPercentage.errors.max),u.xp6(4),u.Q6J("ngIf",t.respData&&t.editFlag&&t.index),u.xp6(1),u.Q6J("ngIf",t.respData&&!t.editFlag&&"OPEN"==t.respData.recordStatus&&t.roleCodes.edit),u.xp6(1),u.Q6J("ngIf",t.respData&&!t.editFlag&&"UNAUTHORIZED"==t.respData.verifiedStatus&&t.roleCodes.auth),u.xp6(1),u.Q6J("ngIf",t.respData&&"OPEN"==t.respData.recordStatus&&!t.editFlag&&"YES"==t.respData.verifiedOnce&&t.roleCodes.close),u.xp6(1),u.Q6J("ngIf",t.respData&&"CLOSE"==t.respData.recordStatus&&!t.editFlag&&"YES"==t.respData.verifiedOnce&&t.roleCodes.reopen),u.xp6(1),u.Q6J("ngIf",t.respData&&!t.editFlag&&"NO"==t.respData.verifiedOnce&&t.roleCodes.delete),u.xp6(1),u.Q6J("ngIf",t.editFlag&&!t.index),u.xp6(2),u.Q6J("routerLink",u.DdM(18,E)),u.xp6(2),u.Q6J("ngIf",t.respData))},directives:[S._Y,S.JL,S.sg,S.Fj,S.JJ,S.u,S.nD,S.wV,i.O5,r.yS],pipes:[i.uU],styles:[""]}),e})(),canDeactivate:[o.I]}];let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[r.Bz.forChild(J)],r.Bz]}),e})(),L=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[i.ez,P,m.T,S.UX]]}),e})()}}]);