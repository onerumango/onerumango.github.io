!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[214],{21214:function(t,i,o){o.r(i),o.d(i,{ProfileModule:function(){return v}});var r,s=o(38583),a=o(39895),l=o(3679),u=o(88259),c=o.n(u),d=o(37716),g=o(94761),m=o(10402),f=o(98613),p=function(){return["/dashboard"]},h=[{path:"",component:(r=function(){function t(n,i,o,r,s){e(this,t),this.api=n,this.fb=i,this.router=o,this.apiService=r,this.userApi=s,this.hide1=!0,this.hide=!0,this.hide2=!0,this.submit=!1,this.uploadBtn=!1,this.isSaveEnable=!1}return n(t,[{key:"ngOnInit",value:function(){this.loggedInUser=localStorage.getItem("userFromLogin"),this.user=localStorage.getItem("userobj"),console.log(JSON.parse(this.user)),this.userForm=new l.cw({userId:new l.NI("",l.kI.required),userName:new l.NI("",l.kI.required),department:new l.NI("",[l.kI.required])}),this.getProfileImage(JSON.parse(this.user).userId),this.buildForm(JSON.parse(this.user))}},{key:"buildForm",value:function(e){this.userForm=new l.cw({userId:new l.NI(e?e.userId:"",l.kI.required),userName:new l.NI(e?e.userName:"",l.kI.required),department:new l.NI(e?e.department:"",[l.kI.required])})}},{key:"getProfileImage",value:function(e){var t=this;this.userApi.getCustomerDocuments(e).subscribe(function(e){console.log("data ::",e),e&&(t.profileId=e.id,t.url=e.fileUrl)})}},{key:"onSelectFile",value:function(e){var t=this;if(console.log(e,"Event"),e.target.files&&e.target.files[0]){this.profilePicture=e.target.files[0];var n=new FileReader;n.readAsDataURL(e.target.files[0]),n.onload=function(e){console.log("Profile Image Test:: ",n.result),t.url=e.target.result,console.log(t.url,"URL")},this.submitPhoto()}}},{key:"changeTheme",value:function(e){this.isSaveEnable=!0,this.selectedTheme=e,console.log(this.selectedTheme)}},{key:"updateTheme",value:function(){var e=this.lastBg;$(document).on("click",".tColor",function(t){t.preventDefault();var n=$(this).data("id");$(this).addClass("active").parent().siblings().find(".tColor").removeClass("active"),$("body").removeClass(e).addClass(n),localStorage.setItem("SELECTED_THEME",n),e=n,$(".ddParent").removeClass("actDD")})}},{key:"saveTheme",value:function(e){var t=this;this.userApi.saveTheme(JSON.parse(this.user).userId,e).subscribe(function(e){console.log(e),"Saved successfully"===e&&(console.log(e),c().fire({text:"Saved successfully",icon:"success"}))},function(e){"Saved successfully"===e.error.text&&(t.isSaveEnable=!1,c().fire({text:"Saved successfully",icon:"success"}))}),window.location.reload()}},{key:"submitPhoto",value:function(){var e=this;if(this.profilePicture){console.log(this.profilePicture);var t={};t.fileType=this.profilePicture.type,t.fileName=this.profilePicture.name,t.userId=JSON.parse(this.user).userId,console.log(t);var n=new FormData;n.append("data",JSON.stringify(t)),n.append("file",this.profilePicture),this.userApi.uploadDocument(n).subscribe(function(t){console.log(t),200===t.statusCodeValue&&(c().fire({text:"Image Uploaded Successfully",icon:"success"}),e.uploadBtn=!0)})}}},{key:"delete",value:function(){var e=this;c().fire({text:"You are trying to delete image.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(function(t){!0===t.isConfirmed&&(e.url=null,e.userApi.deleteProfileImage(JSON.parse(e.user).userId).subscribe(function(e){console.log("resp after deletion ",e),!0===e&&c().fire({text:"Image deleted Successfully",icon:"success"})}))})}}]),t}(),r.\u0275fac=function(e){return new(e||r)(d.Y36(g.sM),d.Y36(l.qu),d.Y36(a.F0),d.Y36(m.W),d.Y36(f.fz))},r.\u0275cmp=d.Xpm({type:r,selectors:[["npr-profile"]],decls:64,vars:6,consts:[[1,"mt-1"],[1,"pageTitleCol"],[1,"pageTitle"],["action","",1,"formStyle",3,"formGroup"],[1,"dbCardStyle"],[1,"row"],[1,"col-lg-4"],[1,"d-flex","justify-content-center"],[1,"image_outer_container"],[1,"green_icon",3,"click"],["type","file","name","myfile",2,"display","none",3,"change"],["file",""],[1,"image_inner_container"],[3,"src"],[1,"row","g-3","pt-3","mt-2","justify"],[1,"col-auto"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[1,"col-lg-6"],[3,"disabled"],[1,"row","gy-4",2,"margin-top","0%"],[1,"formLbl"],[1,"colorRed"],[1,"d-flex"],["id","userId","placeholder","Old Password","required","","value","","name","userId","formControlName","userId",1,"form-control"],["userId",""],["id","userName","placeholder","User Name","required","","value","","name","userName","formControlName","userName",1,"form-control"],["userName",""],["id","confirm password","placeholder","Confirm Password","required","","value","","name","department","formControlName","department",1,"form-control"],["department",""],[1,"row","mt-10"],["id","horizontal-list"],["data-id","selectedTheme?'theme1':'theme2'",1,"tColor","theme1",3,"click"],["data-id","selectedTheme",1,"tColor","theme2",3,"click"],[1,"row","g-3","pb-3","justify-content-end"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"disabled","click"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"]],template:function(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"h2",2),d._uU(3,"Profile"),d.qZA(),d.qZA(),d.TgZ(4,"form",3),d.TgZ(5,"div",4),d.TgZ(6,"div",5),d.TgZ(7,"div",6),d.TgZ(8,"div",7),d.TgZ(9,"div",8),d.TgZ(10,"div",9),d.NdJ("click",function(){return d.CHM(n),d.MAs(12).click()}),d.TgZ(11,"input",10,11),d.NdJ("change",function(e){return t.onSelectFile(e)}),d.qZA(),d.qZA(),d.TgZ(13,"div",12),d._UZ(14,"img",13),d.qZA(),d.qZA(),d.qZA(),d.TgZ(15,"div",14),d.TgZ(16,"div",15),d.TgZ(17,"button",16),d.NdJ("click",function(){return t.delete()}),d._uU(18," Delete Image "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(19,"div",17),d.TgZ(20,"div",5),d.TgZ(21,"fieldset",18),d.TgZ(22,"div",19),d.TgZ(23,"div",6),d.TgZ(24,"label",20),d._uU(25,"UserId"),d.TgZ(26,"span",21),d._uU(27,"*"),d.qZA(),d.qZA(),d.TgZ(28,"div",22),d._UZ(29,"input",23,24),d.qZA(),d.qZA(),d.TgZ(31,"div",6),d.TgZ(32,"label",20),d._uU(33,"User Name"),d.TgZ(34,"span",21),d._uU(35,"*"),d.qZA(),d.qZA(),d.TgZ(36,"div",22),d._UZ(37,"input",25,26),d.qZA(),d.qZA(),d.TgZ(39,"div",6),d.TgZ(40,"label",20),d._uU(41,"Department"),d.TgZ(42,"span",21),d._uU(43,"*"),d.qZA(),d.qZA(),d.TgZ(44,"div",22),d._UZ(45,"input",27,28),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(47,"div",29),d.TgZ(48,"div",6),d.TgZ(49,"div",15),d.TgZ(50,"span"),d._uU(51," Default Themes: "),d.qZA(),d.TgZ(52,"ul",30),d.TgZ(53,"li"),d.TgZ(54,"span",31),d.NdJ("click",function(){return t.changeTheme("theme1")}),d.qZA(),d.qZA(),d.TgZ(55,"li"),d.TgZ(56,"span",32),d.NdJ("click",function(){return t.changeTheme("theme2")}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(57,"div",33),d.TgZ(58,"div",15),d.TgZ(59,"button",34),d.NdJ("click",function(){return t.saveTheme(t.selectedTheme)}),d._uU(60,"Save "),d.qZA(),d.qZA(),d.TgZ(61,"div",15),d.TgZ(62,"a",35),d._uU(63,"Exit"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}2&e&&(d.xp6(4),d.Q6J("formGroup",t.userForm),d.xp6(10),d.Q6J("src",t.url?t.url:"assets/images/user.png",d.LSH),d.xp6(7),d.Q6J("disabled",!t.submit),d.xp6(38),d.Q6J("disabled",!t.isSaveEnable),d.xp6(3),d.Q6J("routerLink",d.DdM(5,p)))},directives:[l._Y,l.JL,l.sg,l.Fj,l.Q7,l.JJ,l.u,a.yS],styles:["img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:50%}.hoverable[_ngcontent-%COMP%]{position:relative;display:block;cursor:pointer;height:200px;width:200px;border:5px solid #000;border-radius:50%}.hoverable[_ngcontent-%COMP%]   .hover-text[_ngcontent-%COMP%]{position:absolute;display:none;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2}.hoverable[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{position:absolute;display:none;top:0;left:0;bottom:0;right:0;background-color:rgba(255,255,255,.5);pointer-events:none;border-radius:50%;z-index:1}.hoverable[_ngcontent-%COMP%]:hover   .hover-text[_ngcontent-%COMP%]{display:block}.hoverable[_ngcontent-%COMP%]:hover   .background[_ngcontent-%COMP%]{display:block}#fileInput[_ngcontent-%COMP%]{display:none}ul#horizontal-list[_ngcontent-%COMP%]{min-width:696px;list-style:none;padding-top:6px}.mt-10[_ngcontent-%COMP%]{margin-top:10px}ul#horizontal-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin-left:6px}.container[_ngcontent-%COMP%]{height:100%;align-content:center}.image_outer_container[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto;border-radius:50%;position:relative}.image_inner_container[_ngcontent-%COMP%]{border-radius:50%;padding:5px;background:#833ab4;background:linear-gradient(to bottom,#fcb045,#fd1d1d,#833ab4)}.image_inner_container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;width:200px;border-radius:50%;border:5px solid white}.image_outer_container[_ngcontent-%COMP%]   .green_icon[_ngcontent-%COMP%]{background:url(/assets/images/edit-small.svg);position:absolute;right:30px;bottom:10px;height:30px;width:30px;border:5px solid white;border-radius:50%;background-color:#fff}"]}),r)}],Z=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[a.Bz.forChild(h)],a.Bz]}),t}(),v=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[s.ez,Z,l.UX]]}),t}()}}])}();