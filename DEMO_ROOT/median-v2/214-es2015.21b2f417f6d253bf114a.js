"use strict";(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[214],{21214:function(e,t,i){i.r(t),i.d(t,{ProfileModule:function(){return h}});var n=i(38583),o=i(39895),r=i(3679),s=i(88259),l=i.n(s),a=i(37716),d=i(94761),c=i(10402),u=i(98613);const g=function(){return["/dashboard"]},m=[{path:"",component:(()=>{class e{constructor(e,t,i,n,o){this.api=e,this.fb=t,this.router=i,this.apiService=n,this.userApi=o,this.hide1=!0,this.hide=!0,this.hide2=!0,this.submit=!1,this.uploadBtn=!1,this.isSaveEnable=!1}ngOnInit(){this.loggedInUser=localStorage.getItem("userFromLogin"),this.user=localStorage.getItem("userobj"),console.log(JSON.parse(this.user)),this.userForm=new r.cw({userId:new r.NI("",r.kI.required),userName:new r.NI("",r.kI.required),department:new r.NI("",[r.kI.required])}),this.getProfileImage(JSON.parse(this.user).userId),this.buildForm(JSON.parse(this.user))}buildForm(e){this.userForm=new r.cw({userId:new r.NI(e?e.userId:"",r.kI.required),userName:new r.NI(e?e.userName:"",r.kI.required),department:new r.NI(e?e.department:"",[r.kI.required])})}getProfileImage(e){this.userApi.getCustomerDocuments(e).subscribe(e=>{console.log("data ::",e),e&&(this.profileId=e.id,this.url=e.fileUrl)})}onSelectFile(e){if(console.log(e,"Event"),e.target.files&&e.target.files[0]){this.profilePicture=e.target.files[0];var t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=e=>{console.log("Profile Image Test:: ",t.result),this.url=e.target.result,console.log(this.url,"URL")},this.submitPhoto()}}changeTheme(e){this.isSaveEnable=!0,this.selectedTheme=e,console.log(this.selectedTheme)}updateTheme(){var e=this.lastBg;$(document).on("click",".tColor",function(t){t.preventDefault();var i=$(this).data("id");$(this).addClass("active").parent().siblings().find(".tColor").removeClass("active"),$("body").removeClass(e).addClass(i),localStorage.setItem("SELECTED_THEME",i),e=i,$(".ddParent").removeClass("actDD")})}saveTheme(e){this.userApi.saveTheme(JSON.parse(this.user).userId,e).subscribe(e=>{console.log(e),"Saved successfully"===e&&(console.log(e),l().fire({text:"Saved successfully",icon:"success"}))},e=>{"Saved successfully"===e.error.text&&(this.isSaveEnable=!1,l().fire({text:"Saved successfully",icon:"success"}))}),window.location.reload()}submitPhoto(){if(this.profilePicture){console.log(this.profilePicture);let e={};e.fileType=this.profilePicture.type,e.fileName=this.profilePicture.name,e.userId=JSON.parse(this.user).userId,console.log(e);const t=new FormData;t.append("data",JSON.stringify(e)),t.append("file",this.profilePicture),this.userApi.uploadDocument(t).subscribe(e=>{console.log(e),200===e.statusCodeValue&&(l().fire({text:"Image Uploaded Successfully",icon:"success"}),this.uploadBtn=!0)})}}delete(){l().fire({text:"You are trying to delete image.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(e=>{!0===e.isConfirmed&&(this.url=null,this.userApi.deleteProfileImage(JSON.parse(this.user).userId).subscribe(e=>{console.log("resp after deletion ",e),!0===e&&l().fire({text:"Image deleted Successfully",icon:"success"})}))})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(d.sM),a.Y36(r.qu),a.Y36(o.F0),a.Y36(c.W),a.Y36(u.fz))},e.\u0275cmp=a.Xpm({type:e,selectors:[["npr-profile"]],decls:64,vars:6,consts:[[1,"mt-1"],[1,"pageTitleCol"],[1,"pageTitle"],["action","",1,"formStyle",3,"formGroup"],[1,"dbCardStyle"],[1,"row"],[1,"col-lg-4"],[1,"d-flex","justify-content-center"],[1,"image_outer_container"],[1,"green_icon",3,"click"],["type","file","name","myfile",2,"display","none",3,"change"],["file",""],[1,"image_inner_container"],[3,"src"],[1,"row","g-3","pt-3","mt-2","justify"],[1,"col-auto"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[1,"col-lg-6"],[3,"disabled"],[1,"row","gy-4",2,"margin-top","0%"],[1,"formLbl"],[1,"colorRed"],[1,"d-flex"],["id","userId","placeholder","Old Password","required","","value","","name","userId","formControlName","userId",1,"form-control"],["userId",""],["id","userName","placeholder","User Name","required","","value","","name","userName","formControlName","userName",1,"form-control"],["userName",""],["id","confirm password","placeholder","Confirm Password","required","","value","","name","department","formControlName","department",1,"form-control"],["department",""],[1,"row","mt-10"],["id","horizontal-list"],["data-id","selectedTheme?'theme1':'theme2'",1,"tColor","theme1",3,"click"],["data-id","selectedTheme",1,"tColor","theme2",3,"click"],[1,"row","g-3","pb-3","justify-content-end"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"disabled","click"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"]],template:function(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"h2",2),a._uU(3,"Profile"),a.qZA(),a.qZA(),a.TgZ(4,"form",3),a.TgZ(5,"div",4),a.TgZ(6,"div",5),a.TgZ(7,"div",6),a.TgZ(8,"div",7),a.TgZ(9,"div",8),a.TgZ(10,"div",9),a.NdJ("click",function(){return a.CHM(e),a.MAs(12).click()}),a.TgZ(11,"input",10,11),a.NdJ("change",function(e){return t.onSelectFile(e)}),a.qZA(),a.qZA(),a.TgZ(13,"div",12),a._UZ(14,"img",13),a.qZA(),a.qZA(),a.qZA(),a.TgZ(15,"div",14),a.TgZ(16,"div",15),a.TgZ(17,"button",16),a.NdJ("click",function(){return t.delete()}),a._uU(18," Delete Image "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(19,"div",17),a.TgZ(20,"div",5),a.TgZ(21,"fieldset",18),a.TgZ(22,"div",19),a.TgZ(23,"div",6),a.TgZ(24,"label",20),a._uU(25,"UserId"),a.TgZ(26,"span",21),a._uU(27,"*"),a.qZA(),a.qZA(),a.TgZ(28,"div",22),a._UZ(29,"input",23,24),a.qZA(),a.qZA(),a.TgZ(31,"div",6),a.TgZ(32,"label",20),a._uU(33,"User Name"),a.TgZ(34,"span",21),a._uU(35,"*"),a.qZA(),a.qZA(),a.TgZ(36,"div",22),a._UZ(37,"input",25,26),a.qZA(),a.qZA(),a.TgZ(39,"div",6),a.TgZ(40,"label",20),a._uU(41,"Department"),a.TgZ(42,"span",21),a._uU(43,"*"),a.qZA(),a.qZA(),a.TgZ(44,"div",22),a._UZ(45,"input",27,28),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(47,"div",29),a.TgZ(48,"div",6),a.TgZ(49,"div",15),a.TgZ(50,"span"),a._uU(51," Default Themes: "),a.qZA(),a.TgZ(52,"ul",30),a.TgZ(53,"li"),a.TgZ(54,"span",31),a.NdJ("click",function(){return t.changeTheme("theme1")}),a.qZA(),a.qZA(),a.TgZ(55,"li"),a.TgZ(56,"span",32),a.NdJ("click",function(){return t.changeTheme("theme2")}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(57,"div",33),a.TgZ(58,"div",15),a.TgZ(59,"button",34),a.NdJ("click",function(){return t.saveTheme(t.selectedTheme)}),a._uU(60,"Save "),a.qZA(),a.qZA(),a.TgZ(61,"div",15),a.TgZ(62,"a",35),a._uU(63,"Exit"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}2&e&&(a.xp6(4),a.Q6J("formGroup",t.userForm),a.xp6(10),a.Q6J("src",t.url?t.url:"assets/images/user.png",a.LSH),a.xp6(7),a.Q6J("disabled",!t.submit),a.xp6(38),a.Q6J("disabled",!t.isSaveEnable),a.xp6(3),a.Q6J("routerLink",a.DdM(5,g)))},directives:[r._Y,r.JL,r.sg,r.Fj,r.Q7,r.JJ,r.u,o.yS],styles:["img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:50%}.hoverable[_ngcontent-%COMP%]{position:relative;display:block;cursor:pointer;height:200px;width:200px;border:5px solid #000;border-radius:50%}.hoverable[_ngcontent-%COMP%]   .hover-text[_ngcontent-%COMP%]{position:absolute;display:none;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2}.hoverable[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{position:absolute;display:none;top:0;left:0;bottom:0;right:0;background-color:rgba(255,255,255,.5);pointer-events:none;border-radius:50%;z-index:1}.hoverable[_ngcontent-%COMP%]:hover   .hover-text[_ngcontent-%COMP%]{display:block}.hoverable[_ngcontent-%COMP%]:hover   .background[_ngcontent-%COMP%]{display:block}#fileInput[_ngcontent-%COMP%]{display:none}ul#horizontal-list[_ngcontent-%COMP%]{min-width:696px;list-style:none;padding-top:6px}.mt-10[_ngcontent-%COMP%]{margin-top:10px}ul#horizontal-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin-left:6px}.container[_ngcontent-%COMP%]{height:100%;align-content:center}.image_outer_container[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto;border-radius:50%;position:relative}.image_inner_container[_ngcontent-%COMP%]{border-radius:50%;padding:5px;background:#833ab4;background:linear-gradient(to bottom,#fcb045,#fd1d1d,#833ab4)}.image_inner_container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;width:200px;border-radius:50%;border:5px solid white}.image_outer_container[_ngcontent-%COMP%]   .green_icon[_ngcontent-%COMP%]{background:url(/assets/images/edit-small.svg);position:absolute;right:30px;bottom:10px;height:30px;width:30px;border:5px solid white;border-radius:50%;background-color:#fff}"]}),e})()}];let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[o.Bz.forChild(m)],o.Bz]}),e})(),h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[n.ez,p,r.UX]]}),e})()}}]);