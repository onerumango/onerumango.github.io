"use strict";(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[142],{17988:function(e,t,i){i.d(t,{G:function(){return n},T:function(){return r}});var o=i(37716),n=function(){function e(e,t,i){this.el=e,this.vcr=t,this.renderer=i,this.dtOptions={}}return e.prototype.ngOnInit=function(){var e=this;this.dtTrigger?this.dtTrigger.subscribe(function(t){e.displayTable(t)}):this.displayTable(null)},e.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},e.prototype.displayTable=function(e){var t=this;e&&(this.dtOptions=e),this.dtInstance=new Promise(function(e,i){Promise.resolve(t.dtOptions).then(function(o){0===Object.keys(o).length&&0===$("tbody tr",t.el.nativeElement).length?i("Both the table and dtOptions cannot be empty"):setTimeout(function(){var i={rowCallback:function(e,i,n){if(o.columns){var a=o.columns;t.applyNgPipeTransform(e,a),t.applyNgRefTemplate(e,a,i)}o.rowCallback&&o.rowCallback(e,i,n)}};i=Object.assign({},o,i),t.dt=$(t.el.nativeElement).DataTable(i),e(t.dt)})})})},e.prototype.applyNgPipeTransform=function(e,t){t.filter(function(e){return e.ngPipeInstance&&!e.ngTemplateRef}).forEach(function(i){var o=i.ngPipeInstance,n=t.findIndex(function(e){return e.data===i.data}),a=e.childNodes.item(n),r=$(a).text(),s=o.transform(r);$(a).text(s)})},e.prototype.applyNgRefTemplate=function(e,t,i){var o=this;t.filter(function(e){return e.ngTemplateRef&&!e.ngPipeInstance}).forEach(function(n){var a=n.ngTemplateRef,r=a.ref,s=a.context,l=t.findIndex(function(e){return e.data===n.data}),c=e.childNodes.item(l);$(c).html("");var d=Object.assign({},s,null==s?void 0:s.userData,{adtData:i}),u=o.vcr.createEmbeddedView(r,d);o.renderer.appendChild(c,u.rootNodes[0])})},e.\u0275fac=function(t){return new(t||e)(o.Y36(o.SBq),o.Y36(o.s_b),o.Y36(o.Qsj))},e.\u0275dir=o.lG2({type:e,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),e}(),a=i(38583),r=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[a.ez]]}),e}()},5515:function(e,t,i){i.d(t,{R:function(){return l}});var o=i(3118),n=i(26215),a=i(37716),r=i(91841);const s=o.$.baseURL;let l=(()=>{class e{constructor(e){this.http=e,this.paramSource=new n.X({}),this.getNavParam=this.paramSource.asObservable(),this.Index=new n.X({index:""})}sendNavParam(e){this.paramSource.next(e)}setIndexValue(e){this.Index.next(e)}getIndexValue(){return this.Index.asObservable()}emailMaintenance(e,t,i){return this.http.post(`${s}/emailMaintenence/createEmailNotif/${e}/${t}`,i)}getAllEmail(){return this.http.get(`${s}/emailMaintenence/summary?pageNo=0&pageSize=5000`)}sendAccType(e){return this.http.get(`${s}/emailMaintenence/getDetailsData/${e}`)}accountBlockingQuery(e,t){return this.http.post(`${s}/api/search/${t}`,e)}onClickOfAuthOfEmailManagement(e,t,i){return this.http.put(`${s}/emailMaintenence/${e}/${t}/${i}`,e)}onclickOfReopenOfEamilManagement(e,t){return this.http.get(`${s}/emailMaintenence/reopen/${e}/${t}`)}onclickOfCloseOfEmailManagement(e,t){return this.http.get(`${s}/emailMaintenence/close/${e}/${t}`)}onclickOfEditOfEmailManagement(e,t,i){return this.http.put(`${s}/emailMaintenence/modifyEmailNotif/${e}/${t}`,i)}onclickOfDeleteOfEmailManagement(e,t){return console.log(e,t),this.http.delete(`${s}/emailMaintenence/delete/${e}/${t}`)}custMoreDetails(){return this.http.get(`${s}/api/getMoreCustDetails`)}deleteingParticluarRow(e,t,i){return this.http.delete(`${s}/emailMaintenence/deleteById/${e}/${t}/${i}`)}last10Transaction(e,t,i){return this.http.get(`${s}/api/getLastTenTrans/${e}/${t}/${i}`)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(r.eN))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},62142:function(e,t,i){i.r(t),i.d(t,{EmailManagementModule:function(){return P}});var o=i(38583),n=i(39895),a=i(50215),r=i(3679),s=i(79765);class l{}var c=i(35383),d=i(88259),u=i.n(d),g=i(37716),m=i(5515),h=i(59119),f=i(80463),p=i(77382);function Z(e,t){1&e&&(g.TgZ(0,"div"),g._uU(1," Please Select Account Type "),g.qZA())}function A(e,t){if(1&e&&(g.TgZ(0,"div",23),g.YNc(1,Z,2,0,"div",24),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngIf",e.emailForm.get("accountType").errors.required)}}function v(e,t){1&e&&(g.TgZ(0,"div"),g._uU(1," Please Enter Email Id "),g.qZA())}function T(e,t){1&e&&(g.TgZ(0,"div"),g._uU(1," Please Enter Valid Email Id "),g.qZA())}function y(e,t){if(1&e&&(g.TgZ(0,"div",23),g.YNc(1,v,2,0,"div",24),g.YNc(2,T,2,0,"div",24),g.qZA()),2&e){const e=g.oxw().$implicit,t=g.oxw();g.xp6(1),g.Q6J("ngIf",e.get("emailId").errors.required),g.xp6(1),g.Q6J("ngIf",t.emailForm.controls.emails.invalid&&!e.get("emailId").errors.required)}}const S=function(e){return{isDisabled:e}};function q(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",25),g.TgZ(1,"div",26),g.ynx(2,27),g.TgZ(3,"div",7),g._UZ(4,"input",28),g.YNc(5,y,3,2,"div",13),g.qZA(),g.TgZ(6,"div",29),g.TgZ(7,"div",30),g.TgZ(8,"a",31),g.NdJ("click",function(){const t=g.CHM(e),i=t.index,o=t.$implicit;return g.oxw().removeAddress(i,o)}),g._UZ(9,"img",32),g.qZA(),g.qZA(),g.qZA(),g.BQk(),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit,i=t.index,o=g.oxw();g.xp6(2),g.Q6J("formGroup",e),g.xp6(2),g.MGl("name","address_",i," "),g.Q6J("readonly",o.editFlag)("email",!0),g.xp6(1),g.Q6J("ngIf",e.get("emailId").invalid&&(e.get("emailId").dirty||e.get("emailId").touched)),g.xp6(3),g.Q6J("ngClass",g.VKq(6,S,o.emailForm.controls.emails.invalid||o.editFlag))}}function b(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",33),g.TgZ(1,"div",34),g.TgZ(2,"div",17),g.TgZ(3,"button",35),g.NdJ("click",function(){return g.CHM(e),g.oxw().logValue()}),g._uU(4,"Save"),g.qZA(),g.qZA(),g.TgZ(5,"div",17),g.TgZ(6,"button",36),g._uU(7,"Exit"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.xp6(3),g.Q6J("disabled",e.emailForm.controls.emails.invalid||!e.emailForm.value.accountType||!e.submitBtn)}}function C(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",40),g.TgZ(1,"button",41),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).editValues()}),g._uU(2,"Edit"),g.qZA(),g.qZA()}}function O(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",40),g.TgZ(1,"button",42),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).logValue()}),g._uU(2,"Save"),g.qZA(),g.qZA()}if(2&e){const e=g.oxw(2);g.xp6(1),g.Q6J("disabled",e.emailForm.controls.emails.invalid||!e.emailForm.value.accountType||!e.emailForm.dirty)}}function x(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",40),g.TgZ(1,"button",43),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).onClickOfAuthOfEmailManagement()}),g._uU(2,"Auth"),g.qZA(),g.qZA()}}function B(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",40),g.TgZ(1,"button",44),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).onclickOfReopenOfEamilManagement()}),g._uU(2,"Reopen"),g.qZA(),g.qZA()}}function k(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",40),g.TgZ(1,"button",44),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).onclickOfCloseOfEmailManagement()}),g._uU(2,"Close"),g.qZA(),g.qZA()}}function I(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",40),g.TgZ(1,"button",35),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).onClickOfDeleteOfEmailManagement()}),g._uU(2,"Delete"),g.qZA(),g.qZA()}if(2&e){const e=g.oxw(2);g.xp6(1),g.Q6J("disabled",0!=e.emails.value.length)}}function E(e,t){if(1&e&&(g.TgZ(0,"div",37),g.TgZ(1,"div",38),g.YNc(2,C,3,0,"div",39),g.YNc(3,O,3,1,"div",39),g.YNc(4,x,3,0,"div",39),g.YNc(5,B,3,0,"div",39),g.YNc(6,k,3,0,"div",39),g.YNc(7,I,3,1,"div",39),g.TgZ(8,"div",40),g.TgZ(9,"button",36),g._uU(10,"Exit"),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){const e=g.oxw();g.xp6(2),g.Q6J("ngIf",e.editFlag&&("OPEN"==e.eamilAuditLog.recordStatus||"Open"==e.eamilAuditLog.recordStatus)),g.xp6(1),g.Q6J("ngIf",!e.editFlag),g.xp6(1),g.Q6J("ngIf",("U"==e.eamilAuditLog.verifiedStatus||"UNAUTHORIZED"==e.eamilAuditLog.verifiedStatus)&&e.editFlag),g.xp6(1),g.Q6J("ngIf",("C"==e.eamilAuditLog.recordStatus||"CLOSED"==e.eamilAuditLog.recordStatus||"Closed"==e.eamilAuditLog.recordStatus)&&e.editFlag&&"YES"==e.eamilAuditLog.verifiedOnce),g.xp6(1),g.Q6J("ngIf",("O"==e.eamilAuditLog.recordStatus||"OPEN"==e.eamilAuditLog.recordStatus||"Open"==e.eamilAuditLog.recordStatus)&&e.editFlag&&"YES"==e.eamilAuditLog.verifiedOnce),g.xp6(1),g.Q6J("ngIf",e.editFlag&&e.roleCodes.delete&&("NO"==e.eamilAuditLog.verifiedOnce||"N"==e.eamilAuditLog.verifiedOnce)&&("U"==e.eamilAuditLog.verifiedStatus||"UNAUTHORIZED"==e.eamilAuditLog.verifiedStatus))}}function L(e,t){if(1&e&&(g.TgZ(0,"div",45),g.TgZ(1,"div",46),g.TgZ(2,"div",47),g.TgZ(3,"div",48),g.TgZ(4,"div",49),g.TgZ(5,"div",17),g.TgZ(6,"div",50),g._UZ(7,"i",51),g.qZA(),g.qZA(),g.TgZ(8,"div",52),g.TgZ(9,"div",53),g.TgZ(10,"h2"),g._uU(11,"Maker"),g.qZA(),g.TgZ(12,"p"),g._uU(13),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(14,"div",47),g.TgZ(15,"div",48),g.TgZ(16,"div",49),g.TgZ(17,"div",17),g.TgZ(18,"div",54),g._UZ(19,"img",55),g.qZA(),g.qZA(),g.TgZ(20,"div",52),g.TgZ(21,"div",53),g.TgZ(22,"h2"),g._uU(23,"Maker Time Stamp"),g.qZA(),g.TgZ(24,"p"),g._uU(25),g.ALo(26,"date"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(27,"div",47),g.TgZ(28,"div",48),g.TgZ(29,"div",49),g.TgZ(30,"div",17),g.TgZ(31,"div",56),g._UZ(32,"i",57),g.qZA(),g.qZA(),g.TgZ(33,"div",52),g.TgZ(34,"div",53),g.TgZ(35,"h2"),g._uU(36,"Record Status"),g.qZA(),g.TgZ(37,"p"),g._uU(38),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(39,"div",47),g.TgZ(40,"div",48),g.TgZ(41,"div",49),g.TgZ(42,"div",17),g.TgZ(43,"div",58),g._UZ(44,"i",59),g.qZA(),g.qZA(),g.TgZ(45,"div",52),g.TgZ(46,"div",53),g.TgZ(47,"h2"),g._uU(48,"Checker"),g.qZA(),g.TgZ(49,"p"),g._uU(50),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(51,"div",47),g.TgZ(52,"div",48),g.TgZ(53,"div",49),g.TgZ(54,"div",17),g.TgZ(55,"div",60),g._UZ(56,"img",61),g.qZA(),g.qZA(),g.TgZ(57,"div",52),g.TgZ(58,"div",53),g.TgZ(59,"h2"),g._uU(60,"Checker Time Stamp"),g.qZA(),g.TgZ(61,"p"),g._uU(62),g.ALo(63,"date"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(64,"div",47),g.TgZ(65,"div",48),g.TgZ(66,"div",49),g.TgZ(67,"div",17),g.TgZ(68,"div",62),g._UZ(69,"i",63),g.qZA(),g.qZA(),g.TgZ(70,"div",52),g.TgZ(71,"div",53),g.TgZ(72,"h2"),g._uU(73,"First Time Authorization"),g.qZA(),g.TgZ(74,"p"),g._uU(75),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(76,"div",47),g.TgZ(77,"div",48),g.TgZ(78,"div",49),g.TgZ(79,"div",17),g.TgZ(80,"div",64),g._UZ(81,"img",65),g.qZA(),g.qZA(),g.TgZ(82,"div",52),g.TgZ(83,"div",53),g.TgZ(84,"h2"),g._uU(85,"Authorization Status"),g.qZA(),g.TgZ(86,"p"),g._uU(87),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(88,"div",47),g.TgZ(89,"div",48),g.TgZ(90,"div",49),g.TgZ(91,"div",17),g.TgZ(92,"div",64),g._UZ(93,"img",66),g.qZA(),g.qZA(),g.TgZ(94,"div",52),g.TgZ(95,"div",53),g.TgZ(96,"h2"),g._uU(97,"Modification Number"),g.qZA(),g.TgZ(98,"p"),g._uU(99),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){const e=g.oxw();g.xp6(13),g.Oqu(e.eamilAuditLog.inputBy),g.xp6(12),g.Oqu(g.xi3(26,8,e.eamilAuditLog.inputTime,"MM/dd/yyyy, h:mm a")),g.xp6(13),g.Oqu(e.eamilAuditLog.recordStatus),g.xp6(12),g.Oqu(e.eamilAuditLog.verifiedBy),g.xp6(12),g.Oqu(g.xi3(63,11,e.eamilAuditLog.verifiedTime,"MM/dd/yyyy, h:mm a")),g.xp6(13),g.Oqu(e.eamilAuditLog.verifiedOnce),g.xp6(12),g.Oqu(e.eamilAuditLog.verifiedStatus),g.xp6(12),g.Oqu(e.eamilAuditLog.modNo)}}let U=(()=>{class e{constructor(e,t,i,o,n,a,r,d,u){this.accountBlockingService=e,this.ref=t,this.userApi=i,this.route=o,this.iziToast=n,this.roleService=a,this.formBuilder=r,this.cdr=d,this.router=u,this.emailList=[],this.eamilAuditLog=new l,this.button_permission={},this.editFlag=!1,this.modifyScreen=!1,this.submitBtn=!0,this.roleCodes=new c.yv,this.formTouched=!0,this.showDialog=!1,this.subject=new s.xQ,this.emailCheckForSameEmail=!1}ngOnInit(){this.emailNavObj=localStorage.getItem("emailManagementNavObj"),this.emailNavigationObject=JSON.parse(this.emailNavObj),this.accountBlockingService.getIndexValue().subscribe(e=>{""===e.index&&this.createEmail()}),this.loggedInUser=localStorage.getItem("userFromLogin").replace(/['"]+/g,""),this.navSubscription=this.accountBlockingService.getNavParam.subscribe(e=>this.editAddSysResp=e),this.emailTypes=localStorage.getItem("EmailType"),this.emailForm=this.formBuilder.group({accountType:["",r.kI.required],emails:this.formBuilder.array([])}),this.user_id=sessionStorage.getItem("user_id"),this.role=sessionStorage.getItem("user_role"),this.eamilAuditLog.modNo=this.editAddSysResp.queryParams.modNo,this.eamilAuditLog.inputBy=this.editAddSysResp.queryParams.creator,this.eamilAuditLog.recordStatus=this.editAddSysResp.queryParams.rstatus,this.eamilAuditLog.verifiedOnce=this.editAddSysResp.queryParams.vStatus,this.eamilAuditLog.inputTime=this.editAddSysResp.queryParams.inputDate,this.eamilAuditLog.verifiedStatus=this.editAddSysResp.queryParams.vDate,this.eamilAuditLog.verifiedTime=this.editAddSysResp.queryParams.authtym,this.eamilAuditLog.verifiedBy=this.editAddSysResp.queryParams.authBy,this.eamilAuditLog.emailType=this.editAddSysResp.queryParams.emailType,console.log(this.eamilAuditLog),"Account_Block"==this.editAddSysResp.queryParams.emailType&&(this.buildEmailForm(this.eamilAuditLog),this.getScreenDetails()),"Account_Block"!=this.editAddSysResp.queryParams.emailType&&null!=JSON.parse(this.emailNavObj)&&(this.buildEmailForm(this.emailNavigationObject),this.getScreenDetails(),this.modifyScreen=!0,this.editFlag=!0),this.eamilAuditLog.emailType&&(this.modifyScreen=!0,this.editFlag=!0),this.auditLog(),null==this.eamilAuditLog.emailType&&this.addAddress(),this.roleService.screenLabelList.subscribe(e=>this.roleCodes=e)}auditLog(){"U"===this.eamilAuditLog.verifiedStatus&&(this.eamilAuditLog.verifiedStatus="UNAUTHORIZED"),"A"===this.eamilAuditLog.verifiedStatus&&(this.eamilAuditLog.verifiedStatus="AUTHORIZED"),"O"===this.eamilAuditLog.recordStatus&&(this.eamilAuditLog.recordStatus="OPEN"),"C"===this.eamilAuditLog.recordStatus&&(this.eamilAuditLog.recordStatus="CLOSED"),"N"===this.eamilAuditLog.verifiedOnce&&(this.eamilAuditLog.verifiedOnce="NO"),"Y"===this.eamilAuditLog.verifiedOnce&&(this.eamilAuditLog.verifiedOnce="YES")}getEmailItem(){return this.formBuilder.group({emailType:["Account_Block"],emailId:[""],emailRequired:["Y"],id:[""]})}get emails(){return this.emailForm.get("emails")}buildEmailForm(e,t){this.emailForm=this.formBuilder.group({accountType:[e.emailType?e.emailType:"",[r.kI.required,r.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],emails:this.formBuilder.array([])})}canExit(){let e=!1;return this.emailForm.touched&&1==this.formTouched?u().fire({text:"There are unsaved changes in the screen. Would you like to navigate to other screen?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(t=>!0===t.isConfirmed?(e=!0,this.cdr.markForCheck(),e):(e=!1,this.cdr.markForCheck(),e)):(e=!0,new Promise((t,i)=>{!0===e&&(e=!0,this.cdr.markForCheck(),t(!0))}))}getScreenDetails(){null==this.eamilAuditLog.emailType&&(this.eamilAuditLog=this.emailNavigationObject),this.selected=this.eamilAuditLog.emailType,this.accountBlockingService.sendAccType(this.eamilAuditLog.emailType).subscribe(e=>{this.emailList=e;for(let t=0;t<this.emailList.length;t++){this.addAddress();const e=this.emailList[t];this.emails.at(t).patchValue(e)}})}screenpermission(){this.screenName="roles",this.userApi.getRoleScreenPermission(this.loggedInUser,this.screenName,this.role).subscribe(e=>{this.rolepermission=e,this.rolepermission&&(this.button_permission=this.rolepermission[0])})}editValues(){this.editFlag=!1}selectedChk(e){this.selected=e}addAddress(){this.emails.push(this.getEmailItem())}removeAddress(e,t){this.emails.removeAt(e),this.accountBlockingService.deleteingParticluarRow(this.eamilAuditLog.emailType,this.loggedInUser,t.value.id).subscribe(t=>{1==t?(this.emails.removeAt(e),u().fire({text:"Record is Deleted",icon:"success"}),this.router.navigate(["/email-management"])):u().fire({text:"Once Verifed Record Cannot Be Deleted",icon:"warning"}),this.ref.markForCheck()})}onClickOfDeleteOfEmailManagement(){u().fire({text:"You are trying to Delete record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(e=>{!0===e.isConfirmed&&(this.accountBlockingService.onclickOfDeleteOfEmailManagement(this.selected,this.loggedInUser).subscribe(e=>{console.log(e),0==e?u().fire({text:"Record Deletion Failed",icon:"error"}):u().fire({text:"Record Deleted SuccessFully",icon:"success"})}),this.ref.markForCheck())})}onClickOfAuthOfEmailManagement(){u().fire({text:"You are trying to Authorize record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(e=>{!0===e.isConfirmed&&this.accountBlockingService.onClickOfAuthOfEmailManagement("Verify","Account_Block",this.loggedInUser).subscribe(e=>{e?(u().fire({text:"Record is Authorized",icon:"success"}),this.eamilAuditLog=e,this.auditLog()):u().fire({text:"Record Authorization is Failed",icon:"error"})})}),this.ref.markForCheck()}onclickOfReopenOfEamilManagement(){u().fire({text:"You are trying to Reopen record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(e=>{!0===e.isConfirmed&&this.accountBlockingService.onClickOfAuthOfEmailManagement("reopen","Account_Block",this.loggedInUser).subscribe(e=>{0==e?u().fire({text:"UnAuthorized Records Cannot Be Reopen",icon:"warning"}):(this.eamilAuditLog=e,this.auditLog(),u().fire({text:"Record is Reopened",icon:"success"}))})})}onclickOfCloseOfEmailManagement(){u().fire({text:"You are trying to Close record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(e=>{!0===e.isConfirmed&&this.accountBlockingService.onClickOfAuthOfEmailManagement("close","Account_Block",this.loggedInUser).subscribe(e=>{0==e?u().fire({text:"UnAuthorized Records Cannot Be Closed",icon:"warning"}):(this.eamilAuditLog=e,this.auditLog(),u().fire({text:"Record is Closed",icon:"success"}))})})}logValue(){var e=document.getElementsByTagName("input");console.log(e);for(var t=[],i=0;i<e.length;i++)t.push(e[i].value);console.log(t),t.sort();for(var o=2;o<t.length-1;o++)t[o]===t[o+1]&&(this.emailCheckForSameEmail=!0);console.log(this.eamilAuditLog.inputBy),console.log(this.emailTypes),this.emailCheckForSameEmail&&u().fire("Please Enter Different Email Id").then(()=>{this.emailCheckForSameEmail=!1}),(null!=this.eamilAuditLog.inputBy||"Account_Block"==this.emailTypes)&&0==this.emailCheckForSameEmail&&this.accountBlockingService.onclickOfEditOfEmailManagement(this.selected,this.loggedInUser,this.emails.value).subscribe(e=>{console.log(e,"If"),null==e?u().fire({text:"Failed To Uppdate The Record",icon:"warning"}):(this.eamilAuditLog=e,this.auditLog(),u().fire({text:"Record is Updated",icon:"success"}),this.formTouched=!this.emailForm.touched,this.modifyScreen=!0,this.submitBtn=!1,this.editFlag=!0)}),"Account_Block"!=this.emailTypes&&(console.log("else"),this.accountBlockingService.emailMaintenance(this.selected,this.loggedInUser,this.emails.value).subscribe(e=>{this.masterresponse=e,this.eamilAuditLog=this.masterresponse,e?(this.masterDatapermission=!0,u().fire({text:"Record is Created",icon:"success"}),this.auditLog(),this.formTouched=!this.emailForm.touched,this.modifyScreen=!0,this.submitBtn=!1):null==e?u().fire("Email Id Already Exit "):u().fire("Unable to Save the Record ")}))}createEmail(){this.accountBlockingService.sendNavParam({queryParams:{}})}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(m.R),g.Y36(g.sBO),g.Y36(h.fz),g.Y36(n.gz),g.Y36(f.I),g.Y36(p.N),g.Y36(r.qu),g.Y36(g.sBO),g.Y36(n.F0))},e.\u0275cmp=g.Xpm({type:e,selectors:[["npr-email-management-create"]],decls:33,vars:12,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],["novalidate","",1,"formStyle",3,"formGroup"],[1,"dbCardStyle","cardWidth"],[1,"pageTitle","text-center","mb-md-4","mb-3"],[1,"row","gy-4"],[1,"col-10"],["for","roleName",1,"formLbl"],[1,"colorRed"],["aria-label","Default select example","formControlName","accountType",1,"form-select",3,"value","valueChange","change"],["hidden","","value","","disabled","","selected",""],["value","Account_Block",3,"disabled"],["class","errorColor",4,"ngIf"],["formArrayName","emails"],["for","",1,"formLbl"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-auto"],[1,"addIcon","primarybg",3,"ngClass","click"],["src","assets/images/plus-icon.svg","alt","..."],["class","col-lg-12",4,"ngIf"],["class","",4,"ngIf"],["class","dbCardStyle",4,"ngIf"],[1,"errorColor"],[4,"ngIf"],[1,"col-12"],[1,"row","align-items-center"],[3,"formGroup"],["type","email","id","emailId","formControlName","emailId","pattern","[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$","required","","placeholder","example@gmail.com",1,"form-control",3,"readonly","name","email"],[1,"col-2"],[1,"inputHide"],[3,"ngClass","click"],["src","assets/images/delete-icon.svg","alt","..."],[1,"col-lg-12"],[1,"row","g-3","pb-3","pt-3"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"disabled","click"],["routerLink","/email-management",1,"btn","smBtn","minWdSmBtn","btnSecondary"],[1,""],[1,"row","pb-3","justify-content-center","pt-3"],["class","col-auto","style","margin-top: 10px;",4,"ngIf"],[1,"col-auto",2,"margin-top","10px"],[1,"btn","smBtn","minWdSmBtn","btnUpdate",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnUpdate",3,"disabled","click"],[1,"btn","smBtn","minWdSmBtn","btnAuth",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[1,"dbCardStyle"],[1,"row"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"csCardStyle"],[1,"row","g-2","align-items-center"],[1,"csCardStyleIcon","csCardStyleIconBg1"],[1,"fa","fa-edit","faClass"],[1,"col"],[1,"csCardStyleText"],[1,"csCardStyleIcon","csCardStyleIconBg2"],["src","assets/images/time-stamp-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg3"],["aria-hidden","true",1,"fa","fa-files-o","faRecordStatus"],[1,"csCardStyleIcon","csCardStyleIconBg4"],[1,"fa","fa-check-square-o","faClassChecker"],[1,"csCardStyleIcon","csCardStyleIconBg5"],["src","assets/images/checker-time-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg6"],[1,"fa","fa-shield","faClassFirstTimeAuth"],[1,"csCardStyleIcon","csCardStyleIconBg7"],["src","assets/images/authorize.svg","alt","...",1,"modImage"],["src","assets/images/modification.svg","alt","...",1,"modImage"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"h2",2),g._uU(3,"Email Management"),g.qZA(),g.qZA(),g.TgZ(4,"form",3),g.TgZ(5,"div",4),g.TgZ(6,"h2",5),g._uU(7,"Email IDs for Email-Notification"),g.qZA(),g.TgZ(8,"div",6),g.TgZ(9,"div",7),g.TgZ(10,"label",8),g._uU(11,"Select an option"),g.TgZ(12,"span",9),g._uU(13,"*"),g.qZA(),g.qZA(),g.TgZ(14,"select",10),g.NdJ("valueChange",function(e){return t.selected=e})("change",function(e){return t.selectedChk(e.target.value)}),g.TgZ(15,"option",11),g._uU(16,"--Please select--"),g.qZA(),g.TgZ(17,"option",12),g._uU(18,"Account_Block"),g.qZA(),g.qZA(),g.YNc(19,A,2,1,"div",13),g.qZA(),g.ynx(20,14),g.TgZ(21,"label",15),g._uU(22,"Email Id"),g.TgZ(23,"span",9),g._uU(24,"*"),g.qZA(),g.qZA(),g.YNc(25,q,10,8,"div",16),g.BQk(),g.TgZ(26,"div",17),g.TgZ(27,"a",18),g.NdJ("click",function(){return t.addAddress()}),g.TgZ(28,"span"),g._UZ(29,"img",19),g.qZA(),g.qZA(),g.qZA(),g.YNc(30,b,8,1,"div",20),g.qZA(),g.YNc(31,E,11,6,"div",21),g.qZA(),g.YNc(32,L,100,14,"div",22),g.qZA(),g.qZA()),2&e&&(g.xp6(4),g.Q6J("formGroup",t.emailForm),g.xp6(10),g.Q6J("value",t.selected),g.uIk("disabled",t.editFlag?"":null),g.xp6(3),g.Q6J("disabled",t.editFlag),g.xp6(2),g.Q6J("ngIf",t.emailForm.get("accountType").invalid&&(t.emailForm.get("accountType").dirty||t.emailForm.get("accountType").touched)),g.xp6(6),g.Q6J("ngForOf",t.emails.controls),g.xp6(2),g.Q6J("ngClass",g.VKq(10,S,t.editFlag)),g.xp6(3),g.Q6J("ngIf",!t.modifyScreen),g.xp6(1),g.Q6J("ngIf",t.modifyScreen),g.xp6(1),g.Q6J("ngIf",null!=t.eamilAuditLog.emailType))},directives:[r._Y,r.JL,r.sg,r.EJ,r.JJ,r.u,r.YN,r.Kr,o.O5,r.CE,o.sg,o.mk,r.Fj,r.c5,r.Q7,r.on,n.rH],pipes:[o.uU],styles:[".errorColor[_ngcontent-%COMP%]{color:#e6224a}.isDisabled[_ngcontent-%COMP%]{color:currentColor;cursor:not-allowed;pointer-events:none;opacity:.4;text-decoration:none}"]}),e})();var N=i(98613),_=i(17988);function w(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"a",11),g.NdJ("click",function(){return g.CHM(e),g.oxw().createEmail()}),g._uU(2),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.xp6(2),g.Oqu(e.roleCodes.new.labelDescription)}}function F(e,t){1&e&&(g.TgZ(0,"button",18),g._UZ(1,"img",19),g.qZA())}function M(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",20),g.NdJ("click",function(){g.CHM(e);const t=g.oxw().$implicit;return g.oxw().close(t)}),g._UZ(1,"img",21),g.qZA()}}function R(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",22),g.NdJ("click",function(){g.CHM(e);const t=g.oxw().$implicit;return g.oxw().reopen(t)}),g._UZ(1,"img",23),g.qZA()}}function Y(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td"),g.TgZ(2,"a",12),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw().getEmail(t)}),g._uU(3),g.qZA(),g.qZA(),g.TgZ(4,"td"),g._uU(5),g.qZA(),g.TgZ(6,"td"),g._uU(7),g.qZA(),g.TgZ(8,"td"),g._uU(9),g.qZA(),g.TgZ(10,"td"),g._uU(11),g.ALo(12,"date"),g.qZA(),g.TgZ(13,"td"),g.TgZ(14,"button",13),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw().auth(t)}),g._UZ(15,"img",14),g.qZA(),g.YNc(16,F,2,0,"button",15),g.YNc(17,M,2,0,"button",16),g.YNc(18,R,2,0,"button",17),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit;g.xp6(2),g.MGl("routerLink","/email-management/create/",e.emailType,""),g.xp6(1),g.Oqu(e.emailType),g.xp6(2),g.Oqu(e.inputBy),g.xp6(2),g.Oqu(e.verifiedStatus),g.xp6(2),g.Oqu(e.recordStatus),g.xp6(2),g.Oqu(g.xi3(12,10,e.inputTime,"medium")),g.xp6(3),g.Q6J("disabled","U"!=e.verifiedStatus||"UNAUTHORIZED"!=e.verifiedStatus||"Unauthorized"!=e.verifiedStatus),g.xp6(2),g.Q6J("ngIf","N"==e.verifiedOnce||"NO"==e.verifiedOnce),g.xp6(1),g.Q6J("ngIf",!("O"!=e.recordStatus&&"Open"!=e.recordStatus&&"OPEN"!=e.recordStatus||"Y"!=e.verifiedOnce&&"YES"!=e.verifiedOnce)),g.xp6(1),g.Q6J("ngIf","C"==e.recordStatus||"CLOSED"==e.recordStatus||"Close"==e.recordStatus||"c"==e.recordStatus)}}const D=[{path:"",component:(()=>{class e{constructor(e,t,i,o){this.accountBlockingService=e,this.roleService=t,this.router=i,this.userApi=o,this.dtOptions={},this.dtTrigger=new s.xQ,this.roleCodes=new c.yv,this.eamilAuditLog=new l,this.statusArr=["Open","Close"]}ngOnInit(){this.user_id=sessionStorage.getItem("user_id"),this.role=sessionStorage.getItem("user_role"),this.getAllData(),this.dtOptions={pagingType:"full_numbers",pageLength:5,columnDefs:[{type:"date",targets:[3]}],order:[[3,"desc"]],processing:!0,lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]]},this.loggedInUser=localStorage.getItem("userFromLogin").replace(/['"]+/g,""),this.roleService.fetchScreenPermissions("Email-Management"),this.roleService.screenLabelList.subscribe(e=>this.roleCodes=e)}ngOnDestroy(){this.dtTrigger.unsubscribe()}getEmail(e){console.log("email",e),this.emaildetails=e,this.accountBlockingService.setIndexValue({index:"edit"});const t={queryParams:{modNo:e.modNO,creator:e.inputBy,rstatus:e.recordStatus,vStatus:e.verifiedOnce,inputDate:e.inputTime,vDate:e.verifiedStatus,authtym:e.verifiedTime,authBy:e.verifiedBy,emailType:e.emailType}};localStorage.setItem("emailManagementNavObj",JSON.stringify(this.emaildetails)),this.accountBlockingService.sendNavParam(t),this.router.navigate(["email-management/create"]),console.log(t)}getAllData(){this.accountBlockingService.getAllEmail().subscribe(e=>{this.emaildata=e.result,console.log(this.emaildata[0].emailType);for(let t of e.result)t.recordStatus=this.statusArr.find(e=>e.startsWith(t.recordStatus));localStorage.setItem("EmailType",this.emaildata[0].emailType),this.dtTrigger.next(),console.log(this.emaildata),this.auditlog()}),localStorage.setItem("EmailSwitch","existing"),localStorage.setItem("responseFromEmailSummary",this.emaildata)}createEmail(){localStorage.removeItem("emailManagementNavObj"),this.router.navigate(["/email-management/create"]),this.accountBlockingService.sendNavParam({queryParams:{}}),this.accountBlockingService.setIndexValue({index:"new"})}auth(e){u().fire({text:"You are trying to Authorize record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(t=>{if(console.log("this is reopen ",t),!0===t.isConfirmed){if(e.createdBy===localStorage.getItem("userFromLogin"))return void u().fire({text:"Maker Cannot Authorize Record!",icon:"error"});console.log("this is authorzation"),e.loggedInUser=this.currentUser,this.accountBlockingService.onClickOfAuthOfEmailManagement("Verify","Account_Block",this.loggedInUser).subscribe(e=>{console.log(e),this.eamilAuditLog=e,this.auditlog(),e&&u().fire({text:"Record is Authorized",icon:"success"}).then(()=>window.location.reload())})}})}close(e){u().fire({text:"You are trying to Close record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(t=>{console.log("this is reopen ",t),!0===t.isConfirmed&&(console.log("this is close"),this.accountBlockingService.onClickOfAuthOfEmailManagement("close",this.loggedInUser,e).subscribe(e=>{console.log(e),this.eamilAuditLog=e,this.auditlog(),this.eamilAuditLog&&u().fire({text:"Record is Closed"}).then(()=>window.location.reload())},e=>{u().fire(e.error.message)}))})}reopen(e){u().fire({text:"You are trying to Reopen record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(t=>{console.log("this is reopen ",t),!0===t.isConfirmed&&this.accountBlockingService.onClickOfAuthOfEmailManagement("reopen",this.loggedInUser,e).subscribe(e=>{console.log(e),this.eamilAuditLog=e,this.auditlog(),this.eamilAuditLog?(this.auditlog(),u().fire({text:"Record is Reopened"}).then(()=>window.location.reload())):u().fire({text:"Record cannot be opened "})},e=>{u().fire(e.error.message)})})}auditlog(){("U"==this.eamilAuditLog.verifiedStatus||"U"==this.emaildata[0].verifiedStatus)&&(this.eamilAuditLog.verifiedStatus="UNAUTHORIZED",this.emaildata[0].verifiedStatus="Unauthorized"),("A"==this.eamilAuditLog.verifiedStatus||"A"==this.emaildata[0].verifiedStatus)&&(this.emaildata[0].verifiedStatus="Authorized",this.eamilAuditLog.verifiedStatus="AUTHORIZED"),"O"==this.eamilAuditLog.recordStatus&&(this.eamilAuditLog.recordStatus="OPEN"),"C"==this.eamilAuditLog.recordStatus&&(this.eamilAuditLog.recordStatus="CLOSED"),"N"==this.eamilAuditLog.verifiedOnce&&(this.eamilAuditLog.verifiedOnce="NO"),"Y"==this.eamilAuditLog.verifiedOnce&&(this.eamilAuditLog.verifiedOnce="YES")}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(m.R),g.Y36(p.N),g.Y36(n.F0),g.Y36(N.fz))},e.\u0275cmp=g.Xpm({type:e,selectors:[["npr-email-management"]],decls:28,vars:4,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"dbCardStyle"],[1,"row","g-3","pb-3","justify-content-end"],["class","col-auto",4,"ngIf"],[1,"col-auto"],["href","javascript:void(0)",1,"btn","smBtn","minWdSmBtn","btnSecondary"],[1,"table-responsive"],["datatable","",1,"dataTable","table","tableStyle","nowrap","vAlignMdl",2,"width","100%",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[1,"primaryColor",3,"routerLink","click"],["title","Authorize",1,"btn",2,"color","red",3,"disabled","click"],["src","assets/images/authorize.svg","alt","Authorize",1,"summaryIcon"],["class","btn","style","color: red","title","Delete",4,"ngIf"],["class","btn","style","color: red","title","Close",3,"click",4,"ngIf"],["class","btn","style","color: red","title","Reopen",3,"click",4,"ngIf"],["title","Delete",1,"btn",2,"color","red"],["src","assets/images/delete.svg","alt","...",1,"summaryIcon"],["title","Close",1,"btn",2,"color","red",3,"click"],["src","assets/images/CROSS1.svg","alt","...",1,"summaryIcon"],["title","Reopen",1,"btn",2,"color","red",3,"click"],["src","assets/images/open.svg","alt","...",1,"summaryIcon"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"h2",2),g._uU(3,"Email Management"),g.qZA(),g.qZA(),g.TgZ(4,"div",3),g.TgZ(5,"div",4),g.YNc(6,w,3,1,"div",5),g.TgZ(7,"div",6),g.TgZ(8,"a",7),g._uU(9,"Exit"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(10,"div",8),g.TgZ(11,"table",9),g.TgZ(12,"thead"),g.TgZ(13,"tr"),g.TgZ(14,"th"),g._uU(15,"account type "),g.qZA(),g.TgZ(16,"th"),g._uU(17,"maker id"),g.qZA(),g.TgZ(18,"th"),g._uU(19,"Auth Status"),g.qZA(),g.TgZ(20,"th"),g._uU(21,"Record Status"),g.qZA(),g.TgZ(22,"th"),g._uU(23,"Date"),g.qZA(),g.TgZ(24,"th"),g._uU(25,"Action"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(26,"tbody"),g.YNc(27,Y,19,13,"tr",10),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(6),g.Q6J("ngIf",t.roleCodes.new),g.xp6(5),g.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),g.xp6(16),g.Q6J("ngForOf",t.emaildata))},directives:[o.O5,_.G,o.sg,n.yS],pipes:[o.uU],styles:[".iconBtn[_ngcontent-%COMP%]{background:none;border:none;outline:none;position:relative}.btnTooltip[_ngcontent-%COMP%]{position:absolute;background-color:#fff;display:none;top:24px;left:12px;border:1px solid black;padding:4px}.iconBtn[_ngcontent-%COMP%]:hover   .btnTooltip[_ngcontent-%COMP%]{display:block}"]}),e})()},{path:"create",component:U,canDeactivate:[a.I]}];let J=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[n.Bz.forChild(D)],n.Bz]}),e})(),P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[o.ez,J,_.T,r.UX,r.u5]]}),e})()}}]);