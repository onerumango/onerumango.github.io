{"version":3,"file":"default-src_app_pages_currencyconverter_currencyconverter_page_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAA4E;AACR;AAC3B;AAC2B;AACQ;AAClB;IAO7C,qBAAqB,SAArB,qBAAqB;IAYhC,YAAoB,EAAe,EACzB,MAAc,EACd,GAAe,EACf,eAAgC,EAChC,iBAAoC,EACpC,GAAsB;QALZ,OAAE,GAAF,EAAE,CAAa;QACzB,WAAM,GAAN,MAAM,CAAQ;QACd,QAAG,GAAH,GAAG,CAAY;QACf,oBAAe,GAAf,eAAe,CAAiB;QAChC,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,QAAG,GAAH,GAAG,CAAmB;QAfhC,WAAM,GAAY,IAAI,CAAC;QACvB,YAAO,GAAY,IAAI,CAAC;QAGxB,eAAU,GAAQ,EAAE,CAAC;QACrB,yBAAoB,GAAW,EAAE,CAAC;QAClC,uBAAkB,GAAW,EAAE,CAAC;IASI,CAAC;IAErC,QAAQ;IAER,CAAC;IAED,gBAAgB;;QACd,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;QAChE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAE7B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;YAChC,MAAM,EAAE,CAAC,EAAE,CAAC;YACZ,SAAS,EAAE,CAAC,EAAE,EAAE,CAAC,+DAAmB,CAAC,CAAC;YACtC,SAAS,EAAE,CAAC,EAAE,EAAE,CAAC,+DAAmB,CAAC,CAAC;YACtC,YAAY,EAAE,CAAC,EAAE,CAAC;YAClB,KAAK,EAAE,CAAC,EAAE,CAAC;SACZ,CAAC,CAAC;QAEH,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAE7B,MAAM,wBAAwB,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAM,EAAE,EAAE,WAAC,QAAC,CAAC,YAAY,KAAI,UAAI,CAAC,UAAU,0CAAE,YAAY,KAAC,CAAC;QACrH,MAAM,kBAAkB,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAM,EAAE,EAAE,WAAC,QAAC,CAAC,YAAY,KAAI,UAAI,CAAC,UAAU,0CAAE,UAAU,KAAC,CAAC;QAE7G,IAAI,CAAC,oBAAoB,GAAG,wBAAwB,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;QAClF,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;QAE1E,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC9C,IAAI,EAAE,GAAG,UAAI,CAAC,UAAU,0CAAE,YAAY,CAAC;QACvC,IAAI,EAAE,GAAG,UAAI,CAAC,UAAU,0CAAE,UAAU,CAAC;QACrC,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,0CAAE,UAAU,CAAC,EAAE,CAAC,CAAC;QACnD,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,0CAAE,UAAU,CAAC,EAAE,CAAC,CAAC;QAEnD,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YAC9C,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACpB,CAAC,CAAC;QAEF,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QACrC,IAAI,CAAC,SAAS,EAAE,CAAC;QAEjB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,4DAAY,CAAC,IAAI,CAAC,EAAE,sDAAM,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,oEAAoB,EAAE,CAAC;aAClH,SAAS,CAAC,GAAG,CAAC,EAAE;YACf,IAAI,CAAC,eAAe,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;QAEL,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;IAE1B,CAAC;IAED,WAAW,CAAC,EAAE,EAAE,EAAE;QAChB,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC;IAChD,CAAC;IAED,sBAAsB,CAAC,CAAM;;QAC3B,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACf,IAAI,OAAO,CAAC,KAAK,WAAW,EAAE;YAC5B,MAAM,gBAAgB,GAAG,UAAI,CAAC,UAAU,0CAAE,MAAM,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,YAAY,IAAI,CAAC,CAAC,CAAC;YAClF,IAAI,CAAC,oBAAoB,GAAG,gBAAgB,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;YAC1E,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;SACzB;aAAM;SAEN;IACH,CAAC;IAID,oBAAoB,CAAC,CAAM;;QACzB,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACf,IAAI,OAAO,CAAC,KAAK,WAAW,EAAE;YAC5B,MAAM,gBAAgB,GAAG,UAAI,CAAC,UAAU,0CAAE,MAAM,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,YAAY,IAAI,CAAC,CAAC,CAAC;YAClF,IAAI,CAAC,kBAAkB,GAAG,gBAAgB,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;YACxE,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;SACzB;aAAM;SAEN;IACH,CAAC;IAGD,eAAe;QACb,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,6EAA6E;QAC7E,kCAAkC;QAClC,4DAA4D;QAC5D,yIAAyI;QACzI,yCAAyC;QACzC,0CAA0C;QAC1C,gEAAgE;QAChE,+BAA+B;QAC/B,MAAM;QACN,MAAM;QACN,4BAA4B;IAC9B,CAAC;IAKD,OAAO,CAAC,KAAK;QACX,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAElC,CAAC;IAEK,OAAO;;;YAEX,IAAI,YAAY,GAAG,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,0CAAE,KAAK;YAC5D,IAAI,UAAU,GAAG,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,0CAAE,KAAK;YAC1D,IAAI,UAAU,GAAG,MAAM,CAAC,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,0CAAE,KAAK,CAAC,CAAC;YAEhE,IAAI,YAAY,IAAI,SAAS,IAAI,UAAU,IAAI,SAAS,IAAI,UAAU,IAAI,SAAS,EAAE;gBACnF,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;oBAClD,OAAO,EAAE,wBAAwB;iBAClC,CAAC,CAAC;gBAEH,OAAO,CAAC,OAAO,EAAE,CAAC;gBAClB,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,YAAY,EAAE,UAAU,EAAE,UAAU,CAAC;qBAChE,SAAS,CAAC,IAAI,CAAC,EAAE;;oBAChB,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;oBAC3B,IAAI,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,OAAO,EAAE;wBACjB,OAAO,CAAC,OAAO,EAAE,CAAC;wBAClB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,UAAU,CAAC,UAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,IAAI,0CAAE,IAAI,CAAC,CAAC;wBACnE,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,UAAU,CAAC,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,MAAM,CAAC,CAAC;qBACzD;yBAAM;wBACL,OAAO,CAAC,OAAO,EAAE,CAAC;qBACnB;gBACH,CAAC,EAAE,GAAG,CAAC,EAAE;oBACP,OAAO,CAAC,OAAO,EAAE,CAAC;gBACpB,CAAC,CAAC,CAAC;aACN;;KACF;IAED,SAAS;;QACP,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,0CAAE,KAAK,CAAC;aAC1D,SAAS,CAAC,IAAI,CAAC,EAAE;;YAChB,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;YAC3B,IAAI,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,OAAO,EAAE;gBACjB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,0CAAE,KAAK,CAAC,CAAC;gBACtE,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;aACzB;QACH,CAAC,EAAE,GAAG,CAAC,EAAE;QACT,CAAC,CAAC,CAAC;IACP,CAAC;IAED,YAAY;;QACV,IAAI,YAAY,GAAG,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,0CAAE,KAAK;QAC5D,IAAI,UAAU,GAAG,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,0CAAE,KAAK;QAE1D,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,0CAAE,UAAU,CAAC,UAAU,CAAC,CAAC;QAC3D,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,0CAAE,UAAU,CAAC,YAAY,CAAC,CAAC;QAE7D,MAAM,qBAAqB,GAAG,UAAI,CAAC,UAAU,0CAAE,MAAM,CAAC,CAAC,CAAM,EAAE,EAAE,WAAC,QAAC,CAAC,YAAY,KAAI,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,0CAAE,KAAK,KAAC,CAAC;QAC/H,IAAI,CAAC,oBAAoB,GAAG,qBAAqB,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;QAE/E,MAAM,sBAAsB,GAAG,UAAI,CAAC,UAAU,0CAAE,MAAM,CAAC,CAAC,CAAM,EAAE,EAAE,WAAC,QAAC,CAAC,YAAY,KAAI,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,0CAAE,KAAK,KAAC,CAAC;QAChI,IAAI,CAAC,kBAAkB,GAAG,sBAAsB,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;QAC9E,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;IAC1B,CAAC;IAGD,QAAQ;QACN,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;IACtC,CAAC;IAEK,UAAU;;YACd,MAAM,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;QACvC,CAAC;KAAA;;;;;;;;;;;yBA9KA,iDAAK;;AATK,qBAAqB;IALjC,yDAAS,CAAC;QACT,QAAQ,EAAE,uBAAuB;QACjC,8EAA4C;;KAE7C,CAAC;GACW,qBAAqB;AAAA","sources":["./src/app/pages/currencyconverter/currencyconverter.page.ts"],"sourcesContent":["import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { LoadingController, ModalController } from '@ionic/angular';\r\nimport { debounceTime, distinctUntilChanged, filter } from 'rxjs/operators';\r\nimport { ApiService } from 'src/app/services/api.service';\r\n\r\n@Component({\r\n  selector: 'app-currencyconverter',\r\n  templateUrl: './currencyconverter.page.html',\r\n  styleUrls: ['./currencyconverter.page.scss'],\r\n})\r\nexport class CurrencyconverterPage implements OnInit {\r\n  currencyForm: FormGroup;\r\n  isShow: boolean = true;\r\n  isShow1: boolean = true;\r\n  exchangeRate: any;\r\n  routerData: any;\r\n  currencies: any = [];\r\n  selectedFromCurrency: string = '';\r\n  selectedToCurrency: string = '';\r\n  @Input() model_data: any;\r\n  baseRate: any;\r\n\r\n  constructor(private fb: FormBuilder,\r\n    private router: Router,\r\n    private api: ApiService,\r\n    private modalController: ModalController,\r\n    private loadingController: LoadingController,\r\n    private cdr: ChangeDetectorRef) { }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.currencies = JSON.parse(localStorage.getItem('COUNTRIES'));\r\n    console.log(this.currencies);\r\n\r\n    this.currencyForm = this.fb.group({\r\n      amount: [\"\"],\r\n      fCurrency: [\"\", [Validators.required]],\r\n      tCurrency: [\"\", [Validators.required]],\r\n      exchangeRate: [\"\"],\r\n      total: [\"\"],\r\n    });\r\n\r\n    console.log(this.model_data);\r\n\r\n    const select_forex_countryCode = this.currencies.filter((i: any) => i.currencyCode == this.model_data?.fromCurrency);\r\n    const select_countryCode = this.currencies.filter((i: any) => i.currencyCode == this.model_data?.toCurrency);\r\n\r\n    this.selectedFromCurrency = select_forex_countryCode[0].countryCode.toLowerCase();\r\n    this.selectedToCurrency = select_countryCode[0].countryCode.toLowerCase();\r\n\r\n    this.currencyForm.patchValue(this.model_data);\r\n    let fc = this.model_data?.fromCurrency;\r\n    let tc = this.model_data?.toCurrency;\r\n    this.currencyForm.get('fCurrency')?.patchValue(fc);\r\n    this.currencyForm.get('tCurrency')?.patchValue(tc);\r\n\r\n    this.currencyForm.valueChanges.subscribe(data => {\r\n      console.log(data);\r\n    })\r\n\r\n    console.log(this.currencyForm.value);\r\n    this.fetchRate();\r\n\r\n    this.currencyForm.get('amount').valueChanges.pipe(debounceTime(1500), filter(res => res > 0), distinctUntilChanged())\r\n      .subscribe(res => {\r\n        this.getExChangeRate();\r\n      });\r\n\r\n    this.cdr.markForCheck();\r\n\r\n  }\r\n\r\n  compareWith(o1, o2) {\r\n    return o1 && o2 ? o1.id === o2.id : o1 === o2;\r\n  }\r\n\r\n  selectFromCurrencyCode(e: any) {\r\n    console.log(e);\r\n    if (typeof e !== \"undefined\") {\r\n      const filteredCurrency = this.currencies?.filter((i: any) => i.currencyCode == e);\r\n      this.selectedFromCurrency = filteredCurrency[0].countryCode.toLowerCase();\r\n      this.cdr.markForCheck();\r\n    } else {\r\n\r\n    }\r\n  }\r\n\r\n\r\n\r\n  selectToCurrencyCode(e: any) {\r\n    console.log(e);\r\n    if (typeof e !== \"undefined\") {\r\n      const filteredCurrency = this.currencies?.filter((i: any) => i.currencyCode == e);\r\n      this.selectedToCurrency = filteredCurrency[0].countryCode.toLowerCase();\r\n      this.getExChangeRate();\r\n      this.cdr.markForCheck();\r\n    } else {\r\n\r\n    }\r\n  }\r\n\r\n\r\n  getExChangeRate() {\r\n    this.convert();\r\n    this.fetchRate();\r\n    // this.api.getNativeExchangeRate(fromCurr, toCurr).subscribe((res: any) => {\r\n    //   const rate = res[0].sellRate;\r\n    //   this.currencyForm.get('exchangeRate').patchValue(rate);\r\n    //   let updatedAmount: number = (Number(this.currencyForm.get('amount')?.value) * Number(this.currencyForm.get('exchangeRate')?.value));\r\n    //   if (!isNaN(Number(updatedAmount))) {\r\n    //     console.log(Number(updatedAmount));\r\n    //     this.currencyForm.get('total').patchValue(updatedAmount);\r\n    //     this.cdr.markForCheck();\r\n    //   }\r\n    // });\r\n    // this.updateTransAmount();\r\n  }\r\n\r\n\r\n\r\n\r\n  onKeyUp(event) {\r\n    console.log(event.target.value);\r\n\r\n  }\r\n\r\n  async convert() {\r\n\r\n    let fromCurrency = this.currencyForm.get('fCurrency')?.value\r\n    let toCurrency = this.currencyForm.get('tCurrency')?.value\r\n    let get_amount = Number(this.currencyForm.get('amount')?.value);\r\n\r\n    if (fromCurrency != undefined && toCurrency != undefined && get_amount != undefined) {\r\n      const loading = await this.loadingController.create({\r\n        message: 'Fetching exchange rate'\r\n      });\r\n\r\n      loading.present();\r\n      this.api.fetchRatesByExternal(fromCurrency, toCurrency, get_amount)\r\n        .subscribe(data => {\r\n          console.log(\"Sync \", data);\r\n          if (data?.success) {\r\n            loading.dismiss();\r\n            this.currencyForm.get('exchangeRate').patchValue(data?.info?.rate);\r\n            this.currencyForm.get('total').patchValue(data?.result);\r\n          } else {\r\n            loading.dismiss();\r\n          }\r\n        }, err => {\r\n          loading.dismiss();\r\n        });\r\n    }\r\n  }\r\n\r\n  fetchRate() {\r\n    this.api.fetchRate(this.currencyForm.get('tCurrency')?.value)\r\n      .subscribe(data => {\r\n        console.log(\"Sync \", data);\r\n        if (data?.success) {\r\n          this.baseRate = data.rates[this.currencyForm.get('fCurrency')?.value];\r\n          this.cdr.markForCheck();\r\n        }\r\n      }, err => {\r\n      });\r\n  }\r\n\r\n  swapCurrency() {\r\n    let fromCurrency = this.currencyForm.get('fCurrency')?.value\r\n    let toCurrency = this.currencyForm.get('tCurrency')?.value\r\n\r\n    this.currencyForm.get('fCurrency')?.patchValue(toCurrency);\r\n    this.currencyForm.get('tCurrency')?.patchValue(fromCurrency);\r\n\r\n    const filteredCurrencyFCurr = this.currencies?.filter((i: any) => i.currencyCode == this.currencyForm.get('fCurrency')?.value);\r\n    this.selectedFromCurrency = filteredCurrencyFCurr[0].countryCode.toLowerCase();\r\n\r\n    const filteredCurrencyToCurr = this.currencies?.filter((i: any) => i.currencyCode == this.currencyForm.get('tCurrency')?.value);\r\n    this.selectedToCurrency = filteredCurrencyToCurr[0].countryCode.toLowerCase();\r\n    this.getExChangeRate();\r\n    this.cdr.markForCheck();\r\n  }\r\n\r\n\r\n  continue() {\r\n    this.closeModel();\r\n    this.router.navigate(['dashboard']);\r\n  }\r\n\r\n  async closeModel() {\r\n    await this.modalController.dismiss();\r\n  }\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}