{"version":3,"file":"default-src_app_pages_login_login_page_ts.js","mappings":"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","sources":["./src/app/pages/login/login.page.ts"],"sourcesContent":["import {\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  OnInit,\r\n  ViewChild,\r\n} from '@angular/core';\r\n\r\nimport { ToastController } from '@ionic/angular';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { Subject } from 'rxjs';\r\nimport { DataService } from 'src/app/services/data.service';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { Router, NavigationExtras } from '@angular/router';\r\n\r\nexport class otpModel {\r\n  source_key: any;\r\n  source_value: any;\r\n  source: any;\r\n  isMobileLogin: boolean;\r\n}\r\n\r\nexport class verifyotpModel {\r\n  sourceKey: any;\r\n  sourceValue: any;\r\n  otp: number;\r\n  type: any;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage implements OnInit {\r\n  image: string;\r\n  loginForm: FormGroup;\r\n  otpValue: any = null;\r\n  otpValid: boolean = false;\r\n  oTpModel = new otpModel();\r\n  verifyOtpModel = new verifyotpModel();\r\n  otpResponse: any;\r\n  customerPhonenum: any;\r\n  userResp: boolean = false;\r\n  showPassword: boolean = false;\r\n  userPasswordUpdate = new Subject<string>();\r\n  isLoading: boolean = false;\r\n  loginDetails: any;\r\n  constructor(\r\n    private router: Router,\r\n    private cdk: ChangeDetectorRef,\r\n    private fb: FormBuilder,\r\n    private api: ApiService,\r\n    public toastCtrl: ToastController,\r\n    private dataService: DataService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.initForm();\r\n  }\r\n\r\n  initForm() {\r\n    this.loginForm = this.fb.group({\r\n      phoneNo: ['', [Validators.required]],\r\n      isOtp: [false],\r\n      otp: ['', [Validators.required]],\r\n      password: ['', [Validators.required]],\r\n    });\r\n  }\r\n\r\n  public onPasswordToggle(showType): void {\r\n    if (showType === 'new') {\r\n      this.showPassword = !this.showPassword;\r\n    }\r\n  }\r\n\r\n  _keyPress(event: any) {\r\n    console.log('key', event);\r\n    const pattern = /[0-9]/;\r\n    let inputChar = String.fromCharCode(event.charCode);\r\n    if (!pattern.test(inputChar)) {\r\n      event.preventDefault();\r\n    }\r\n  }\r\n\r\n  continue(loginForm) {\r\n    if (!this.loginForm.get('isOtp').value) {\r\n      if (!loginForm.phoneNo) {\r\n        this.openToast('Phone number is required!');\r\n        return;\r\n      }\r\n      if (!loginForm.password) {\r\n        this.openToast('Password is required!');\r\n        return;\r\n      }\r\n      this.isLoading = true;\r\n\r\n      let payload = {\r\n        phoneNumber: loginForm.phoneNo,\r\n        password: loginForm.password,\r\n      };\r\n\r\n      this.api.validatePassword(payload).subscribe(\r\n        (res: any) => {\r\n          if (res.status == 200) {\r\n            if (res['data']?.firstTimeLogin == 'Y') {\r\n              localStorage.setItem('customerPhonenum', loginForm.phoneNo);\r\n              const navigationExtras: NavigationExtras = {\r\n                queryParams: {\r\n                  screenName: 'reset',\r\n                },\r\n              };\r\n              this.api.sendNavParam(navigationExtras);\r\n              this.router.navigateByUrl('/new-passwordchange');\r\n            } else {\r\n              localStorage.setItem('customerPhonenum', loginForm.phoneNo);\r\n              sessionStorage.setItem('customer_id', res['data']?.customerId);\r\n              localStorage.setItem('firstName', res['data']?.firstName);\r\n              localStorage.setItem('lastName', res['data']?.lastName);\r\n              localStorage.setItem('userType', res['data']?.userType);\r\n              localStorage.setItem('customer_id', res['data']?.customerId);\r\n              localStorage.setItem(\r\n                'customer_details',\r\n                JSON.stringify(res['data'])\r\n              );\r\n              localStorage.setItem('isShowed', 'no');\r\n              this.router.navigate(['dashboard'], { replaceUrl: true });\r\n              this.dataService.isLoggedIn.next(true);\r\n              this.openToast('Logged in Successfully!');\r\n            }\r\n          } else {\r\n            this.openToast(res?.message);\r\n          }\r\n          this.isLoading = false;\r\n        },\r\n        (err: any) => {\r\n          this.isLoading = false;\r\n        }\r\n      );\r\n    } else {\r\n      this.getOtp(loginForm);\r\n    }\r\n  }\r\n\r\n  getOtp(phone: any) {\r\n    this.customerPhonenum = phone.phoneNo;\r\n    this.oTpModel.source = 'customer';\r\n    this.oTpModel.source_key = 'mobile';\r\n    this.oTpModel.source_value = phone.phoneNo;\r\n    this.oTpModel.isMobileLogin = true;\r\n\r\n    if (this.customerPhonenum == '') {\r\n      this.openToast('Please enter the registered Mobile Number');\r\n      return;\r\n    }\r\n\r\n    this.api.getOtp(this.oTpModel).subscribe(\r\n      (res: any) => {\r\n        if (res.status == 200) {\r\n          localStorage.setItem('customerPhonenum', this.customerPhonenum);\r\n          this.router.navigate(['otp']);\r\n          this.openToast(res?.message);\r\n          const navigationExtras: NavigationExtras = {\r\n            queryParams: {\r\n              screenName: 'login',\r\n            },\r\n          };\r\n          this.api.sendNavParam(navigationExtras);\r\n          this.loginForm.reset();\r\n        } else {\r\n          this.openToast(res?.message);\r\n        }\r\n      },\r\n      (err: any) => {\r\n        this.openToast(err);\r\n      }\r\n    );\r\n  }\r\n\r\n  async openToast(message) {\r\n    const toast = await this.toastCtrl.create({\r\n      message: `${message}`,\r\n      duration: 2500,\r\n      position: 'bottom',\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  back() {\r\n    this.router.navigateByUrl('login-landing');\r\n  }\r\n\r\n  forgotPassword() {\r\n    if (this.loginForm.get('phoneNo')?.valid) {\r\n      this.router.navigateByUrl('/forget-password', {\r\n        state: { data: this.loginForm.value.phoneNo },\r\n      });\r\n    } else {\r\n      this.router.navigateByUrl('/forget-password');\r\n    }\r\n  }\r\n\r\n  ionViewWillLeave() {\r\n    this.loginForm.get('isOtp')?.patchValue(false);\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}