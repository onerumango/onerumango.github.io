{"version":3,"file":"default-src_app_pages_token-v2_token-v2_page_ts.js","mappings":"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","sources":["./src/app/pages/token-v2/token-v2.page.ts"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { DomSanitizer, SafeUrl } from '@angular/platform-browser';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ModalController, AlertController, ActionSheetController, Platform } from '@ionic/angular';\r\nimport * as moment from 'moment';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { DataService } from 'src/app/services/data.service';\r\nimport { ToastService } from 'src/app/services/toast.service';\r\nimport { TokenObjects } from '../transaction-popup/transaction-popup.page';\r\nimport { SocialSharing } from '@ionic-native/social-sharing/ngx';\r\n\r\n\r\n@Component({\r\n  selector: 'app-token-v2',\r\n  templateUrl: './token-v2.page.html',\r\n  styleUrls: ['./token-v2.page.scss'],\r\n})\r\nexport class TokenV2Page implements OnInit {\r\n  tokenObjects = new TokenObjects();\r\n  tokenResponse: any;\r\n  transAmount: any;\r\n  transDate: any;\r\n  transTime: any;\r\n  remarks: any;\r\n  public myAngularxQrCode: string = null;\r\n  blobUrl: any;\r\n  imageToShow: any;\r\n  branch: string;\r\n  phoneNumber: string;\r\n  productCode: any;\r\n  accountNum: string;\r\n  accounttype: string;\r\n  accountcurrency: string;\r\n  tokenTitle: string;\r\n  appointmentId: string;\r\n  appointmentDetails: any;\r\n  appointmentStatus: any;\r\n  handlerMessage = '';\r\n  roleMessage = '';\r\n  accountInfo: {};\r\n  trans: any;\r\n  tellerId: any;\r\n  @Input() value: any;\r\n  @Input() screen: string;\r\n  tranType: any;\r\n\r\n  image: Blob;\r\n  imageURL: SafeUrl;\r\n  isDevice: boolean;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private dataRoute: ActivatedRoute,\r\n    private api: ApiService,\r\n    private sanitizer: DomSanitizer,\r\n    public platform: Platform,\r\n    private actionSheetCtrl: ActionSheetController,\r\n    private socialSharing: SocialSharing,\r\n    private toastService: ToastService, private alertController: AlertController, private modalCtrl: ModalController,\r\n    private shareDataService: DataService) {\r\n    this.myAngularxQrCode = 'Your QR code data string';\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.phoneNumber = localStorage.getItem('customerPhonenum');\r\n    this.isDevice = this.platform.is('cordova');\r\n    this.api.getIndex().subscribe(resp => {\r\n      console.log(resp.index)\r\n      this.assignProductCode(resp.index);\r\n    })\r\n\r\n\r\n    localStorage.getItem('AccountNumber');\r\n    localStorage.getItem('TransactionDate');\r\n    localStorage.getItem('TransactionTime');\r\n    console.log(this.value);\r\n\r\n    this.appointmentDetails = JSON.parse(localStorage.getItem('AppointmentDetails'))\r\n    console.log(\"NEW\", this.appointmentDetails);\r\n    if (this.appointmentDetails) {\r\n      this.trans = this.appointmentDetails;\r\n      this.appointmentStatus = this.appointmentDetails.appointmentStatus;\r\n      this.appointmentId = this.appointmentDetails.appointmentId;\r\n      this.transAmount = this.appointmentDetails.transactionAmount;\r\n      this.transDate = moment(this.appointmentDetails.transactionDate).format(\"D MMMM y\");\r\n      this.transTime = this.appointmentDetails.transactionTime;\r\n      this.branch = this.appointmentDetails.transactionBranch;\r\n      this.accountNum = this.appointmentDetails.accountNumber;\r\n      this.accounttype = this.appointmentDetails.accountType;\r\n      console.log(this.accounttype);\r\n      this.accountcurrency = this.appointmentDetails.accountCurrency;\r\n      this.tranType = this.appointmentDetails?.trnType;\r\n      this.remarks = this.appointmentDetails.remarks;\r\n      console.log(this.remarks);\r\n      this.generateQRCode();\r\n    }\r\n    else {\r\n      this.getData();\r\n    }\r\n  }\r\n  assignProductCode(index: any) {\r\n    this.productCode = index;\r\n  }\r\n\r\n\r\n  close() {\r\n    localStorage.removeItem('AppointmentDetails');\r\n    if (this.screen == 'wallet') {\r\n      this.modalCtrl.dismiss();\r\n    } else {\r\n      this.modalCtrl.dismiss();\r\n      this.router.navigate(['dashboard']);\r\n    }\r\n  }\r\n\r\n\r\n  generateQRCode() {\r\n\r\n    this.tokenObjects.transactionId = this.value?.transactionId;\r\n    this.tokenObjects.accountId = this.accountNum;\r\n    this.tokenObjects.transactionDate = moment(new Date(localStorage.getItem('TransactionDate'))).format(\"DD-MM-YYYY\");\r\n    this.tokenObjects.transactionDate = localStorage.getItem('TransactionDate');\r\n    this.tokenObjects.timeSlot = localStorage.getItem('TransactionTime');\r\n    this.tokenObjects.productCode = this.productCode;\r\n    this.tokenObjects.phoneNumber = this.phoneNumber;\r\n\r\n    this.api.generateQRCode(this.tokenObjects).subscribe(tokenResp => {\r\n      this.image = tokenResp;\r\n      this.imageURL = this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(this.image));\r\n    }, err => {\r\n      console.log(\"err : \", err);\r\n    });\r\n\r\n  }\r\n\r\n  nativeDevice(image: Blob) {\r\n    const reader = new FileReader();\r\n    reader.onloadend = () => {\r\n      this.imageToShow = reader.result;\r\n      console.log(this.imageToShow);\r\n    }\r\n    reader.readAsDataURL(image);\r\n  }\r\n\r\n  async presentAlert(event) {\r\n    console.log(event);\r\n    const alert = await this.alertController.create({\r\n      header: 'Are you sure you want to Cancel this appointment?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          role: 'confirm',\r\n          handler: () => {\r\n            this.handlerMessage = 'Alert confirmed';\r\n            this.delete();\r\n          },\r\n        },\r\n        {\r\n          text: 'Back',\r\n          role: 'cancel',\r\n          handler: () => {\r\n            this.handlerMessage = 'Alert canceled';\r\n          },\r\n        },\r\n      ],\r\n    });\r\n    console.log(this.handlerMessage);\r\n    await alert.present();\r\n\r\n    const { role } = await alert.onDidDismiss();\r\n    this.roleMessage = `Dismissed with role: ${role}`;\r\n  }\r\n\r\n  async editTransaction() {\r\n    console.log(this.appointmentDetails);\r\n    this.value = this.appointmentDetails;\r\n    console.log('value------', this.value);\r\n\r\n    localStorage.removeItem('AppointmentDetails');\r\n    history.pushState({ data: this.value }, '', '')\r\n    this.router.navigateByUrl(\r\n      `/${this.value.trnType.toLowerCase().replace(' ', '')}`,\r\n      {\r\n        state: { data: this.value },\r\n      }\r\n    );\r\n    this.modalCtrl.dismiss(this.value);\r\n\r\n  }\r\n\r\n  delete() {\r\n    const data = {\r\n      appointmentId: this.trans.appointmentId,\r\n      operation: 'cancel'\r\n    }\r\n    console.log('cancelled!', data);\r\n    this.api.appointmentBooking(data).subscribe(resp => {\r\n      console.log(resp);\r\n      localStorage.setItem(\"canceledAppointment\", resp.transactionTime);\r\n      this.appointmentStatus = resp.appointmentStatus;\r\n      this.appointmentId = resp.appointmentId;\r\n      this.transAmount = resp.transactionAmount;\r\n      this.transDate = resp.transactionDate;\r\n      this.transTime = resp.transactionTime;\r\n      this.branch = resp.transactionBranch;\r\n      this.accountNum = resp.accountNumber;\r\n      this.accounttype = resp.accountType;\r\n      this.accountcurrency = resp.accountCurrency;\r\n      this.remarks = resp.remarks;\r\n    });\r\n\r\n  }\r\n\r\n  getData() {\r\n    this.shareDataService.getAccountInfo.subscribe((data) => {\r\n      console.log('Data', data);\r\n      this.accountInfo = data;\r\n    });\r\n\r\n    this.api.getByTransactionId(this.value.transactionId).subscribe((response) => {\r\n      console.log(response);\r\n      this.tellerId = response.tellerId;\r\n      this.trans = JSON.stringify(response);\r\n      this.trans = JSON.parse(this.trans);\r\n      this.appointmentDetails = this.trans;\r\n      this.appointmentStatus = this.trans.appointmentStatus;\r\n      this.appointmentId = this.trans.appointmentId;\r\n      this.transAmount = this.trans.transactionAmount;\r\n      this.transDate = moment(this.trans.transactionDate).format(\"D MMMM y\");\r\n      this.transTime = this.trans.transactionTime;\r\n      this.branch = this.trans.transactionBranch;\r\n      this.accountNum = this.trans.accountNumber;\r\n      this.accounttype = this.trans.accountType;\r\n      this.accountcurrency = this.trans.accountCurrency;\r\n      this.tranType = this.trans.trnType;\r\n      this.remarks = this.trans.remarks;\r\n\r\n      this.generateQRCode();\r\n    });\r\n  }\r\n\r\n\r\n  addToWallet() {\r\n    let payload = {\r\n      transactionId: this.value.transactionId,\r\n      addToWallet: true\r\n    };\r\n\r\n    this.api.updateAddToWallet(payload).subscribe(res => {\r\n      this.toastService.showToast(\"Added Successfully\");\r\n      this.router.navigate(['dashboard']);\r\n    }, (err: any) => {\r\n      console.error(err);\r\n    })\r\n  }\r\n\r\n  convertDate(date: any) {\r\n    let cDate = moment(date).format(\"D MMM y\");\r\n    return cDate;\r\n  }\r\n\r\n  async openSheet() {\r\n    const actionSheet = await this.actionSheetCtrl.create({\r\n      header: 'Appointment Token Share',\r\n      animated: true,\r\n      buttons: [\r\n        {\r\n          text: 'Share via WhatsApp',\r\n          icon: 'share',\r\n          data: {\r\n            action: 'share',\r\n          },\r\n        }, {\r\n          text: 'Cancel',\r\n          role: 'cancel',\r\n          icon: 'close',\r\n          data: {\r\n            action: 'cancel',\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    await actionSheet.present();\r\n\r\n    const result = await actionSheet.onDidDismiss();\r\n\r\n    if (result?.data?.action == 'share') {\r\n      if (this.isDevice) {\r\n        this.shareViaWhatsApp();\r\n      } else {\r\n        this.toastService.showToast(\"Try to share through native mobile\");\r\n      }\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n\r\n  shareViaWhatsApp() {\r\n\r\n    this.socialSharing.shareViaWhatsApp(`Your appointment token is ${this.appointmentId}`, null, null,).then(() => {\r\n      this.modalCtrl.dismiss();\r\n    })\r\n\r\n  }\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}