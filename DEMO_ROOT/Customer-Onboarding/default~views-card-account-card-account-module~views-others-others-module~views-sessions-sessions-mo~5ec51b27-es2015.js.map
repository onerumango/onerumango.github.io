{"version":3,"sources":["./src/app/views/others/sign-later/sign-later.component.ts","./src/app/views/others/sign-later/sign-later.component.html"],"names":[],"mappings":"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","file":"default~views-card-account-card-account-module~views-others-others-module~views-sessions-sessions-mo~5ec51b27-es2015.js","sourcesContent":["import { Component, ElementRef, Inject, OnInit, ViewChild } from '@angular/core';\r\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SignaturePad } from 'angular2-signaturepad';\r\nimport { ApiService } from 'app/shared/services/api.service';\r\nimport { DialogService } from 'app/shared/services/dialogs/dialog.service';\r\nimport { LocalStoreService } from 'app/shared/services/local-store.service';\r\n\r\n@Component({\r\n  selector: 'app-sign-later',\r\n  templateUrl: './sign-later.component.html',\r\n  styleUrls: ['./sign-later.component.scss']\r\n})\r\nexport class SignLaterComponent implements OnInit {\r\n\r\n  @ViewChild(SignaturePad) signaturePad: SignaturePad;\r\n  @ViewChild(\"profileFile\") profileFile: ElementRef;\r\n  @ViewChild('fileUpload') fileUpload: ElementRef<HTMLElement>;\r\n\r\n  signaturePadOptions: Object = {\r\n    'minWidth': 2,\r\n    'canvasWidth': 1000,\r\n    'canvasHeight': 300\r\n  };\r\n  esignUrl: string;\r\n  disableDone: boolean=true;\r\n  selectedFile: any;\r\n  imageURL1: any;\r\n  customerId: any;\r\n  profileId: any;\r\n  signatureImg : any;\r\n  signUploadActive : boolean = false;\r\n  eSignActive : boolean = true;\r\n  fileUploaded : boolean = false;\r\n  userData : any;\r\n\r\n  constructor(\r\n    private apiService : ApiService,\r\n    private dialogService : DialogService,\r\n    public ls : LocalStoreService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private snack: MatSnackBar\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.route.queryParamMap.subscribe((params: any) => {\r\n      this.userData = atob(params.get('cb'));\r\n      if(params.get('cb')){\r\n         this.router.navigate([], { \r\n          queryParams: {\r\n            'cb': atob(params.get('cb'))\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  drawStart() {\r\n    console.log('begin drawing');\r\n  }\r\n\r\n  signType(signType) {\r\n    if (signType == 'eSignActive') {\r\n      this.signUploadActive = false;\r\n      this.eSignActive = true;\r\n    }\r\n    else if (signType == 'signUploadActive') {\r\n      this.signUploadActive = true;\r\n      this.eSignActive = false;\r\n    }\r\n  }\r\n\r\n  chooseFileDevice(){\r\n    let el: HTMLElement = this.fileUpload.nativeElement;\r\n    el.click();\r\n    this.fileUploaded = true;\r\n  }\r\n\r\n  drawComplete() {\r\n    console.log(this.signaturePad.toDataURL());\r\n    this.esignUrl = this.signaturePad.toDataURL();\r\n    console.log('signUrl', this.esignUrl);\r\n    if (this.esignUrl.toString().includes('data:image/png;base64')) {\r\n      this.disableDone = false;\r\n    } else {\r\n      this.disableDone = true;\r\n    }\r\n  }\r\n\r\n  onFileSelect(event) {\r\n    console.log(\"event -- \", event.target.files);\r\n    this.selectedFile = event.target.files[0]\r\n    console.log(this.selectedFile)\r\n\r\n    let reader = new FileReader();\r\n    reader.readAsDataURL(event.target.files[0]);\r\n    reader.onload = (event2) => {\r\n      this.imageURL1 = reader.result;\r\n    };\r\n    \r\n  }\r\n\r\n  save(event) {\r\n    this.route.queryParamMap.subscribe((params: any) => {\r\n    this.userData = \"{\" + params.get('cb').split(\"&\") + \"}\";\r\n    console.log(this.userData);\r\n    });\r\n    const base64Data = this.signaturePad?.toDataURL();\r\n    this.signatureImg = base64Data;\r\n    const dataURL = this.signaturePad.toDataURL('image/png');\r\n    const datam = atob(dataURL.substring('data:image/png;base64,'.length)),\r\n      asArray = new Uint8Array(datam.length);\r\n    for (var i = 0, len = datam.length; i < len; ++i) {\r\n      asArray[i] = datam.charCodeAt(i);\r\n    }\r\n    const blob = new Blob([asArray], { type: 'image/png' });\r\n    const payload = new FormData();\r\n    payload.append('data', JSON.stringify(this.userData));\r\n    if(this.eSignActive)\r\n    payload.append('file', blob);\r\n    else if(this.fileUploaded){\r\n      payload.append('file', this.selectedFile);\r\n    }\r\n    console.log(payload);\r\n    this.apiService.uploadSignature(payload).subscribe(resp => {\r\n        console.log(resp);\r\n        if(resp){\r\n          this.snack.open(`Uploaded successfully!`, \"OK\", {\r\n            duration: 6000,\r\n            verticalPosition: \"top\",\r\n            horizontalPosition: \"right\",\r\n          });\r\n        }  \r\n    });\r\n  }\r\n\r\n \r\n  deleteImg() {\r\n    this.ls.setItem('enable',false);\r\n    this.imageURL1 = \"not_available\";\r\n  }\r\n\r\n\r\n}\r\n","<div>\r\n  <div>\r\n    <mat-toolbar class=\"headerColor\">\r\n      <div class=\"headerDiv\">\r\n        <div class=\"bankNameDiv\">Demo Bank</div>\r\n        <div class=\"locationDiv\">K N-Kasthuri Nagar</div>\r\n      </div>\r\n    </mat-toolbar>\r\n  </div>\r\n  <div class=\"selectSignatureContentDiv\">\r\n    <div (click)=\"signType('eSignActive')\" [ngClass]=\"eSignActive ? 'eSignDivActive' : 'eSignDiv'\" >\r\n      <div class=\"imgSignDiv\">\r\n        <img width=\"100px\" height=\"100px\" src=\"assets/images/esign.png\" alt=\"\" />\r\n      </div>\r\n      <div class=\"fontSignDiv\">\r\n        E - Sign Draw\r\n      </div>\r\n    </div>\r\n    <div (click)=\"signType('signUploadActive')\"  [ngClass]=\"signUploadActive ? 'signUploadDivActive' : 'signUploadDiv'\">\r\n      <div class=\"imgSignDiv\">\r\n        <img width=\"100px\" height=\"100px\" src=\"assets/images/esign.png\" alt=\"\" />\r\n      </div>\r\n      <div  class=\"fontSignDiv\">\r\n          Image Upload\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"eSignActive\" class=\"selectSignatureContentDiv\">\r\n    <div class=\"signDiv\">\r\n      <div>\r\n        <signature-pad [options]=\"signaturePadOptions\" (onBeginEvent)=\"drawStart()\"\r\n          (onEndEvent)=\"drawComplete()\">\r\n        </signature-pad>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"signUploadActive\" class=\"selectSignatureContentDiv\">\r\n    <div class=\"signDiv\">\r\n      <div>\r\n        <img width=\"100px\" height=\"100px\" src=\"assets/images/download.jpg\" alt=\"\" />\r\n      </div>\r\n      <div>\r\n        <h1 class=\"fontStyle\">Drag and Drop file</h1>\r\n      </div>\r\n      <div>\r\n        <h1>or</h1>\r\n      </div>\r\n      <div>\r\n        <span class=\"browseLink\" (click)=\"chooseFileDevice()\">Browse</span>\r\n        <input (change)=\"onFileSelect($event)\" #fileUpload class=\"fileUploadClass\" type=\"file\" />\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"fileUploaded\" class=\"signDiv\">\r\n      <div class=\"afterUploadImgDiv\">\r\n        <div class=\"upImgDiv\">\r\n          <img class=\"formImg\" required [src]=\"imageURL1\" alt=\"\">\r\n        </div>\r\n        <div>\r\n          <span (click)=\"deleteImg()\" class=\"browseLink\">Clear</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"btnalgn\">\r\n    <button (click)=\"save($event)\" mat-raised-button class=\"btncolor\">Sumbit</button>\r\n  </div>\r\n</div> \r\n\r\n\r\n\r\n"],"sourceRoot":"webpack:///"}