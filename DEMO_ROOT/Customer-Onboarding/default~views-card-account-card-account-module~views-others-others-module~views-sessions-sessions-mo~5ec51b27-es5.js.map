{"version":3,"sources":["webpack:///src/app/views/others/sign-later/sign-later.component.ts","webpack:///src/app/views/others/sign-later/sign-later.component.html"],"names":["SignLaterComponent","apiService","dialogService","ls","route","router","snack","signaturePadOptions","disableDone","signUploadActive","eSignActive","fileUploaded","queryParamMap","subscribe","params","userData","atob","get","navigate","queryParams","console","log","signType","el","fileUpload","nativeElement","click","signaturePad","toDataURL","esignUrl","toString","includes","event","target","files","selectedFile","reader","FileReader","readAsDataURL","onload","event2","imageURL1","result","split","base64Data","signatureImg","dataURL","datam","substring","length","asArray","Uint8Array","i","len","charCodeAt","blob","Blob","type","payload","FormData","append","JSON","stringify","uploadSignature","resp","open","duration","verticalPosition","horizontalPosition","setItem","save","selector","templateUrl","styleUrls","profileFile"],"mappings":"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","file":"default~views-card-account-card-account-module~views-others-others-module~views-sessions-sessions-mo~5ec51b27-es5.js","sourcesContent":["import { Component, ElementRef, Inject, OnInit, ViewChild } from '@angular/core';\r\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SignaturePad } from 'angular2-signaturepad';\r\nimport { ApiService } from 'app/shared/services/api.service';\r\nimport { DialogService } from 'app/shared/services/dialogs/dialog.service';\r\nimport { LocalStoreService } from 'app/shared/services/local-store.service';\r\n\r\n@Component({\r\n  selector: 'app-sign-later',\r\n  templateUrl: './sign-later.component.html',\r\n  styleUrls: ['./sign-later.component.scss']\r\n})\r\nexport class SignLaterComponent implements OnInit {\r\n\r\n  @ViewChild(SignaturePad) signaturePad: SignaturePad;\r\n  @ViewChild(\"profileFile\") profileFile: ElementRef;\r\n  @ViewChild('fileUpload') fileUpload: ElementRef<HTMLElement>;\r\n\r\n  signaturePadOptions: Object = {\r\n    'minWidth': 2,\r\n    'canvasWidth': 1000,\r\n    'canvasHeight': 300\r\n  };\r\n  esignUrl: string;\r\n  disableDone: boolean=true;\r\n  selectedFile: any;\r\n  imageURL1: any;\r\n  customerId: any;\r\n  profileId: any;\r\n  signatureImg : any;\r\n  signUploadActive : boolean = false;\r\n  eSignActive : boolean = true;\r\n  fileUploaded : boolean = false;\r\n  userData : any;\r\n\r\n  constructor(\r\n    private apiService : ApiService,\r\n    private dialogService : DialogService,\r\n    public ls : LocalStoreService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private snack: MatSnackBar\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.route.queryParamMap.subscribe((params: any) => {\r\n      this.userData = atob(params.get('cb'));\r\n      if(params.get('cb')){\r\n         this.router.navigate([], { \r\n          queryParams: {\r\n            'cb': atob(params.get('cb'))\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  drawStart() {\r\n    console.log('begin drawing');\r\n  }\r\n\r\n  signType(signType) {\r\n    if (signType == 'eSignActive') {\r\n      this.signUploadActive = false;\r\n      this.eSignActive = true;\r\n    }\r\n    else if (signType == 'signUploadActive') {\r\n      this.signUploadActive = true;\r\n      this.eSignActive = false;\r\n    }\r\n  }\r\n\r\n  chooseFileDevice(){\r\n    let el: HTMLElement = this.fileUpload.nativeElement;\r\n    el.click();\r\n    this.fileUploaded = true;\r\n  }\r\n\r\n  drawComplete() {\r\n    console.log(this.signaturePad.toDataURL());\r\n    this.esignUrl = this.signaturePad.toDataURL();\r\n    console.log('signUrl', this.esignUrl);\r\n    if (this.esignUrl.toString().includes('data:image/png;base64')) {\r\n      this.disableDone = false;\r\n    } else {\r\n      this.disableDone = true;\r\n    }\r\n  }\r\n\r\n  onFileSelect(event) {\r\n    console.log(\"event -- \", event.target.files);\r\n    this.selectedFile = event.target.files[0]\r\n    console.log(this.selectedFile)\r\n\r\n    let reader = new FileReader();\r\n    reader.readAsDataURL(event.target.files[0]);\r\n    reader.onload = (event2) => {\r\n      this.imageURL1 = reader.result;\r\n    };\r\n    \r\n  }\r\n\r\n  save(event) {\r\n    this.route.queryParamMap.subscribe((params: any) => {\r\n    this.userData = \"{\" + params.get('cb').split(\"&\") + \"}\";\r\n    console.log(this.userData);\r\n    });\r\n    const base64Data = this.signaturePad?.toDataURL();\r\n    this.signatureImg = base64Data;\r\n    const dataURL = this.signaturePad.toDataURL('image/png');\r\n    const datam = atob(dataURL.substring('data:image/png;base64,'.length)),\r\n      asArray = new Uint8Array(datam.length);\r\n    for (var i = 0, len = datam.length; i < len; ++i) {\r\n      asArray[i] = datam.charCodeAt(i);\r\n    }\r\n    const blob = new Blob([asArray], { type: 'image/png' });\r\n    const payload = new FormData();\r\n    payload.append('data', JSON.stringify(this.userData));\r\n    if(this.eSignActive)\r\n    payload.append('file', blob);\r\n    else if(this.fileUploaded){\r\n      payload.append('file', this.selectedFile);\r\n    }\r\n    console.log(payload);\r\n    this.apiService.uploadSignature(payload).subscribe(resp => {\r\n        console.log(resp);\r\n        if(resp){\r\n          this.snack.open(`Uploaded successfully!`, \"OK\", {\r\n            duration: 6000,\r\n            verticalPosition: \"top\",\r\n            horizontalPosition: \"right\",\r\n          });\r\n        }  \r\n    });\r\n  }\r\n\r\n \r\n  deleteImg() {\r\n    this.ls.setItem('enable',false);\r\n    this.imageURL1 = \"not_available\";\r\n  }\r\n\r\n\r\n}\r\n","<div>\r\n  <div>\r\n    <mat-toolbar class=\"headerColor\">\r\n      <div class=\"headerDiv\">\r\n        <div class=\"bankNameDiv\">Demo Bank</div>\r\n        <div class=\"locationDiv\">K N-Kasthuri Nagar</div>\r\n      </div>\r\n    </mat-toolbar>\r\n  </div>\r\n  <div class=\"selectSignatureContentDiv\">\r\n    <div (click)=\"signType('eSignActive')\" [ngClass]=\"eSignActive ? 'eSignDivActive' : 'eSignDiv'\" >\r\n      <div class=\"imgSignDiv\">\r\n        <img width=\"100px\" height=\"100px\" src=\"assets/images/esign.png\" alt=\"\" />\r\n      </div>\r\n      <div class=\"fontSignDiv\">\r\n        E - Sign Draw\r\n      </div>\r\n    </div>\r\n    <div (click)=\"signType('signUploadActive')\"  [ngClass]=\"signUploadActive ? 'signUploadDivActive' : 'signUploadDiv'\">\r\n      <div class=\"imgSignDiv\">\r\n        <img width=\"100px\" height=\"100px\" src=\"assets/images/esign.png\" alt=\"\" />\r\n      </div>\r\n      <div  class=\"fontSignDiv\">\r\n          Image Upload\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"eSignActive\" class=\"selectSignatureContentDiv\">\r\n    <div class=\"signDiv\">\r\n      <div>\r\n        <signature-pad [options]=\"signaturePadOptions\" (onBeginEvent)=\"drawStart()\"\r\n          (onEndEvent)=\"drawComplete()\">\r\n        </signature-pad>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"signUploadActive\" class=\"selectSignatureContentDiv\">\r\n    <div class=\"signDiv\">\r\n      <div>\r\n        <img width=\"100px\" height=\"100px\" src=\"assets/images/download.jpg\" alt=\"\" />\r\n      </div>\r\n      <div>\r\n        <h1 class=\"fontStyle\">Drag and Drop file</h1>\r\n      </div>\r\n      <div>\r\n        <h1>or</h1>\r\n      </div>\r\n      <div>\r\n        <span class=\"browseLink\" (click)=\"chooseFileDevice()\">Browse</span>\r\n        <input (change)=\"onFileSelect($event)\" #fileUpload class=\"fileUploadClass\" type=\"file\" />\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"fileUploaded\" class=\"signDiv\">\r\n      <div class=\"afterUploadImgDiv\">\r\n        <div class=\"upImgDiv\">\r\n          <img class=\"formImg\" required [src]=\"imageURL1\" alt=\"\">\r\n        </div>\r\n        <div>\r\n          <span (click)=\"deleteImg()\" class=\"browseLink\">Clear</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"btnalgn\">\r\n    <button (click)=\"save($event)\" mat-raised-button class=\"btncolor\">Sumbit</button>\r\n  </div>\r\n</div> \r\n\r\n\r\n\r\n"]}