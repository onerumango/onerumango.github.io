"use strict";(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[906],{17988:function(t,e,i){i.d(e,{G:function(){return s},T:function(){return a}});var r=i(37716),s=function(){function t(t,e,i){this.el=t,this.vcr=e,this.renderer=i,this.dtOptions={}}return t.prototype.ngOnInit=function(){var t=this;this.dtTrigger?this.dtTrigger.subscribe(function(e){t.displayTable(e)}):this.displayTable(null)},t.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},t.prototype.displayTable=function(t){var e=this;t&&(this.dtOptions=t),this.dtInstance=new Promise(function(t,i){Promise.resolve(e.dtOptions).then(function(r){0===Object.keys(r).length&&0===$("tbody tr",e.el.nativeElement).length?i("Both the table and dtOptions cannot be empty"):setTimeout(function(){var i={rowCallback:function(t,i,s){if(r.columns){var o=r.columns;e.applyNgPipeTransform(t,o),e.applyNgRefTemplate(t,o,i)}r.rowCallback&&r.rowCallback(t,i,s)}};i=Object.assign({},r,i),e.dt=$(e.el.nativeElement).DataTable(i),t(e.dt)})})})},t.prototype.applyNgPipeTransform=function(t,e){e.filter(function(t){return t.ngPipeInstance&&!t.ngTemplateRef}).forEach(function(i){var r=i.ngPipeInstance,s=e.findIndex(function(t){return t.data===i.data}),o=t.childNodes.item(s),a=$(o).text(),n=r.transform(a);$(o).text(n)})},t.prototype.applyNgRefTemplate=function(t,e,i){var r=this;e.filter(function(t){return t.ngTemplateRef&&!t.ngPipeInstance}).forEach(function(s){var o=s.ngTemplateRef,a=o.ref,n=o.context,c=e.findIndex(function(t){return t.data===s.data}),u=t.childNodes.item(c);$(u).html("");var d=Object.assign({},n,null==n?void 0:n.userData,{adtData:i}),l=r.vcr.createEmbeddedView(a,d);r.renderer.appendChild(u,l.rootNodes[0])})},t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.s_b),r.Y36(r.Qsj))},t.\u0275dir=r.lG2({type:t,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),t}(),o=i(38583),a=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[o.ez]]}),t}()},31443:function(t,e,i){i.d(e,{k:function(){return o}});var r=i(37716),s=i(80463);let o=(()=>{class t{constructor(t){this.iziToast=t}successMessage(t,e){this.iziToast.success({title:t,message:e,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}errorMessage(t,e){this.iziToast.error({title:t,message:e,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}infoMessage(t,e){this.iziToast.info({title:t,message:e,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s.I))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},7906:function(t,e,i){i.r(e),i.d(e,{SecurityPolicyModule:function(){return E}});var r=i(38583),s=i(39895),o=i(50215),a=i(64762),n=i(79765),c=i(35383),u=i(17988),d=i(88259),l=i.n(d),h=i(37716),g=i(10402),p=i(77382),m=i(98613);function y(t,e){if(1&t&&(h.TgZ(0,"td"),h._uU(1),h.qZA()),2&t){const t=h.oxw(2).$implicit;h.xp6(1),h.hij(" ",t.version," ")}}function Z(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",16),h.NdJ("click",function(){h.CHM(t);const e=h.oxw(2).$implicit;return h.oxw().close(e)}),h._UZ(1,"img",17),h.qZA()}}function f(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",18),h.NdJ("click",function(){h.CHM(t);const e=h.oxw(2).$implicit;return h.oxw().reopen(e)}),h._UZ(1,"img",19),h.qZA()}}function T(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"tr"),h.TgZ(1,"td"),h.TgZ(2,"a",11),h.NdJ("click",function(){return h.CHM(t),h.oxw(2).getResp()}),h._uU(3),h.qZA(),h.qZA(),h.YNc(4,y,2,1,"td",10),h.TgZ(5,"td"),h._uU(6),h.qZA(),h.TgZ(7,"td"),h._uU(8),h.qZA(),h.TgZ(9,"td"),h._uU(10),h.qZA(),h.TgZ(11,"td"),h._uU(12),h.ALo(13,"date"),h.qZA(),h.TgZ(14,"td"),h.TgZ(15,"button",12),h.NdJ("click",function(){h.CHM(t);const e=h.oxw().$implicit;return h.oxw().auth(e)}),h._UZ(16,"img",13),h.qZA(),h.YNc(17,Z,2,0,"button",14),h.YNc(18,f,2,0,"button",15),h.qZA(),h.qZA()}if(2&t){const t=h.oxw().$implicit,e=h.oxw();h.xp6(3),h.Oqu(t.version),h.xp6(1),h.Q6J("ngIf",t.version!=e.maxVersion),h.xp6(2),h.Oqu(t.createdBy),h.xp6(2),h.Oqu(t.authStatus),h.xp6(2),h.Oqu(t.recordStatus),h.xp6(2),h.Oqu(h.xi3(13,9,t.createdDate,"medium")),h.xp6(3),h.Q6J("disabled",!("U"==t.authStatus||"Unauthorized"==t.authStatus)),h.xp6(2),h.Q6J("ngIf","OPEN"==t.recordStatus||"Open"==t.recordStatus),h.xp6(1),h.Q6J("ngIf","CLOSED"==t.recordStatus||"Close"==t.recordStatus)}}function v(t,e){if(1&t&&(h.TgZ(0,"tbody"),h.YNc(1,T,19,12,"tr",10),h.qZA()),2&t){const t=e.$implicit,i=h.oxw();h.xp6(1),h.Q6J("ngIf",t.version===i.maxVersion)}}function A(t,e){1&t&&(h.ynx(0),h.TgZ(1,"div",20),h.TgZ(2,"span",21),h._uU(3,"Please wait... "),h._UZ(4,"span",22),h.qZA(),h.qZA(),h.BQk())}const x=function(){return["/dashboard"]};let C=(()=>{class t{constructor(t,e,i,r,s){this.apiService=t,this.roleService=e,this.router=i,this.cdr=r,this.userApi=s,this.respArray=[],this.dtOptions={},this.dtTrigger=new n.xQ,this.isLoading=!1,this.roleCodes=new c.yv,this.dataTableConfig={sortBy:"version",pageNo:1,pageSize:5},this.statusArr=["Authorized","Unauthorized","Open","Close"]}ngOnInit(){this.currentUser=localStorage.getItem("userFromLogin"),this.dtOptions={pagingType:"full_numbers",pageLength:5,columnDefs:[{type:"date",targets:[4]}],order:[[4,"desc"]],processing:!0,lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]]},this.getDataForMonitor(),this.roleService.fetchScreenPermissions("Security Policy"),this.roleService.screenLabelList.subscribe(t=>this.roleCodes=t),console.log(this.roleCodes)}getDataForMonitor(){this.isLoading=!0,this.respArray=[],this.apiService.getAllSecurityPolicy(this.dataTableConfig.pageNo,this.dataTableConfig.pageSize,this.dataTableConfig.sortBy).subscribe(t=>(0,a.mG)(this,void 0,void 0,function*(){for(let e of t.result)e.authStatus=this.statusArr.find(t=>t.startsWith(e.authStatus)),e.recordStatus=this.statusArr.find(t=>t.startsWith(e.recordStatus));this.maxVersion=Math.max.apply(Math,t.result.map(function(t){return t.version})),this.respArray=t.result,this.isLoading=!1,this.cdr.markForCheck(),this.dtTrigger.next()}))}ngOnDestroy(){this.dtTrigger.unsubscribe()}new(){this.router.navigateByUrl("/security-policy")}getResp(){localStorage.removeItem("securityPolicyData"),this.router.navigateByUrl("/security-policy");let t=this.respArray.find(t=>t.version==this.maxVersion);console.log(this.respArray.find(t=>t.version==this.maxVersion)),this.apiService.setSecurityPolicy({authStatus:t.authStatus,authorizedBy:t.authorizedBy,authorizedTime:t.authorizedTime,createdBy:t.createdBy,createdDate:t.createdDate,isActive:t.isActive,maxInvLogins:t.maxInvLogins,maxPswdLength:t.maxPswdLength,minPswdLength:t.minPswdLength,modifiedBy:t.modifiedBy,modifiedTime:t.modifiedTime,firstTimeAuth:t.firstTimeAuth,notifyPasswordExpiryInDays:t.notifyPasswordExpiryInDays,pswdComplexLcase:t.pswdComplexLcase,pswdComplexNum:t.pswdComplexNum,pswdComplexSplc:t.pswdComplexSplc,pswdComplexUcase:t.pswdComplexUcase,pswdExpiry:t.pswdExpiry,pswdReuseAft:t.pswdReuseAft,recordStatus:t.recordStatus,version:t.version,passwordGenerationType:t.passwordGenerationType}),localStorage.setItem("securityPolicyData",JSON.stringify(t))}gotoSummary(){this.router.navigateByUrl("/security-policy");let t=this.respArray.find(t=>t.version==this.maxVersion);console.log(this.respArray.find(t=>t.version==this.maxVersion)),this.apiService.setSecurityPolicy({activeEdit:!0,authStatus:t.authStatus,authorizedBy:t.authorizedBy,authorizedTime:t.authorizedTime,createdBy:t.createdBy,createdDate:t.createdDate,isActive:t.isActive,maxInvLogins:t.maxInvLogins,maxPswdLength:t.maxPswdLength,minPswdLength:t.minPswdLength,modifiedBy:t.modifiedBy,modifiedTime:t.modifiedTime,firstTimeAuth:t.firstTimeAuth,notifyPasswordExpiryInDays:t.notifyPasswordExpiryInDays,pswdComplexLcase:t.pswdComplexLcase,pswdComplexNum:t.pswdComplexNum,pswdComplexSplc:t.pswdComplexSplc,pswdComplexUcase:t.pswdComplexUcase,pswdExpiry:t.pswdExpiry,pswdReuseAft:t.pswdReuseAft,recordStatus:t.recordStatus,version:t.version,passwordGenerationType:t.passwordGenerationType})}auth(t){l().fire({text:"You are trying to Authorize record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(e=>{if(console.log("this is reopen ",e),!0===e.isConfirmed){if(t.createdBy===localStorage.getItem("userFromLogin"))return void l().fire({text:"Maker Cannot Authorize Record!",icon:"error"});console.log("this is authorzation"),t.loggedInUser=this.currentUser,this.apiService.authSecurity("authorize",t).subscribe(t=>{console.log(t),this.securityData=t,this.auditlog(),t&&l().fire({text:"Record is Authorized",icon:"success"}).then(()=>window.location.reload())})}})}close(t){l().fire({text:"You are trying to Close record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(e=>{console.log("this is reopen ",e),!0===e.isConfirmed&&(console.log("this is close"),this.apiService.authSecurity("close",t).subscribe(t=>{console.log(t),this.securityData=t,this.auditlog(),this.securityData&&l().fire({text:"Record is Closed"}).then(()=>window.location.reload())},t=>{l().fire(t.error.message)}))})}reopen(t){l().fire({text:"You are trying to Reopen record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(e=>{console.log("this is reopen ",e),!0===e.isConfirmed&&this.apiService.authSecurity("reopen",t).subscribe(t=>{console.log(t),this.securityData=t,this.auditlog(),this.securityData?(this.auditlog(),l().fire({text:"Record is Reopened"}).then(()=>window.location.reload())):l().fire({text:"Record cannot be opened "})},t=>{l().fire(t.error.message)})})}auditlog(){"O"==this.securityData.recordStatus?this.securityData.recordStatus="OPEN":"C"==this.securityData.recordStatus&&(this.securityData.recordStatus="CLOSE"),"A"==this.securityData.authStatus||"Authorized"==this.securityData.authStatus?this.securityData.authStatus="AUTHORIZED":("U"==this.securityData.authStatus||"Unauthorized"==this.securityData.authStatus)&&(this.securityData.authStatus="UNAUTHORIZED"),"Y"==this.securityData.firstTimeAuth?this.securityData.firstTimeAuth="YES":"N"==this.securityData.firstTimeAuth&&(this.securityData.firstTimeAuth="NO")}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(g.W),h.Y36(p.N),h.Y36(s.F0),h.Y36(h.sBO),h.Y36(m.fz))},t.\u0275cmp=h.Xpm({type:t,selectors:[["npr-security-policy-summary"]],viewQuery:function(t,e){if(1&t&&h.Gf(u.G,5),2&t){let t;h.iGM(t=h.CRH())&&(e.dtElement=t.first)}},decls:27,vars:6,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"dbCardStyle"],[1,"row","g-3","pb-3","justify-content-end"],[1,"col-auto"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],[1,"table-responsive"],["datatable","",1,"dataTable","table","tableStyle","nowrap","tableStyleSelect","vAlignMdl",2,"width","100%",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"primaryColor",3,"click"],["title","Authorize",1,"btn",2,"color","red",3,"disabled","click"],["src","assets/images/authorize.svg","alt","Authorize"],["class","btn","style","color: red","title","Close",3,"click",4,"ngIf"],["class","btn","style","color: red","title","Reopen",3,"click",4,"ngIf"],["title","Close",1,"btn",2,"color","red",3,"click"],["src","assets/images/CROSS1.svg","alt","..."],["title","Reopen",1,"btn",2,"color","red",3,"click"],["src","assets/images/open.svg","alt","..."],[1,"loading-page-center"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(t,e){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"h2",2),h._uU(3,"Security Policy"),h.qZA(),h.qZA(),h.TgZ(4,"div",3),h.TgZ(5,"div",4),h.TgZ(6,"div",5),h.TgZ(7,"a",6),h._uU(8,"Exit"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(9,"div",7),h.TgZ(10,"table",8),h.TgZ(11,"thead"),h.TgZ(12,"tr"),h.TgZ(13,"th"),h._uU(14,"Version"),h.qZA(),h.TgZ(15,"th"),h._uU(16,"Created By"),h.qZA(),h.TgZ(17,"th"),h._uU(18,"Auth Status"),h.qZA(),h.TgZ(19,"th"),h._uU(20,"Record Status"),h.qZA(),h.TgZ(21,"th"),h._uU(22,"Date"),h.qZA(),h.TgZ(23,"th"),h._uU(24,"Action"),h.qZA(),h.qZA(),h.qZA(),h.YNc(25,v,2,1,"tbody",9),h.qZA(),h.qZA(),h.YNc(26,A,5,0,"ng-container",10),h.qZA(),h.qZA()),2&t&&(h.xp6(7),h.Q6J("routerLink",h.DdM(5,x)),h.xp6(3),h.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),h.xp6(15),h.Q6J("ngForOf",e.respArray),h.xp6(1),h.Q6J("ngIf",e.isLoading))},directives:[s.yS,u.G,r.sg,r.O5],pipes:[r.uU],styles:[""]}),t})();var q=i(3679),S=i(25917),w=i(31443);function b(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",39),h.TgZ(1,"button",42),h.NdJ("click",function(){return h.CHM(t),h.oxw().submit()}),h._uU(2,"Save"),h.qZA(),h.qZA()}if(2&t){const t=h.oxw();h.xp6(1),h.Q6J("disabled",!t.securityForm.dirty)}}function D(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",39),h.TgZ(1,"button",43),h.NdJ("click",function(){return h.CHM(t),h.oxw().editValues()}),h._uU(2,"Edit"),h.qZA(),h.qZA()}}function U(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",39),h.TgZ(1,"button",44),h.NdJ("click",function(){return h.CHM(t),h.oxw().auth()}),h._uU(2,"Auth"),h.qZA(),h.qZA()}}function L(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",39),h.TgZ(1,"button",45),h.NdJ("click",function(){return h.CHM(t),h.oxw().close()}),h._uU(2,"Close"),h.qZA(),h.qZA()}}function N(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",39),h.TgZ(1,"button",45),h.NdJ("click",function(){return h.CHM(t),h.oxw().reopen()}),h._uU(2,"Reopen"),h.qZA(),h.qZA()}}function B(t,e){1&t&&(h.TgZ(0,"div",39),h.TgZ(1,"button",46),h._uU(2,"Delete"),h.qZA(),h.qZA())}function I(t,e){if(1&t&&(h.TgZ(0,"div",4),h.TgZ(1,"div",47),h.TgZ(2,"div",48),h.TgZ(3,"div",49),h.TgZ(4,"div",50),h.TgZ(5,"div",39),h.TgZ(6,"div",51),h._UZ(7,"i",52),h.qZA(),h.qZA(),h.TgZ(8,"div",53),h.TgZ(9,"div",54),h.TgZ(10,"h2"),h._uU(11,"Maker"),h.qZA(),h.TgZ(12,"p"),h._uU(13),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(14,"div",48),h.TgZ(15,"div",49),h.TgZ(16,"div",50),h.TgZ(17,"div",39),h.TgZ(18,"div",55),h._UZ(19,"img",56),h.qZA(),h.qZA(),h.TgZ(20,"div",53),h.TgZ(21,"div",54),h.TgZ(22,"h2"),h._uU(23,"Maker Time Stamp"),h.qZA(),h.TgZ(24,"p"),h._uU(25),h.ALo(26,"date"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(27,"div",48),h.TgZ(28,"div",49),h.TgZ(29,"div",50),h.TgZ(30,"div",39),h.TgZ(31,"div",57),h._UZ(32,"i",58),h.qZA(),h.qZA(),h.TgZ(33,"div",53),h.TgZ(34,"div",54),h.TgZ(35,"h2"),h._uU(36,"Record Status"),h.qZA(),h.TgZ(37,"p"),h._uU(38),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(39,"div",48),h.TgZ(40,"div",49),h.TgZ(41,"div",50),h.TgZ(42,"div",39),h.TgZ(43,"div",59),h._UZ(44,"i",60),h.qZA(),h.qZA(),h.TgZ(45,"div",53),h.TgZ(46,"div",54),h.TgZ(47,"h2"),h._uU(48,"Checker"),h.qZA(),h.TgZ(49,"p"),h._uU(50),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(51,"div",48),h.TgZ(52,"div",49),h.TgZ(53,"div",50),h.TgZ(54,"div",39),h.TgZ(55,"div",61),h._UZ(56,"img",62),h.qZA(),h.qZA(),h.TgZ(57,"div",53),h.TgZ(58,"div",54),h.TgZ(59,"h2"),h._uU(60,"Checker Time Stamp"),h.qZA(),h.TgZ(61,"p"),h._uU(62),h.ALo(63,"date"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(64,"div",48),h.TgZ(65,"div",49),h.TgZ(66,"div",50),h.TgZ(67,"div",39),h.TgZ(68,"div",63),h._UZ(69,"i",64),h.qZA(),h.qZA(),h.TgZ(70,"div",53),h.TgZ(71,"div",54),h.TgZ(72,"h2"),h._uU(73,"First Time Auth"),h.qZA(),h.TgZ(74,"p"),h._uU(75),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(76,"div",48),h.TgZ(77,"div",49),h.TgZ(78,"div",50),h.TgZ(79,"div",39),h.TgZ(80,"div",65),h._UZ(81,"img",66),h.qZA(),h.qZA(),h.TgZ(82,"div",53),h.TgZ(83,"div",54),h.TgZ(84,"h2"),h._uU(85,"Auth Status"),h.qZA(),h.TgZ(86,"p"),h._uU(87),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(88,"div",48),h.TgZ(89,"div",49),h.TgZ(90,"div",50),h.TgZ(91,"div",39),h.TgZ(92,"div",57),h._UZ(93,"img",67),h.qZA(),h.qZA(),h.TgZ(94,"div",53),h.TgZ(95,"div",54),h.TgZ(96,"h2"),h._uU(97,"Modification No"),h.qZA(),h.TgZ(98,"p"),h._uU(99),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t){const t=h.oxw();h.xp6(13),h.Oqu(t.securityData.createdBy),h.xp6(12),h.Oqu(h.xi3(26,8,t.securityData.createdDate,"MM/dd/yyyy, h:mm a")),h.xp6(13),h.Oqu(t.securityData.recordStatus),h.xp6(12),h.Oqu(t.securityData.authorizedBy),h.xp6(12),h.Oqu(h.xi3(63,11,t.securityData.authorizedTime,"MM/dd/yyyy, h:mm a")),h.xp6(13),h.Oqu(t.securityData.firstTimeAuth),h.xp6(12),h.Oqu(t.securityData.authStatus),h.xp6(12),h.Oqu(t.securityData.version)}}const k=function(){return["/security-policy/summary"]},O=[{path:"",component:(()=>{class t{constructor(t,e,i,r,s){this.toastService=t,this.formBuilder=e,this.roleService=i,this.cdr=r,this.secuityService=s,this.enablesubmit=!0,this.submitSecurity=!1,this.roleCodes=new c.yv,this.formTouched=!0}ngOnInit(){this.currentUser=localStorage.getItem("userFromLogin"),this.buildForm("");let t=localStorage.getItem("securityPolicyData");this.fetchSecurityPolicyService(JSON.parse(t)),this.roleService.screenLabelList.subscribe(t=>this.roleCodes=t),console.log(this.roleCodes)}invalidLogin(t,e){this.submitSecurity=!1,"pgt"==e&&this.securityForm.value.passwordGenerationType!=this.securityData.passwordGenerationType&&(this.submitSecurity=!0),("invalid"==e&&this.securityForm.value.maxInvLogins!=this.securityData.maxInvLogins||"length"==e&&this.securityForm.value.maxPswdLength!=this.securityData.maxPswdLength||"minlength"==e&&this.securityForm.value.minPswdLength!=this.securityData.minPswdLength||"expiry"==e&&this.securityForm.value.pswdExpiry!=this.securityData.pswdExpiry||"notification"==e&&this.securityForm.value.notifyPasswordExpiryInDays!=this.securityData.notifyPasswordExpiryInDays||"reuse"==e&&this.securityForm.value.pswdReuseAft!=this.securityData.pswdReuseAft||"uppercaseCheck"===e||"lowercaseCheck"===e||"numberCheck"===e||"charactersCheck"===e)&&(this.submitSecurity=!0)}buildForm(t){console.log(t),this.securityForm=this.formBuilder.group({activeEdit:[t?t.activeEdit:""],authStatus:[t?t.authStatus:""],authorizedBy:[t?t.authorizedBy:""],authorizedTime:[t?t.authorizedTime:""],maxInvLogins:[t?t.maxInvLogins:"",q.kI.required],maxPswdLength:[t?t.maxPswdLength:"",q.kI.required],minPswdLength:[t?t.minPswdLength:"",q.kI.required],modifiedBy:[t?t.modifiedBy:""],modifiedTime:[t?t.modifiedTime:""],loggedInUser:[""],notifyPasswordExpiryInDays:[t?t.notifyPasswordExpiryInDays:"",q.kI.required],firstTimeAuth:[t?t.firstTimeAuth:""],pswdComplexLcase:[t?t.pswdComplexLcase:""],pswdComplexNum:[t?t.pswdComplexNum:""],pswdComplexSplc:[t?t.pswdComplexSplc:""],pswdComplexUcase:[t?t.pswdComplexUcase:""],pswdExpiry:[t?t.pswdExpiry:"",q.kI.required],pswdReuseAft:[t?t.pswdReuseAft:"",q.kI.required],version:[t?t.version:""],passwordGenerationType:[t?t.passwordGenerationType:"Manual"]}),console.log(this.securityForm.value),this.activeEditOnInit()}assignCheckValue(t){"true"===t.pswdComplexLcase&&(t.pswdComplexLcase=!0),"false"===t.pswdComplexLcase&&(t.pswdComplexLcase=!1),"true"===t.pswdComplexNum&&(t.pswdComplexNum=!0),"false"===t.pswdComplexNum&&(t.pswdComplexNum=!1),"true"===t.pswdComplexSplc&&(t.pswdComplexSplc=!0),"false"===t.pswdComplexSplc&&(t.pswdComplexSplc=!1),"true"===t.pswdComplexUcase&&(t.pswdComplexUcase=!0),"false"===t.pswdComplexUcase&&(t.pswdComplexUcase=!1),this.buildForm(t)}submit(){this.securityForm.value.modifiedBy=localStorage.getItem("userFromLogin"),this.securityForm.value.loggedInUser=localStorage.getItem("userFromLogin"),console.log(this.securityForm.value),this.securityForm.value.minPswdLength>this.securityForm.value.maxPswdLength?l().fire({text:"Min Password Length should not be greater than Max Password Length"}):this.securityForm.value.pswdExpiry<this.securityForm.value.notifyPasswordExpiryInDays?l().fire({text:"Notification on password expiry days can not be greater than password expiry days"}):this.securityForm.value.minPswdLength<4||this.securityForm.value.maxPswdLength<4?l().fire({text:"Min Password length and Max Password length should not be less than 4"}):this.secuityService.saveDataSecurity(this.securityForm.value).subscribe(t=>{this.securityData=t,(this.edit=!1)?t?(this.securityForm.patchValue({version:t.version}),l().fire({text:"Record is Created"}),this.auditlog(),this.formTouched=!this.securityForm.touched):l().fire({text:"Saving Failed"}):t?(this.securityForm.patchValue({version:t.version}),l().fire({text:"Record is Updated"}),this.auditlog(),this.formTouched=!this.securityForm.touched):l().fire({text:"Update Failed"})})}fetchSecurityPolicyService(t){t&&(this.securityData=t,console.log(this.securityData),this.assignCheckValue(this.securityData),"O"==this.securityData.recordStatus||"Open"==this.securityData.recordStatus?this.securityData.recordStatus="OPEN":("C"==this.securityData.recordStatus||"Close"==this.securityData.recordStatus)&&(this.securityData.recordStatus="CLOSE"),"A"==this.securityData.authStatus||"Authorized"==this.securityData.authStatus?this.securityData.authStatus="AUTHORIZED":("U"==this.securityData.authStatus||"Unauthorized"==this.securityData.authStatus)&&(this.securityData.authStatus="UNAUTHORIZED"),"Y"==this.securityData.firstTimeAuth?this.securityData.firstTimeAuth="YES":"N"==this.securityData.firstTimeAuth&&(this.securityData.firstTimeAuth="NO"))}pageDeactivation(){if(console.log("pageDeactivation in user was called"),this.securityForm.touched&&1==this.formTouched){const t=confirm("There are unsaved changes in the screen.Would you like to navigate to other screen?");return console.log("result: ",t),(0,S.of)(t)}return(0,S.of)(!0)}reset(){this.securityForm.reset()}editValues(){this.edit=!0}activeEditOnInit(){this.securityForm.value.activeEdit&&this.editValues()}auth(){l().fire({text:"You are trying to Authorize record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(t=>{if(console.log("this is reopen ",t),!0===t.isConfirmed){if(this.securityData.createdBy===localStorage.getItem("userFromLogin"))return void l().fire({text:"Maker Cannot Authorize Record!",icon:"error"});console.log("this is authorzation"),this.securityForm.value.loggedInUser=this.currentUser,this.secuityService.authSecurity("authorize",this.securityForm.value).subscribe(t=>{console.log(t),this.securityData=t,this.auditlog(),t&&l().fire({text:"Record is Authorized",icon:"success"})},t=>{l().fire({text:t.error.message,icon:"error"})})}})}close(){l().fire({text:"You are trying to Close record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(t=>{console.log("this is reopen ",t),!0===t.isConfirmed&&(console.log("this is close"),this.secuityService.authSecurity("close",this.securityForm.value).subscribe(t=>{console.log(t),this.securityData=t,this.auditlog(),this.securityData&&l().fire({text:"Record is Closed"})},t=>{l().fire(t.error.message)}))})}reopen(){l().fire({text:"You are trying to Reopen record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(t=>{console.log("this is reopen ",t),!0===t.isConfirmed&&this.secuityService.authSecurity("reopen",this.securityForm.value).subscribe(t=>{console.log(t),this.securityData=t,this.auditlog(),"O"==this.securityData.recordStatus?(this.auditlog(),l().fire({text:"Record is Reopened"})):l().fire({text:"Record cannot be opened "})},t=>{l().fire(t.error.message)})})}auditlog(){"O"==this.securityData.recordStatus?this.securityData.recordStatus="OPEN":"C"==this.securityData.recordStatus&&(this.securityData.recordStatus="CLOSE"),"A"==this.securityData.authStatus||"Authorized"==this.securityData.authStatus?this.securityData.authStatus="AUTHORIZED":("U"==this.securityData.authStatus||"Unauthorized"==this.securityData.authStatus)&&(this.securityData.authStatus="UNAUTHORIZED"),"Y"==this.securityData.firstTimeAuth?this.securityData.firstTimeAuth="YES":"N"==this.securityData.firstTimeAuth&&(this.securityData.firstTimeAuth="NO")}exit(){localStorage.removeItem("securityPolicyData")}canExit(){let t=!1;return this.securityForm.touched&&1==this.formTouched?l().fire({text:"There are unsaved changes in the screen. Would you like to navigate to other screen?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(e=>!0===e.isConfirmed?(t=!0,this.cdr.markForCheck(),t):(t=!1,this.cdr.markForCheck(),t)):(t=!0,new Promise((e,i)=>{!0===t&&(t=!0,this.cdr.markForCheck(),e(!0))}))}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(w.k),h.Y36(q.qu),h.Y36(p.N),h.Y36(h.sBO),h.Y36(g.W))},t.\u0275cmp=h.Xpm({type:t,selectors:[["npr-security-policy"]],decls:87,vars:11,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],["action","",1,"formStyle",3,"formGroup"],[1,"dbCardStyle"],[3,"disabled"],[1,"row","gy-4"],[1,"col-lg-4"],["for","securityLogins",1,"formLbl"],[1,"colorRed"],["formControlName","passwordGenerationType","aria-label","Default select example",1,"form-select",3,"ngModelChange"],["hidden","","value","","disabled","","selected",""],["value","Manual"],["value","Auto"],["id","securityLogins","type","text","formControlName","maxInvLogins","placeholder","Maximum Invalid Logins","value","",1,"form-control",3,"ngModelChange"],["for","maxPassword",1,"formLbl"],["id","maxPassword","type","number","formControlName","maxPswdLength","placeholder","Maximum Password Length","value","",1,"form-control",3,"ngModelChange"],["for","minPassword",1,"formLbl"],["id","minPassword","type","number","formControlName","minPswdLength","placeholder","Minimum Password Length","value","",1,"form-control",3,"ngModelChange"],["for","passExpiry",1,"formLbl"],["id","passExpiry","type","number","formControlName","pswdExpiry","placeholder","Password Expiry (In days)","value","",1,"form-control",3,"ngModelChange"],["for","expiryReminder",1,"formLbl"],["id","expiryReminder","type","number","formControlName","notifyPasswordExpiryInDays","placeholder","Password Expiry Reminder (In days)","value","",1,"form-control",3,"ngModelChange"],["for","reuseLimit",1,"formLbl"],["id","reuseLimit","type","number","formControlName","pswdReuseAft","placeholder","Password Reuse Limit","value","",1,"form-control",3,"ngModelChange"],[1,"col-12"],["for","",1,"formLbl"],[1,"checkListCol"],[1,"checkStyle"],["type","checkbox","formControlName","pswdComplexUcase","id","uppercaseCheck",3,"ngModelChange"],["for","uppercaseCheck"],["type","checkbox","formControlName","pswdComplexLcase","id","lowercaseCheck",3,"ngModelChange"],["for","lowercaseCheck"],["type","checkbox","formControlName","pswdComplexNum","id","numberCheck",3,"ngModelChange"],["for","numberCheck"],["type","checkbox","formControlName","pswdComplexSplc","id","charactersCheck",3,"ngModelChange"],["for","charactersCheck"],[1,"row","g-3","pb-3","justify-content-end","pt-3"],["class","col-auto",4,"ngIf"],[1,"col-auto"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink","click"],["class","dbCardStyle",4,"ngIf"],["href","javascript:void(0)",1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"disabled","click"],[1,"btn","smBtn","minWdSmBtn","btnUpdate",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnAuth",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnPrimary"],[1,"row"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"csCardStyle"],[1,"row","g-2","align-items-center"],[1,"csCardStyleIcon","csCardStyleIconBg1"],[1,"fa","fa-edit","faClass"],[1,"col"],[1,"csCardStyleText"],[1,"csCardStyleIcon","csCardStyleIconBg2"],["src","assets/images/time-stamp-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg3"],["aria-hidden","true",1,"fa","fa-files-o","faRecordStatus"],[1,"csCardStyleIcon","csCardStyleIconBg4"],[1,"fa","fa-check-square-o","faClassChecker"],[1,"csCardStyleIcon","csCardStyleIconBg5"],["src","assets/images/checker-time-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg6"],[1,"fa","fa-shield","faClassFirstTimeAuth"],[1,"csCardStyleIcon","csCardStyleIconBg7"],["src","assets/images/authorize.svg","alt","...",1,"modImage"],["src","assets/images/modification.svg","alt","...",1,"modImage"]],template:function(t,e){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"h2",2),h._uU(3,"Security Policy"),h.qZA(),h.qZA(),h.TgZ(4,"form",3),h.TgZ(5,"div",4),h.TgZ(6,"fieldset",5),h.TgZ(7,"div",6),h.TgZ(8,"div",7),h.TgZ(9,"label",8),h._uU(10,"Password Generation Type"),h.TgZ(11,"span",9),h._uU(12,"*"),h.qZA(),h.qZA(),h.TgZ(13,"select",10),h.NdJ("ngModelChange",function(t){return e.invalidLogin(t,"pgt")}),h.TgZ(14,"option",11),h._uU(15,"--Please select--"),h.qZA(),h.TgZ(16,"option",12),h._uU(17,"Manual"),h.qZA(),h.TgZ(18,"option",13),h._uU(19,"Auto"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(20,"div",7),h.TgZ(21,"label",8),h._uU(22,"Maximum Invalid Logins "),h.TgZ(23,"span",9),h._uU(24,"*"),h.qZA(),h.qZA(),h.TgZ(25,"input",14),h.NdJ("ngModelChange",function(t){return e.invalidLogin(t,"invalid")}),h.qZA(),h.qZA(),h.TgZ(26,"div",7),h.TgZ(27,"label",15),h._uU(28,"Maximum Password Length "),h.TgZ(29,"span",9),h._uU(30,"*"),h.qZA(),h.qZA(),h.TgZ(31,"input",16),h.NdJ("ngModelChange",function(t){return e.invalidLogin(t,"length")}),h.qZA(),h.qZA(),h.TgZ(32,"div",7),h.TgZ(33,"label",17),h._uU(34,"Minimum Password Length "),h.TgZ(35,"span",9),h._uU(36,"*"),h.qZA(),h.qZA(),h.TgZ(37,"input",18),h.NdJ("ngModelChange",function(t){return e.invalidLogin(t,"minlength")}),h.qZA(),h.qZA(),h.TgZ(38,"div",7),h.TgZ(39,"label",19),h._uU(40,"Password Expiry (In days) "),h.TgZ(41,"span",9),h._uU(42,"*"),h.qZA(),h.qZA(),h.TgZ(43,"input",20),h.NdJ("ngModelChange",function(t){return e.invalidLogin(t,"expiry")}),h.qZA(),h.qZA(),h.TgZ(44,"div",7),h.TgZ(45,"label",21),h._uU(46,"Password Expiry Reminder (In days) "),h.TgZ(47,"span",9),h._uU(48,"*"),h.qZA(),h.qZA(),h.TgZ(49,"input",22),h.NdJ("ngModelChange",function(t){return e.invalidLogin(t,"notification")}),h.qZA(),h.qZA(),h.TgZ(50,"div",7),h.TgZ(51,"label",23),h._uU(52,"Password Reuse Limit "),h.TgZ(53,"span",9),h._uU(54,"*"),h.qZA(),h.qZA(),h.TgZ(55,"input",24),h.NdJ("ngModelChange",function(t){return e.invalidLogin(t,"reuse")}),h.qZA(),h.qZA(),h.TgZ(56,"div",25),h.TgZ(57,"label",26),h._uU(58,"Password Complexity"),h.qZA(),h.TgZ(59,"div",27),h.TgZ(60,"div",28),h.TgZ(61,"input",29),h.NdJ("ngModelChange",function(t){return e.invalidLogin(t,"uppercaseCheck")}),h.qZA(),h.TgZ(62,"label",30),h._uU(63,"Require atleast one Uppercase (A-Z)"),h.qZA(),h.qZA(),h.TgZ(64,"div",28),h.TgZ(65,"input",31),h.NdJ("ngModelChange",function(t){return e.invalidLogin(t,"lowercaseCheck")}),h.qZA(),h.TgZ(66,"label",32),h._uU(67,"Require atleast one Lowercase (a-z)"),h.qZA(),h.qZA(),h.TgZ(68,"div",28),h.TgZ(69,"input",33),h.NdJ("ngModelChange",function(t){return e.invalidLogin(t,"numberCheck")}),h.qZA(),h.TgZ(70,"label",34),h._uU(71,"Require atleast one Number (0-9)"),h.qZA(),h.qZA(),h.TgZ(72,"div",28),h.TgZ(73,"input",35),h.NdJ("ngModelChange",function(t){return e.invalidLogin(t,"charactersCheck")}),h.qZA(),h.TgZ(74,"label",36),h._uU(75,"Require atleast one Special Characters (@#$%!?.)"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(76,"div",37),h.YNc(77,b,3,1,"div",38),h.YNc(78,D,3,0,"div",38),h.YNc(79,U,3,0,"div",38),h.YNc(80,L,3,0,"div",38),h.YNc(81,N,3,0,"div",38),h.YNc(82,B,3,0,"div",38),h.TgZ(83,"div",39),h.TgZ(84,"button",40),h.NdJ("click",function(){return e.exit()}),h._uU(85,"Exit"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.YNc(86,I,100,14,"div",41),h.qZA(),h.qZA()),2&t&&(h.xp6(4),h.Q6J("formGroup",e.securityForm),h.xp6(2),h.Q6J("disabled",!e.edit),h.xp6(71),h.Q6J("ngIf",e.edit),h.xp6(1),h.Q6J("ngIf",!("C"==e.securityData.recordStatus||"CLOSED"==e.securityData.recordStatus||e.edit)),h.xp6(1),h.Q6J("ngIf",("U"==e.securityData.authStatus||"UNAUTHORIZED"==e.securityData.authStatus||"N"==e.securityData.authStatus||"N"==e.securityData.authStatus)&&!e.edit),h.xp6(1),h.Q6J("ngIf",("O"==e.securityData.recordStatus||"OPEN"==e.securityData.recordStatus)&&"NO"!=e.securityData.firstTimeAuth&&"N"!=e.securityData.firstTimeAuth&&!e.edit),h.xp6(1),h.Q6J("ngIf",("C"==e.securityData.recordStatus||"CLOSED"==e.securityData.recordStatus)&&"NO"!=e.securityData.firstTimeAuth&&"N"!=e.securityData.firstTimeAuth&&!e.edit),h.xp6(1),h.Q6J("ngIf","NO"==e.securityData.firstTimeAuth&&!e.edit),h.xp6(2),h.Q6J("routerLink",h.DdM(10,k)),h.xp6(2),h.Q6J("ngIf",e.securityData))},directives:[q._Y,q.JL,q.sg,q.EJ,q.JJ,q.u,q.YN,q.Kr,q.Fj,q.wV,q.Wl,r.O5,s.rH],pipes:[r.uU],styles:[""]}),t})(),canDeactivate:[o.I]},{path:"summary",component:C}];let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[s.Bz.forChild(O)],s.Bz]}),t})(),E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[r.ez,P,u.T,q.UX]]}),t})()}}]);