!function(){"use strict";function e(e,i){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(e,i)}(e))||i&&e&&"number"==typeof e.length){o&&(e=o);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==o.return||o.return()}finally{if(s)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[777],{31443:function(e,t,o){o.d(t,{k:function(){return s}});var r,a=o(37716),l=o(80463),s=((r=function(){function e(t){i(this,e),this.iziToast=t}return n(e,[{key:"successMessage",value:function(e,t){this.iziToast.success({title:e,message:t,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}},{key:"errorMessage",value:function(e,t){this.iziToast.error({title:e,message:t,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}},{key:"infoMessage",value:function(e,t){this.iziToast.info({title:e,message:t,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}}]),e}()).\u0275fac=function(e){return new(e||r)(a.LFG(l.I))},r.\u0275prov=a.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r)},71777:function(t,o,r){r.r(o),r.d(o,{RuleModule:function(){return St}});var a=r(38583),l=r(24376),s=r(39895),u=r(50215),d=r(3679),c=r(91704),g=r(88259),f=r.n(g),p=r(79765),m=r(37716),v=r(50511),Z=r(31443);function h(e,t){1&e&&(m.TgZ(0,"span",57),m._uU(1,"Invalid RuleId"),m.qZA())}function y(e,t){1&e&&(m.TgZ(0,"div"),m.TgZ(1,"select",58),m.TgZ(2,"option",59),m._uU(3,"--Please select--"),m.qZA(),m.TgZ(4,"option",60),m._uU(5,"All"),m.qZA(),m.TgZ(6,"option",61),m._uU(7,"Incoming"),m.qZA(),m.TgZ(8,"option",62),m._uU(9,"OutGoing"),m.qZA(),m.qZA(),m.qZA())}function T(e,t){1&e&&(m.TgZ(0,"div"),m._UZ(1,"input",63),m.qZA())}function C(e,t){if(1&e&&(m.TgZ(0,"option",66),m._uU(1),m.qZA()),2&e){var i=t.$implicit;m.Q6J("value",i.headerValue),m.xp6(1),m.hij(" ",i.headerValue," ")}}function S(e,t){if(1&e&&(m.TgZ(0,"div"),m.TgZ(1,"select",64),m.TgZ(2,"option",59),m._uU(3,"--Please select--"),m.qZA(),m.YNc(4,C,2,2,"option",65),m.qZA(),m.qZA()),2&e){var i=m.oxw(2);m.xp6(4),m.Q6J("ngForOf",i.translationDataOperation)}}function A(e,t){1&e&&(m.TgZ(0,"div"),m._UZ(1,"input",67),m.qZA())}function q(e,t){if(1&e&&(m.TgZ(0,"option",66),m._uU(1),m.qZA()),2&e){var i=t.$implicit;m.Q6J("value",i.headerValue),m.xp6(1),m.hij(" ",i.headerValue," ")}}function x(e,t){if(1&e&&(m.TgZ(0,"div"),m.TgZ(1,"select",68),m.TgZ(2,"option",59),m._uU(3,"--Please select--"),m.qZA(),m.YNc(4,q,2,2,"option",65),m.qZA(),m.qZA()),2&e){var i=m.oxw(2);m.xp6(4),m.Q6J("ngForOf",i.translationDataService)}}function I(e,t){1&e&&(m.TgZ(0,"div"),m._UZ(1,"input",69),m.qZA())}function b(e,t){1&e&&(m.TgZ(0,"div"),m.TgZ(1,"select",70),m.TgZ(2,"option",59),m._uU(3,"--Please select--"),m.qZA(),m.TgZ(4,"option",61),m._uU(5,"Incoming"),m.qZA(),m.TgZ(6,"option",62),m._uU(7,"OutGoing"),m.qZA(),m.TgZ(8,"option",60),m._uU(9,"All"),m.qZA(),m.qZA(),m.qZA())}function D(e,t){1&e&&(m.TgZ(0,"div"),m._UZ(1,"input",71),m.qZA())}function N(e,t){if(1&e&&(m.TgZ(0,"option",66),m._uU(1),m.qZA()),2&e){var i=t.$implicit;m.Q6J("value",i.headerValue),m.xp6(1),m.hij(" ",i.headerValue," ")}}function U(e,t){if(1&e&&(m.TgZ(0,"div"),m.TgZ(1,"select",64),m.TgZ(2,"option",59),m._uU(3,"--Please select--"),m.qZA(),m.YNc(4,N,2,2,"option",65),m.qZA(),m.qZA()),2&e){var i=m.oxw(2);m.xp6(4),m.Q6J("ngForOf",i.translationDestDataOperation)}}function O(e,t){1&e&&(m.TgZ(0,"div"),m._UZ(1,"input",67),m.qZA())}function E(e,t){if(1&e&&(m.TgZ(0,"option",66),m._uU(1),m.qZA()),2&e){var i=t.$implicit;m.Q6J("value",i.headerValue),m.xp6(1),m.hij(" ",i.headerValue," ")}}function R(e,t){if(1&e&&(m.TgZ(0,"div"),m.TgZ(1,"select",68),m.TgZ(2,"option",59),m._uU(3,"--Please select--"),m.qZA(),m.YNc(4,E,2,2,"option",65),m.qZA(),m.qZA()),2&e){var i=m.oxw(2);m.xp6(4),m.Q6J("ngForOf",i.translationDestDataService)}}function k(e,t){1&e&&(m.TgZ(0,"div"),m._UZ(1,"input",69),m.qZA())}function _(e,t){1&e&&(m.TgZ(0,"div"),m.TgZ(1,"select",78),m.TgZ(2,"option",59),m._uU(3,"--Please select--"),m.qZA(),m.TgZ(4,"option",61),m._uU(5,"Incoming"),m.qZA(),m.TgZ(6,"option",62),m._uU(7,"OutGoing"),m.qZA(),m.TgZ(8,"option",60),m._uU(9,"All"),m.qZA(),m.qZA(),m.qZA())}function F(e,t){1&e&&(m.TgZ(0,"div"),m._UZ(1,"input",79),m.qZA())}function V(e,t){if(1&e&&(m.TgZ(0,"option",66),m._uU(1),m.qZA()),2&e){var i=t.$implicit;m.Q6J("value",i.headerValue),m.xp6(1),m.hij(" ",i.headerValue," ")}}function w(e,t){if(1&e&&(m.TgZ(0,"div"),m.TgZ(1,"select",80),m.TgZ(2,"option",59),m._uU(3,"--Please select--"),m.qZA(),m.YNc(4,V,2,2,"option",65),m.qZA(),m.qZA()),2&e){var i=m.oxw(3);m.xp6(4),m.Q6J("ngForOf",i.translationValDataOperation)}}function J(e,t){1&e&&(m.TgZ(0,"div"),m._UZ(1,"input",81),m.qZA())}function B(e,t){if(1&e&&(m.TgZ(0,"option",66),m._uU(1),m.qZA()),2&e){var i=t.$implicit;m.Q6J("value",i.headerValue),m.xp6(1),m.hij(" ",i.headerValue," ")}}function M(e,t){if(1&e&&(m.TgZ(0,"div"),m.TgZ(1,"select",82),m.TgZ(2,"option",59),m._uU(3,"--Please select--"),m.qZA(),m.YNc(4,B,2,2,"option",65),m.qZA(),m.qZA()),2&e){var i=m.oxw(3);m.xp6(4),m.Q6J("ngForOf",i.translationValDataService)}}function Q(e,t){1&e&&(m.TgZ(0,"div"),m._UZ(1,"input",83),m.qZA())}function Y(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"a",84),m.NdJ("click",function(){m.CHM(i);var e=m.oxw().index;return m.oxw(2).deleteVFGroup(e)}),m._UZ(1,"img",85),m.qZA()}}function P(e,t){if(1&e){var i=m.EpF();m.ynx(0),m.ynx(1,72),m.TgZ(2,"div",73),m.TgZ(3,"div",74),m.TgZ(4,"label",32),m._uU(5,"System"),m.TgZ(6,"span",33),m._uU(7,"*"),m.qZA(),m.qZA(),m.TgZ(8,"ng-select",75),m.NdJ("change",function(e){var t=m.CHM(i).index;return m.oxw(2).onValidtion(e,t)}),m.qZA(),m.qZA(),m.TgZ(9,"div",74),m.TgZ(10,"label",32),m._uU(11,"Message Type"),m.TgZ(12,"span",33),m._uU(13,"*"),m.qZA(),m.qZA(),m.YNc(14,_,10,0,"div",5),m.YNc(15,F,2,0,"div",5),m.qZA(),m.TgZ(16,"div",40),m.TgZ(17,"label",44),m._uU(18,"Operation"),m.qZA(),m.YNc(19,w,5,1,"div",5),m.YNc(20,J,2,0,"div",5),m.qZA(),m.TgZ(21,"div",40),m.TgZ(22,"label",44),m._uU(23,"Service"),m.qZA(),m.YNc(24,M,5,1,"div",5),m.YNc(25,Q,2,0,"div",5),m.qZA(),m.TgZ(26,"div",76),m.YNc(27,Y,2,0,"a",77),m.qZA(),m.qZA(),m.BQk(),m.BQk()}if(2&e){var o=t.index,n=m.oxw(2);m.xp6(1),m.Q6J("formGroupName",o),m.xp6(7),m.Q6J("items",n.externalCreateSystemFiltered),m.xp6(6),m.Q6J("ngIf",n.validationMsg),m.xp6(1),m.Q6J("ngIf",!n.validationMsg),m.xp6(4),m.Q6J("ngIf",!n.multipleOperation),m.xp6(1),m.Q6J("ngIf",n.multipleOperation),m.xp6(4),m.Q6J("ngIf",!n.multipleService),m.xp6(1),m.Q6J("ngIf",n.multipleService),m.xp6(2),m.Q6J("ngIf",n.submit)}}function H(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"a",86),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).addValidationGroup()}),m.TgZ(1,"span"),m._UZ(2,"img",87),m.qZA(),m.qZA()}}function L(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",11),m.TgZ(1,"button",88),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).editValues()}),m._uU(2,"Edit"),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.xp6(1),m.Q6J("hidden",o.hideSubmit||o.submit)}}function K(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",89),m.TgZ(1,"button",90),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).auditChangeRuleTranslation("auth")}),m._uU(2,"Auth"),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.Q6J("hidden",o.hideSubmit)}}function G(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",89),m.TgZ(1,"button",91),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).auditChangeRuleTranslation("close")}),m._uU(2,"Close"),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.Q6J("hidden",o.hideSubmit)}}function z(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",89),m.TgZ(1,"button",91),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).auditChangeRuleTranslation("open")}),m._uU(2,"Reopen"),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.Q6J("hidden",o.hideSubmit)}}function j(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",89),m.TgZ(1,"button",91),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).deleteRule()}),m._uU(2,"Delete"),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.Q6J("hidden",o.hideSubmit)}}var $=function(){return["/createrule/list"]};function W(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",6),m.TgZ(1,"fieldset",29),m.TgZ(2,"div",30),m.TgZ(3,"div",31),m.TgZ(4,"label",32),m._uU(5,"Rule ID"),m.TgZ(6,"span",33),m._uU(7,"*"),m.qZA(),m.qZA(),m.TgZ(8,"input",34),m.NdJ("keyup",function(){m.CHM(i);var e=m.oxw();return e.ruleIdInvalidOrNot(e.ruleForm.get("ruleId").value)}),m.qZA(),m.YNc(9,h,2,0,"span",35),m.qZA(),m.TgZ(10,"div",31),m.TgZ(11,"label",32),m._uU(12,"Rule Name"),m.TgZ(13,"span",33),m._uU(14,"*"),m.qZA(),m.qZA(),m._UZ(15,"input",36),m.qZA(),m.TgZ(16,"div",37),m.TgZ(17,"div",38),m.TgZ(18,"div",39),m.TgZ(19,"h2",2),m._uU(20,"Source System"),m.qZA(),m.qZA(),m.TgZ(21,"div",30),m.TgZ(22,"div",40),m.TgZ(23,"label",41),m._uU(24,"System"),m.TgZ(25,"span",33),m._uU(26,"*"),m.qZA(),m.qZA(),m.TgZ(27,"ng-select",42),m.NdJ("change",function(e){return m.CHM(i),m.oxw().onSlectionExternalSystem(e)}),m.qZA(),m.qZA(),m.TgZ(28,"div",40),m.TgZ(29,"label",43),m._uU(30,"Message Type"),m.TgZ(31,"span",33),m._uU(32,"*"),m.qZA(),m.qZA(),m.YNc(33,y,10,0,"div",5),m.YNc(34,T,2,0,"div",5),m.qZA(),m.TgZ(35,"div",40),m.TgZ(36,"label",44),m._uU(37,"Operation"),m.qZA(),m.YNc(38,S,5,1,"div",5),m.YNc(39,A,2,0,"div",5),m.qZA(),m.TgZ(40,"div",40),m.TgZ(41,"label",44),m._uU(42,"Service"),m.qZA(),m.YNc(43,x,5,1,"div",5),m.YNc(44,I,2,0,"div",5),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(45,"div",45),m.TgZ(46,"div",38),m.TgZ(47,"div",39),m.TgZ(48,"h2",2),m._uU(49,"Destination System"),m.qZA(),m.qZA(),m.TgZ(50,"div",30),m.TgZ(51,"div",40),m.TgZ(52,"label",46),m._uU(53,"System"),m.TgZ(54,"span",33),m._uU(55,"*"),m.qZA(),m.qZA(),m.TgZ(56,"ng-select",47),m.NdJ("change",function(e){return m.CHM(i),m.oxw().destinaltionSelection(e)}),m.qZA(),m.qZA(),m.TgZ(57,"div",40),m.TgZ(58,"label",32),m._uU(59,"Message Type"),m.TgZ(60,"span",33),m._uU(61,"*"),m.qZA(),m.qZA(),m.YNc(62,b,10,0,"div",5),m.YNc(63,D,2,0,"div",5),m.qZA(),m.TgZ(64,"div",40),m.TgZ(65,"label",44),m._uU(66,"Operation"),m.qZA(),m.YNc(67,U,5,1,"div",5),m.YNc(68,O,2,0,"div",5),m.qZA(),m.TgZ(69,"div",40),m.TgZ(70,"label",44),m._uU(71,"Service"),m.qZA(),m.YNc(72,R,5,1,"div",5),m.YNc(73,k,2,0,"div",5),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(74,"div",48),m.TgZ(75,"div",49),m.TgZ(76,"div",39),m.TgZ(77,"h2",2),m._uU(78,"Validation System"),m.qZA(),m.qZA(),m.YNc(79,P,28,9,"ng-container",50),m.qZA(),m.qZA(),m.TgZ(80,"div",48),m.YNc(81,H,3,0,"a",51),m.qZA(),m.qZA(),m.qZA(),m.TgZ(82,"div",48),m.TgZ(83,"div",52),m.TgZ(84,"div",52),m.YNc(85,L,3,1,"div",53),m.TgZ(86,"div",11),m.TgZ(87,"button",54),m.NdJ("click",function(){return m.CHM(i),m.oxw().onSubmit()}),m._uU(88,"Save"),m.qZA(),m.qZA(),m.YNc(89,K,3,1,"div",55),m.YNc(90,G,3,1,"div",55),m.YNc(91,z,3,1,"div",55),m.YNc(92,j,3,1,"div",55),m.TgZ(93,"div",11),m.TgZ(94,"button",56),m._uU(95,"Exit"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&e){var o=m.oxw();m.xp6(1),m.Q6J("disabled",!o.editFlag),m.xp6(7),m.Q6J("readonly",!o.submit),m.xp6(1),m.Q6J("ngIf",o.ruleIdInvalid),m.xp6(6),m.Q6J("readonly",!o.submit),m.xp6(12),m.Q6J("items",o.externalCreateSystemFiltered),m.xp6(6),m.Q6J("ngIf",o.sourceMsg),m.xp6(1),m.Q6J("ngIf",!o.sourceMsg),m.xp6(4),m.Q6J("ngIf",!o.multipleOperation),m.xp6(1),m.Q6J("ngIf",o.multipleOperation),m.xp6(4),m.Q6J("ngIf",!o.multipleService),m.xp6(1),m.Q6J("ngIf",o.multipleService),m.xp6(12),m.Q6J("items",o.externalCreateSystemFiltered),m.xp6(6),m.Q6J("ngIf",o.destinationMsg),m.xp6(1),m.Q6J("ngIf",!o.destinationMsg),m.xp6(4),m.Q6J("ngIf",!o.multipleOperation),m.xp6(1),m.Q6J("ngIf",o.multipleOperation),m.xp6(4),m.Q6J("ngIf",!o.multipleService),m.xp6(1),m.Q6J("ngIf",o.multipleService),m.xp6(6),m.Q6J("ngForOf",o.validationSystems.controls),m.xp6(2),m.Q6J("ngIf",o.submit),m.xp6(4),m.Q6J("ngIf",!("C"==(null==o.ruleConfig?null:o.ruleConfig.recordStatus)||"CLOSED"==(null==o.ruleConfig?null:o.ruleConfig.recordStatus))),m.xp6(2),m.Q6J("hidden",!o.submit)("disabled",o.ruleForm.invalid||!o.ruleForm.dirty),m.xp6(2),m.Q6J("ngIf","U"==(null==o.ruleConfig?null:o.ruleConfig.approvedStatus)||"UNAUTHORIZED"==(null==o.ruleConfig?null:o.ruleConfig.approvedStatus)||"N"==(null==o.ruleConfig?null:o.ruleConfig.approvedStatus)||"N"==(null==o.ruleConfig?null:o.ruleConfig.approvedEver)),m.xp6(1),m.Q6J("ngIf",("O"==(null==o.ruleConfig?null:o.ruleConfig.recordStatus)||"OPEN"==(null==o.ruleConfig?null:o.ruleConfig.recordStatus))&&"NO"!=(null==o.ruleConfig?null:o.ruleConfig.approvedEver)&&"N"!=(null==o.ruleConfig?null:o.ruleConfig.approvedEver)),m.xp6(1),m.Q6J("ngIf",("C"==(null==o.ruleConfig?null:o.ruleConfig.recordStatus)||"CLOSED"==(null==o.ruleConfig?null:o.ruleConfig.recordStatus))&&"NO"!=(null==o.ruleConfig?null:o.ruleConfig.approvedEver)&&"N"!=(null==o.ruleConfig?null:o.ruleConfig.approvedEver)),m.xp6(1),m.Q6J("ngIf","NO"==(null==o.ruleConfig?null:o.ruleConfig.approvedEver)||"N"==(null==o.ruleConfig?null:o.ruleConfig.approvedEver)),m.xp6(2),m.Q6J("routerLink",m.DdM(28,$))}}function X(e,t){if(1&e&&(m.TgZ(0,"th"),m._uU(1),m.qZA()),2&e){var i=t.index;m.xp6(1),m.hij(" Validation System ",i+1," ")}}function ee(e,t){if(1&e&&(m.TgZ(0,"td",95),m.TgZ(1,"p",96),m._uU(2),m.qZA(),m.qZA()),2&e){var i=t.$implicit;m.xp6(2),m.Oqu(i.validationSystem)}}function te(e,t){1&e&&(m.ynx(0),m._uU(1," Field No. "),m.TgZ(2,"span",33),m._uU(3,"*"),m.qZA(),m.BQk())}function ie(e,t){1&e&&(m.ynx(0),m._uU(1," Tag "),m.TgZ(2,"span",33),m._uU(3,"*"),m.qZA(),m.BQk())}function oe(e,t){1&e&&(m.ynx(0),m._uU(1," Column Name "),m.TgZ(2,"span",33),m._uU(3,"*"),m.qZA(),m.BQk())}function ne(e,t){1&e&&(m.ynx(0),m._uU(1," Field No. "),m.TgZ(2,"span",33),m._uU(3,"*"),m.qZA(),m.BQk())}function re(e,t){1&e&&(m.ynx(0),m._uU(1," Tag "),m.TgZ(2,"span",33),m._uU(3,"*"),m.qZA(),m.BQk())}function ae(e,t){1&e&&(m.ynx(0),m._uU(1," Column Name "),m.TgZ(2,"span",33),m._uU(3,"*"),m.qZA(),m.BQk())}function le(e,t){if(1&e&&(m.TgZ(0,"th"),m.YNc(1,ne,4,0,"ng-container",5),m.YNc(2,re,4,0,"ng-container",5),m.YNc(3,ae,4,0,"ng-container",5),m.qZA()),2&e){var i=m.oxw(2);m.xp6(1),m.Q6J("ngIf","TCP/IP"==i.valDeatils),m.xp6(1),m.Q6J("ngIf","Https/Http"==i.valDeatils),m.xp6(1),m.Q6J("ngIf","DB Connection"==i.valDeatils)}}function se(e,t){if(1&e&&(m.TgZ(0,"option",109),m._uU(1),m.qZA()),2&e){var i=t.$implicit,o=m.oxw(4);m.Q6J("value",i.messagebasis)("disabled",!o.submit)("hidden",o.try(i.messagebasis)),m.xp6(1),m.AsE(" ",i.messageKey," ",i.messagebasis," ")}}function ue(e,t){if(1&e){var i=m.EpF();m.ynx(0),m.TgZ(1,"select",107),m.NdJ("change",function(e){m.CHM(i);var t=m.oxw().index;return m.oxw(2).onselectOfFieldNo(e,t)}),m.TgZ(2,"option",59),m._uU(3,"Please select Field No"),m.qZA(),m.YNc(4,se,2,5,"option",108),m.qZA(),m.BQk()}if(2&e){var o=m.oxw(3);m.xp6(4),m.Q6J("ngForOf",o.ruleMappDetails)}}function de(e,t){if(1&e&&(m.TgZ(0,"option",112),m._uU(1),m.qZA()),2&e){var i=t.$implicit,o=m.oxw(4);m.Q6J("value",i.messagebasis)("disabled",!o.submit)("hidden",o.try(i.messagebasis)),m.xp6(1),m.AsE(" ",i.messageKey," ",i.messagebasis," ")}}function ce(e,t){if(1&e){var i=m.EpF();m.ynx(0),m.TgZ(1,"select",110),m.NdJ("change",function(e){m.CHM(i);var t=m.oxw().index;return m.oxw(2).onselectOfFieldNo(e,t)}),m.TgZ(2,"option",59),m._uU(3,"Please select Tag"),m.qZA(),m.YNc(4,de,2,5,"option",111),m.qZA(),m.BQk()}if(2&e){var o=m.oxw(3);m.xp6(4),m.Q6J("ngForOf",o.ruleMappDetails)}}function ge(e,t){if(1&e&&(m.TgZ(0,"option",109),m._uU(1),m.qZA()),2&e){var i=t.$implicit,o=m.oxw(4);m.Q6J("value",i.messagebasis)("disabled",!o.submit)("hidden",o.try(i.messagebasis)),m.xp6(1),m.AsE(" ",i.messageKey," ",i.messagebasis," ")}}function fe(e,t){if(1&e){var i=m.EpF();m.ynx(0),m.TgZ(1,"select",107),m.NdJ("change",function(e){m.CHM(i);var t=m.oxw().index;return m.oxw(2).onselectOfFieldNo(e,t)}),m.TgZ(2,"option",59),m._uU(3,"Please select Column Name"),m.qZA(),m.YNc(4,ge,2,5,"option",108),m.qZA(),m.BQk()}if(2&e){var o=m.oxw(3);m.xp6(4),m.Q6J("ngForOf",o.ruleMappDetails)}}function pe(e,t){if(1&e&&(m.TgZ(0,"option",115),m._uU(1),m.qZA()),2&e){var i=t.$implicit,o=m.oxw(2).index,n=m.oxw(3);m.Q6J("value",i.messagebasis)("hidden",n.try2(i.messagebasis,o))("disabled",!n.submit),m.xp6(1),m.AsE(" ",i.messageKey," ",i.messagebasis," ")}}function me(e,t){if(1&e){var i=m.EpF();m.ynx(0),m.TgZ(1,"select",113),m.NdJ("change",function(e){m.CHM(i);var t=m.oxw().index,o=m.oxw().index;return m.oxw(2).onselectOfFieldNo2(e,o,t)}),m.TgZ(2,"option",59),m._uU(3,"Please select Field No"),m.qZA(),m.YNc(4,pe,2,5,"option",114),m.qZA(),m.BQk()}if(2&e){var o=m.oxw(4);m.xp6(4),m.Q6J("ngForOf",o.xmlRespData)}}function ve(e,t){if(1&e&&(m.TgZ(0,"option",119),m._uU(1),m.qZA()),2&e){var i=t.$implicit,o=m.oxw(2).index,n=m.oxw(3);m.Q6J("disabled",!n.submit)("value",i.messagebasis)("hidden",n.try2(i.messagebasis,o)),m.xp6(1),m.AsE(" ",i.messageKey," ",i.messagebasis," ")}}function Ze(e,t){if(1&e){var i=m.EpF();m.ynx(0),m.TgZ(1,"select",116,117),m.NdJ("change",function(e){m.CHM(i);var t=m.oxw().index,o=m.oxw().index;return m.oxw(2).onselectOfFieldNo2(e,o,t)})("ngModelChange",function(e){return m.CHM(i),m.oxw().$implicit.messageKey=e}),m.TgZ(3,"option",59),m._uU(4,"Please select Tag"),m.qZA(),m.YNc(5,ve,2,5,"option",118),m.qZA(),m.BQk()}if(2&e){var o=m.oxw(),n=o.index,r=o.$implicit,a=m.oxw(3);m.xp6(1),m.MGl("name","messageKey_",n,""),m.Q6J("ngModel",r.messageKey),m.xp6(4),m.Q6J("ngForOf",a.xmlRespData)}}function he(e,t){if(1&e&&(m.TgZ(0,"option",115),m._uU(1),m.qZA()),2&e){var i=t.$implicit,o=m.oxw(2).index,n=m.oxw(3);m.Q6J("value",i.messagebasis)("hidden",n.try2(i.messagebasis,o))("disabled",!n.submit),m.xp6(1),m.AsE(" ",i.messageKey," ",i.messagebasis," ")}}function ye(e,t){if(1&e){var i=m.EpF();m.ynx(0),m.TgZ(1,"select",113),m.NdJ("change",function(e){m.CHM(i);var t=m.oxw().index,o=m.oxw().index;return m.oxw(2).onselectOfFieldNo2(e,o,t)}),m.TgZ(2,"option",59),m._uU(3,"Please select Column Name"),m.qZA(),m.YNc(4,he,2,5,"option",114),m.qZA(),m.BQk()}if(2&e){var o=m.oxw(4);m.xp6(4),m.Q6J("ngForOf",o.xmlRespData)}}function Te(e,t){if(1&e&&(m.TgZ(0,"td"),m.YNc(1,me,5,1,"ng-container",5),m.YNc(2,Ze,6,3,"ng-container",5),m.YNc(3,ye,5,1,"ng-container",5),m.qZA()),2&e){var i=m.oxw(3);m.xp6(1),m.Q6J("ngIf","TCP/IP"==i.valDeatils),m.xp6(1),m.Q6J("ngIf","Https/Http"==i.valDeatils),m.xp6(1),m.Q6J("ngIf","DB Connection"==i.valDeatils)}}function Ce(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"a",120),m.NdJ("click",function(){m.CHM(i);var e=m.oxw().index;return m.oxw(2).removeSysRules(e)}),m._UZ(1,"img",85),m.qZA()}}function Se(e,t){if(1&e&&(m.TgZ(0,"tr"),m.ynx(1,101),m.TgZ(2,"td"),m.YNc(3,ue,5,1,"ng-container",5),m.YNc(4,ce,5,1,"ng-container",5),m.YNc(5,fe,5,1,"ng-container",5),m.qZA(),m.YNc(6,Te,4,3,"td",102),m.TgZ(7,"td"),m._UZ(8,"input",103),m.qZA(),m.TgZ(9,"td"),m._UZ(10,"input",104),m.qZA(),m.TgZ(11,"td",105),m.YNc(12,Ce,2,0,"a",106),m.qZA(),m.BQk(),m.qZA()),2&e){var i=t.$implicit,o=m.oxw(2);m.xp6(1),m.Q6J("formGroup",i),m.xp6(2),m.Q6J("ngIf","TCP/IP"==o.sourceDetails),m.xp6(1),m.Q6J("ngIf","Https/Http"==o.sourceDetails),m.xp6(1),m.Q6J("ngIf","DB Connection"==o.sourceDetails),m.xp6(1),m.Q6J("ngForOf",o.validationSystems.value)("ngForTrackBy",o.indexTracker),m.xp6(2),m.Q6J("readonly",!o.submit),m.xp6(2),m.Q6J("readonly",!o.submit),m.xp6(2),m.Q6J("ngIf",o.submit)}}function Ae(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"a",86),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).addSysRuleDetails()}),m.TgZ(1,"span"),m._UZ(2,"img",87),m.qZA(),m.qZA()}}function qe(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",11),m.TgZ(1,"button",88),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).editValues()}),m._uU(2,"Edit"),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.xp6(1),m.Q6J("hidden",o.hideSubmit||o.submit)}}function xe(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",89),m.TgZ(1,"button",90),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).auditChangeRuleTranslation("auth")}),m._uU(2,"Auth"),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.Q6J("hidden",o.hideSubmit)}}function Ie(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",89),m.TgZ(1,"button",91),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).auditChangeRuleTranslation("close")}),m._uU(2,"Close"),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.Q6J("hidden",o.hideSubmit)}}function be(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",89),m.TgZ(1,"button",91),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).auditChangeRuleTranslation("open")}),m._uU(2,"Reopen"),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.Q6J("hidden",o.hideSubmit)}}function De(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",89),m.TgZ(1,"button",91),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).deleteRule()}),m._uU(2,"Delete"),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.Q6J("hidden",o.hideSubmit)}}function Ne(e,t){if(1&e){var i=m.EpF();m.ynx(0),m.TgZ(1,"div",6),m.TgZ(2,"fieldset",29),m.TgZ(3,"table",92),m.TgZ(4,"thead"),m.TgZ(5,"tr",93),m.TgZ(6,"th"),m._uU(7,"Source System"),m.qZA(),m.YNc(8,X,2,1,"th",50),m.TgZ(9,"th",94),m._uU(10,"Validation Rule"),m.qZA(),m.qZA(),m.TgZ(11,"tr"),m.TgZ(12,"td",95),m.TgZ(13,"p",96),m._uU(14),m.TgZ(15,"span",33),m._uU(16,"*"),m.qZA(),m.qZA(),m.qZA(),m.YNc(17,ee,3,1,"td",97),m.qZA(),m.TgZ(18,"tr"),m.TgZ(19,"th"),m.YNc(20,te,4,0,"ng-container",5),m.YNc(21,ie,4,0,"ng-container",5),m.YNc(22,oe,4,0,"ng-container",5),m.qZA(),m.YNc(23,le,4,3,"th",50),m.TgZ(24,"th",94),m._uU(25,"validation method"),m.TgZ(26,"span",33),m._uU(27,"*"),m.qZA(),m.qZA(),m.TgZ(28,"th",94),m._uU(29,"validation details"),m.TgZ(30,"span",33),m._uU(31,"*"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(32,"tbody"),m.ynx(33,98),m.YNc(34,Se,13,9,"tr",50),m.BQk(),m.qZA(),m.qZA(),m.TgZ(35,"div",99),m.TgZ(36,"div",48),m.YNc(37,Ae,3,0,"a",51),m.qZA(),m.qZA(),m.qZA(),m.TgZ(38,"div",52),m.TgZ(39,"div",11),m.TgZ(40,"button",100),m.NdJ("click",function(){return m.CHM(i),m.oxw().Previous()}),m._uU(41,"Previous"),m.qZA(),m.qZA(),m.YNc(42,qe,3,1,"div",53),m.TgZ(43,"div",11),m.TgZ(44,"button",54),m.NdJ("click",function(){return m.CHM(i),m.oxw().onSubmit()}),m._uU(45,"Save"),m.qZA(),m.qZA(),m.YNc(46,xe,3,1,"div",55),m.YNc(47,Ie,3,1,"div",55),m.YNc(48,be,3,1,"div",55),m.YNc(49,De,3,1,"div",55),m.TgZ(50,"div",11),m.TgZ(51,"button",56),m._uU(52,"Exit"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.BQk()}if(2&e){var o=m.oxw();m.xp6(2),m.Q6J("disabled",!o.editFlag),m.xp6(6),m.Q6J("ngForOf",o.validationSystems.value),m.xp6(1),m.uIk("colspan",o.validationSystems.value.length+2),m.xp6(5),m.Oqu(o.sourceSystems.sourceSystem),m.xp6(3),m.Q6J("ngForOf",o.validationSystems.value)("ngForTrackBy",o.indexTracker),m.xp6(3),m.Q6J("ngIf","TCP/IP"==o.sourceDetails),m.xp6(1),m.Q6J("ngIf","Https/Http"==o.sourceDetails),m.xp6(1),m.Q6J("ngIf","DB Connection"==o.sourceDetails),m.xp6(1),m.Q6J("ngForOf",o.validationSystems.value),m.xp6(11),m.Q6J("ngForOf",o.sysRuleDetails.controls),m.xp6(3),m.Q6J("ngIf",o.submit),m.xp6(3),m.Q6J("hidden",!o.submit),m.xp6(2),m.Q6J("ngIf",!("C"==(null==o.ruleConfig?null:o.ruleConfig.recordStatus)||"CLOSED"==(null==o.ruleConfig?null:o.ruleConfig.recordStatus))),m.xp6(2),m.Q6J("hidden",!o.submit)("disabled",o.ruleForm.invalid||!o.ruleForm.dirty),m.xp6(2),m.Q6J("ngIf","U"==(null==o.ruleConfig?null:o.ruleConfig.approvedStatus)||"UNAUTHORIZED"==(null==o.ruleConfig?null:o.ruleConfig.approvedStatus)||"N"==(null==o.ruleConfig?null:o.ruleConfig.approvedStatus)||"N"==(null==o.ruleConfig?null:o.ruleConfig.approvedEver)),m.xp6(1),m.Q6J("ngIf",("O"==(null==o.ruleConfig?null:o.ruleConfig.recordStatus)||"OPEN"==(null==o.ruleConfig?null:o.ruleConfig.recordStatus))&&"NO"!=(null==o.ruleConfig?null:o.ruleConfig.approvedEver)&&"N"!=(null==o.ruleConfig?null:o.ruleConfig.approvedEver)),m.xp6(1),m.Q6J("ngIf",("C"==(null==o.ruleConfig?null:o.ruleConfig.recordStatus)||"CLOSED"==(null==o.ruleConfig?null:o.ruleConfig.recordStatus))&&"NO"!=(null==o.ruleConfig?null:o.ruleConfig.approvedEver)&&"N"!=(null==o.ruleConfig?null:o.ruleConfig.approvedEver)),m.xp6(1),m.Q6J("ngIf","NO"==(null==o.ruleConfig?null:o.ruleConfig.approvedEver)||"N"==(null==o.ruleConfig?null:o.ruleConfig.approvedEver)),m.xp6(2),m.Q6J("routerLink",m.DdM(21,$))}}var Ue,Oe=((Ue=function(){function e(t,o,n,r,a,l){var s=this;i(this,e),this.formBuilder=t,this.router=o,this.canDeactivateGuard=n,this.ruleService=r,this.toastService=a,this.cdr=l,this.submit=!0,this.showRuleValidation=!1,this.externalsystem=[],this.selectedExternalSystems=[],this.filteredExternalSystems=[],this.sourcesysdata=[],this.tempArrayData=[],this.headerTagData1=[],this.externalCreateSystemFiltered=[],this.isSelected=!0,this.hideSubmit=!1,this.deleted=!1,this.tempArrayList=[],this.tempArrayList2=[],this.ruleConfig=new Ee,this.selectedDocumentTypes2=[],this.messageBasisIso=[],this.xmlRespData=[],this.editFlag=!0,this.ruleIdInvalid=!1,this.formTouched=!0,this.showDialog=!1,this.subject=new p.xQ,this.destinationMsg=!0,this.sourceMsg=!0,this.validationMsg=!0,this.issourceSysDisabled=function(e){return s.headerTagData1.includes(e)}}return n(e,[{key:"ngOnInit",value:function(){this.initForm(),this.currentUser=localStorage.getItem("userFromLogin"),this.gettingExternalSsytem()}},{key:"initForm",value:function(){this.ruleForm=this.formBuilder.group({ruleId:["",d.kI.required],ruleName:["",d.kI.required],sourceSystems:this.getSourceItem(),destinationSystems:this.getDestinationItem(),validationSystems:this.formBuilder.array([]),sysRuleDetails:this.formBuilder.array([])})}},{key:"getSourceItem",value:function(){return this.formBuilder.group({sourceSystem:["",d.kI.required],messageKey:[""],messageType:["",d.kI.required],serviceName:["",d.kI.required],operationName:["",d.kI.required]})}},{key:"canExit",value:function(){var e=this,t=!1;return this.ruleForm.touched&&1==this.formTouched?f().fire({text:"There are unsaved changes in the screen. Would you like to navigate to other screen?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(function(i){return!0===i.isConfirmed?(t=!0,e.cdr.markForCheck(),t):(t=!1,e.cdr.markForCheck(),t)}):(t=!0,new Promise(function(i,o){!0===t&&(t=!0,e.cdr.markForCheck(),i(!0))}))}},{key:"getDestinationItem",value:function(){return this.formBuilder.group({destinationSystem:["",d.kI.required],messageType:["",d.kI.required],serviceName:["",d.kI.required],operationName:["",d.kI.required]})}},{key:"getValidationItem",value:function(){return this.formBuilder.group({validationSystem:["",d.kI.required],messageKey:[""],messageType:["",d.kI.required],service:["",d.kI.required],operation:["",d.kI.required],id:[""],ruleId:[""]})}},{key:"getSysRuleDetails",value:function(){return this.formBuilder.group({id:[""],ruleId:[""],messageKey:["",d.kI.required],validationMethod:["",d.kI.required],validationDetail:["",d.kI.required]})}},{key:"indexTracker",value:function(e,t){return e}},{key:"sourceSystems",get:function(){return this.ruleForm.get("sourceSystems").value}},{key:"validationSystems",get:function(){return this.ruleForm.get("validationSystems")}},{key:"sysRuleDetails",get:function(){return this.ruleForm.get("sysRuleDetails")}},{key:"addValidationGroup",value:function(){this.validationSystems.push(this.getValidationItem())}},{key:"addSysRuleDetails",value:function(){this.sysRuleDetails.push(this.getSysRuleDetails()),console.log(this.sysRuleDetails.value)}},{key:"deleteVFGroup",value:function(e){this.validationSystems.removeAt(e);var t=new Set(this.validationSystems.value.map(function(e){return e.validationSystem}));this.filteredExternalSystems=this.externalsystem.filter(function(e){return!t.has(e)})}},{key:"removeSysRules",value:function(e){this.tempArrayList[e]&&this.tempArrayList.splice(e,1),this.tempArrayList2[e]&&this.tempArrayList2.splice(e,1),this.sysRuleDetails.removeAt(e)}},{key:"trackByFn",value:function(e,t){return e}},{key:"onSlectionExternalSystem",value:function(e){var t=this;this.srcSystem=e,this.externalCreateSystemFiltered=this.externalsystem.filter(function(e){return e!==t.srcSystem&&e!==t.desSystem}),this.sourcesystem=e,this.ruleService.gettingTranslationData(this.sourcesystem).subscribe(function(e){e&&(t.sourceSysData=e,t.ruleMappDetails=t.sourceSysData.msgTransDetails,t.sourceSysData.messageType&&("I"==t.sourceSysData.messageType&&(t.sourceSysData.messageType="Incoming"),"O"==t.sourceSysData.messageType&&(t.sourceSysData.messageType="OutGoing"),t.sourceMsg=!1),t.ruleForm.get("sourceSystems").patchValue(t.sourceSysData),e.messageType&&("Incoming"==e.messageType&&(e.messageType="I"),"OutGoing"==e.messageType&&(e.messageType="O"),t.sourceMsg=!1),t.ruleConfig.sourceTranslationId=e.transId,t.gettingoperationAndServiceFroSourceSystem(t.sourcesystem,e.messageType))}),this.externalsystem=this.tempArrayData}},{key:"gettingoperationAndServiceFroSourceSystem",value:function(e,t){var i=this;this.ruleService.gettingoperationAndService(e,t,this.currentUser).subscribe(function(e){console.log(e),i.sourceOperation=e.I.OPERATION,i.sourceService=e.I.SERVICE,i.sourceDetails=e.MdmtSystemChannel[0].messageChannel,i.messageBasisIso=e.MdmtSystemService,console.log(i.sourceSysData),console.log(i.sourceService),"I"==Object.keys(e)[2]&&3==Object.keys(e).length&&(0!==e.I.SERVICE.length&&(i.translationDataService=e.I.SERVICE,e.I.SERVICE.length<1&&(console.log(i.translationDataService,"1st if"),i.multipleService=!0),e.I.SERVICE.length>=1&&(console.log(i.translationDataService,"2nd If"),i.multipleService=!1)),0!==e.I.OPERATION.length&&(i.translationDataOperation=e.I.OPERATION,console.log(i.translationDataOperation),i.translationDataOperation.length<1&&(console.log(i.translationDataOperation,"1st if"),i.multipleOperation=!0),i.translationDataOperation.length>=1&&(console.log(i.translationDataOperation,"2nd If"),i.multipleOperation=!1)),i.translationDataService=e.I.SERVICE)},function(e){console.log(e)})}},{key:"gettingoperationAndServiceFroDestinationSystem",value:function(e,t){var i=this;this.ruleService.gettingoperationAndService(e,t,this.currentUser).subscribe(function(e){console.log(e),e&&(e.I&&(i.sourceOperation=e.I.OPERATION,i.sourceService=e.I.SERVICE,i.sourceDetails=e.MdmtSystemChannel[0].messageChannel,i.messageBasisIso=e.MdmtSystemService),e.O&&(i.sourceOperation=e.O.OPERATION,i.sourceService=e.O.SERVICE,i.sourceDetails=e.MdmtSystemChannel[0].messageChannel,i.messageBasisIso=e.MdmtSystemService));var t=Object.keys(e)[2];"I"==t&&3==Object.keys(e).length&&(0!==e.I.SERVICE.length&&(i.translationDestDataService=e.I.SERVICE,e.I.SERVICE.length<=1&&(i.multipleService=!0),e.I.SERVICE.length>1&&(i.multipleService=!1)),0!==e.I.OPERATION.length&&(i.translationDestDataOperation=e.I.OPERATION,i.translationDestDataOperation.length<=1&&(i.multipleOperation=!0),i.translationDestDataOperation.length>1&&(i.multipleOperation=!1)),i.translationDestDataService=e.I.SERVICE),"O"==t&&3==Object.keys(e).length&&(0!==e.O.SERVICE.length&&(i.translationDestDataService=e.O.SERVICE,e.O.SERVICE.length<=1&&(i.multipleService=!0),e.O.SERVICE.length>1&&(i.multipleService=!1)),0!==e.O.OPERATION.length&&(i.translationDestDataOperation=e.O.OPERATION,i.translationDestDataOperation.length<=1&&(i.multipleOperation=!0),i.translationDestDataOperation.length>1&&(i.multipleOperation=!1)),i.translationDestDataService=e.O.SERVICE)},function(e){console.log(e)})}},{key:"destinaltionSelection",value:function(e){var t=this;this.translationDestDataOperation=[],this.translationDestDataService=[],console.log(this.externalsystem),this.desSystem=e,this.destination=e,this.externalCreateSystemFiltered=this.externalsystem.filter(function(e){return e!==t.srcSystem&&e!==t.desSystem}),console.log(this.externalCreateSystemFiltered),this.ruleService.gettingTranslationData(this.destination).subscribe(function(e){console.log(e),e&&(t.destinationSysData=e,t.destinationSysData.messageType&&("I"==t.destinationSysData.messageType&&(t.destinationSysData.messageType="Incoming"),"O"==t.destinationSysData.messageType&&(t.destinationSysData.messageType="OutGoing"),t.destinationMsg=!1),t.ruleConfig.targetTranslationId=e.transId,t.ruleForm.get("destinationSystems").patchValue(t.destinationSysData)),t.destinationSysData.messageType&&("Incoming"==t.destinationSysData.messageType&&(t.destinationSysData.messageType="I"),"OutGoing"==t.destinationSysData.messageType&&(t.destinationSysData.messageType="O"),t.destinationMsg=!1),t.gettingoperationAndServiceFroDestinationSystem(t.destination,e.messageType)}),this.externalsystem=this.tempArrayData}},{key:"onValidtion",value:function(e,t){var i=this;this.selectedExternalSystems[t]=e,new Set(this.selectedExternalSystems),this.externalCreateSystemFiltered=this.externalsystem.filter(function(e){return e!==i.srcSystem&&e!==i.desSystem}),this.validationData=e,this.selectedDocumentTypes2[t]&&(this.headerTagData1=this.externalsystem.filter(function(e){return e!==i.selectedDocumentTypes2[t]})),this.selectedDocumentTypes2[t]=this.validationData,this.headerTagData1.push(this.validationData),console.log(this.validationData),this.ruleService.gettingTranslationData(this.validationData).subscribe(function(e){console.log(e),e&&(i.validationTransData=e,i.xmlRespData=i.validationTransData.msgTransDetails,i.validationTransData.messageType&&("I"==i.validationTransData.messageType&&(i.validationTransData.messageType="Incoming"),"O"==i.validationTransData.messageType&&(i.validationTransData.messageType="OutGoing"),i.validationMsg=!1),i.ruleForm.get("validationSystems").at(t).get("service").patchValue(i.validationTransData.serviceName),i.ruleForm.get("validationSystems").at(t).get("operation").patchValue(i.validationTransData.operationName),i.ruleForm.get("validationSystems").at(t).get("messageType").patchValue(i.validationTransData.messageType),e.messageType&&("Incoming"==e.messageType&&(e.messageType="I"),"OutGoing"==e.messageType&&(e.messageType="O"),i.sourceMsg=!1),i.gettingoperationSndservForValidation(i.validationData,e.messageType))}),this.externalsystem=this.tempArrayData}},{key:"gettingExternalSsytem",value:function(){var e=this;this.ruleService.gettingExternalsystem().subscribe(function(t){console.log("Response ::",t),e.externalsystem=t.sort(),e.filteredExternalSystems=e.externalsystem,e.sourcesysdata=e.externalsystem,e.tempArrayData=e.externalsystem,e.externalCreateSystemFiltered=e.externalsystem})}},{key:"gettingoperationSndservForValidation",value:function(e,t){var i=this;this.ruleService.gettingoperationAndService(e,t,this.currentUser).subscribe(function(e){console.log(e),e&&(i.valOperation=e.OPERATION,i.valService=e.SERVICE,i.valDeatils=e.MdmtSystemChannel[0].messageChannel,"I"==Object.keys(e)[2]&&3==Object.keys(e).length&&(0!==e.I.SERVICE.length&&(i.translationValDataService=e.I.SERVICE,e.I.SERVICE.length<1&&(i.multipleService=!0),e.I.SERVICE.length>=1&&(i.multipleService=!1)),0!==e.I.OPERATION.length&&(i.translationValDataOperation=e.I.OPERATION,i.translationValDataOperation.length<1&&(i.multipleOperation=!0),i.translationValDataOperation.length>=1&&(i.multipleOperation=!1)),i.translationValDataService=e.I.SERVICE))},function(e){console.log(e)})}},{key:"auditChangeRuleTranslation",value:function(e){var t=this,i="",o="";switch(e){case"open":i="opened",o="open";break;case"close":i="closed",o="close";break;case"auth":i="authorized",o="authorize"}f().fire({text:"You are trying to ".concat(o," record.  Do you want to proceed?"),showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(function(n){!0===n.isConfirmed&&(t.ruleConfig.creatorId==t.currentUser?f().fire({text:"Maker cannot ".concat(o," the record!")}):(t.ruleConfig.mdmtValidationSystemData=t.validationSystems.value,t.ruleConfig.mdmtValidationSystemData.forEach(function(e){e.ruleId=t.ruleConfig.ruleId}),t.sysRuleDetails.value.forEach(function(e){e.ruleId=t.ruleForm.get("ruleId").value}),t.ruleConfig.sysRuleDetails=t.sysRuleDetails.value,"NO"==t.ruleConfig.approvedEver?t.ruleConfig.approvedEver="N":"YES"==t.ruleConfig.approvedEver&&(t.ruleConfig.approvedEver="Y"),"UNAUTHORIZED"==t.ruleConfig.approvedStatus?t.ruleConfig.approvedStatus="U":"AUTHORIZED"==t.ruleConfig.approvedStatus&&(t.ruleConfig.approvedStatus="A"),"OPEN"==t.ruleConfig.recordStatus?t.ruleConfig.recordStatus="O":"CLOSED"==t.ruleConfig.recordStatus&&(t.ruleConfig.recordStatus="C"),console.log(t.ruleConfig),t.ruleService.editRuleConfig(e,t.ruleConfig,t.currentUser).subscribe(function(e){console.log(e),e&&(t.ruleConfig=e,f().fire("Record is ".concat(i)))},function(e){f().fire({text:"Failed To ".concat(i)})})))})}},{key:"editValues",value:function(){this.hideSubmit=!0,this.submit=!0,this.editFlag=!0,this.ruleForm.enable()}},{key:"deleteRule",value:function(){var e=this;f().fire({text:"You are trying to delete record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(function(t){console.log("this is reopen ",t),!0===t.isConfirmed&&(e.ruleConfig.mdmtValidationSystemData=e.validationSystems.value,e.ruleConfig.mdmtValidationSystemData.forEach(function(t){t.ruleId=e.ruleConfig.ruleId}),e.sysRuleDetails.value.forEach(function(t){t.ruleId=e.ruleForm.get("ruleId").value}),e.ruleConfig.sysRuleDetails=e.sysRuleDetails.value,console.log(e.ruleConfig),e.ruleService.onDeleteRuleCongif(e.ruleConfig.sysRuleId,e.currentUser).subscribe(function(t){t?(e.deleted=!0,e.editBtn=!0,e.authBtn=!0,e.closeBtn=!0,f().fire({text:"Record is Deleted",icon:"success"}).then(function(t){t&&e.router.navigateByUrl("/createrule/list")})):f().fire("Failed to delete the reocrd")}))})}},{key:"ruleIdInvalidOrNot",value:function(e){console.log(e),console.log(this.ruleIdInvalid),e&&(-1===e.search(/^[a-zA-Z0-9-_]+$/)?(this.ruleIdInvalid=!0,console.log("1 "+this.ruleIdInvalid)):(this.ruleIdInvalid=!1,console.log("2 "+this.ruleIdInvalid)))}},{key:"next",value:function(){if(this.showRuleValidation=!this.showRuleValidation,0==this.sysRuleDetails.length&&this.addSysRuleDetails(),this.ruleForm.value.validationSystems.length>0)for(var e=0;e<this.ruleForm.value.validationSystems.length;e++)(""==this.ruleForm.value.validationSystems[e].validationSystem||""==this.ruleForm.value.validationSystems[e].validationSystem)&&this.validationSystems.removeAt(e);console.log("RuleForm value",this.ruleForm.value)}},{key:"onSubmit",value:function(){var e=this;this.ruleConfig.mdmtValidationSystemData=this.validationSystems.value,this.ruleConfig.mdmtValidationSystemData.forEach(function(t){t.ruleId=e.ruleForm.get("ruleId").value}),this.sysRuleDetails.value.forEach(function(t){t.ruleId=e.ruleForm.get("ruleId").value}),this.ruleConfig.sysRuleDetails=this.sysRuleDetails.value,this.ruleConfig.ruleId=this.ruleForm.get("ruleId").value,this.ruleConfig.ruleName=this.ruleForm.get("ruleName").value,this.ruleIdAfterSave?("NO"==this.ruleConfig.approvedEver&&(this.ruleConfig.approvedEver="N"),"OPEN"==this.ruleConfig.recordStatus&&(this.ruleConfig.recordStatus="O"),"UNAUTHORIZED"==this.ruleConfig.approvedStatus&&(this.ruleConfig.approvedStatus="U"),this.ruleService.editRuleConfig("update",this.ruleConfig,this.currentUser).subscribe(function(t){t&&(console.log(t),e.ruleConfig=t,e.ruleIdAfterSave=t.ruleId,e.ruleForm.get("sysRuleDetails").setValue(null==t?void 0:t.sysRuleDetails),e.ruleForm.get("validationSystems").setValue(null==t?void 0:t.mdmtValidationSystemData),f().fire({text:"Record is Updated.",icon:"success"}),e.submit=!1,e.formTouched=!e.ruleForm.touched,e.ruleForm.disable(),e.auditShowStatus=!0,e.editFlag=!1,e.auditLog())},function(e){f().fire({text:"Failed To update the Record",icon:"error"})})):this.ruleService.saveRuleconfig(this.ruleConfig,this.currentUser).subscribe(function(t){t&&(e.ruleConfig=t,e.ruleIdAfterSave=t.ruleId,e.ruleForm.get("sysRuleDetails").setValue(t.sysRuleDetails),e.ruleForm.get("validationSystems").setValue(t.mdmtValidationSystemData),f().fire({text:"Record is Created.",icon:"success"}),e.formTouched=!e.ruleForm.touched,e.submit=!1,e.ruleForm.disable(),e.auditShowStatus=!0,e.editFlag=!1,e.auditLog())},function(e){f().fire({text:"Failed To Save the Record",icon:"error"})})}},{key:"auditLog",value:function(){"U"===this.ruleConfig.approvedStatus&&(this.ruleConfig.approvedStatus="UNAUTHORIZED"),"A"===this.ruleConfig.approvedStatus&&(this.ruleConfig.approvedStatus="AUTHORIZED"),"O"===this.ruleConfig.recordStatus&&(this.ruleConfig.recordStatus="OPEN"),"C"===this.ruleConfig.recordStatus&&(this.ruleConfig.recordStatus="CLOSE"),"N"===this.ruleConfig.approvedEver&&(this.ruleConfig.approvedEver="NO"),"Y"===this.ruleConfig.approvedEver&&(this.ruleConfig.approvedEver="YES")}},{key:"Previous",value:function(){this.showRuleValidation=!this.showRuleValidation,console.log("Rule form value",this.ruleForm.value)}},{key:"openPopUp",value:function(){c(".ddTrigger").click(function(){c(".ddParent").removeClass("actDD"),c(this).parents("li").siblings().find(".ddParent").removeClass("actDD"),c(this).parents(".ddParent").toggleClass("actDD"),c(this).removeClass("actUnread")})}},{key:"closeAll",value:function(){c(document).on("click",function(e){var t=c(".ddParent");t!==e.target&&!t.has(e.target).length&&c(".ddParent").removeClass("actDD")})}},{key:"close",value:function(){c(".ddCloseTrigger").click(function(){c(".ddParent").removeClass("actDD")})}},{key:"try2",value:function(e,t){for(var i=0;i<this.tempArrayList2.length;i++)if(this.tempArrayList2[i][t]===e)return!0;return!1}},{key:"try",value:function(e){return!!this.tempArrayList.find(function(t){return t==e})}},{key:"onselectOfFieldNo",value:function(e,t){console.log(e.target.value),console.log(this.tempArrayList[t]),this.tempArrayList[t]?this.tempArrayList[t]=e.target.value:this.tempArrayList.push(e.target.value),console.log(this.tempArrayList)}},{key:"onselectOfFieldNo2",value:function(e,t,i){this.tempArrayList2[t]||(this.tempArrayList2[t]=[]),this.tempArrayList2[t][i]=e.target.value}}]),e}()).\u0275fac=function(e){return new(e||Ue)(m.Y36(d.qu),m.Y36(s.F0),m.Y36(u.I),m.Y36(v.Q),m.Y36(Z.k),m.Y36(m.sBO))},Ue.\u0275cmp=m.Xpm({type:Ue,selectors:[["npr-rule-details"]],decls:107,vars:17,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],["novalidate","",1,"formStyle",3,"formGroup"],["class","dbCardStyle",4,"ngIf"],[4,"ngIf"],[1,"dbCardStyle"],[1,"row"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"csCardStyle"],[1,"row","g-2","align-items-center"],[1,"col-auto"],[1,"csCardStyleIcon","csCardStyleIconBg1"],[1,"fa","fa-edit","faClass"],[1,"col"],[1,"csCardStyleText"],[1,"csCardStyleIcon","csCardStyleIconBg2"],["src","assets/images/time-stamp-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg3"],["src","assets/images/record-status-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg4"],[1,"fa","fa-check-square-o","faClassChecker"],[1,"csCardStyleIcon","csCardStyleIconBg5"],["src","assets/images/checker-time-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg6"],["src","assets/images/first-auth-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg7"],["src","assets/images/authorize.svg","alt","...",1,"modImage"],["src","assets/images/modification.svg","alt","...",1,"modImage"],[3,"disabled"],[1,"row","gy-4"],[1,"col-lg-4"],[1,"formLbl"],[1,"colorRed"],["type","text","id","ruleId","name","ruleId","formControlName","ruleId","placeholder","Rule ID",1,"form-control",3,"readonly","keyup"],["class","danger",4,"ngIf"],["type","text","id","ruleName","name","ruleName","placeholder","Rule Name","formControlName","ruleName",1,"form-control",3,"readonly"],["formGroupName","sourceSystems",1,"col-lg-12"],[1,"formContent"],[1,"titleStyle","mb-3"],[1,"col-lg-3"],["for","sourceSystem",1,"formLbl"],["formControlName","sourceSystem",1,"form-select",3,"items","change"],["for","messageType",1,"formLbl"],["for","roleName",1,"formLbl"],["formGroupName","destinationSystems",1,"col-lg-12"],["for","destinationSystem",1,"formLbl"],["formControlName","destinationSystem",1,"form-select",3,"items","change"],[1,"col-lg-12"],["formArrayName","validationSystems",1,"formContent","border-bottom-0","pb-0"],[4,"ngFor","ngForOf"],["class","addIcon primarybg","style","cursor: pointer;",3,"click",4,"ngIf"],[1,"row","g-3","pb-3","justify-content-end","pt-3"],["class","col-auto",4,"ngIf"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"hidden","disabled","click"],["class","col-auto",3,"hidden",4,"ngIf"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],[1,"danger"],["id","messageType","aria-label","Default select example","formControlName","messageType",1,"form-select"],["hidden","","value","","disabled","","selected",""],["value","A"],["value","I"],["value","O"],["id","messageType","type","text","formControlName","messageType","placeholder","Message Type",1,"form-control"],["id","operationName","formControlName","operationName","aria-label","Default select example",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","operationName","type","text","formControlName","operationName","value","",1,"form-control"],["id","serviceName","formControlName","serviceName","aria-label","Default select example",1,"form-select"],["id","serviceName","type","text","formControlName","serviceName","value","",1,"form-control"],["id","destinationSystem","aria-label","Default select example","formControlName","messageType",1,"form-select"],["id","destinationSystem","type","text","formControlName","messageType","placeholder","Message Type",1,"form-control"],[3,"formGroupName"],[1,"row","gy-4","align-items-center","mt-1"],[1,"col-lg"],["formControlName","validationSystem",1,"form-select",3,"items","change"],[1,"col-auto",2,"margin-top","50px"],["class","tblIcon",3,"click",4,"ngIf"],["id","msgType","formControlName","messageType","aria-label","Default select example",1,"form-select"],["id","msgType","type","text","formControlName","messageType","placeholder","Message Type",1,"form-control"],["id","operationName","formControlName","operation","aria-label","Default select example",1,"form-select"],["id","operationName","type","text","formControlName","operation","value","",1,"form-control"],["id","serviceName","formControlName","service","aria-label","Default select example",1,"form-select"],["id","serviceName","type","text","formControlName","service","value","",1,"form-control"],[1,"tblIcon",3,"click"],["src","assets/images/delete-icon.svg","alt","..."],[1,"addIcon","primarybg",2,"cursor","pointer",3,"click"],["src","assets/images/plus-icon.svg","alt","..."],[1,"btn","smBtn","minWdSmBtn","btnUpdate",3,"hidden","click"],[1,"col-auto",3,"hidden"],[1,"btn","smBtn","minWdSmBtn","btnAuth",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],["id","dbTable1",1,"table","tableStyle","responsive","nowrap","vAlignMdl",2,"border-spacing","10px","border-collapse","separate"],[1,"tbleheadStyle"],[2,"text-align","center"],[2,"padding","0 !important","border-bottom-style","dashed"],[1,"td-highlight"],["style","padding: 0 !important;border-bottom-style: dashed;",4,"ngFor","ngForOf","ngForTrackBy"],["formArrayName","sysRuleDetails"],[1,"row","g-3"],[1,"btn","smBtn","minWdSmBtn","btnDarkGrey",3,"hidden","click"],[3,"formGroup"],[4,"ngFor","ngForOf","ngForTrackBy"],["formControlName","validationMethod","id","validationMethod","type","text","placeholder","Validation Method","value","",1,"form-control",3,"readonly"],["formControlName","validationDetail","id","validationDetails","type","text","placeholder","Validation Details","value","",1,"form-control",3,"readonly"],[1,"tblIcon"],["class","deleteIcon2",3,"click",4,"ngIf"],["id","outlineNgSelect","id","susRuleMsg","formControlName","messageKey","aria-label","Default select example",1,"form-select",3,"change"],["hidden","","required","",3,"value","disabled","hidden",4,"ngFor","ngForOf"],["hidden","","required","",3,"value","disabled","hidden"],["id","outlineNgSelect","formControlName","messageKey","aria-label","Default select example",1,"form-select",3,"change"],["required","",3,"value","disabled","hidden",4,"ngFor","ngForOf"],["required","",3,"value","disabled","hidden"],["id","outlineNgSelect","aria-label","Default select example","required","",1,"form-select",3,"change"],["required","",3,"value","hidden","disabled",4,"ngFor","ngForOf"],["required","",3,"value","hidden","disabled"],["id","outlineNgSelect","required","","aria-label","Default select example",1,"form-select",3,"name","ngModel","change","ngModelChange"],["messageKey","ngModel"],["required","",3,"disabled","value","hidden",4,"ngFor","ngForOf"],["required","",3,"disabled","value","hidden"],[1,"deleteIcon2",3,"click"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"h2",2),m._uU(3,"Create Rule"),m.qZA(),m.qZA(),m.TgZ(4,"form",3),m.YNc(5,W,96,29,"div",4),m.YNc(6,Ne,53,22,"ng-container",5),m.qZA(),m.TgZ(7,"div",6),m.TgZ(8,"div",7),m.TgZ(9,"div",8),m.TgZ(10,"div",9),m.TgZ(11,"div",10),m.TgZ(12,"div",11),m.TgZ(13,"div",12),m._UZ(14,"i",13),m.qZA(),m.qZA(),m.TgZ(15,"div",14),m.TgZ(16,"div",15),m.TgZ(17,"h2"),m._uU(18,"Maker"),m.qZA(),m.TgZ(19,"p"),m._uU(20),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(21,"div",8),m.TgZ(22,"div",9),m.TgZ(23,"div",10),m.TgZ(24,"div",11),m.TgZ(25,"div",16),m._UZ(26,"img",17),m.qZA(),m.qZA(),m.TgZ(27,"div",14),m.TgZ(28,"div",15),m.TgZ(29,"h2"),m._uU(30,"Maker Time Stamp"),m.qZA(),m.TgZ(31,"p"),m._uU(32),m.ALo(33,"date"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(34,"div",8),m.TgZ(35,"div",9),m.TgZ(36,"div",10),m.TgZ(37,"div",11),m.TgZ(38,"div",18),m._UZ(39,"img",19),m.qZA(),m.qZA(),m.TgZ(40,"div",14),m.TgZ(41,"div",15),m.TgZ(42,"h2"),m._uU(43,"Record Status"),m.qZA(),m.TgZ(44,"p"),m._uU(45),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(46,"div",8),m.TgZ(47,"div",9),m.TgZ(48,"div",10),m.TgZ(49,"div",11),m.TgZ(50,"div",20),m._UZ(51,"i",21),m.qZA(),m.qZA(),m.TgZ(52,"div",14),m.TgZ(53,"div",15),m.TgZ(54,"h2"),m._uU(55,"Checker"),m.qZA(),m.TgZ(56,"p"),m._uU(57),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(58,"div",8),m.TgZ(59,"div",9),m.TgZ(60,"div",10),m.TgZ(61,"div",11),m.TgZ(62,"div",22),m._UZ(63,"img",23),m.qZA(),m.qZA(),m.TgZ(64,"div",14),m.TgZ(65,"div",15),m.TgZ(66,"h2"),m._uU(67,"Checker Time Stamp"),m.qZA(),m.TgZ(68,"p"),m._uU(69),m.ALo(70,"date"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(71,"div",8),m.TgZ(72,"div",9),m.TgZ(73,"div",10),m.TgZ(74,"div",11),m.TgZ(75,"div",24),m._UZ(76,"img",25),m.qZA(),m.qZA(),m.TgZ(77,"div",14),m.TgZ(78,"div",15),m.TgZ(79,"h2"),m._uU(80,"First Time Auth"),m.qZA(),m.TgZ(81,"p"),m._uU(82),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(83,"div",8),m.TgZ(84,"div",9),m.TgZ(85,"div",10),m.TgZ(86,"div",11),m.TgZ(87,"div",26),m._UZ(88,"img",27),m.qZA(),m.qZA(),m.TgZ(89,"div",14),m.TgZ(90,"div",15),m.TgZ(91,"h2"),m._uU(92,"Auth Status"),m.qZA(),m.TgZ(93,"p"),m._uU(94),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(95,"div",8),m.TgZ(96,"div",9),m.TgZ(97,"div",10),m.TgZ(98,"div",11),m.TgZ(99,"div",26),m._UZ(100,"img",28),m.qZA(),m.qZA(),m.TgZ(101,"div",14),m.TgZ(102,"div",15),m.TgZ(103,"h2"),m._uU(104,"Modification Number"),m.qZA(),m.TgZ(105,"p"),m._uU(106),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e&&(m.xp6(4),m.Q6J("formGroup",t.ruleForm),m.xp6(1),m.Q6J("ngIf",!t.showRuleValidation),m.xp6(1),m.Q6J("ngIf",t.showRuleValidation),m.xp6(14),m.Oqu(t.ruleConfig.creatorId),m.xp6(12),m.Oqu(m.xi3(33,11,t.ruleConfig.createdTime,"MM/dd/yyyy, h:mm a")),m.xp6(13),m.Oqu(t.ruleConfig.recordStatus),m.xp6(12),m.Oqu(t.ruleConfig.approverId),m.xp6(12),m.Oqu(m.xi3(70,14,t.ruleConfig.approvedTime,"MM/dd/yyyy, h:mm a")),m.xp6(13),m.Oqu(t.ruleConfig.approvedEver),m.xp6(12),m.Oqu(t.ruleConfig.approvedStatus),m.xp6(12),m.Oqu(t.ruleConfig.versionNo))},directives:[d._Y,d.JL,d.sg,a.O5,d.Fj,d.JJ,d.u,d.x0,l.w9,d.CE,a.sg,s.rH,d.EJ,d.YN,d.Kr,d.Q7,d.On],pipes:[a.uU],styles:[".danger[_ngcontent-%COMP%]{color:#e6224a}.td-highlight[_ngcontent-%COMP%]{color:#000!important;font-size:12px;text-transform:uppercase;letter-spacing:1px;padding:15px 3px 0 12px}table.tableStyle[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px!important;white-space:nowrap}table.tableStyle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:2px!important}"]}),Ue),Ee=n(function e(){i(this,e)}),Re=r(35383),ke=r(77382),_e=r(91973);function Fe(e,t){1&e&&(m.TgZ(0,"label",33),m._uU(1,"System"),m.TgZ(2,"span",34),m._uU(3,"*"),m.qZA(),m.qZA())}function Ve(e,t){1&e&&(m.TgZ(0,"label",33),m._uU(1,"Message Type "),m.TgZ(2,"span",34),m._uU(3,"*"),m.qZA(),m.qZA())}function we(e,t){1&e&&(m.TgZ(0,"label",33),m._uU(1,"Operation"),m.qZA())}function Je(e,t){1&e&&(m.TgZ(0,"label",33),m._uU(1,"Service"),m.qZA())}function Be(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"a",71),m.NdJ("click",function(){m.CHM(i);var e=m.oxw().index;return m.oxw(3).deleteVFGroup(e)}),m.TgZ(1,"span",72),m._UZ(2,"img",73),m.qZA(),m.qZA()}}var Me=function(e){return{"margin-top":e}};function Qe(e,t){if(1&e){var i=m.EpF();m.ynx(0),m.ynx(1,61),m.TgZ(2,"div",62),m.TgZ(3,"div",63),m.YNc(4,Fe,4,0,"label",64),m.TgZ(5,"ng-select",65),m.NdJ("change",function(e){var t=m.CHM(i).index;return m.oxw(3).onValidtion(e,t)}),m.qZA(),m.qZA(),m.TgZ(6,"div",63),m.YNc(7,Ve,4,0,"label",64),m.TgZ(8,"select",66),m.TgZ(9,"option",56),m._uU(10,"--Please select--"),m.qZA(),m.TgZ(11,"option",46),m._uU(12,"Incoming"),m.qZA(),m.TgZ(13,"option",47),m._uU(14,"OutGoing"),m.qZA(),m.TgZ(15,"option",45),m._uU(16,"All"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(17,"div",13),m.YNc(18,we,2,0,"label",64),m._UZ(19,"input",67),m.qZA(),m.TgZ(20,"div",63),m.YNc(21,Je,2,0,"label",64),m._UZ(22,"input",68),m.qZA(),m.TgZ(23,"div",69),m.YNc(24,Be,3,0,"a",70),m.qZA(),m.qZA(),m.BQk(),m.BQk()}if(2&e){var o=t.index,n=m.oxw(3);m.xp6(1),m.Q6J("formGroupName",o),m.xp6(3),m.Q6J("ngIf",0==o),m.xp6(1),m.Q6J("items",n.filteredExternalSystems)("readonly",!n.hideSubmit),m.xp6(2),m.Q6J("ngIf",0==o),m.xp6(11),m.Q6J("ngIf",0==o),m.xp6(1),m.Q6J("readonly",!0),m.xp6(2),m.Q6J("ngIf",0==o),m.xp6(1),m.Q6J("readonly",!0),m.xp6(1),m.Q6J("ngStyle",m.VKq(11,Me,0===o?"50px":"20px")),m.xp6(1),m.Q6J("ngIf",n.hideSubmit)}}function Ye(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",58),m.TgZ(1,"a",74),m.NdJ("click",function(){m.CHM(i);var e=m.oxw(3);return e.hideSubmit?e.addValidationGroup():""}),m.TgZ(2,"span"),m._UZ(3,"img",75),m.qZA(),m.qZA(),m.qZA()}}function Pe(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",5),m.TgZ(1,"div",31),m.TgZ(2,"div",32),m.TgZ(3,"label",33),m._uU(4,"Rule ID"),m.TgZ(5,"span",34),m._uU(6,"*"),m.qZA(),m.qZA(),m._UZ(7,"input",35),m.qZA(),m.TgZ(8,"div",32),m.TgZ(9,"label",33),m._uU(10,"Rule Name"),m.TgZ(11,"span",34),m._uU(12,"*"),m.qZA(),m.qZA(),m._UZ(13,"input",36),m.qZA(),m.TgZ(14,"div",37),m.TgZ(15,"div",38),m.TgZ(16,"div",39),m.TgZ(17,"h2",2),m._uU(18,"Source System"),m.qZA(),m.qZA(),m.TgZ(19,"div",31),m.TgZ(20,"div",40),m.TgZ(21,"label",41),m._uU(22,"System"),m.TgZ(23,"span",34),m._uU(24,"*"),m.qZA(),m.qZA(),m.TgZ(25,"ng-select",42),m.NdJ("change",function(e){return m.CHM(i),m.oxw(2).onSlectionExternalSystem(e)}),m.qZA(),m.qZA(),m.TgZ(26,"div",40),m.TgZ(27,"label",43),m._uU(28,"Message Type"),m.TgZ(29,"span",34),m._uU(30,"*"),m.qZA(),m.qZA(),m.TgZ(31,"select",44),m.TgZ(32,"option",45),m._uU(33,"All"),m.qZA(),m.TgZ(34,"option",46),m._uU(35,"Incoming"),m.qZA(),m.TgZ(36,"option",47),m._uU(37,"OutGoing"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(38,"div",40),m.TgZ(39,"label",48),m._uU(40,"Operation"),m.qZA(),m._UZ(41,"input",49),m.qZA(),m.TgZ(42,"div",40),m.TgZ(43,"label",50),m._uU(44,"Service"),m.qZA(),m._UZ(45,"input",51),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(46,"div",52),m.TgZ(47,"div",38),m.TgZ(48,"div",39),m.TgZ(49,"h2",2),m._uU(50,"Destination System"),m.qZA(),m.qZA(),m.TgZ(51,"div",31),m.TgZ(52,"div",40),m.TgZ(53,"label",53),m._uU(54,"System"),m.TgZ(55,"span",34),m._uU(56,"*"),m.qZA(),m.qZA(),m.TgZ(57,"ng-select",54),m.NdJ("change",function(e){return m.CHM(i),m.oxw(2).destinaltionSelection(e)}),m.qZA(),m.qZA(),m.TgZ(58,"div",40),m.TgZ(59,"label",33),m._uU(60,"Message Type"),m.TgZ(61,"span",34),m._uU(62,"*"),m.qZA(),m.qZA(),m.TgZ(63,"select",55),m.TgZ(64,"option",56),m._uU(65,"--Please select--"),m.qZA(),m.TgZ(66,"option",46),m._uU(67,"Incoming"),m.qZA(),m.TgZ(68,"option",47),m._uU(69,"OutGoing"),m.qZA(),m.TgZ(70,"option",45),m._uU(71,"All"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(72,"div",40),m.TgZ(73,"label",33),m._uU(74,"Operation"),m.qZA(),m._UZ(75,"input",49),m.qZA(),m.TgZ(76,"div",40),m.TgZ(77,"label",33),m._uU(78,"Service"),m.qZA(),m._UZ(79,"input",57),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(80,"div",58),m.TgZ(81,"div",59),m.TgZ(82,"div",39),m.TgZ(83,"h2",2),m._uU(84,"Validation System"),m.qZA(),m.qZA(),m.YNc(85,Qe,25,13,"ng-container",60),m.qZA(),m.qZA(),m.YNc(86,Ye,4,0,"div",4),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.xp6(25),m.Q6J("items",o.externalCreateSystemFiltered),m.xp6(16),m.Q6J("readonly",!0),m.xp6(4),m.Q6J("readonly",!0),m.xp6(12),m.Q6J("items",o.externalCreateSystemFiltered),m.xp6(18),m.Q6J("readonly",!0),m.xp6(4),m.Q6J("readonly",!0),m.xp6(6),m.Q6J("ngForOf",o.validationSystems.controls),m.xp6(1),m.Q6J("ngIf",o.hideSubmit)}}function He(e,t){if(1&e&&(m.TgZ(0,"form",28),m.TgZ(1,"fieldset",29),m.YNc(2,Pe,87,8,"div",30),m.qZA(),m.qZA()),2&e){var i=m.oxw();m.Q6J("formGroup",i.ruleForm),m.xp6(1),m.Q6J("disabled",!i.submit||!i.hideSubmit),m.xp6(1),m.Q6J("ngIf",!i.showRuleValidation)}}function Le(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",10),m.TgZ(1,"button",81),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).editValues()}),m._uU(2,"Edit"),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.xp6(1),m.Q6J("hidden",o.hideSubmit)}}function Ke(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",82),m.TgZ(1,"button",83),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).onAuthOfRule()}),m._uU(2,"Auth"),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.Q6J("hidden",o.hideSubmit)}}function Ge(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",82),m.TgZ(1,"button",84),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).onCloseOfRule()}),m._uU(2,"Close"),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.Q6J("hidden",o.hideSubmit)}}function ze(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",82),m.TgZ(1,"button",84),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).onOpenRule()}),m._uU(2,"Reopen"),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.Q6J("hidden",o.hideSubmit)}}function je(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",82),m.TgZ(1,"button",84),m.NdJ("click",function(){return m.CHM(i),m.oxw(2).deleteRule()}),m._uU(2,"Delete"),m.qZA(),m.qZA()}if(2&e){var o=m.oxw(2);m.Q6J("hidden",o.hideSubmit)}}var $e=function(){return["/createrule/list"]};function We(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"div",58),m.TgZ(1,"div",76),m.YNc(2,Le,3,1,"div",77),m.YNc(3,Ke,3,1,"div",78),m.YNc(4,Ge,3,1,"div",78),m.YNc(5,ze,3,1,"div",78),m.YNc(6,je,3,1,"div",78),m.TgZ(7,"div",10),m.TgZ(8,"button",79),m.NdJ("click",function(){return m.CHM(i),m.oxw().submittingCreateRule()}),m._uU(9,"Save"),m.qZA(),m.qZA(),m.TgZ(10,"div",10),m.TgZ(11,"button",80),m._uU(12,"Exit"),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&e){var o=m.oxw();m.xp6(2),m.Q6J("ngIf",!("C"==o.ruleConfig.recordStatus||"CLOSED"==o.ruleConfig.recordStatus)),m.xp6(1),m.Q6J("ngIf","U"==o.ruleConfig.approvedStatus||"UNAUTHORIZED"==o.ruleConfig.approvedStatus||"N"==o.ruleConfig.approvedStatus||"N"==o.ruleConfig.approvedEver),m.xp6(1),m.Q6J("ngIf",("O"==o.ruleConfig.recordStatus||"OPEN"==o.ruleConfig.recordStatus)&&"NO"!=o.ruleConfig.approvedEver&&"N"!=o.ruleConfig.approvedEver),m.xp6(1),m.Q6J("ngIf",("C"==o.ruleConfig.recordStatus||"CLOSED"==o.ruleConfig.recordStatus)&&"NO"!=o.ruleConfig.approvedEver&&"N"!=o.ruleConfig.approvedEver),m.xp6(1),m.Q6J("ngIf","NO"==o.ruleConfig.approvedEver),m.xp6(2),m.Q6J("disabled",o.ruleForm.get("sysRuleDetails").invalid||o.ruleForm.get("validationSystems").invalid||!o.ruleForm.dirty)("hidden",!o.hideSubmit),m.xp6(3),m.Q6J("routerLink",m.DdM(8,$e))}}var Xe=function(){var e=function(){function e(t,o,n,r,a,l,s,u,d){i(this,e),this.cdr=t,this._route=o,this.roleService=n,this.canDeactivateGuard=r,this.addsystem=a,this.rules=l,this.toastService=s,this.router=u,this.formBuilder=d,this.submit=!0,this.isSelected=!0,this.externalsystem=[],this.selectedExternalSystems=[],this.filteredExternalSystems=[],this.showRuleValidation=!1,this.formTouched=!0,this.showpBar=!1,this.isEdit=!1,this.ruleConfig=new et,this.authorizeDone=!1,this.deleted=!1,this.ruleValidation=new tt,this.arrRuleValidation=[],this.ruleDto=new it,this.messageBasisIso=[],this.xmlRespData=[],this.multipleValidation=[],this.multipleValidationData=[],this.valCount=0,this.destinationSysData=new et,this.editRule={},this.ModifyCreateRule=!1,this.hideSubmit=!1,this.roleCodes=new Re.yv,this.externalCreateSystemFiltered=[],this.selectedHttpMessageKeyValues=[],this.selectedTcpMessageKeyValues=[],this.selectedDBMessageKeyValues=[],this.showDialog=!1,this.subject=new p.xQ}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.currentUser=localStorage.getItem("userFromLogin"),this.ruleForm=this.formBuilder.group({ruleId:["",d.kI.required],ruleName:["",d.kI.required],sourceSystems:this.getSourceItem(),destinationSystems:this.getDestinationItem(),validationSystems:this.formBuilder.array([]),sysRuleDetails:this.formBuilder.array([])}),console.log(this._route.snapshot.params.id),this.getRuleData(this._route.snapshot.params.id),this.roleService.fetchScreenPermissions("Create Rule"),this.roleService.screenLabelList.subscribe(function(t){return e.roleCodes=t}),setTimeout(function(){console.log(e.roleCodes)},100),this.ruleForm.disable()}},{key:"editValues",value:function(){this.hideSubmit=!0,this.ruleForm.enable()}},{key:"canExit",value:function(){var e=this,t=!1;return this.ruleForm.touched&&1==this.formTouched?f().fire({text:"There are unsaved changes in the screen. Would you like to navigate to other screen?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(function(i){return!0===i.isConfirmed?(t=!0,e.cdr.markForCheck(),t):(t=!1,e.cdr.markForCheck(),t)}):(t=!0,new Promise(function(i,o){!0===t&&(t=!0,e.cdr.markForCheck(),i(!0))}))}},{key:"getRuleData",value:function(e){var t=this;this.rules.gettingCreateRuleById(e).subscribe(function(e){t.editRule=e,console.log("this.editRule ",t.editRule),console.log("in edit",t.editRule),t.ruleConfig.ruleId=t.editRule.ruleId,t.ruleConfig.ruleName=t.editRule.ruleName,t.ruleConfig.approvedEver=t.editRule.approvedEver,t.ruleConfig.recordStatus=t.editRule.recordStatus,t.ruleConfig.approvedStatus=t.editRule.approvedStatus,t.ruleConfig.approverId=t.editRule.approverId,t.ruleConfig.createdTime=t.editRule.createdTime,t.ruleConfig.creatorId=t.editRule.creatorId,t.ruleConfig.sysRuleId=t.editRule.sysRuleId,t.ruleConfig.versionNo=t.editRule.versionNo,t.multipleValidationData=t.editRule.mdmtValidationSystemData,t.multipleValidation=t.editRule.mdmtValidationSystemData,console.log("multipleValidation",t.editRule.multipleValidation),console.log("sysRuleDetails",t.editRule.sysRuleDetails),t.arrRuleValidation=t.editRule.sysRuleDetails;for(var i=0;i<t.arrRuleValidation.length;i++){t.addSysRuleDetails();var o=t.arrRuleValidation[i];console.log("sysRule",o),t.selectedHttpMessageKeyValues[i]=o.messageKey,t.selectedTcpMessageKeyValues[i]=o.messageKey,t.selectedDBMessageKeyValues[i]=o.messageKey,t.sysRuleDetails.at(i).patchValue(o)}for(var n=0;n<t.multipleValidationData.length;n++){t.addValidationGroup();var r=t.multipleValidationData[n];console.log("validation",r),t.validationSystems.at(n).patchValue(r),console.log("validationSystems?",t.validationSystems.value)}t.ruleForm.get("ruleId").patchValue(t.ruleConfig.ruleId),t.ruleForm.get("ruleName").patchValue(t.ruleConfig.ruleName),console.log(t.arrRuleValidation),console.log(t.ruleConfig),"C"==t.ruleConfig.recordStatus&&(console.log(t.ruleConfig.recordStatus),t.authBtnHide=!0,t.reopenBtn=!1),t.auditLog(),t.gettingExternalSsytem(),t.rules.gettingSysCode(t.editRule.sourceTranslationId).subscribe(function(e){console.log(e),e&&(t.ruleConfig.sourceTranslationId="",t.ruleConfig.sourceTranslationId=e.systemCode,t.sourcedata=t.ruleConfig.sourceTranslationId,t.ruleForm.get("sourceSystems").get("sourceSystem").patchValue(t.sourcedata),t.cdr.markForCheck(),t.onSlectionExternalSystem(t.ruleConfig.sourceTranslationId))}),t.rules.gettingSysCode(t.editRule.targetTranslationId).subscribe(function(e){console.log(e),t.ruleConfig.targetTranslationId=e.systemCode,t.destinationId=t.ruleConfig.targetTranslationId,t.ruleForm.get("destinationSystems").get("destinationSystem").patchValue(t.destinationId),t.destinaltionSelection(t.ruleConfig.targetTranslationId)}),t.multipleValidation.forEach(function(e,i){console.log(e),t.onGetValidtion(e.validationSystem,i)}),t.multipleValidationData.forEach(function(e,i){console.log("Testing",e,i),t.onGetValidtion(e.validationSystem,i)})})}},{key:"getSourceItem",value:function(){return this.formBuilder.group({sourceSystem:["",d.kI.required],messageKey:[""],messageType:["",d.kI.required],serviceName:["",d.kI.required],operationName:["",d.kI.required]})}},{key:"getDestinationItem",value:function(){return this.formBuilder.group({destinationSystem:["",d.kI.required],messageType:["",d.kI.required],serviceName:["",d.kI.required],operationName:["",d.kI.required]})}},{key:"auditLog",value:function(){"U"===this.ruleConfig.approvedStatus&&(this.ruleConfig.approvedStatus="UNAUTHORIZED"),"A"===this.ruleConfig.approvedStatus&&(this.ruleConfig.approvedStatus="AUTHORIZED"),"O"===this.ruleConfig.recordStatus&&(this.ruleConfig.recordStatus="OPEN"),"C"===this.ruleConfig.recordStatus&&(this.ruleConfig.recordStatus="CLOSE"),"N"===this.ruleConfig.approvedEver&&(this.ruleConfig.approvedEver="NO"),"Y"===this.ruleConfig.approvedEver&&(this.ruleConfig.approvedEver="YES")}},{key:"getValidationItem",value:function(){return this.formBuilder.group({validationSystem:["",d.kI.required],messageKey:[""],messageType:["",d.kI.required],service:["",d.kI.required],operation:["",d.kI.required],id:[""],ruleId:[""]})}},{key:"getSysRuleDetails",value:function(){return this.formBuilder.group({id:[""],ruleId:[""],messageKey:["",d.kI.required],validationMethod:["",d.kI.required],validationDetail:["",d.kI.required]})}},{key:"changeFieldNO",value:function(e,t){console.log(e),console.log(t)}},{key:"indexTracker",value:function(e,t){return e}},{key:"sourceSystems",get:function(){return this.ruleForm.get("sourceSystems").value}},{key:"validationSystems",get:function(){return this.ruleForm.get("validationSystems")}},{key:"sysRuleDetails",get:function(){return this.ruleForm.get("sysRuleDetails")}},{key:"addValidationGroup",value:function(){this.validationSystems.push(this.getValidationItem())}},{key:"addSysRuleDetails",value:function(){this.sysRuleDetails.push(this.getSysRuleDetails()),console.log(this.sysRuleDetails.value)}},{key:"deleteVFGroup",value:function(e){this.validationSystems.removeAt(e);var t=new Set(this.validationSystems.value.map(function(e){return e.validationSystem}));this.filteredExternalSystems=this.externalsystem.filter(function(e){return!t.has(e)})}},{key:"removeSysRules",value:function(e){this.sysRuleDetails.removeAt(e),this.selectedTcpMessageKeyValues=this.sysRuleDetails.value.map(function(e){return e.messageKey}),this.selectedHttpMessageKeyValues=this.sysRuleDetails.value.map(function(e){return e.messageKey}),this.selectedDBMessageKeyValues=this.sysRuleDetails.value.map(function(e){return e.messageKey})}},{key:"trackByFn",value:function(e,t){return e}},{key:"onEdit",value:function(){this.isEdit=!0,"U"==this.ruleConfig.approvedStatus&&(this.isEdit=!1),"C"==this.ruleConfig.recordStatus&&(this.isEdit=!1)}},{key:"gettingExternalSsytem",value:function(){var e=this;this.rules.gettingExternalsystem().subscribe(function(t){console.log(t),e.externalsystem=t,e.filteredExternalSystems=e.externalsystem})}},{key:"onSlectionExternalSystem",value:function(e){var t=this;console.log("eve",e),this.sourcesystem=e,this.externalCreateSystemFiltered=this.externalsystem.filter(function(e){return e!==t.sourcesystem&&e!==t.desSystem}),this.rules.gettingTranslationData(this.sourcesystem).subscribe(function(e){console.log(e),e&&(t.sourceSysData=e,t.ruleMappDetails=t.sourceSysData.msgTransDetails,t.ruleConfig.sourceTranslationId=e.transId,t.ruleForm.get("sourceSystems").patchValue(t.sourceSysData),t.gettingoperationAndServiceFroSourceSystem(t.sourcesystem,e.messageType))})}},{key:"onSelectionOFMessageType",value:function(e){this.msgType=e.value}},{key:"gettingoperationAndServiceFroSourceSystem",value:function(e,t){var i=this;console.log("ssysName",e),this.rules.gettingoperationAndService(e,t,this.currentUser).subscribe(function(e){i.sourceOperation=e.OPERATION,i.sourceService=e.SERVICE,i.sourceDetails=e.MdmtSystemChannel[0].messageChannel,i.messageBasisIso=e.MdmtSystemService,console.log("sourceResp.MdmtSystemService",i.ruleMappDetails),console.log("this.arrRuleValidation",i.messageBasisIso);for(var t=0;t<=i.messageBasisIso.length;t++)i.messageBasisIso[t]&&(i.messageBasisIso[t].validationDetail=i.arrRuleValidation[0].validationDetail,i.messageBasisIso[t].validationMethod=i.arrRuleValidation[0].validationMethod)},function(e){console.log(e)})}},{key:"destinaltionSelection",value:function(e){var t=this;console.log("ev",e),this.destination=e,this.externalCreateSystemFiltered=this.externalsystem.filter(function(e){return e!==t.srcSystem&&e!==t.destination}),this.rules.gettingTranslationData(this.destination).subscribe(function(e){console.log(e),e&&(t.destinationSysData=e,t.ruleForm.get("destinationSystems").patchValue(t.destinationSysData),t.ruleConfig.targetTranslationId=e.transId)})}},{key:"ondestinationMsgType",value:function(e){console.log("ev",e.value),this.destiMsgType=e.value,this.operationAndservDstination(this.destination,this.destiMsgType)}},{key:"operationAndservDstination",value:function(e,t){var i=this;this.rules.gettingoperationAndService(e,t,this.currentUser).subscribe(function(e){console.log(e),i.destinationRespOperation=e.OPERATION,i.destinatioRespService=e.SERVICE},function(e){console.log(e)})}},{key:"onvalidateMsgType",value:function(e){this.gettingoperationSndservForValidation(this.validationData,e.value)}},{key:"gettingoperationSndservForValidation",value:function(e,t){var i=this;this.rules.gettingoperationAndService(e,t,this.currentUser).subscribe(function(e){console.log("valResp",e),e&&(i.valOperation=e.OPERATION,i.valService=e.SERVICE,i.valDeatils=e.MdmtSystemChannel[0].messageChannel,console.log("valDe",i.valDeatils),console.log(i.xmlRespData.length))},function(e){console.log(e)})}},{key:"submittingCreateRule",value:function(){var e=this;this.multipleValidation=this.validationSystems.value,this.ruleConfig.mdmtValidationSystemData=this.multipleValidation,this.ruleConfig.mdmtValidationSystemData.forEach(function(t){t.ruleId=e.ruleForm.get("ruleId").value}),this.sysRuleDetails.value.forEach(function(t){t.ruleId=e.ruleForm.get("ruleId").value}),console.log(this.arrRuleValidation),this.ruleConfig.sysRuleDetails=this.sysRuleDetails.value,console.log(this.ruleConfig),"UNAUTHORIZED"===this.ruleConfig.approvedStatus&&(this.ruleConfig.approvedStatus="U"),"AUTHORIZED"===this.ruleConfig.approvedStatus&&(this.ruleConfig.approvedStatus="A"),"OPEN"===this.ruleConfig.recordStatus&&(this.ruleConfig.recordStatus="O"),"CLOSE"===this.ruleConfig.recordStatus&&(this.ruleConfig.recordStatus="C"),"NO"===this.ruleConfig.approvedEver&&(this.ruleConfig.approvedEver="N"),"YES"===this.ruleConfig.approvedEver&&(this.ruleConfig.approvedEver="Y"),this.rules.editRuleConfig("update",this.ruleConfig,this.currentUser).subscribe(function(t){e.ruleConfig=t,console.log(e.ruleConfig),t&&(f().fire({text:"Record is Updated",icon:"success"}),e.formTouched=!e.ruleForm.touched,e.ModifyCreateRule=!0,e.submit=!1,e.showRuleValidation=!1,e.hideSubmit=!1)},function(e){f().fire({text:"Failed To Save the Record",icon:"error"})})}},{key:"onNext",value:function(){this.showRuleValidation=!0}},{key:"Previous",value:function(){this.showRuleValidation=!1}},{key:"fetchingIso",value:function(){var e=this;this.addsystem.fetchingIsoForTcp().subscribe(function(t){e.isoRespData=t,console.log(e.isoRespData),e.messageBasisIso=t.map(function(e){return e.messageKey})})}},{key:"fetchingXMl",value:function(){this.addsystem.gettinXMLmsgIncoming().subscribe(function(e){console.log(e)})}},{key:"onPrevoius",value:function(){this.showRuleValidation=!1}},{key:"onValidtion",value:function(e,t){var i=this;this.validationData=e,this.selectedExternalSystems[t]=e;var o=new Set(this.selectedExternalSystems);this.filteredExternalSystems=this.externalsystem.filter(function(e){return!o.has(e)}),this.rules.gettingTranslationData(this.validationData).subscribe(function(e){console.log(e),i.validationTransData=e,i.xmlRespData=i.validationTransData.msgTransDetails,e&&(i.ruleForm.get("validationSystems").at(t).get("service").patchValue(i.validationTransData.serviceName),i.ruleForm.get("validationSystems").at(t).get("operation").patchValue(i.validationTransData.operationName),i.ruleForm.get("validationSystems").at(t).get("messageType").patchValue(i.validationTransData.messageType),i.gettingoperationSndservForValidation(i.validationData,e.messageType))})}},{key:"onGetValidtion",value:function(e,t){var i=this,o=e;this.rules.gettingTranslationData(o).subscribe(function(e){console.log(e),e&&(i.validationTransData=e,i.ruleForm.get("validationSystems").at(t).get("service").patchValue(i.validationTransData.serviceName),i.ruleForm.get("validationSystems").at(t).get("operation").patchValue(i.validationTransData.operationName),i.ruleForm.get("validationSystems").at(t).get("messageType").patchValue(i.validationTransData.messageType),i.gettingoperationSndservForValidation(o,e.messageType))})}},{key:"onSubmitofValidtaion",value:function(){}},{key:"onAuthOfRule",value:function(){var e=this;console.log(this.currentUser),f().fire({text:"You are trying to Authorize record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(function(t){console.log("this is reopen ",t),!0===t.isConfirmed&&(e.ruleConfig.creatorId==e.currentUser?f().fire({text:"Maker cannot authorize the record!"}):(e.ruleConfig.mdmtValidationSystemData=e.multipleValidation,e.ruleConfig.mdmtValidationSystemData.forEach(function(t){t.ruleId=e.ruleConfig.ruleId}),e.arrRuleValidation.forEach(function(t){t.ruleId=e.ruleConfig.ruleId}),console.log(e.ruleConfig),e.ruleConfig.sysRuleDetails=e.arrRuleValidation,e.ruleConfig.approverId=e.currentUser,"UNAUTHORIZED"===e.ruleConfig.approvedStatus&&(e.ruleConfig.approvedStatus="U"),"AUTHORIZED"===e.ruleConfig.approvedStatus&&(e.ruleConfig.approvedStatus="A"),"OPEN"===e.ruleConfig.recordStatus&&(e.ruleConfig.recordStatus="O"),"CLOSE"===e.ruleConfig.recordStatus&&(e.ruleConfig.recordStatus="C"),"NO"===e.ruleConfig.approvedEver&&(e.ruleConfig.approvedEver="N"),"YES"===e.ruleConfig.approvedEver&&(e.ruleConfig.approvedEver="Y"),console.log(e.ruleConfig),e.rules.editRuleConfig("auth",e.ruleConfig,e.currentUser).subscribe(function(t){console.log(t),t&&(e.ruleConfig=t,e.authorizeDone=!0,f().fire({text:"Record is Authorized"}))},function(e){f().fire({text:"Failed To Authorize"})})))})}},{key:"onCloseOfRule",value:function(){var e=this;f().fire({text:"You are trying to close record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(function(t){console.log("this is reopen ",t),console.log(e.multipleValidation),console.log(e.arrRuleValidation),console.log(e.currentUser),!0===t.isConfirmed&&(e.ruleConfig.mdmtValidationSystemData=e.multipleValidation,e.ruleConfig.mdmtValidationSystemData.forEach(function(t){t.ruleId=e.ruleConfig.ruleId}),console.log(e.ruleConfig),e.arrRuleValidation.forEach(function(t){t.ruleId=e.ruleConfig.ruleId}),console.log(e.arrRuleValidation),e.ruleConfig.sysRuleDetails=e.arrRuleValidation,console.log(e.ruleConfig),"NO"==e.ruleConfig.approvedEver?e.ruleConfig.approvedEver="N":"YES"==e.ruleConfig.approvedEver&&(e.ruleConfig.approvedEver="Y"),"UNAUTHORIZED"==e.ruleConfig.approvedStatus?e.ruleConfig.approvedStatus="U":"AUTHORIZED"==e.ruleConfig.approvedStatus&&(e.ruleConfig.approvedStatus="A"),"OPEN"==e.ruleConfig.recordStatus?e.ruleConfig.recordStatus="O":"CLOSED"==e.ruleConfig.recordStatus&&(e.ruleConfig.recordStatus="C"),console.log(e.ruleConfig),console.log(e.reopenBtn),e.rules.editRuleConfig("close",e.ruleConfig,e.currentUser).subscribe(function(t){console.log(t),t&&(e.ruleConfig=t,e.editBtn=!0,e.authBtn=!0,e.deleted=!1,e.reopenBtn=!1,f().fire({text:"Record is Closed"}))},function(e){f().fire({text:"Failed to close the Record"})}))})}},{key:"next",value:function(){this.showRuleValidation=!0,console.log(this.ruleForm.value)}},{key:"onOpenRule",value:function(){var e=this;f().fire({text:"You are trying to re-open record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(function(t){console.log("this is reopen ",t),console.log(e.multipleValidation),console.log(e.arrRuleValidation),console.log(e.ruleConfig),console.log(e.currentUser),!0===t.isConfirmed&&(e.ruleConfig.mdmtValidationSystemData=e.multipleValidation,e.ruleConfig.mdmtValidationSystemData.forEach(function(t){t.ruleId=e.ruleConfig.ruleId}),e.arrRuleValidation.forEach(function(t){t.ruleId=e.ruleConfig.ruleId}),console.log(e.arrRuleValidation),e.ruleConfig.sysRuleDetails=e.arrRuleValidation,console.log(e.ruleConfig),"NO"==e.ruleConfig.approvedEver?e.ruleConfig.approvedEver="N":"YES"==e.ruleConfig.approvedEver&&(e.ruleConfig.approvedEver="Y"),"UNAUTHORIZED"==e.ruleConfig.approvedStatus?e.ruleConfig.approvedStatus="U":"AUTHORIZED"==e.ruleConfig.approvedStatus&&(e.ruleConfig.approvedStatus="A"),"OPEN"==e.ruleConfig.recordStatus?e.ruleConfig.recordStatus="O":"CLOSED"==e.ruleConfig.recordStatus&&(e.ruleConfig.recordStatus="C"),console.log(e.ruleConfig),e.rules.editRuleConfig("open",e.ruleConfig,e.currentUser).subscribe(function(t){console.log(t),t&&(e.ruleConfig=t,e.authBtnHide=!1,e.editBtn=!1,e.authBtn=!1,f().fire({text:"Record is Reopened"}))},function(e){f().fire({text:"Failed to open the Record"})}))})}},{key:"deleteRule",value:function(){var e=this;console.log(this.ruleConfig),console.log(this.arrRuleValidation),f().fire({text:"You are trying to delete record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(function(t){console.log("this is reopen ",t),!0===t.isConfirmed&&(e.ruleConfig.mdmtValidationSystemData=e.multipleValidation,e.ruleConfig.mdmtValidationSystemData.forEach(function(t){t.ruleId=e.ruleConfig.ruleId,console.log(e.ruleConfig.mdmtValidationSystemData)}),console.log(e.arrRuleValidation),e.arrRuleValidation.forEach(function(t){t.ruleId=e.ruleConfig.ruleId}),console.log(e.arrRuleValidation),e.ruleConfig.sysRuleDetails=e.arrRuleValidation,console.log(e.ruleConfig),e.rules.onDeleteRuleCongif(e.ruleConfig.sysRuleId,e.currentUser).subscribe(function(t){t?(e.deleted=!0,e.editBtn=!0,e.authBtn=!0,e.closeBtn=!0,f().fire({text:"Record is Deleted",icon:"success"}).then(function(t){t&&e.router.navigateByUrl("/createrule/list")})):f().fire("Failed to delete the reocrd")}))})}},{key:"openPopUp",value:function(){c(".ddTrigger").click(function(){c(".ddParent").removeClass("actDD"),c(this).parents("li").siblings().find(".ddParent").removeClass("actDD"),c(this).parents(".ddParent").toggleClass("actDD"),c(this).removeClass("actUnread")})}},{key:"closeAll",value:function(){c(document).on("click",function(e){var t=c(".ddParent");t!==e.target&&!t.has(e.target).length&&c(".ddParent").removeClass("actDD")})}},{key:"close",value:function(){c(".ddCloseTrigger").click(function(){c(".ddParent").removeClass("actDD")})}},{key:"handleHttpMessageKeyChange",value:function(e,t){this.selectedHttpMessageKeyValues[t]=e.target.value}},{key:"handleTcpMessageKeyChange",value:function(e,t){this.selectedTcpMessageKeyValues[t]=e.target.value}},{key:"handleDBMessageKeyChange",value:function(e,t){this.selectedDBMessageKeyValues[t]=e.target.value}},{key:"shouldHideHttpMessageKeyOption",value:function(e){return this.selectedHttpMessageKeyValues.includes(e)}},{key:"shouldHideTcpMessageKeyOption",value:function(e){return this.selectedTcpMessageKeyValues.includes(e)}},{key:"shouldHideDBMessageKeyOption",value:function(e){return this.selectedDBMessageKeyValues.includes(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(m.Y36(m.sBO),m.Y36(s.gz),m.Y36(ke.N),m.Y36(u.I),m.Y36(_e.Z),m.Y36(v.Q),m.Y36(Z.k),m.Y36(s.F0),m.Y36(d.qu))},e.\u0275cmp=m.Xpm({type:e,selectors:[["npr-rule-details2"]],decls:107,vars:16,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],["class","formStyle","novalidate","",3,"formGroup",4,"ngIf"],["class","col-lg-12",4,"ngIf"],[1,"dbCardStyle"],[1,"row"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"csCardStyle"],[1,"row","g-2","align-items-center"],[1,"col-auto"],[1,"csCardStyleIcon","csCardStyleIconBg1"],[1,"fa","fa-edit","faClass"],[1,"col"],[1,"csCardStyleText"],[1,"csCardStyleIcon","csCardStyleIconBg2"],["src","assets/images/time-stamp-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg3"],["src","assets/images/record-status-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg4"],[1,"fa","fa-check-square-o","faClassChecker"],[1,"csCardStyleIcon","csCardStyleIconBg5"],["src","assets/images/checker-time-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg6"],["src","assets/images/first-auth-icon.svg","alt","..."],[1,"csCardStyleIcon","csCardStyleIconBg7"],["src","assets/images/authorize.svg","alt","...",1,"modImage"],["src","assets/images/modification.svg","alt","...",1,"modImage"],["novalidate","",1,"formStyle",3,"formGroup"],[3,"disabled"],["class","dbCardStyle",4,"ngIf"],[1,"row","gy-4"],[1,"col-lg-4"],[1,"formLbl"],[1,"colorRed"],["type","text","id","ruleId","name","ruleId","formControlName","ruleId","placeholder","Rule ID","readonly","",1,"form-control"],["type","text","id","ruleName","name","ruleName","placeholder","Rule Name","formControlName","ruleName","readonly","",1,"form-control"],["formGroupName","sourceSystems",1,"col-lg-12"],[1,"formContent"],[1,"titleStyle","mb-3"],[1,"col-lg-3"],["for","sourceSystem",1,"formLbl"],["formControlName","sourceSystem",1,"form-select",3,"items","change"],["for","messageType",1,"formLbl"],["id","messageType","aria-label","Default select example","formControlName","messageType","disabled","",1,"form-select"],["value","A"],["value","I"],["value","O"],["for","operationName",1,"formLbl"],["id","operationName","type","text","formControlName","operationName","placeholder","Operation Name",1,"form-control",3,"readonly"],["for","serviceName",1,"formLbl"],["type","text","id","serviceName","formControlName","serviceName","placeholder","Service Name",1,"form-control",3,"readonly"],["formGroupName","destinationSystems",1,"col-lg-12"],["for","destinationSystem",1,"formLbl"],["formControlName","destinationSystem",1,"form-select",3,"items","change"],["id","destinationSystem","aria-label","Default select example","formControlName","messageType",1,"form-select"],["hidden","","value","","disabled","","selected",""],["id","serviceName","type","text","formControlName","serviceName","placeholder","Service Name",1,"form-control",3,"readonly"],[1,"col-lg-12"],["formArrayName","validationSystems",1,"formContent","border-bottom-0","pb-0"],[4,"ngFor","ngForOf"],[3,"formGroupName"],[1,"row","gy-4","align-items-center","mt-1"],[1,"col-lg"],["class","formLbl",4,"ngIf"],["id","outlineNgSelect","id","systemOne","formControlName","validationSystem",1,"form-select",3,"items","readonly","change"],["id","messageType","formControlName","messageType","aria-label","Default select example","disabled","",1,"form-select"],["id","operationName","type","text","formControlName","operation","placeholder","Operation Name",1,"form-control",3,"readonly"],["id","serviceName","type","text","formControlName","service","placeholder","Service Name",1,"form-control",3,"readonly"],[1,"col-auto",3,"ngStyle"],["style","cursor: pointer;",3,"click",4,"ngIf"],[2,"cursor","pointer",3,"click"],[1,"ddIcon"],["src","assets/images/delete-icon.svg","alt","..."],[1,"addIcon","primarybg",2,"cursor","pointer",3,"click"],["src","assets/images/plus-icon.svg","alt","..."],[1,"row","g-3","pb-3","justify-content-end","pt-3"],["class","col-auto",4,"ngIf"],["class","col-auto",3,"hidden",4,"ngIf"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"disabled","hidden","click"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],[1,"btn","smBtn","minWdSmBtn","btnUpdate",3,"hidden","click"],[1,"col-auto",3,"hidden"],[1,"btn","smBtn","minWdSmBtn","btnAuth",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"h2",2),m._uU(3,"Edit Rule"),m.qZA(),m.qZA(),m.YNc(4,He,3,3,"form",3),m._UZ(5,"br"),m.YNc(6,We,13,9,"div",4),m.TgZ(7,"div",5),m.TgZ(8,"div",6),m.TgZ(9,"div",7),m.TgZ(10,"div",8),m.TgZ(11,"div",9),m.TgZ(12,"div",10),m.TgZ(13,"div",11),m._UZ(14,"i",12),m.qZA(),m.qZA(),m.TgZ(15,"div",13),m.TgZ(16,"div",14),m.TgZ(17,"h2"),m._uU(18,"Maker"),m.qZA(),m.TgZ(19,"p"),m._uU(20),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(21,"div",7),m.TgZ(22,"div",8),m.TgZ(23,"div",9),m.TgZ(24,"div",10),m.TgZ(25,"div",15),m._UZ(26,"img",16),m.qZA(),m.qZA(),m.TgZ(27,"div",13),m.TgZ(28,"div",14),m.TgZ(29,"h2"),m._uU(30,"Maker Time Stamp"),m.qZA(),m.TgZ(31,"p"),m._uU(32),m.ALo(33,"date"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(34,"div",7),m.TgZ(35,"div",8),m.TgZ(36,"div",9),m.TgZ(37,"div",10),m.TgZ(38,"div",17),m._UZ(39,"img",18),m.qZA(),m.qZA(),m.TgZ(40,"div",13),m.TgZ(41,"div",14),m.TgZ(42,"h2"),m._uU(43,"Record Status"),m.qZA(),m.TgZ(44,"p"),m._uU(45),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(46,"div",7),m.TgZ(47,"div",8),m.TgZ(48,"div",9),m.TgZ(49,"div",10),m.TgZ(50,"div",19),m._UZ(51,"i",20),m.qZA(),m.qZA(),m.TgZ(52,"div",13),m.TgZ(53,"div",14),m.TgZ(54,"h2"),m._uU(55,"Checker"),m.qZA(),m.TgZ(56,"p"),m._uU(57),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(58,"div",7),m.TgZ(59,"div",8),m.TgZ(60,"div",9),m.TgZ(61,"div",10),m.TgZ(62,"div",21),m._UZ(63,"img",22),m.qZA(),m.qZA(),m.TgZ(64,"div",13),m.TgZ(65,"div",14),m.TgZ(66,"h2"),m._uU(67,"Checker Time Stamp"),m.qZA(),m.TgZ(68,"p"),m._uU(69),m.ALo(70,"date"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(71,"div",7),m.TgZ(72,"div",8),m.TgZ(73,"div",9),m.TgZ(74,"div",10),m.TgZ(75,"div",23),m._UZ(76,"img",24),m.qZA(),m.qZA(),m.TgZ(77,"div",13),m.TgZ(78,"div",14),m.TgZ(79,"h2"),m._uU(80,"First Time Auth"),m.qZA(),m.TgZ(81,"p"),m._uU(82),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(83,"div",7),m.TgZ(84,"div",8),m.TgZ(85,"div",9),m.TgZ(86,"div",10),m.TgZ(87,"div",25),m._UZ(88,"img",26),m.qZA(),m.qZA(),m.TgZ(89,"div",13),m.TgZ(90,"div",14),m.TgZ(91,"h2"),m._uU(92,"Auth Status"),m.qZA(),m.TgZ(93,"p"),m._uU(94),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(95,"div",7),m.TgZ(96,"div",8),m.TgZ(97,"div",9),m.TgZ(98,"div",10),m.TgZ(99,"div",25),m._UZ(100,"img",27),m.qZA(),m.qZA(),m.TgZ(101,"div",13),m.TgZ(102,"div",14),m.TgZ(103,"h2"),m._uU(104,"Modification Number"),m.qZA(),m.TgZ(105,"p"),m._uU(106),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e&&(m.xp6(4),m.Q6J("ngIf",t.ruleForm),m.xp6(2),m.Q6J("ngIf",!t.showRuleValidation),m.xp6(14),m.Oqu(t.ruleConfig.creatorId),m.xp6(12),m.Oqu(m.xi3(33,10,t.ruleConfig.createdTime,"MM/dd/yyyy, h:mm a")),m.xp6(13),m.Oqu("O"==t.ruleConfig.recordStatus?"OPEN":"C"==t.ruleConfig.recordStatus?"CLOSED":t.ruleConfig.recordStatus),m.xp6(12),m.Oqu(t.ruleConfig.approverId),m.xp6(12),m.Oqu(m.xi3(70,13,t.ruleConfig.approvedTime,"MM/dd/yyyy, h:mm a")),m.xp6(13),m.Oqu("N"==t.ruleConfig.approvedEver?"NO":"Y"==t.ruleConfig.approvedEver?"YES":t.ruleConfig.approvedEver),m.xp6(12),m.Oqu("N"==t.ruleConfig.approvedStatus||"U"==t.ruleConfig.approvedStatus?"UNAUTHORIZED":"Y"==t.ruleConfig.approvedStatus||"A"==t.ruleConfig.approvedStatus?"AUTHORIZED":t.ruleConfig.approvedStatus),m.xp6(12),m.Oqu(t.ruleConfig.versionNo))},directives:[a.O5,d._Y,d.JL,d.sg,d.Fj,d.JJ,d.u,d.x0,l.w9,d.EJ,d.YN,d.Kr,d.CE,a.sg,a.PC,s.rH],pipes:[a.uU],styles:[".td-highlight[_ngcontent-%COMP%]{color:#000!important;font-size:12px;text-transform:uppercase;letter-spacing:1px;padding:15px 3px 0 12px}table.tableStyle[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px!important;white-space:nowrap}table.tableStyle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:2px!important}.readonlyTrue[_ngcontent-%COMP%]{pointer-events:none!important}.readonlyFalse[_ngcontent-%COMP%]{pointer-events:visible!important;cursor:pointer}"]}),e}(),et=n(function e(){i(this,e)}),tt=n(function e(){i(this,e)}),it=n(function e(){i(this,e)}),ot=r(3118),nt=r(91841),rt=r(17988),at=function(){return["/createrule/create"]},lt=function(){return["active"]};function st(e,t){if(1&e&&(m.TgZ(0,"div",6),m.TgZ(1,"a",11),m._uU(2),m.qZA(),m.qZA()),2&e){var i=m.oxw();m.xp6(1),m.Q6J("routerLink",m.DdM(3,at))("routerLinkActive",m.DdM(4,lt)),m.xp6(1),m.Oqu(i.roleCodes.new.labelDescription)}}function ut(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"button",19),m.NdJ("click",function(){m.CHM(i);var e=m.oxw().$implicit;return m.oxw(2).close(e)}),m._UZ(1,"img",20),m.qZA()}}function dt(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"button",21),m.NdJ("click",function(){m.CHM(i);var e=m.oxw().$implicit;return m.oxw(2).open(e)}),m._UZ(1,"img",22),m.qZA()}}function ct(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"button",23),m.NdJ("click",function(){m.CHM(i);var e=m.oxw().$implicit;return m.oxw(2).delete(e)}),m._UZ(1,"img",24),m.qZA()}}function gt(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"tr"),m.TgZ(1,"td"),m.TgZ(2,"a",13),m.NdJ("click",function(){var e=m.CHM(i).$implicit;return m.oxw(2).editRule(e)}),m._uU(3),m.qZA(),m.qZA(),m.TgZ(4,"td"),m._uU(5),m.qZA(),m.TgZ(6,"td"),m._uU(7),m.qZA(),m.TgZ(8,"td"),m._uU(9),m.qZA(),m.TgZ(10,"td"),m._uU(11),m.ALo(12,"date"),m.qZA(),m.TgZ(13,"td"),m.TgZ(14,"button",14),m.NdJ("click",function(){var e=m.CHM(i).$implicit;return m.oxw(2).auth(e)}),m._UZ(15,"img",15),m.qZA(),m.YNc(16,ut,2,0,"button",16),m.YNc(17,dt,2,0,"button",17),m.YNc(18,ct,2,0,"button",18),m.qZA(),m.qZA()}if(2&e){var o=t.$implicit;m.xp6(3),m.hij(" ",o.ruleId,""),m.xp6(2),m.hij(" ",o.ruleName,""),m.xp6(2),m.Oqu(o.approvedStatus),m.xp6(2),m.Oqu(o.recordStatus),m.xp6(2),m.Oqu(m.xi3(12,9,o.createdTime,"medium")),m.xp6(3),m.Q6J("disabled",!("U"==o.approvedStatus||"UNAUTHORIZED"==o.approvedStatus||"Unauthorized"==o.approvedStatus)),m.xp6(2),m.Q6J("ngIf",!("O"!=o.recordStatus&&"Open"!=o.recordStatus&&"OPEN"!=o.recordStatus||"Y"!=o.approvedEver&&"YES"!=o.approvedEver)),m.xp6(1),m.Q6J("ngIf",!("CLOSED"!=o.recordStatus&&"Close"!=o.recordStatus&&"c"!=o.recordStatus&&"C"!=o.recordStatus||"YES"!=o.approvedEver&&"Y"!=o.approvedEver)),m.xp6(1),m.Q6J("ngIf","N"==o.approvedEver||"NO"==o.approvedEver)}}function ft(e,t){if(1&e&&(m.TgZ(0,"tbody"),m.YNc(1,gt,19,12,"tr",12),m.qZA()),2&e){var i=m.oxw();m.xp6(1),m.Q6J("ngForOf",i.rulesData)}}function pt(e,t){1&e&&(m.TgZ(0,"tbody"),m.TgZ(1,"tr"),m.TgZ(2,"td",25),m._uU(3,"No data!"),m.qZA(),m.qZA(),m.qZA())}function mt(e,t){1&e&&(m.ynx(0),m.TgZ(1,"div",26),m.TgZ(2,"span",27),m._uU(3,"Please wait... "),m._UZ(4,"span",28),m.qZA(),m.qZA(),m.BQk())}var vt=function(){return["/dashboard"]},Zt=function(){var t=function(){function t(e,o,n,r,a,l,s){i(this,t),this.ruleService=e,this.roleService=o,this.toastService=n,this.router=r,this.addSystem=a,this.cdr=l,this.http=s,this.rulesData=[],this.dtTrigger=new p.xQ,this.dtOptions={},this.isLoading=!1,this.roleCodes=new Re.yv,this.ruleDto=new yt,this.ruleConfig=new ht,this.statusArr=["Authorized","Unauthorized","Open","Close"],this.API_URL=ot.$.baseURL}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.dtOptions={pagingType:"full_numbers",pageLength:5,serverSide:!0,columnDefs:[{type:"date",targets:[4]}],order:[[4,"desc"]],lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]],ajax:function(i,o){i.minNumber=i.start+1,i.maxNumber=i.start+i.length,console.log(i.minNumber,i.maxNumber);var n=Math.floor(i.minNumber/i.length);t.http.get("".concat(t.API_URL,"/ruleConfig/getRuleConfigSummary?pageNo=").concat(n,"&pageSize=").concat(i.length,"&search=").concat(i.search.value)).subscribe(function(i){console.log(i);var n,r=e(i.result);try{var a=function(){var e=n.value;e.recordStatus=t.statusArr.find(function(t){return t.startsWith(e.recordStatus)}),e.approvedStatus=t.statusArr.find(function(t){return t.startsWith(e.approvedStatus)})};for(r.s();!(n=r.n()).done;)a()}catch(l){r.e(l)}finally{r.f()}t.totalPages=i.totalNoOfPages,t.totalRecords=i.totalRecords,t.rulesData=i.result,t.isLoading=!1,t.cdr.markForCheck(),o({recordsTotal:i.totalRecords,recordsFiltered:i.totalRecords,data:[]})})}},this.currentUser=localStorage.getItem("userFromLogin"),this.roleService.fetchScreenPermissions("Create Rule"),this.roleService.screenLabelList.subscribe(function(e){return t.roleCodes=e}),console.log(this.roleCodes)}},{key:"fetchRules",value:function(){var t=this;this.isLoading=!0,this.ruleService.fetchingRules().subscribe(function(i){console.log(i);var o,n=e(i.result);try{var r=function(){var e=o.value;e.approvedStatus=t.statusArr.find(function(t){return t.startsWith(e.approvedStatus)}),e.recordStatus=t.statusArr.find(function(t){return t.startsWith(e.recordStatus)})};for(n.s();!(o=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}t.rulesData=i.result,t.isLoading=!1,t.cdr.markForCheck(),t.dtTrigger.next()},function(e){console.error("Error!")})}},{key:"editRule",value:function(e){console.log(e),this.router.navigate(["/createrule/edit",e.ruleId])}},{key:"ngOnDestroy",value:function(){this.dtTrigger.unsubscribe()}},{key:"close",value:function(e){var t=this;console.log(e),this.ruleConfig=e,this.arrRuleValidation=[e],this.multipleValidation=[],f().fire({text:"You are trying to close record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(function(i){console.log("this is reopen ",i),console.log(t.multipleValidation),console.log(t.arrRuleValidation),console.log(t.ruleConfig),console.log(t.currentUser),!0===i.isConfirmed&&t.ruleService.editRuleConfig("close",e,t.currentUser).subscribe(function(e){console.log(e),e&&(t.ruleConfig=e,t.editBtn=!0,t.authBtn=!0,t.deleted=!1,t.reopenBtn=!1,f().fire({text:"Record is Closed"}).then(function(){return window.location.reload()}))},function(e){f().fire({text:"Failed to close the Record"})})})}},{key:"open",value:function(e){var t=this;this.ruleConfig=e,this.arrRuleValidation=[e],this.multipleValidation=[],f().fire({text:"You are trying to re-open record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(function(i){console.log("this is reopen ",i),console.log(t.multipleValidation),console.log(t.arrRuleValidation),console.log(t.ruleConfig),console.log(t.currentUser),!0===i.isConfirmed&&t.ruleService.editRuleConfig("open",e,t.currentUser).subscribe(function(e){console.log(e),e&&(t.ruleConfig=e,t.authBtnHide=!1,t.editBtn=!1,t.authBtn=!1,f().fire({text:"Record is Reopened"}).then(function(){return window.location.reload()}))},function(e){f().fire({text:"Failed to open the Record"})})})}},{key:"delete",value:function(e){var t=this;console.log(e),this.ruleConfig=e,this.arrRuleValidation=[e],this.multipleValidation=[],f().fire({text:"You are trying to delete record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3e54b8",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info",iconColor:"#d33"}).then(function(e){console.log("this is reopen ",e),!0===e.isConfirmed&&(t.ruleConfig.mdmtValidationSystemData=t.multipleValidation,t.ruleConfig.mdmtValidationSystemData.forEach(function(e){e.ruleId=t.ruleConfig.ruleId}),t.arrRuleValidation.forEach(function(e){e.ruleId=t.ruleConfig.ruleId}),console.log(t.arrRuleValidation),t.ruleConfig.sysRuleDetails=t.arrRuleValidation,console.log(t.ruleConfig),t.ruleService.onDeleteRuleCongif(t.ruleConfig.sysRuleId,t.currentUser).subscribe(function(e){e?(t.deleted=!0,t.editBtn=!0,t.authBtn=!0,t.closeBtn=!0,f().fire({text:"Record is Deleted",icon:"success"}).then(function(){return window.location.reload()})):f().fire("Failed to delete the reocrd")}))})}},{key:"auth",value:function(e){var t=this;this.ruleConfig=e,console.log(this.ruleConfig.creatorId),this.arrRuleValidation=[e],this.multipleValidation=[],console.log(this.currentUser),f().fire({text:"You are trying to Authorize record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(function(i){console.log("this is reopen ",i),!0===i.isConfirmed&&(t.ruleConfig.creatorId==t.currentUser?f().fire({text:"Maker cannot authorize the record!"}):("UNAUTHORIZED"===t.ruleConfig.approvedStatus&&(t.ruleConfig.approvedStatus="U"),"AUTHORIZED"===t.ruleConfig.approvedStatus&&(t.ruleConfig.approvedStatus="A"),"OPEN"===t.ruleConfig.recordStatus&&(t.ruleConfig.recordStatus="O"),"CLOSE"===t.ruleConfig.recordStatus&&(t.ruleConfig.recordStatus="C"),"NO"===t.ruleConfig.approvedEver&&(t.ruleConfig.approvedEver="N"),"YES"===t.ruleConfig.approvedEver&&(t.ruleConfig.approvedEver="Y"),console.log(t.ruleConfig),t.ruleService.editRuleConfig("auth",e,t.currentUser).subscribe(function(e){console.log(e),e&&(t.ruleConfig=e,t.authorizeDone=!0,f().fire({text:"Record is Authorized"}).then(function(){return window.location.reload()}))},function(e){f().fire({text:"Failed To Authorize"})})))})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(m.Y36(v.Q),m.Y36(ke.N),m.Y36(Z.k),m.Y36(s.F0),m.Y36(_e.Z),m.Y36(m.sBO),m.Y36(nt.eN))},t.\u0275cmp=m.Xpm({type:t,selectors:[["npr-rule-list"]],decls:29,vars:7,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"dbCardStyle"],[1,"row","g-3","pb-3","justify-content-end"],["class","col-auto",4,"ngIf"],[1,"col-auto"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],[1,"table-responsive"],["datatable","","id","dbTable1",1,"dataTable","table","tableStyle","nowrap","vAlignMdl",2,"width","100%",3,"dtOptions"],[4,"ngIf"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"routerLink","routerLinkActive"],[4,"ngFor","ngForOf"],[1,"primaryColor",2,"cursor","pointer",3,"click"],["title","Authorize",1,"btn",2,"color","red",3,"disabled","click"],["src","assets/images/authorize.svg","alt","Authorize"],["class","btn","style","color: red","title","Close",3,"click",4,"ngIf"],["class","btn","style","color: red","title","Reopen",3,"click",4,"ngIf"],["class","btn","style","color: red","title","Delete",3,"click",4,"ngIf"],["title","Close",1,"btn",2,"color","red",3,"click"],["src","assets/images/CROSS1.svg","alt","..."],["title","Reopen",1,"btn",2,"color","red",3,"click"],["src","assets/images/open.svg","alt","..."],["title","Delete",1,"btn",2,"color","red",3,"click"],["src","assets/images/delete.svg","alt","..."],["colspan","3",1,"no-data-available"],[1,"loading-page-center"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"h2",2),m._uU(3,"Create Rule"),m.qZA(),m.qZA(),m.TgZ(4,"div",3),m.TgZ(5,"div",4),m.YNc(6,st,3,5,"div",5),m.TgZ(7,"div",6),m.TgZ(8,"a",7),m._uU(9,"Exit"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(10,"div",8),m.TgZ(11,"table",9),m.TgZ(12,"thead"),m.TgZ(13,"tr"),m.TgZ(14,"th"),m._uU(15,"Rule Id"),m.qZA(),m.TgZ(16,"th"),m._uU(17,"Rule Name"),m.qZA(),m.TgZ(18,"th"),m._uU(19,"Auth Status"),m.qZA(),m.TgZ(20,"th"),m._uU(21,"Record Status"),m.qZA(),m.TgZ(22,"th"),m._uU(23,"Date"),m.qZA(),m.TgZ(24,"th"),m._uU(25,"Action"),m.qZA(),m.qZA(),m.qZA(),m.YNc(26,ft,2,1,"tbody",10),m.YNc(27,pt,4,0,"tbody",10),m.qZA(),m.qZA(),m.YNc(28,mt,5,0,"ng-container",10),m.qZA(),m.qZA()),2&e&&(m.xp6(6),m.Q6J("ngIf",t.roleCodes.new),m.xp6(2),m.Q6J("routerLink",m.DdM(6,vt)),m.xp6(3),m.Q6J("dtOptions",t.dtOptions),m.xp6(15),m.Q6J("ngIf",0!=(null==t.rulesData?null:t.rulesData.length)),m.xp6(1),m.Q6J("ngIf",0==(null==t.rulesData?null:t.rulesData.length)),m.xp6(1),m.Q6J("ngIf",t.isLoading))},directives:[a.O5,s.yS,rt.G,s.Od,a.sg],pipes:[a.uU],styles:[""]}),t}(),ht=n(function e(){i(this,e)}),yt=n(function e(){i(this,e)}),Tt=[{path:"list",component:Zt},{path:"create",component:Oe,canDeactivate:[u.I]},{path:"edit/:id",component:Xe,canDeactivate:[u.I]}],Ct=function(){var e=n(function e(){i(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.oAB({type:e}),e.\u0275inj=m.cJS({imports:[[s.Bz.forChild(Tt)],s.Bz]}),e}(),St=function(){var e=n(function e(){i(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.oAB({type:e}),e.\u0275inj=m.cJS({imports:[[a.ez,Ct,d.u5,d.UX,rt.T,l.A0]]}),e}()}}])}();