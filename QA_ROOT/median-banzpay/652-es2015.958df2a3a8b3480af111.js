"use strict";(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[652],{17988:function(e,s,t){t.d(s,{G:function(){return r},T:function(){return c}});var o=t(37716),r=function(){function e(e,s,t){this.el=e,this.vcr=s,this.renderer=t,this.dtOptions={}}return e.prototype.ngOnInit=function(){var e=this;this.dtTrigger?this.dtTrigger.subscribe(function(s){e.displayTable(s)}):this.displayTable(null)},e.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},e.prototype.displayTable=function(e){var s=this;e&&(this.dtOptions=e),this.dtInstance=new Promise(function(e,t){Promise.resolve(s.dtOptions).then(function(o){0===Object.keys(o).length&&0===$("tbody tr",s.el.nativeElement).length?t("Both the table and dtOptions cannot be empty"):setTimeout(function(){var t={rowCallback:function(e,t,r){if(o.columns){var i=o.columns;s.applyNgPipeTransform(e,i),s.applyNgRefTemplate(e,i,t)}o.rowCallback&&o.rowCallback(e,t,r)}};t=Object.assign({},o,t),s.dt=$(s.el.nativeElement).DataTable(t),e(s.dt)})})})},e.prototype.applyNgPipeTransform=function(e,s){s.filter(function(e){return e.ngPipeInstance&&!e.ngTemplateRef}).forEach(function(t){var o=t.ngPipeInstance,r=s.findIndex(function(e){return e.data===t.data}),i=e.childNodes.item(r),c=$(i).text(),n=o.transform(c);$(i).text(n)})},e.prototype.applyNgRefTemplate=function(e,s,t){var o=this;s.filter(function(e){return e.ngTemplateRef&&!e.ngPipeInstance}).forEach(function(r){var i=r.ngTemplateRef,c=i.ref,n=i.context,l=s.findIndex(function(e){return e.data===r.data}),a=e.childNodes.item(l);$(a).html("");var p=Object.assign({},n,null==n?void 0:n.userData,{adtData:t}),h=o.vcr.createEmbeddedView(c,p);o.renderer.appendChild(a,h.rootNodes[0])})},e.\u0275fac=function(s){return new(s||e)(o.Y36(o.SBq),o.Y36(o.s_b),o.Y36(o.Qsj))},e.\u0275dir=o.lG2({type:e,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),e}(),i=t(38583),c=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez]]}),e}()},31443:function(e,s,t){t.d(s,{k:function(){return i}});var o=t(37716),r=t(80463);let i=(()=>{class e{constructor(e){this.iziToast=e}successMessage(e,s){this.iziToast.success({title:e,message:s,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}errorMessage(e,s){this.iziToast.error({title:e,message:s,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}infoMessage(e,s){this.iziToast.info({title:e,message:s,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}}return e.\u0275fac=function(s){return new(s||e)(o.LFG(r.I))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},55652:function(e,s,t){t.r(s),t.d(s,{ProcessAccountClosureModule:function(){return v}});var o=t(38583),r=t(39895);class i{}var c=t(79765),n=t(37716),l=t(3118),a=t(49457),p=t(84487),h=t(91841);const g=l.$.acctCloserUrl;let u=(()=>{class e{constructor(e){this.http=e}gettingAllProcessedRecord(e){return console.log(e),this.http.get(`${g}/api2/getAllProcessedRecordsForBulkAndSingle/${e}`)}approveRecord(e,s,t,o,r,i){return this.http.get(`${g}/medAccount/closeAccount/${e}/${s}/${t}/${o}/${r}/${i}`)}approveRecordForSingle(e,s,t,o,r){return console.log(e,t,o,s),this.http.get(`${g}/medAccount/closeAccountSingle/${e}/${s}/${t}/${o}/${r}`)}exportAsExcel(e,s){console.log(s),console.log(e);const t=p.utils.json_to_sheet(e);t.blankRows=!1;const o=p.write({Sheets:{data:t},SheetNames:["data"]},{bookType:"xlsx",type:"array"});this.saveAsExcelSingle(o,s)}saveAsExcelSingle(e,s){const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});a.saveAs(t,s+"_export_"+(new Date).getTime()+".xlsx")}onClickofViewReport(e,s){return this.http.get(`${g}/file/viewReport/${e}/${s}`)}onClickofViewReportSingle(e,s,t,o){return this.http.get(`${g}/api2/viewReportForSingleAcc/${e}/${s}/${t}/${o}`)}onBulkReject(e,s,t,o,r){return console.log(e,s,t,o,r),this.http.get(`${g}/file/rejectBulk/${s}/${e}/${t}/${o}/${r}`)}onSingleReject(e,s,t,o,r){return console.log("in service",e,s,t,o),this.http.get(`${g}/api2/rejectSingle/${e}/${s}/${t}/${o}/${r}`)}}return e.\u0275fac=function(s){return new(s||e)(n.LFG(h.eN))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=t(31443),f=t(17988);function T(e,s){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.ALo(9,"date"),n.qZA(),n.TgZ(10,"td"),n._uU(11),n.qZA(),n.TgZ(12,"td"),n.TgZ(13,"button",6),n.NdJ("click",function(){const s=n.CHM(e).index;return n.oxw().approveReason(s,"")}),n._uU(14," Approve "),n.qZA(),n.qZA(),n.TgZ(15,"td"),n.TgZ(16,"button",6),n.NdJ("click",function(){const s=n.CHM(e).index;return n.oxw().RejectReason(s,"")}),n._uU(17," Reject "),n.qZA(),n.qZA(),n.TgZ(18,"td"),n.TgZ(19,"button",7),n.NdJ("click",function(){const s=n.CHM(e),t=s.$implicit,o=s.index;return n.oxw().onClickofViewReport(t.accountType,t.fileName,t.closureType,o)}),n._uU(20," View Report "),n.qZA(),n.qZA(),n.TgZ(21,"td"),n._uU(22),n.qZA(),n.qZA()}if(2&e){const e=s.$implicit,t=s.index,o=n.oxw();n.xp6(2),n.Oqu(e.fileName),n.xp6(2),n.Oqu(e.closureType),n.xp6(2),n.Oqu(e.accountType),n.xp6(2),n.Oqu(n.xi3(9,8,e.inputTime,"medium")),n.xp6(3),n.Oqu(e.status),n.xp6(2),n.Q6J("disabled",e.disabled||e.rejectButtonDisabled||o.flag[t]||o.flag1[t]),n.xp6(3),n.Q6J("disabled",e.rejectButtonDisabled||e.disabled||o.flag2[t]||o.flag3[t]),n.xp6(6),n.Oqu(e.checkerId)}}const b=[{path:"",component:(()=>{class e{constructor(e,s,t){this.processService=e,this.ref=s,this.toastService=t,this.respArray=[],this.dtOptions={},this.dtTrigger=new c.xQ,this.reasonBoolean=[],this.showviewBtn=!1,this.toProcessTheClosureData=["fileName","closureType","accountType","inputTime","status","approve","reject","viewReport","checkerId"],this.excel=[],this.datafinal=[],this.flag=[],this.flag1=[],this.flag2=[],this.flag3=[],this.flagReject=[],this.processAccountClosureRespDTO=new i,this.excelSingle=Array(),this.showProgressBarReject=!1}openDialog(){}ngOnInit(){this.loginUser=localStorage.getItem("userFromLogin"),console.log(this.loginUser),this.gettingAllProcessedRecord(),this.dtOptions={pagingType:"full_numbers",pageLength:5,processing:!0,retrieve:!0,order:[[3,"desc"]],columnDefs:[{type:"date",targets:[3]}],lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]]}}ngOnDestroy(){this.dtTrigger.unsubscribe()}gettingAllProcessedRecord(){console.log("this is display processed record"),this.currentUser=localStorage.getItem("currentUser"),'"'===this.currentUser.charAt(0)&&'"'===this.currentUser.charAt(this.currentUser.length-1)&&(this.currentUser=this.currentUser.substr(1,this.currentUser.length-2)),this.processService.gettingAllProcessedRecord(this.currentUser.toString()).subscribe(e=>{console.log(e),console.log(this.currentUser),this.process=e.map(e=>(e.enableprogressbar=!1,console.log(e.status),Object.assign(Object.assign({},e),{rejectButtonDisabled:"Rejected"===e.status||e.inputBy===this.currentUser,disabled:"APPROVED"===e.status||e.inputBy===this.currentUser}))),this.dtTrigger.next(),console.log(this.process)})}onClickofApprove(e,s){console.log("This is approve"),this.fileName=this.process[e].fileName,this.accountType=this.process[e].accountType,this.inputBy=this.process[e].inputBy,this.id=this.process[e].id,this.closureType=this.process[e].closureType,this.process[e].showprogressbar=!0,console.log(this.process[e]),console.log(this.fileName),"BULK"==this.closureType?(console.log("this url for bulk",this.closureType),this.processService.approveRecord(this.fileName,this.accountType,this.loginUser,this.closureType,this.id,s).subscribe(s=>{console.log(s),s.checkerId&&(this.process[e].checkerId=s.checkerId);let t=s.respMeg;"Processed successfully"==s.respMeg&&(console.log("index is",e),this.flag[e]=!0,console.log("value of flag is",this.flag)),this.toastService.infoMessage(t,""),this.ref.markForCheck(),this.process[e].showprogressbar=!1,null!=s&&(console.log("enabled the process button"),this.process[e].showviewBtn=!0)})):(console.log(" this is for single"),this.processService.approveRecordForSingle(this.accountType,this.loginUser,this.closureType,this.id,s).subscribe(s=>{console.log(s);let t=s.respMeg;s.checkerId&&(this.process[e].checkerId=s.checkerId),"Processed successfully"==s.respMeg&&(console.log("index is",e),this.flag1[e]=!0,console.log("value of flag is",this.flag1)),this.toastService.infoMessage(t,""),null!=s&&(console.log("enabled the process button"),this.process[e].showviewBtn=!0)}))}onClickofViewReport(e,s,t,o){console.log("This is ViewReport"),console.log("process",e,s),"BULK"==t?(console.log("inside bulk excel download"),this.processService.onClickofViewReport(s,e).subscribe(e=>{console.log(e),this.excel=e,console.log(this.excel),this.processService.exportAsExcel(this.excel,"account_closure")})):(console.log("inside single excel download",this.process[o]),console.log(this.process[o].closureType),console.log(this.process[o].accountType),console.log(this.process[o].inputBy),console.log(this.process[o].id),this.processService.onClickofViewReportSingle(this.process[o].accountType,this.process[o].inputBy,this.process[o].closureType,this.process[o].id).subscribe(e=>{console.log(e),this.excelSingle.push(e),console.log(this.excelSingle),this.processService.exportAsExcel(this.excelSingle,"account_closure_Single"),this.excelSingle=[]}))}onclickOfReject(e,s){console.log("on clcik of reject",this.process[e]),this.process[e].enableprogressbar=!0,"BULK"==this.process[e].closureType?(console.log("this is for bulk"),this.processService.onBulkReject(this.process[e].fileName,this.process[e].accountType,this.loginUser,this.process[e].id,s).subscribe(s=>{this.ref.markForCheck(),console.log(s),this.ref.markForCheck(),s&&(console.log("index is",e),this.flag2[e]=!0,console.log("value of flag2 is",this.flag2),this.ref.markForCheck(),this.gettingAllProcessedRecord(),this.toastService.successMessage("Record Rejected successfully",""),this.reasonBoolean[e]=!1,this.ref.markForCheck(),this.process[e].enableprogressbar=!1)})):(console.log("this is for single"),this.processService.onSingleReject(this.process[e].accountNumber,this.process[e].accountType,this.process[e].closureType,this.loginUser,s).subscribe(s=>{this.ref.markForCheck(),console.log(s),this.ref.markForCheck(),s&&(console.log("index is",e),this.flag3[e]=!0,console.log("value of flag3 is",this.flag3),this.ref.markForCheck(),this.gettingAllProcessedRecord(),this.toastService.successMessage("Record Rejected successFully","")),this.reasonBoolean[e]=!1,this.ref.markForCheck()}))}approveReason(e,s){this.reasonBoolean[e]=!0,console.log("enter inside method"),console.log(s)}RejectReason(e,s){this.reasonBoolean[e]=!0,console.log("enter inside method"),console.log(s)}try(e){console.log(e),this.rejectReasonTextArea=e}Reject(e){console.log("rejectReasonTextArea from new method is",this.rejectReasonTextArea);const s=this.rejectReasonTextArea.trim();console.log(s),s?(console.log("valid string"),this.onclickOfReject(e,this.rejectReasonTextArea)):(console.log("invalid string"),this.toastService.infoMessage("Please enter reason for rejection",""))}}return e.\u0275fac=function(s){return new(s||e)(n.Y36(u),n.Y36(n.sBO),n.Y36(d.k))},e.\u0275cmp=n.Xpm({type:e,selectors:[["npr-process-account-closure"]],decls:28,vars:3,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"dbCardStyle","table-responsive"],["id","dbTable1","datatable","",1,"dataTable","table","tableStyle","nowrap","vAlignMdl",2,"width","100%",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[3,"disabled","click"],[3,"click"]],template:function(e,s){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"h2",2),n._uU(3,"Process Account Closure"),n.qZA(),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"table",4),n.TgZ(6,"thead"),n.TgZ(7,"tr"),n.TgZ(8,"th"),n._uU(9,"file name"),n.qZA(),n.TgZ(10,"th"),n._uU(11,"closure type"),n.qZA(),n.TgZ(12,"th"),n._uU(13,"account type"),n.qZA(),n.TgZ(14,"th"),n._uU(15,"upload date"),n.qZA(),n.TgZ(16,"th"),n._uU(17,"status"),n.qZA(),n.TgZ(18,"th"),n._uU(19,"approve"),n.qZA(),n.TgZ(20,"th"),n._uU(21,"reject"),n.qZA(),n.TgZ(22,"th"),n._uU(23,"view report"),n.qZA(),n.TgZ(24,"th"),n._uU(25,"checker id"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(26,"tbody"),n.YNc(27,T,23,11,"tr",5),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(5),n.Q6J("dtOptions",s.dtOptions)("dtTrigger",s.dtTrigger),n.xp6(22),n.Q6J("ngForOf",s.process))},directives:[f.G,o.sg],pipes:[o.uU],styles:[""]}),e})()}];let m=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[r.Bz.forChild(b)],r.Bz]}),e})(),v=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[o.ez,m,f.T]]}),e})()}}]);