!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function o(e,o,s){return o&&t(e.prototype,o),s&&t(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[652],{17988:function(e,t,o){o.d(t,{G:function(){return n},T:function(){return r}});var s=o(37716),n=function(){function e(e,t,o){this.el=e,this.vcr=t,this.renderer=o,this.dtOptions={}}return e.prototype.ngOnInit=function(){var e=this;this.dtTrigger?this.dtTrigger.subscribe(function(t){e.displayTable(t)}):this.displayTable(null)},e.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},e.prototype.displayTable=function(e){var t=this;e&&(this.dtOptions=e),this.dtInstance=new Promise(function(e,o){Promise.resolve(t.dtOptions).then(function(s){0===Object.keys(s).length&&0===$("tbody tr",t.el.nativeElement).length?o("Both the table and dtOptions cannot be empty"):setTimeout(function(){var o={rowCallback:function(e,o,n){if(s.columns){var c=s.columns;t.applyNgPipeTransform(e,c),t.applyNgRefTemplate(e,c,o)}s.rowCallback&&s.rowCallback(e,o,n)}};o=Object.assign({},s,o),t.dt=$(t.el.nativeElement).DataTable(o),e(t.dt)})})})},e.prototype.applyNgPipeTransform=function(e,t){t.filter(function(e){return e.ngPipeInstance&&!e.ngTemplateRef}).forEach(function(o){var s=o.ngPipeInstance,n=t.findIndex(function(e){return e.data===o.data}),c=e.childNodes.item(n),r=$(c).text(),i=s.transform(r);$(c).text(i)})},e.prototype.applyNgRefTemplate=function(e,t,o){var s=this;t.filter(function(e){return e.ngTemplateRef&&!e.ngPipeInstance}).forEach(function(n){var c=n.ngTemplateRef,r=c.ref,i=c.context,l=t.findIndex(function(e){return e.data===n.data}),a=e.childNodes.item(l);$(a).html("");var u=Object.assign({},i,null==i?void 0:i.userData,{adtData:o}),p=s.vcr.createEmbeddedView(r,u);s.renderer.appendChild(a,p.rootNodes[0])})},e.\u0275fac=function(t){return new(t||e)(s.Y36(s.SBq),s.Y36(s.s_b),s.Y36(s.Qsj))},e.\u0275dir=s.lG2({type:e,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),e}(),c=o(38583),r=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[c.ez]]}),e}()},31443:function(t,s,n){n.d(s,{k:function(){return l}});var c,r=n(37716),i=n(80463),l=((c=function(){function t(o){e(this,t),this.iziToast=o}return o(t,[{key:"successMessage",value:function(e,t){this.iziToast.success({title:e,message:t,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}},{key:"errorMessage",value:function(e,t){this.iziToast.error({title:e,message:t,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}},{key:"infoMessage",value:function(e,t){this.iziToast.info({title:e,message:t,layout:2,balloon:!1,position:"topRight",progressBarColor:"red",pauseOnHover:!0})}}]),t}()).\u0275fac=function(e){return new(e||c)(r.LFG(i.I))},c.\u0275prov=r.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c)},55652:function(t,s,n){n.r(s),n.d(s,{ProcessAccountClosureModule:function(){return A}});var c,r=n(38583),i=n(39895),l=o(function t(){e(this,t)}),a=n(79765),u=n(37716),p=n(3118),g=n(49457),h=n(84487),f=n(91841),d=p.$.acctCloserUrl,v=((c=function(){function t(o){e(this,t),this.http=o}return o(t,[{key:"gettingAllProcessedRecord",value:function(e){return console.log(e),this.http.get("".concat(d,"/api2/getAllProcessedRecordsForBulkAndSingle/").concat(e))}},{key:"approveRecord",value:function(e,t,o,s,n,c){return this.http.get("".concat(d,"/medAccount/closeAccount/").concat(e,"/").concat(t,"/").concat(o,"/").concat(s,"/").concat(n,"/").concat(c))}},{key:"approveRecordForSingle",value:function(e,t,o,s,n){return console.log(e,o,s,t),this.http.get("".concat(d,"/medAccount/closeAccountSingle/").concat(e,"/").concat(t,"/").concat(o,"/").concat(s,"/").concat(n))}},{key:"exportAsExcel",value:function(e,t){console.log(t),console.log(e);var o=h.utils.json_to_sheet(e);o.blankRows=!1;var s=h.write({Sheets:{data:o},SheetNames:["data"]},{bookType:"xlsx",type:"array"});this.saveAsExcelSingle(s,t)}},{key:"saveAsExcelSingle",value:function(e,t){var o=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});g.saveAs(o,t+"_export_"+(new Date).getTime()+".xlsx")}},{key:"onClickofViewReport",value:function(e,t){return this.http.get("".concat(d,"/file/viewReport/").concat(e,"/").concat(t))}},{key:"onClickofViewReportSingle",value:function(e,t,o,s){return this.http.get("".concat(d,"/api2/viewReportForSingleAcc/").concat(e,"/").concat(t,"/").concat(o,"/").concat(s))}},{key:"onBulkReject",value:function(e,t,o,s,n){return console.log(e,t,o,s,n),this.http.get("".concat(d,"/file/rejectBulk/").concat(t,"/").concat(e,"/").concat(o,"/").concat(s,"/").concat(n))}},{key:"onSingleReject",value:function(e,t,o,s,n){return console.log("in service",e,t,o,s),this.http.get("".concat(d,"/api2/rejectSingle/").concat(e,"/").concat(t,"/").concat(o,"/").concat(s,"/").concat(n))}}]),t}()).\u0275fac=function(e){return new(e||c)(u.LFG(f.eN))},c.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c),y=n(31443),T=n(17988);function b(e,t){if(1&e){var o=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.ALo(9,"date"),u.qZA(),u.TgZ(10,"td"),u._uU(11),u.qZA(),u.TgZ(12,"td"),u.TgZ(13,"button",6),u.NdJ("click",function(){var e=u.CHM(o).index;return u.oxw().approveReason(e,"")}),u._uU(14," Approve "),u.qZA(),u.qZA(),u.TgZ(15,"td"),u.TgZ(16,"button",6),u.NdJ("click",function(){var e=u.CHM(o).index;return u.oxw().RejectReason(e,"")}),u._uU(17," Reject "),u.qZA(),u.qZA(),u.TgZ(18,"td"),u.TgZ(19,"button",7),u.NdJ("click",function(){var e=u.CHM(o),t=e.$implicit,s=e.index;return u.oxw().onClickofViewReport(t.accountType,t.fileName,t.closureType,s)}),u._uU(20," View Report "),u.qZA(),u.qZA(),u.TgZ(21,"td"),u._uU(22),u.qZA(),u.qZA()}if(2&e){var s=t.$implicit,n=t.index,c=u.oxw();u.xp6(2),u.Oqu(s.fileName),u.xp6(2),u.Oqu(s.closureType),u.xp6(2),u.Oqu(s.accountType),u.xp6(2),u.Oqu(u.xi3(9,8,s.inputTime,"medium")),u.xp6(3),u.Oqu(s.status),u.xp6(2),u.Q6J("disabled",s.disabled||s.rejectButtonDisabled||c.flag[n]||c.flag1[n]),u.xp6(3),u.Q6J("disabled",s.rejectButtonDisabled||s.disabled||c.flag2[n]||c.flag3[n]),u.xp6(6),u.Oqu(s.checkerId)}}var k=[{path:"",component:function(){var t=function(){function t(o,s,n){e(this,t),this.processService=o,this.ref=s,this.toastService=n,this.respArray=[],this.dtOptions={},this.dtTrigger=new a.xQ,this.reasonBoolean=[],this.showviewBtn=!1,this.toProcessTheClosureData=["fileName","closureType","accountType","inputTime","status","approve","reject","viewReport","checkerId"],this.excel=[],this.datafinal=[],this.flag=[],this.flag1=[],this.flag2=[],this.flag3=[],this.flagReject=[],this.processAccountClosureRespDTO=new l,this.excelSingle=Array(),this.showProgressBarReject=!1}return o(t,[{key:"openDialog",value:function(){}},{key:"ngOnInit",value:function(){this.loginUser=localStorage.getItem("userFromLogin"),console.log(this.loginUser),this.gettingAllProcessedRecord(),this.dtOptions={pagingType:"full_numbers",pageLength:5,processing:!0,retrieve:!0,order:[[3,"desc"]],columnDefs:[{type:"date",targets:[3]}],lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]]}}},{key:"ngOnDestroy",value:function(){this.dtTrigger.unsubscribe()}},{key:"gettingAllProcessedRecord",value:function(){var e=this;console.log("this is display processed record"),this.currentUser=localStorage.getItem("currentUser"),'"'===this.currentUser.charAt(0)&&'"'===this.currentUser.charAt(this.currentUser.length-1)&&(this.currentUser=this.currentUser.substr(1,this.currentUser.length-2)),this.processService.gettingAllProcessedRecord(this.currentUser.toString()).subscribe(function(t){console.log(t),console.log(e.currentUser),e.process=t.map(function(t){return t.enableprogressbar=!1,console.log(t.status),Object.assign(Object.assign({},t),{rejectButtonDisabled:"Rejected"===t.status||t.inputBy===e.currentUser,disabled:"APPROVED"===t.status||t.inputBy===e.currentUser})}),e.dtTrigger.next(),console.log(e.process)})}},{key:"onClickofApprove",value:function(e,t){var o=this;console.log("This is approve"),this.fileName=this.process[e].fileName,this.accountType=this.process[e].accountType,this.inputBy=this.process[e].inputBy,this.id=this.process[e].id,this.closureType=this.process[e].closureType,this.process[e].showprogressbar=!0,console.log(this.process[e]),console.log(this.fileName),"BULK"==this.closureType?(console.log("this url for bulk",this.closureType),this.processService.approveRecord(this.fileName,this.accountType,this.loginUser,this.closureType,this.id,t).subscribe(function(t){console.log(t),t.checkerId&&(o.process[e].checkerId=t.checkerId);var s=t.respMeg;"Processed successfully"==t.respMeg&&(console.log("index is",e),o.flag[e]=!0,console.log("value of flag is",o.flag)),o.toastService.infoMessage(s,""),o.ref.markForCheck(),o.process[e].showprogressbar=!1,null!=t&&(console.log("enabled the process button"),o.process[e].showviewBtn=!0)})):(console.log(" this is for single"),this.processService.approveRecordForSingle(this.accountType,this.loginUser,this.closureType,this.id,t).subscribe(function(t){console.log(t);var s=t.respMeg;t.checkerId&&(o.process[e].checkerId=t.checkerId),"Processed successfully"==t.respMeg&&(console.log("index is",e),o.flag1[e]=!0,console.log("value of flag is",o.flag1)),o.toastService.infoMessage(s,""),null!=t&&(console.log("enabled the process button"),o.process[e].showviewBtn=!0)}))}},{key:"onClickofViewReport",value:function(e,t,o,s){var n=this;console.log("This is ViewReport"),console.log("process",e,t),"BULK"==o?(console.log("inside bulk excel download"),this.processService.onClickofViewReport(t,e).subscribe(function(e){console.log(e),n.excel=e,console.log(n.excel),n.processService.exportAsExcel(n.excel,"account_closure")})):(console.log("inside single excel download",this.process[s]),console.log(this.process[s].closureType),console.log(this.process[s].accountType),console.log(this.process[s].inputBy),console.log(this.process[s].id),this.processService.onClickofViewReportSingle(this.process[s].accountType,this.process[s].inputBy,this.process[s].closureType,this.process[s].id).subscribe(function(e){console.log(e),n.excelSingle.push(e),console.log(n.excelSingle),n.processService.exportAsExcel(n.excelSingle,"account_closure_Single"),n.excelSingle=[]}))}},{key:"onclickOfReject",value:function(e,t){var o=this;console.log("on clcik of reject",this.process[e]),this.process[e].enableprogressbar=!0,"BULK"==this.process[e].closureType?(console.log("this is for bulk"),this.processService.onBulkReject(this.process[e].fileName,this.process[e].accountType,this.loginUser,this.process[e].id,t).subscribe(function(t){o.ref.markForCheck(),console.log(t),o.ref.markForCheck(),t&&(console.log("index is",e),o.flag2[e]=!0,console.log("value of flag2 is",o.flag2),o.ref.markForCheck(),o.gettingAllProcessedRecord(),o.toastService.successMessage("Record Rejected successfully",""),o.reasonBoolean[e]=!1,o.ref.markForCheck(),o.process[e].enableprogressbar=!1)})):(console.log("this is for single"),this.processService.onSingleReject(this.process[e].accountNumber,this.process[e].accountType,this.process[e].closureType,this.loginUser,t).subscribe(function(t){o.ref.markForCheck(),console.log(t),o.ref.markForCheck(),t&&(console.log("index is",e),o.flag3[e]=!0,console.log("value of flag3 is",o.flag3),o.ref.markForCheck(),o.gettingAllProcessedRecord(),o.toastService.successMessage("Record Rejected successFully","")),o.reasonBoolean[e]=!1,o.ref.markForCheck()}))}},{key:"approveReason",value:function(e,t){this.reasonBoolean[e]=!0,console.log("enter inside method"),console.log(t)}},{key:"RejectReason",value:function(e,t){this.reasonBoolean[e]=!0,console.log("enter inside method"),console.log(t)}},{key:"try",value:function(e){console.log(e),this.rejectReasonTextArea=e}},{key:"Reject",value:function(e){console.log("rejectReasonTextArea from new method is",this.rejectReasonTextArea);var t=this.rejectReasonTextArea.trim();console.log(t),t?(console.log("valid string"),this.onclickOfReject(e,this.rejectReasonTextArea)):(console.log("invalid string"),this.toastService.infoMessage("Please enter reason for rejection",""))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(v),u.Y36(u.sBO),u.Y36(y.k))},t.\u0275cmp=u.Xpm({type:t,selectors:[["npr-process-account-closure"]],decls:28,vars:3,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"dbCardStyle","table-responsive"],["id","dbTable1","datatable","",1,"dataTable","table","tableStyle","nowrap","vAlignMdl",2,"width","100%",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[3,"disabled","click"],[3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"h2",2),u._uU(3,"Process Account Closure"),u.qZA(),u.qZA(),u.TgZ(4,"div",3),u.TgZ(5,"table",4),u.TgZ(6,"thead"),u.TgZ(7,"tr"),u.TgZ(8,"th"),u._uU(9,"file name"),u.qZA(),u.TgZ(10,"th"),u._uU(11,"closure type"),u.qZA(),u.TgZ(12,"th"),u._uU(13,"account type"),u.qZA(),u.TgZ(14,"th"),u._uU(15,"upload date"),u.qZA(),u.TgZ(16,"th"),u._uU(17,"status"),u.qZA(),u.TgZ(18,"th"),u._uU(19,"approve"),u.qZA(),u.TgZ(20,"th"),u._uU(21,"reject"),u.qZA(),u.TgZ(22,"th"),u._uU(23,"view report"),u.qZA(),u.TgZ(24,"th"),u._uU(25,"checker id"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(26,"tbody"),u.YNc(27,b,23,11,"tr",5),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(5),u.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),u.xp6(22),u.Q6J("ngForOf",t.process))},directives:[T.G,r.sg],pipes:[r.uU],styles:[""]}),t}()}],m=function(){var t=o(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[i.Bz.forChild(k)],i.Bz]}),t}(),A=function(){var t=o(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[r.ez,m,T.T]]}),t}()}}])}();