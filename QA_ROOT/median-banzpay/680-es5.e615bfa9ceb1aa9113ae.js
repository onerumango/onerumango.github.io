!function(){"use strict";function s(s,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(s,o.key,o)}}function e(e,r,o){return r&&s(e.prototype,r),o&&s(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[680],{84680:function(s,o,i){i.r(o),i.d(o,{ChangePasswordModule:function(){return J}});var n=i(38583),a=i(39895),t=i(3679),d=e(function s(){r(this,s)}),c=i(88259),u=i.n(c),g=i(2527),l=i(37716),w=i(94761),m=i(10402);function h(s,e){1&s&&l._UZ(0,"img",25)}function p(s,e){1&s&&l._UZ(0,"img",26)}function f(s,e){1&s&&l._UZ(0,"img",25)}function P(s,e){1&s&&l._UZ(0,"img",26)}function v(s,e){if(1&s&&(l.TgZ(0,"div"),l._uU(1),l.qZA()),2&s){var r=l.oxw(2);l.xp6(1),l.Oqu(r.errorMsg)}}function x(s,e){if(1&s&&(l.TgZ(0,"div",27),l.YNc(1,v,2,1,"div",28),l.qZA()),2&s){var r=l.oxw();l.xp6(1),l.Q6J("ngIf",r.userForm.get("newPassword").errors.pattern)}}function Z(s,e){if(1&s&&(l.TgZ(0,"div",27),l._uU(1),l.qZA()),2&s){var r=l.oxw();l.xp6(1),l.hij(" New Password must contain Minimum ",r.minPass," digits. ")}}function I(s,e){if(1&s&&(l.TgZ(0,"div",27),l._uU(1),l.qZA()),2&s){var r=l.oxw();l.xp6(1),l.hij(" New Password must contain Maximum ",r.maxPass," digits. ")}}function y(s,e){1&s&&l._UZ(0,"img",25)}function b(s,e){1&s&&l._UZ(0,"img",26)}function q(s,e){if(1&s&&(l.TgZ(0,"div"),l._uU(1),l.qZA()),2&s){var r=l.oxw(2);l.xp6(1),l.Oqu(r.errorMsg)}}function A(s,e){if(1&s&&(l.TgZ(0,"div",27),l.YNc(1,q,2,1,"div",28),l.qZA()),2&s){var r=l.oxw();l.xp6(1),l.Q6J("ngIf",r.userForm.get("confirmPassword").errors.pattern)}}function N(s,e){if(1&s&&(l.TgZ(0,"div",27),l._uU(1),l.qZA()),2&s){var r=l.oxw();l.xp6(1),l.hij(" Confirm Password must contain Minimum ",r.minPass," digits. ")}}function T(s,e){if(1&s&&(l.TgZ(0,"div",27),l._uU(1),l.qZA()),2&s){var r=l.oxw();l.xp6(1),l.hij(" Confirm Password must contain Maximum ",r.maxPass," digits. ")}}var k,U=function(){return["/dashboard"]},C=[{path:"",component:(k=function(){function s(e,o,i,n){r(this,s),this.api=e,this.fb=o,this.router=i,this.apiService=n,this.changePassword=new d,this.enableLoader=!1,this.userObj=new d,this.hide1=!0,this.hide=!0,this.hide2=!0,this.submit=!0}return e(s,[{key:"ngOnInit",value:function(){var s=this;this.loggedInUser=localStorage.getItem("userFromLogin"),this.otpEnableFlag=!1,this.userForm=new t.cw({userId:new t.NI("",t.kI.required),oldPassword:new t.NI("",t.kI.required),newPassword:new t.NI("",[t.kI.required,t.kI.compose([t.kI.pattern(this.passwordRegex),t.kI.maxLength(this.maxPass),t.kI.minLength(this.minPass)])]),confirmPassword:new t.NI("",t.kI.required),otp:new t.NI("",t.kI.required)}),this.apiService.fetchSecurityPolicyService().subscribe(function(e){s.security=e,console.log(s.security),s.minPass=s.security.minPswdLength,s.maxPass=s.security.maxPswdLength,s.buildForm(s.minPass,s.maxPass),console.log(s.minPass,s.maxPass),console.log(s.security)}),this.buildForm(this.minPass?this.minPass:void 0,this.maxPass?this.maxPass:void 0)}},{key:"buildForm",value:function(s,e){var r=this;this.apiService.fetchSecurityPolicyService().subscribe(function(s){r.security1=s,r.ucase=r.security1.pswdComplexUcase,r.lcase=r.security1.pswdComplexLcase,r.num=r.security1.pswdComplexNum,r.splc=r.security1.pswdComplexSplc,r.errorMsg="",r.passwordRegex="",console.log("Upper case",r.ucase),console.log("Lower case",r.lcase),console.log("num case",r.num),console.log("splc case",r.splc),"true"==r.security1.pswdComplexUcase&&(r.passwordRegex="(?=[^A-Z]*[A-Z])",r.errorMsg=" UpperCase"),"true"==r.security1.pswdComplexLcase&&(r.passwordRegex=r.passwordRegex+"(?=[^a-z]*[a-z])",r.errorMsg=""!=r.errorMsg?r.errorMsg+", LowerCase":r.errorMsg+" LowerCase"),"true"==r.splc&&(r.passwordRegex=r.passwordRegex+"(?=.*[!@#$%^&*])",r.errorMsg=""!=r.errorMsg?r.errorMsg+", Special Character":r.errorMsg+" Special Character"),"true"==r.security1.pswdComplexNum&&(r.passwordRegex=r.passwordRegex+"(?=[^0-9]*[0-9])",r.errorMsg=""!=r.errorMsg?r.errorMsg+", Number":r.errorMsg+" Number"),r.passwordRegex=r.passwordRegex+".{"+r.minPass+","+r.maxPass+"}",r.errorMsg="Password must contain atleast one "+r.errorMsg+".",console.log(r.passwordRegex),r.userForm=r.fb.group({newPassword:new t.NI("",[t.kI.required,t.kI.compose([t.kI.pattern(r.passwordRegex),t.kI.maxLength(r.maxPass),t.kI.minLength(r.minPass)])]),oldPassword:new t.NI("",t.kI.required),confirmPassword:new t.NI("",t.kI.required)})}),console.log(this.minPass,this.maxPass),console.log("form",this.userForm)}},{key:"onSubmit",value:function(){var s=this;if(this.changePassword.userId=this.loggedInUser,this.changePassword.newPassword=this.userForm.get("newPassword").value,this.changePassword.oldPassword=this.userForm.get("oldPassword").value,this.changePassword.confirmPassword=this.userForm.get("confirmPassword").value,this.changePassword.newPassword!=this.changePassword.confirmPassword)u().fire({text:"New Password and Confirm Password values are not same ",icon:"error"});else if(this.changePassword.newPassword&&this.changePassword.confirmPassword&&this.changePassword.oldPassword){this.changePassword.userId=this.loggedInUser;var e=g.AES.encrypt(this.changePassword.newPassword,"@12#90!^*NPR*g&*()$34#$"),r=g.AES.encrypt(this.changePassword.userId,"@12#90!^*NPR*g&*()$34#$"),o=(g.AES.encrypt(this.changePassword.oldPassword,"@12#90!^*NPR*g&*()$34#$"),e.toString()),i=r.toString();e.toString(),this.changePassword.newPassword=o,this.changePassword.userId=i,console.log(this.changePassword),this.enableLoader=!0,this.api.changePasswordService(this.changePassword).subscribe(function(e){s.var1=e,console.log(e[0]),"You cannot use your previous password. Please choose another password"==e&&u().fire({title:"You can not use your last "+s.security.pswdReuseAft+" passwords. Please choose another password.",icon:"error"}),"Incorrect old Password"==e&&u().fire({title:"Incorrect old password.",icon:"error"}),"successfull"==e&&(u().fire({title:"Password Changed Successfully.",icon:"success"}),s.submit=!1)})}else console.log("inside else if"),u().fire({text:"Please enter all the fields ",icon:"info"})}}]),s}(),k.\u0275fac=function(s){return new(s||k)(l.Y36(w.sM),l.Y36(t.qu),l.Y36(a.F0),l.Y36(m.W))},k.\u0275cmp=l.Xpm({type:k,selectors:[["npr-change-password"]],decls:55,vars:20,consts:[[1,"mt-1"],[1,"pageTitleCol"],[1,"pageTitle"],["action","",1,"formStyle",3,"formGroup"],[1,"dbCardStyle","fieldwidth",2,"width","400px"],[3,"disabled"],[1,"row","gy-4"],[1,"col-12"],[1,"formLbl"],[1,"colorRed"],[1,"d-flex"],["id","oldPassword","placeholder","Old Password","required","","value","","name","oldPassword","formControlName","oldPassword",1,"form-control",3,"type"],["newPassword",""],["toggle","#pwdFld",1,"visibility",3,"click"],["class","showPwd","src","assets/images/show-icon.svg","alt","...",4,"ngIf"],["class","hidePwd","src","assets/images/hide-icon.svg","alt","...",4,"ngIf"],["id","password","placeholder","New Password","required","","value","","name","password","formControlName","newPassword",1,"form-control",3,"type"],["class","invalid-feedback",4,"ngIf"],["id","confirm password","placeholder","Confirm Password","required","","value","","name","confirmPassword","formControlName","confirmPassword",1,"form-control",3,"type"],["confirmPassword",""],[1,"col-lg-12"],[1,"row","g-3","pt-3","mt-2","justify"],[1,"col-auto"],["href","javascript:void(0)",1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"disabled","click"],["href","javascript:void(0)",1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],["src","assets/images/show-icon.svg","alt","...",1,"showPwd"],["src","assets/images/hide-icon.svg","alt","...",1,"hidePwd"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(s,e){1&s&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"h2",2),l._uU(3,"Password Management"),l.qZA(),l.qZA(),l.TgZ(4,"form",3),l.TgZ(5,"div",4),l.TgZ(6,"fieldset",5),l.TgZ(7,"div",6),l.TgZ(8,"div",7),l.TgZ(9,"label",8),l._uU(10,"Old Password"),l.TgZ(11,"span",9),l._uU(12,"*"),l.qZA(),l.qZA(),l.TgZ(13,"div",10),l._UZ(14,"input",11,12),l.TgZ(16,"span",13),l.NdJ("click",function(){return e.hide=!e.hide}),l.YNc(17,h,1,0,"img",14),l.YNc(18,p,1,0,"img",15),l.qZA(),l.qZA(),l.qZA(),l.TgZ(19,"div",7),l.TgZ(20,"label",8),l._uU(21,"New Password"),l.TgZ(22,"span",9),l._uU(23,"*"),l.qZA(),l.qZA(),l.TgZ(24,"div",10),l._UZ(25,"input",16,12),l.TgZ(27,"span",13),l.NdJ("click",function(){return e.hide1=!e.hide1}),l.YNc(28,f,1,0,"img",14),l.YNc(29,P,1,0,"img",15),l.qZA(),l.qZA(),l.YNc(30,x,2,1,"div",17),l.YNc(31,Z,2,1,"div",17),l.YNc(32,I,2,1,"div",17),l.qZA(),l.TgZ(33,"div",7),l.TgZ(34,"label",8),l._uU(35,"Confirm Password"),l.TgZ(36,"span",9),l._uU(37,"*"),l.qZA(),l.qZA(),l.TgZ(38,"div",10),l._UZ(39,"input",18,19),l.TgZ(41,"span",13),l.NdJ("click",function(){return e.hide2=!e.hide2}),l.YNc(42,y,1,0,"img",14),l.YNc(43,b,1,0,"img",15),l.qZA(),l.qZA(),l.YNc(44,A,2,1,"div",17),l.YNc(45,N,2,1,"div",17),l.YNc(46,T,2,1,"div",17),l.qZA(),l.qZA(),l.qZA(),l.TgZ(47,"div",20),l.TgZ(48,"div",21),l.TgZ(49,"div",22),l.TgZ(50,"button",23),l.NdJ("click",function(){return e.onSubmit()}),l._uU(51,"Save"),l.qZA(),l.qZA(),l.TgZ(52,"div",22),l.TgZ(53,"a",24),l._uU(54,"Exit"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&s&&(l.xp6(4),l.Q6J("formGroup",e.userForm),l.xp6(2),l.Q6J("disabled",!e.submit),l.xp6(8),l.Q6J("type",e.hide?"password":"text"),l.xp6(3),l.Q6J("ngIf",!e.hide),l.xp6(1),l.Q6J("ngIf",e.hide),l.xp6(7),l.Q6J("type",e.hide1?"password":"text"),l.xp6(3),l.Q6J("ngIf",!e.hide1),l.xp6(1),l.Q6J("ngIf",e.hide1),l.xp6(1),l.Q6J("ngIf",e.userForm.get("newPassword").touched&&!e.userForm.get("newPassword").valid),l.xp6(1),l.Q6J("ngIf",e.userForm.get("newPassword").hasError("minlength")),l.xp6(1),l.Q6J("ngIf",e.userForm.get("newPassword").hasError("maxlength")),l.xp6(7),l.Q6J("type",e.hide2?"password":"text"),l.xp6(3),l.Q6J("ngIf",!e.hide2),l.xp6(1),l.Q6J("ngIf",e.hide2),l.xp6(1),l.Q6J("ngIf",e.userForm.get("confirmPassword").touched&&!e.userForm.get("confirmPassword").valid),l.xp6(1),l.Q6J("ngIf",e.userForm.get("confirmPassword").hasError("minlength")),l.xp6(1),l.Q6J("ngIf",e.userForm.get("confirmPassword").hasError("maxlength")),l.xp6(4),l.Q6J("disabled",!e.userForm.valid||!e.submit),l.xp6(3),l.Q6J("routerLink",l.DdM(19,U)))},directives:[t._Y,t.JL,t.sg,t.Fj,t.Q7,t.JJ,t.u,n.O5,a.yS],styles:[".visibility[_ngcontent-%COMP%]{margin-left:10px;margin-top:5px}.dbCardStylePassword[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:30px 65px}"]}),k)}],S=function(){var s=e(function s(){r(this,s)});return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=l.oAB({type:s}),s.\u0275inj=l.cJS({imports:[[a.Bz.forChild(C)],a.Bz]}),s}(),J=function(){var s=e(function s(){r(this,s)});return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=l.oAB({type:s}),s.\u0275inj=l.cJS({imports:[[n.ez,S,t.UX]]}),s}()}}])}();