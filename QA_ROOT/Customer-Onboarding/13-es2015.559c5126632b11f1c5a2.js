(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"I5/J":function(t,e,i){"use strict";i.d(e,"a",function(){return k});var n=i("iELJ"),s=i("nm5K"),a=i("laYw"),c=i("tZUg"),o=i("r1zJ"),r=i("qMRc"),l=i("kA6c"),d=i("8Y7J"),b=i("iInd"),g=i("VDRc"),u=i("SVse"),f=i("Dxy4"),h=i("Tj54"),m=i("PDjf");function p(t,e){if(1&t){const t=d.Yb();d.Xb(0,"button",7),d.fc("click",function(){return d.Hc(t),d.jc().close1()}),d.Xb(1,"mat-icon"),d.Tc(2,"close"),d.Wb(),d.Wb()}}function I(t,e){if(1&t){const t=d.Yb();d.Xb(0,"button",7),d.fc("click",function(){return d.Hc(t),d.jc().close()}),d.Xb(1,"mat-icon"),d.Tc(2,"close"),d.Wb(),d.Wb()}}function v(t,e){1&t&&(d.Xb(0,"div",4),d.Xb(1,"div",8),d.Sb(2,"img",9),d.Wb(),d.Wb())}function x(t,e){if(1&t){const t=d.Yb();d.Xb(0,"div",10),d.Xb(1,"h5",11),d.Tc(2,"Please e-sign the application!"),d.Wb(),d.Xb(3,"mat-card",12),d.Xb(4,"mat-card-content"),d.Xb(5,"signature-pad",13),d.fc("onBeginEvent",function(){return d.Hc(t),d.jc().drawStart()})("onEndEvent",function(){return d.Hc(t),d.jc().drawComplete()}),d.Wb(),d.Wb(),d.Wb(),d.Xb(6,"div",14),d.Xb(7,"button",15),d.fc("click",function(){return d.Hc(t),d.jc().onSubmit()}),d.Tc(8," SUBMIT "),d.Wb(),d.Wb(),d.Wb()}if(2&t){const t=d.jc();d.Eb(5),d.rc("options",t.signaturePadOptions),d.Eb(2),d.rc("disabled",t.disableDone)}}let S=(()=>{class t{constructor(t,e,i,n,s,a,c,o){this.data=t,this.dialogRef=e,this.ls=i,this.router=n,this.accountService=s,this.apiService=a,this.appEntryService=c,this.cdr=o,this.isDone=!1,this.signaturePadOptions={minWidth:2,canvasWidth:700,canvasHeight:300},this.count=0,this.res={enable:!1,image:null},this.disableDone=!0,this.signupload=!0}ngOnInit(){this.cardId=this.ls.getItem("cardId"),console.log("popup response data:",this.data),this.isDone=this.data.isSignLater,this.cdr.markForCheck()}ngAfterViewInit(){this.signaturePad.set("minWidth",2),this.signaturePad.clear()}drawComplete(){console.log(this.signaturePad.toDataURL()),this.esignUrl=this.signaturePad.toDataURL(),this.disableDone=!this.esignUrl.toString().includes("data:image/png;base64")}drawStart(){console.log("begin drawing")}clearSignature(){this.signaturePad.clear()}savePad(){const t=this.signaturePad.toDataURL();this.signatureImg=t}close1(){"NewCustomerOnboarding"===this.data.screen?this.dialogRef.close(this.res):(this.dialogRef.close({image:this.ls.getItem("cardSignedImage")?this.ls.getItem("cardSignedImage"):""}),this.ls.setItem("enable",!1))}close(){this.dialogRef.close("NewCustomerOnboarding"===this.data.screen?this.res:{image:this.esignUrl})}onSubmit(){console.log(this.signaturePad.toDataURL());let t={},e={};console.log("this.data::",this.data),"NewCustomerOnboarding"!==this.data.screen?(e.cardId=this.data.accountId,this.getByAccountId(e.cardId)):(this.apiService.getAccountIdByCusId(this.data.customerId).subscribe(e=>{console.log("Account Id response -- ",e),t.accountId=e}),this.res={enable:!0,image:this.signaturePad.toDataURL()}),e.customerId=this.data.customerId,e.documentName=this.data.customerId+"Signature",e.documentType="10",e.fileType="image/jpeg",e.fileName="signature";const i=this.signaturePad.toDataURL("image/png");this.ls.setItem("cardSignedImage",i);const n=atob(i.substring("data:image/png;base64,".length)),s=new Uint8Array(n.length);for(var a=0,c=n.length;a<c;++a)s[a]=n.charCodeAt(a);const o=new Blob([s],{type:"image/png"});t.uploadModel=e,t.noOfSignatures="1";const r=new FormData;r.append("data",JSON.stringify(t)),console.log("data",t),r.append("file",o),r.append("accType","cardOrigin"),this.apiService.uploadSignature(r).subscribe(t=>{console.log(t),t&&(this.close(),this.show=!0,this.ls.setItem("enable",!0),this.res=t)},t=>{this.close(),this.res=!1}),"NewCustomerOnboarding"!==this.data.screen?this.isDone=!1:this.close(),console.log(this.isDone),this.ls.setItem("eSignStage",!0)}getByAccountId(t){this.apiService.getCardInitiationDetails(t).subscribe(t=>{console.log("updateStatus :: ",t),this.accountdetailsForStatusUpdate=t,this.updateCardAccountStatus()})}updateCardAccountStatus(){this.apiService.updateCardStatus({cardId:this.cardId,status:"BACKLOG"}).subscribe(t=>{console.log("updateResp:: ",t)})}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(n.a),d.Rb(n.g),d.Rb(c.a),d.Rb(b.h),d.Rb(l.a),d.Rb(s.b),d.Rb(r.a),d.Rb(d.h))},t.\u0275cmp=d.Lb({type:t,selectors:[["app-esignature-pop"]],viewQuery:function(t,e){if(1&t&&d.ad(o.a,!0),2&t){let t;d.Cc(t=d.gc())&&(e.signaturePad=t.first)}},decls:8,vars:4,consts:[["fxLayout","row wrap"],["fxFlex","100","fxLayoutAlign","end center"],["mat-icon-button","",3,"click",4,"ngIf"],["fxFlex","100",4,"ngIf"],["fxFlex","100"],["fxLayout","row","fxLayoutAlign","center center"],["fxFlex","50","fxFlexOffset","20px",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"propic","text-center"],["src","assets/images/esign.png","alt",""],["fxFlex","50","fxFlexOffset","20px"],[1,"text-center","mt-16"],[1,"mt-16","signbox"],[3,"options","onBeginEvent","onEndEvent"],[1,"text-center"],["mat-raised-button","",1,"Next",3,"disabled","click"]],template:function(t,e){1&t&&(d.Xb(0,"div",0),d.Xb(1,"div",1),d.Rc(2,p,3,0,"button",2),d.Rc(3,I,3,0,"button",2),d.Wb(),d.Rc(4,v,3,0,"div",3),d.Xb(5,"div",4),d.Xb(6,"div",5),d.Rc(7,x,9,2,"div",6),d.Wb(),d.Wb(),d.Wb()),2&t&&(d.Eb(2),d.rc("ngIf",!e.isDone),d.Eb(1),d.rc("ngIf",e.isDone),d.Eb(1),d.rc("ngIf",!e.isDone),d.Eb(3),d.rc("ngIf",!e.isDone))},directives:[g.e,g.b,g.d,u.n,f.b,h.a,g.c,m.a,m.d,o.a],styles:[".signbox[_ngcontent-%COMP%]{border-style:shadow;height:160px}.Next[_ngcontent-%COMP%]{margin:12px 0;width:150px;background-color:#426af5;color:#fff;border-radius:55px}"]}),t})();var R=i("zHaW");const D=["profileFile"];function W(t,e){if(1&t){const t=d.Yb();d.Xb(0,"button",7),d.fc("click",function(){return d.Hc(t),d.jc().close1()}),d.Xb(1,"mat-icon"),d.Tc(2,"close"),d.Wb(),d.Wb()}}function w(t,e){if(1&t){const t=d.Yb();d.Xb(0,"button",7),d.fc("click",function(){return d.Hc(t),d.jc().close()}),d.Xb(1,"mat-icon"),d.Tc(2,"close"),d.Wb(),d.Wb()}}function X(t,e){1&t&&(d.Xb(0,"div",4),d.Xb(1,"div",8),d.Sb(2,"img",9),d.Wb(),d.Wb())}function y(t,e){1&t&&(d.Xb(0,"div"),d.Sb(1,"img",24),d.Wb()),2&t&&(d.Eb(1),d.rc("src","assets/images/no-image.jpg",d.Jc))}function C(t,e){if(1&t&&d.Sb(0,"img",25),2&t){const t=d.jc(2);d.rc("src",t.imageURL1,d.Jc)}}function L(t,e){if(1&t){const t=d.Yb();d.Xb(0,"div",10),d.Xb(1,"h5",11),d.Tc(2,"Signature!"),d.Wb(),d.Xb(3,"div",12),d.Xb(4,"div",13),d.Xb(5,"button",14),d.fc("click",function(){return d.Hc(t),d.jc().openPopUp()}),d.Tc(6," Digital Sign "),d.Wb(),d.Wb(),d.Xb(7,"div",15),d.Xb(8,"button",16),d.fc("click",function(){return d.Hc(t),d.Dc(11).click()}),d.Tc(9," Upload "),d.Xb(10,"input",17,18),d.fc("change",function(e){return d.Hc(t),d.jc().onFileSelect(e)}),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(12,"div",5),d.Xb(13,"div",13),d.Xb(14,"div",19),d.Rc(15,y,2,1,"div",20),d.Rc(16,C,1,1,"ng-template",null,21,d.Sc),d.Wb(),d.Xb(18,"div",12),d.Xb(19,"button",22),d.fc("click",function(){return d.Hc(t),d.jc().deleteImg()}),d.Tc(20," DELETE "),d.Wb(),d.Xb(21,"button",23),d.fc("click",function(){return d.Hc(t),d.jc().onSubmit()}),d.Tc(22," SUBMIT "),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Wb()}if(2&t){const t=d.Dc(17),e=d.jc();d.Eb(15),d.rc("ngIf","not_available"==e.imageURL1)("ngIfElse",t),d.Eb(6),d.rc("disabled",e.disableDone)}}let k=(()=>{class t{constructor(t,e,i,n,s,a,c,o,r){this.data=t,this.router=e,this.apiService=i,this.dialogService=n,this.dialog=s,this.dialogRef=a,this.ls=c,this.location=o,this.snack=r,this.isDone=!1,this.previousUrl="",this.disableDone=!0,this.res={enable:!1,image:null}}ngOnInit(){this.isCardDigitalSigningDone=this.ls.getItem("CARD_DIGITAL_STAGE_DONE"),this.isCardDigitalSigning=this.ls.getItem("CARD_DIGITAL_SIGN_DONE"),this.image=this.ls.getItem("cardSignedImage"),this.imageURL1=this.image?this.image:"not_available",this.accountId=this.ls.getItem("cardId")}close1(){"NewCustomerOnboarding"===this.data.screen?this.dialogRef.close(this.res):(this.dialogRef.close(!0),this.ls.setItem("enable",!!this.ls.getItem("cardSignedImage")))}openPopUp(t){let e;null==t&&(e={isSignLater:!1,screen:"Create Account",accountId:this.accountId,customerId:this.ls.getItem("cId")}),this.show||this.dialog.open(S,{width:"720px",disableClose:!0,data:null==t?e:t}).afterClosed().subscribe(t=>{console.log("dismiss res",t),t&&(this.ls.setItem("enable",!0),this.imageURL1=(null==t?void 0:t.image)?null==t?void 0:t.image:"not_available",this.disableDone=!(null==t?void 0:t.image))})}onFileSelect(t){console.log("event -- ",t.target.files),this.selectedFile=t.target.files[0],console.log(this.selectedFile);let e=new FileReader;e.readAsDataURL(t.target.files[0]),e.onload=t=>{this.imageURL1=e.result};const i=this.selectedFile,n=new FormData;n.append("data",JSON.stringify({customerId:this.customerId,documentName:"Signature",documentType:"10",fileType:t.type,fileName:t.name,verificationType:"Digital Signing"})),n.append("file",i),this.apiService.uploadDocument(n).subscribe(t=>{})}deleteImg(){this.dialogService.doConfirmDialog("").subscribe(t=>{"Yes"==t&&(this.ls.removeItem("cardSignedImage"),this.disableDone=!0,this.imageURL1="not_available",this.profileFile.nativeElement.value="",this.apiService.deleteCustomerDoc(this.customerId,this.profileId).subscribe(t=>{}),this.disableDone=!0,this.ls.setItem("enable",!1))})}onSubmit(){this.isDone=!0,this.dialogRef.close(!0)}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(n.a),d.Rb(b.h),d.Rb(s.b),d.Rb(a.a),d.Rb(n.b),d.Rb(n.g),d.Rb(c.a),d.Rb(u.j),d.Rb(R.a))},t.\u0275cmp=d.Lb({type:t,selectors:[["app-upload-signature-or-esign"]],viewQuery:function(t,e){if(1&t&&d.ad(D,!0),2&t){let t;d.Cc(t=d.gc())&&(e.profileFile=t.first)}},decls:8,vars:4,consts:[["fxLayout","row wrap"],["fxFlex","100","fxLayoutAlign","end center"],["mat-icon-button","",3,"click",4,"ngIf"],["fxFlex","100",4,"ngIf"],["fxFlex","100"],["fxLayout","row","fxLayoutAlign","center center"],["fxFlex","50","fxFlexOffset","20px",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"propic","text-center"],["src","assets/images/esign.png","alt",""],["fxFlex","50","fxFlexOffset","20px"],[1,"text-center","mt-16","size"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","20px"],[1,"sub-section-1"],["appearence","outline",1,"scanButton",3,"click"],[1,"sub-section-2"],[1,"Upload","scanButton",3,"click"],["type","file","required","",1,"changeInput",2,"display","none",3,"change"],["fileInput",""],[1,"insertDriveImg"],[4,"ngIf","ngIfElse"],["showAvatar",""],["mat-raised-button","","color","red",1,"dltbtn",3,"click"],["mat-raised-button","","color","primary",1,"dbtn",3,"disabled","click"],["alt","No Image",1,"formImg",3,"src"],["required","","alt","",1,"formImg",3,"src"]],template:function(t,e){1&t&&(d.Xb(0,"div",0),d.Xb(1,"div",1),d.Rc(2,W,3,0,"button",2),d.Rc(3,w,3,0,"button",2),d.Wb(),d.Rc(4,X,3,0,"div",3),d.Xb(5,"div",4),d.Xb(6,"div",5),d.Rc(7,L,23,3,"div",6),d.Wb(),d.Wb(),d.Wb()),2&t&&(d.Eb(2),d.rc("ngIf",!e.isDone),d.Eb(1),d.rc("ngIf",e.isDone),d.Eb(1),d.rc("ngIf",!e.isDone),d.Eb(3),d.rc("ngIf",!e.isDone))},directives:[g.e,g.b,g.d,u.n,f.b,h.a,g.c,g.f],styles:[".scanButton[_ngcontent-%COMP%]{display:inline-block;background-color:#fff;color:#00f;border-color:#d3d3d3;margin-left:5px;border-style:ridge;margin-top:0;border-radius:5px}.formImg[_ngcontent-%COMP%]{height:200px!important;width:400px!important;background-color:#f5f5f5;border-radius:10%}.Next[_ngcontent-%COMP%]{margin:12px 0;width:150px;background-color:#426af5;color:#fff;border-radius:55px}.size[_ngcontent-%COMP%]{font-size:large;font-weight:300}.dltbtn[_ngcontent-%COMP%]{background-color:red}.dbtn[_ngcontent-%COMP%], .dltbtn[_ngcontent-%COMP%]{margin:12px 0;width:35%;color:#fff;border-radius:55px}.dbtn[_ngcontent-%COMP%]{background-color:#426af5}"]}),t})()}}]);