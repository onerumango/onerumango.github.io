!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,r=void 0,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?r:String(r)),n)}var a,r}function o(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{JEza:function(t,n,a){"use strict";a.r(n),a.d(n,"DocumentUploadFromEmailModule",function(){return De});var r,i=a("SVse"),c=a("Tj54"),s=a("r1zJ"),d=a("iInd"),l=a("IheW"),u=a("s7LF"),m=a("u9T3"),b=a("w9WL"),g=a("aLe/"),h=a("aYsj"),f=a("mnDI"),p=a("zMWy"),v=a("PDjf"),y=a("XNiG"),x=a("nm5K"),O=a("BTe0"),A=a("tZUg"),k=a("iiaH"),C=a("laYw"),_=a("3sEA"),I=a("MJbI"),D=a("iELJ"),P=a("8Y7J"),W=a("VDRc"),X=a("Dxy4"),N=((r=function(){function t(o,n){e(this,t),this.dialogRef=o,this.data=n,this.Title="Successfull Message!",this.Message="Uploaded successfully."}return o(t,[{key:"ngOnInit",value:function(){}},{key:"done",value:function(){this.dialogRef.close("done")}}]),t}()).\u0275fac=function(e){return new(e||r)(P.Rb(D.g),P.Rb(D.a))},r.\u0275cmp=P.Lb({type:r,selectors:[["app-sucess-popup"]],decls:15,vars:2,consts:[[1,"parentDiv"],["fxLayout","column","fxLayoutGap","10px",1,"full-width"],[1,"tittle"],["fxFlex","25","fxLayoutAlign","center stretch"],["src","assets/images/completed.PNG",1,"coImg"],[1,"messageClass"],["fxLayout","row","fxLayoutAlign","space-between center",1,"full-width",2,"padding-left","35%"],["fxFlex","49%","fxFlex.xs","100%"],["tabindex","-1","mat-raised-button","",1,"full-width","mat-elevation-z0","yesBtn",3,"click"]],template:function(e,t){1&e&&(P.Xb(0,"div",0),P.Xb(1,"div",1),P.Xb(2,"div",2),P.Xb(3,"h1"),P.Tc(4),P.Wb(),P.Wb(),P.Xb(5,"div",3),P.Sb(6,"img",4),P.Wb(),P.Xb(7,"div"),P.Xb(8,"p",5),P.Tc(9),P.Wb(),P.Wb(),P.Xb(10,"div"),P.Xb(11,"div",6),P.Xb(12,"div",7),P.Xb(13,"button",8),P.fc("click",function(){return t.done()}),P.Tc(14,"Done"),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb()),2&e&&(P.Eb(4),P.Uc(t.Title),P.Eb(5),P.Uc(t.Message))},directives:[W.e,W.f,W.b,W.d,X.b],styles:[".yesBtn[_ngcontent-%COMP%]{background-color:#456efe;color:#fff}.NoBtn[_ngcontent-%COMP%], .yesBtn[_ngcontent-%COMP%]{border-radius:20px;padding:.2rem}.NoBtn[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000}.parentDiv[_ngcontent-%COMP%]{padding:1rem}.tittle[_ngcontent-%COMP%]{padding-left:33%}.coImg[_ngcontent-%COMP%]{max-width:200px;margin-bottom:10px}.messageClass[_ngcontent-%COMP%]{font-size:medium;padding-left:33%}"]}),r),w=a("zHaW"),S=a("Q2Ze"),F=a("ZTz/"),M=a("ura0"),T=a("UhP/");function V(e,t){if(1&e&&(P.Xb(0,"mat-option",41),P.Tc(1),P.Wb()),2&e){var o=t.$implicit,n=P.jc(2);P.rc("value",o)("disabled",n.isDocumentOptionDisabled2(o)),P.Eb(1),P.Vc("",o," ")}}function E(e,t){1&e&&(P.Xb(0,"mat-error"),P.Tc(1," Please select Document name "),P.Wb())}function j(e,t){1&e&&(P.Xb(0,"div"),P.Sb(1,"img",42),P.Wb()),2&e&&(P.Eb(1),P.rc("src","assets/images/no-image.jpg",P.Jc))}function B(e,t){if(1&e&&P.Sb(0,"img",42),2&e){var o=P.jc().index,n=P.jc();P.rc("src",n.frontImageArray[o],P.Jc)}}function R(e,t){if(1&e){var o=P.Yb();P.Xb(0,"input",43),P.fc("change",function(e){P.Hc(o);var t=P.jc().index;return P.jc().onUpload(e,"frontSide",1,t)}),P.Wb()}}function U(e,t){if(1&e){var o=P.Yb();P.Xb(0,"div",44),P.Xb(1,"button",9),P.fc("click",function(){P.Hc(o);var e=P.jc().index;return P.jc().triggerSnapshot(e)}),P.Tc(2,"Take Snapshot"),P.Wb(),P.Sb(3,"br"),P.Wb()}}function L(e,t){if(1&e){var o=P.Yb();P.Vb(0),P.Xb(1,"button",45),P.fc("click",function(){return P.Hc(o),P.jc(2).cancelUpload("frontSide")}),P.Xb(2,"mat-icon"),P.Tc(3,"clear"),P.Wb(),P.Tc(4," Cancel "),P.Wb(),P.Ub()}}function z(e,t){1&e&&(P.Vb(0),P.Xb(1,"button",46),P.Xb(2,"mat-icon",6),P.Tc(3,"check_circle"),P.Wb(),P.Wb(),P.Ub())}function Y(e,t){1&e&&(P.Xb(0,"div"),P.Sb(1,"img",42),P.Wb()),2&e&&(P.Eb(1),P.rc("src","assets/images/no-image.jpg",P.Jc))}function H(e,t){if(1&e&&P.Sb(0,"img",42),2&e){var o=P.jc(2).index,n=P.jc();P.rc("src",n.backImageArray[o],P.Jc)}}function J(e,t){if(1&e){var o=P.Yb();P.Xb(0,"input",43),P.fc("change",function(e){P.Hc(o);var t=P.jc(2).index;return P.jc().onUpload(e,"backSide",2,t)}),P.Wb()}}function G(e,t){if(1&e){var o=P.Yb();P.Xb(0,"div",44),P.Xb(1,"button",9),P.fc("click",function(){P.Hc(o);var e=P.jc(2).index;return P.jc().triggerSnapshot(e)}),P.Tc(2,"Take Snapshot"),P.Wb(),P.Sb(3,"br"),P.Wb()}}function K(e,t){if(1&e){var o=P.Yb();P.Vb(0),P.Xb(1,"button",45),P.fc("click",function(){return P.Hc(o),P.jc(3).cancelUpload("backSide")}),P.Xb(2,"mat-icon"),P.Tc(3,"clear"),P.Wb(),P.Tc(4," Cancel "),P.Wb(),P.Ub()}}function q(e,t){1&e&&(P.Vb(0),P.Xb(1,"button",46),P.Xb(2,"mat-icon",6),P.Tc(3,"check_circle"),P.Wb(),P.Wb(),P.Ub())}function $(e,t){if(1&e){var o=P.Yb();P.Xb(0,"div"),P.Xb(1,"div"),P.Xb(2,"div",18),P.Xb(3,"mat-icon",19),P.Tc(4,"backup"),P.Wb(),P.Xb(5,"div",20),P.Rc(6,Y,2,1,"div",21),P.Rc(7,H,1,1,"ng-template",null,22,P.Sc),P.Wb(),P.Xb(9,"div",23),P.Xb(10,"mat-label",24),P.Tc(11,"Back side "),P.Wb(),P.Sb(12,"br"),P.Wb(),P.Xb(13,"div"),P.Xb(14,"button",26),P.Tc(15," Upload"),P.Rc(16,J,1,0,"input",27),P.Wb(),P.Wb(),P.Rc(17,G,4,0,"div",28),P.Wb(),P.Wb(),P.Xb(18,"div",29),P.Xb(19,"mat-icon",30),P.Tc(20,"insert_drive_file"),P.Wb(),P.Xb(21,"div",31),P.Xb(22,"div",32),P.Xb(23,"p",33),P.Tc(24),P.Wb(),P.Sb(25,"mat-progress-bar",34),P.Wb(),P.Wb(),P.Rc(26,K,5,0,"ng-container",16),P.Rc(27,q,4,0,"ng-container",16),P.Wb(),P.Xb(28,"mat-icon",47),P.fc("click",function(){P.Hc(o);var e=P.jc(),t=e.$implicit,n=e.index;return P.jc().delete(t.value,2,n)}),P.Tc(29,"delete"),P.Wb(),P.Wb()}if(2&e){var n=P.Dc(8),a=P.jc(),r=a.index,i=a.$implicit,c=P.jc();P.Eb(6),P.rc("ngIf","not_available"==c.backImageArray[r])("ngIfElse",n),P.Eb(8),P.rc("disabled",!i.controls.documentName.value),P.Eb(2),P.rc("ngIf",i.controls.documentName.value),P.Eb(1),P.rc("ngIf",c.scan2Array[r]),P.Eb(7),P.Vc("",c.progressValBackArray[r],"%"),P.Eb(1),P.rc("value",c.progressValBackArray[r]),P.Eb(1),P.rc("ngIf",c.progressValBackArray[r]&&100!=c.progressValBackArray[r]),P.Eb(1),P.rc("ngIf",c.progressValBackArray[r]&&100==c.progressValBackArray[r])}}function Z(e,t){if(1&e){var o=P.Yb();P.Xb(0,"div",48),P.fc("click",function(){P.Hc(o);var e=P.jc().index;return P.jc().callingBox2(e)}),P.Xb(1,"p"),P.Xb(2,"button",49),P.Xb(3,"mat-icon"),P.Tc(4,"add"),P.Wb(),P.Tc(5,"BACKSIDE PAGE "),P.Wb(),P.Wb(),P.Wb()}}function Q(e,t){if(1&e&&(P.Vb(0),P.Sb(1,"img",50),P.Ub()),2&e){var o=P.jc(2).index,n=P.jc();P.Eb(1),P.rc("src",n.otherImageArray[o],P.Jc)}}function ee(e,t){if(1&e){var o=P.Yb();P.Xb(0,"input",43),P.fc("change",function(e){P.Hc(o);var t=P.jc(2).index;return P.jc().onUpload(e,"others",3,t)}),P.Wb()}}function te(e,t){if(1&e){var o=P.Yb();P.Xb(0,"div",44),P.Xb(1,"button",9),P.fc("click",function(){P.Hc(o);var e=P.jc(2).index;return P.jc().triggerSnapshot(e)}),P.Tc(2,"Take Snapshot"),P.Wb(),P.Sb(3,"br"),P.Wb()}}function oe(e,t){if(1&e){var o=P.Yb();P.Vb(0),P.Xb(1,"button",45),P.fc("click",function(){return P.Hc(o),P.jc(3).cancelUpload("others")}),P.Xb(2,"mat-icon"),P.Tc(3,"clear"),P.Wb(),P.Tc(4," Cancel "),P.Wb(),P.Ub()}}function ne(e,t){1&e&&(P.Vb(0),P.Xb(1,"button",46),P.Xb(2,"mat-icon",6),P.Tc(3,"check_circle"),P.Wb(),P.Wb(),P.Ub())}function ae(e,t){if(1&e){var o=P.Yb();P.Xb(0,"div"),P.Xb(1,"div"),P.Xb(2,"div",18),P.Xb(3,"mat-icon",19),P.Tc(4,"backup"),P.Wb(),P.Xb(5,"div",20),P.Rc(6,Q,2,1,"ng-container",16),P.Wb(),P.Xb(7,"div",23),P.Xb(8,"mat-label",24),P.Tc(9,"Others"),P.Wb(),P.Sb(10,"br"),P.Wb(),P.Xb(11,"div"),P.Xb(12,"button",26),P.Tc(13," Upload"),P.Rc(14,ee,1,0,"input",27),P.Wb(),P.Wb(),P.Rc(15,te,4,0,"div",28),P.Wb(),P.Wb(),P.Xb(16,"div",29),P.Xb(17,"mat-icon",30),P.Tc(18,"insert_drive_file"),P.Wb(),P.Xb(19,"div",31),P.Xb(20,"div",32),P.Xb(21,"p",33),P.Tc(22),P.Wb(),P.Sb(23,"mat-progress-bar",34),P.Wb(),P.Wb(),P.Rc(24,oe,5,0,"ng-container",16),P.Rc(25,ne,4,0,"ng-container",16),P.Wb(),P.Xb(26,"mat-icon",47),P.fc("click",function(){P.Hc(o);var e=P.jc(),t=e.$implicit,n=e.index;return P.jc().delete(t.value,3,n)}),P.Tc(27,"delete"),P.Wb(),P.Wb()}if(2&e){var n=P.jc(),a=n.index,r=n.$implicit,i=P.jc();P.Eb(6),P.rc("ngIf",i.otherImageArray[a]),P.Eb(6),P.rc("disabled",!r.controls.documentName.value),P.Eb(2),P.rc("ngIf",r.controls.documentName.value),P.Eb(1),P.rc("ngIf",i.scan3Array[a]),P.Eb(7),P.Vc("",i.progressValOthersArray[a],"%"),P.Eb(1),P.rc("value",i.progressValOthersArray[a]),P.Eb(1),P.rc("ngIf",i.progressValOthersArray[a]&&100!=i.progressValOthersArray[a]),P.Eb(1),P.rc("ngIf",i.progressValOthersArray[a]&&100==i.progressValOthersArray[a])}}function re(e,t){if(1&e&&(P.Xb(0,"tr"),P.Xb(1,"td"),P.Tc(2),P.Wb(),P.Wb()),2&e){var o=P.jc(2).index,n=P.jc();P.Eb(2),P.Vc("Name:",n.nameOnCard[o],"")}}function ie(e,t){if(1&e&&(P.Xb(0,"tr"),P.Xb(1,"td"),P.Tc(2),P.Wb(),P.Wb()),2&e){var o=P.jc(2).index,n=P.jc();P.Eb(2),P.Vc("Id Number:",n.idNumberArray[o],"")}}function ce(e,t){if(1&e&&(P.Xb(0,"tr"),P.Xb(1,"td"),P.Tc(2),P.Wb(),P.Wb()),2&e){var o=P.jc(2).index,n=P.jc();P.Eb(2),P.Vc("Dob: ",n.dobArray[o],"")}}function se(e,t){if(1&e&&(P.Xb(0,"td"),P.Tc(1),P.Wb()),2&e){var o=P.jc(3).index,n=P.jc();P.Eb(1),P.Vc("Address: ",n.addressArray[o],"")}}function de(e,t){if(1&e&&(P.Xb(0,"tr"),P.Rc(1,se,2,1,"td",16),P.Wb()),2&e){var o=P.jc(3);P.Eb(1),P.rc("ngIf",o.addressDisplay)}}function le(e,t){if(1&e&&(P.Xb(0,"tr"),P.Xb(1,"td"),P.Tc(2),P.Wb(),P.Wb()),2&e){var o=P.jc(3);P.Eb(2),P.Vc("Date Of Issue: ",o.dateOfIssue,"")}}function ue(e,t){if(1&e&&(P.Xb(0,"tr"),P.Xb(1,"td"),P.Tc(2),P.Wb(),P.Wb()),2&e){var o=P.jc(3);P.Eb(2),P.Vc("Date Of Expiry: ",o.dateOfExpiry,"")}}function me(e,t){if(1&e&&(P.Xb(0,"mat-card",51),P.Xb(1,"div"),P.Rc(2,re,3,1,"tr",16),P.Rc(3,ie,3,1,"tr",16),P.Rc(4,ce,3,1,"tr",16),P.Rc(5,de,2,1,"tr",16),P.Rc(6,le,3,1,"tr",16),P.Rc(7,ue,3,1,"tr",16),P.Wb(),P.Wb()),2&e){var o=P.jc().index,n=P.jc();P.Eb(2),P.rc("ngIf",n.nameOnCard[o]),P.Eb(1),P.rc("ngIf",n.idNumberArray[o]),P.Eb(1),P.rc("ngIf",n.dobArray[o]),P.Eb(1),P.rc("ngIf",n.addressArray[o]),P.Eb(1),P.rc("ngIf","undefined"===n.dateOfIssue&&"Passport"==n.documentForm.controls.documentName.value),P.Eb(1),P.rc("ngIf","undefined"===n.dateOfExpiry&&"Passport"==n.documentForm.controls.documentName.value)}}function be(e,t){if(1&e){var o=P.Yb();P.Xb(0,"div",52),P.fc("click",function(){P.Hc(o);var e=P.jc().index;return P.jc().callingBox3(e)}),P.Xb(1,"div",53),P.Xb(2,"button",49),P.Xb(3,"mat-icon"),P.Tc(4,"add"),P.Wb(),P.Tc(5,"OTHER PAGE "),P.Wb(),P.Wb(),P.Wb()}}function ge(e,t){1&e&&(P.Xb(0,"div"),P.Sb(1,"img",42),P.Wb()),2&e&&(P.Eb(1),P.rc("src","assets/images/no-image.jpg",P.Jc))}function he(e,t){if(1&e&&P.Sb(0,"img",42),2&e){var o=P.jc().index,n=P.jc().index,a=P.jc();P.rc("src",a.otherDocumentArray[n][o],P.Jc)}}function fe(e,t){if(1&e){var o=P.Yb();P.Xb(0,"div",54),P.Xb(1,"div",11),P.Xb(2,"div"),P.Xb(3,"div",18),P.Xb(4,"mat-icon",19),P.Tc(5,"backup"),P.Wb(),P.Xb(6,"div",20),P.Rc(7,ge,2,1,"div",21),P.Rc(8,he,1,1,"ng-template",null,22,P.Sc),P.Wb(),P.Xb(10,"div",23),P.Xb(11,"mat-label",24),P.Tc(12,"another page "),P.Wb(),P.Sb(13,"br"),P.Wb(),P.Xb(14,"div"),P.Xb(15,"button",55),P.Tc(16," Upload"),P.Xb(17,"input",56),P.fc("change",function(e){P.Hc(o);var n=t.index,a=P.jc().index;return P.jc().onUpload(e,"otherDocument",n+4,a)}),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Xb(18,"div",29),P.Xb(19,"mat-icon",30),P.Tc(20,"insert_drive_file"),P.Wb(),P.Xb(21,"div",31),P.Xb(22,"div",32),P.Sb(23,"p",33),P.Xb(24,"p",33),P.Tc(25),P.Wb(),P.Sb(26,"mat-progress-bar",34),P.Wb(),P.Wb(),P.Vb(27),P.Xb(28,"button",46),P.Xb(29,"mat-icon",6),P.Tc(30,"check_circle"),P.Wb(),P.Wb(),P.Ub(),P.Wb(),P.Xb(31,"div"),P.Xb(32,"mat-icon",47),P.fc("click",function(){P.Hc(o);var e=t.index,n=P.jc(),a=n.$implicit,r=n.index;return P.jc().deleteOtherDocument(a.value,r,e)}),P.Tc(33,"delete "),P.Wb(),P.Wb(),P.Wb(),P.Wb()}if(2&e){var n=t.index,a=P.Dc(9),r=P.jc().index,i=P.jc();P.Eb(1),P.rc("formGroupName",n),P.Eb(6),P.rc("ngIf","not_available"==i.otherDocumentArray[r][n])("ngIfElse",a),P.Eb(18),P.Vc("",i.progressValOtherDocumentArray[r][n],"%"),P.Eb(1),P.rc("value",i.progressValOtherDocumentArray[r][n])}}function pe(e,t){if(1&e){var o=P.Yb();P.Xb(0,"div",57),P.Xb(1,"div",58),P.fc("click",function(){P.Hc(o);var e=P.jc().index;return P.jc().addotherpage(e)}),P.Xb(2,"button",49),P.Xb(3,"mat-icon"),P.Tc(4,"add"),P.Wb(),P.Tc(5,"ADD ANOTHER PAGE "),P.Wb(),P.Wb(),P.Wb()}}function ve(e,t){if(1&e){var o=P.Yb();P.Xb(0,"div"),P.Xb(1,"mat-icon",59),P.fc("click",function(){P.Hc(o);var e=P.jc(),t=e.$implicit,n=e.index;return P.jc().deleteDocument(t.value,n)}),P.Tc(2,"delete"),P.Wb(),P.Wb()}}function ye(e,t){if(1&e){var o=P.Yb();P.Xb(0,"div",44),P.Xb(1,"webcam",60),P.fc("imageCapture",function(e){P.Hc(o);var t=P.jc().index;return P.jc().handleImage(e,t)}),P.Wb(),P.Wb()}if(2&e){var n=P.jc(2);P.Eb(1),P.rc("height",500)("width",1200)("trigger",n.triggerObservable)}}function xe(e,t){if(1&e){var o=P.Yb();P.Xb(0,"div",44),P.Xb(1,"webcam",60),P.fc("imageCapture",function(e){P.Hc(o);var t=P.jc().index;return P.jc().handleImage1(e,t)}),P.Wb(),P.Wb()}if(2&e){var n=P.jc(2);P.Eb(1),P.rc("height",500)("width",1200)("trigger",n.triggerObservable)}}function Oe(e,t){if(1&e){var o=P.Yb();P.Xb(0,"div",44),P.Xb(1,"webcam",60),P.fc("imageCapture",function(e){P.Hc(o);var t=P.jc().index;return P.jc().handleImage2(e,t)}),P.Wb(),P.Wb()}if(2&e){var n=P.jc(2);P.Eb(1),P.rc("height",500)("width",1200)("trigger",n.triggerObservable)}}var Ae=function(e){return{errbd:e}};function ke(e,t){if(1&e){var o=P.Yb();P.Xb(0,"div",10),P.Xb(1,"mat-card",11),P.Xb(2,"div"),P.Xb(3,"div"),P.Xb(4,"div"),P.Tc(5),P.Wb(),P.Sb(6,"br"),P.Xb(7,"mat-hint"),P.Tc(8,"Document Name*"),P.Wb(),P.Xb(9,"mat-form-field",12),P.Xb(10,"mat-select",13),P.fc("valueChange",function(e){P.Hc(o);var n=t.index;return P.jc().changeValue2(e,n)}),P.Xb(11,"mat-option",14),P.Tc(12,"Select"),P.Wb(),P.Rc(13,V,2,3,"mat-option",15),P.Wb(),P.Wb(),P.Rc(14,E,2,0,"mat-error",16),P.Wb(),P.Wb(),P.Xb(15,"div",17),P.Xb(16,"div"),P.Xb(17,"div",18),P.Xb(18,"mat-icon",19),P.Tc(19,"backup"),P.Wb(),P.Xb(20,"div",20),P.Rc(21,j,2,1,"div",21),P.Rc(22,B,1,1,"ng-template",null,22,P.Sc),P.Wb(),P.Xb(24,"div",23),P.Xb(25,"mat-label",24),P.Tc(26,"Front side "),P.Wb(),P.Sb(27,"br"),P.Wb(),P.Xb(28,"div",25),P.Xb(29,"button",26),P.Tc(30," Upload"),P.Rc(31,R,1,0,"input",27),P.Wb(),P.Wb(),P.Rc(32,U,4,0,"div",28),P.Wb(),P.Xb(33,"div",29),P.Xb(34,"mat-icon",30),P.Tc(35,"insert_drive_file"),P.Wb(),P.Xb(36,"div",31),P.Xb(37,"div",32),P.Xb(38,"p",33),P.Tc(39),P.Wb(),P.Sb(40,"mat-progress-bar",34),P.Wb(),P.Wb(),P.Rc(41,L,5,0,"ng-container",16),P.Rc(42,z,4,0,"ng-container",16),P.Wb(),P.Wb(),P.Rc(43,$,30,9,"div",16),P.Rc(44,Z,6,0,"div",35),P.Rc(45,ae,28,8,"div",16),P.Rc(46,me,8,6,"mat-card",36),P.Rc(47,be,6,0,"div",37),P.Xb(48,"div",38),P.Rc(49,fe,34,5,"div",39),P.Wb(),P.Rc(50,pe,6,0,"div",40),P.Wb(),P.Rc(51,ve,3,0,"div",16),P.Wb(),P.Rc(52,ye,2,3,"div",28),P.Rc(53,xe,2,3,"div",28),P.Rc(54,Oe,2,3,"div",28),P.Wb()}if(2&e){var n=t.$implicit,a=t.index,r=P.Dc(23),i=P.jc();P.Eb(1),P.rc("formGroupName",a),P.Eb(4),P.Vc("Document ",a+1,""),P.Eb(5),P.rc("ngClass",P.xc(25,Ae,!n.controls.documentName.valid&&n.controls.documentName.touched)),P.Eb(3),P.rc("ngForOf",i.document_name),P.Eb(1),P.rc("ngIf",!n.controls.documentName.valid&&n.controls.documentName.touched),P.Eb(7),P.rc("ngIf","not_available"==i.frontImageArray[a])("ngIfElse",r),P.Eb(8),P.rc("disabled",!n.controls.documentName.value),P.Eb(2),P.rc("ngIf",n.controls.documentName.value),P.Eb(1),P.rc("ngIf",i.scan1Array[a]),P.Eb(7),P.Vc("",i.progressValFrontArray[a],"%"),P.Eb(1),P.rc("value",i.progressValFrontArray[a]),P.Eb(1),P.rc("ngIf",i.progressValFrontArray[a]&&100!=i.progressValFrontArray[a]),P.Eb(1),P.rc("ngIf",i.progressValFrontArray[a]&&100==i.progressValFrontArray[a]),P.Eb(1),P.rc("ngIf",i.secondBoxArray[a]),P.Eb(1),P.rc("ngIf",!i.secondBoxArray[a]),P.Eb(1),P.rc("ngIf",i.thirdBoxArray[a]),P.Eb(1),P.rc("ngIf",i.pancard),P.Eb(1),P.rc("ngIf",i.secondBoxArray[a]&&!i.thirdBoxArray[a]),P.Eb(2),P.rc("ngForOf",i.docarray1[a]),P.Eb(1),P.rc("ngIf",i.newOtherPage),P.Eb(1),P.rc("ngIf",0!=a),P.Eb(1),P.rc("ngIf",i.scan1Array[a]),P.Eb(1),P.rc("ngIf",i.scan2Array[a]),P.Eb(1),P.rc("ngIf",i.scan3Array[a])}}var Ce,_e,Ie=[{path:"",component:(Ce=function(){function t(o,n,a,r,i,c,s,d,l,u,m,b,g){var h=this;e(this,t),this.http=o,this.tokenService=n,this.dialog=a,this.router=r,this.fb=i,this.snack=c,this.ls=s,this.shareDataService=d,this.cdr=l,this.api=u,this.dialogService=m,this.loader=b,this.fileService=g,this.webcamImage=null,this.webcamImage1=null,this.scan1Array=[],this.scan2Array=[],this.scan3Array=[],this.customerId=null,this.frontImageArray=[],this.backImageArray=[],this.otherImageArray=[],this.otherDocumentArray=[],this.boxArray=[],this.document_type=["6","7","8"],this.custDocExist=!1,this.selectedOptions2=[],this.documentSide=null,this.frontImage=null,this.backImage=null,this.otherImage=null,this.secondBoxArray=[],this.thirdBoxArray=[],this.ocrResult="Recognizing...",this.selectedDocumentTypes2=[],this.nameOnCard=[],this.dobArray=[],this.idNumberArray=[],this.pincode=[],this.gender=[],this.state=[],this.addressArray=[],this.dataFetched=!1,this.boxArray2=[],this.boxArray3=[],this.doc_name=[],this.docuNameArray=[],this.arrayOfImageArrays0=[],this.arrayOfImageArrays1=[],this.arrayOfImageArrays2=[],this.docValArray=[],this.docarray1=[],this.newOtherPage=!1,this.otherDocPages=[],this.otherDocumentArray2=[],this.ff=!1,this.bf=!1,this.docName="document_name",this.progressValFrontArray=[],this.progressValBackArray=[],this.progressValOthersArray=[],this.progressValOtherDocumentArray=[],this.customerDocs=[],this.trigger=new y.a,this.aadharParser=function(e){try{for(var t,o,n=2,a=e.replace(/[^\x00-\x7F]/g,"").trim().split("\n"),r=a.length-1;r>=0;r--){for(var i=0,c=-1,s=0;s<a[r].length;s++)a[r][s]>="0"&&a[r][s]<="9"&&(i++,-1===c&&(c=s));i>=12&&(t=a[r].substr(c,c+14))}for(var d=function(e){["DOB","Year of Birth"].some(function(t){var r=a[e].indexOf(t);-1!==r&&(o=a[e].trim().slice(r,a[e].length).split(" ").pop(),n=e-1,console.log(o))})},l=0;l<a.length;l++)d(l);var u=a[n].split(" ").filter(function(e){return e.length>1}).join(" ");return console.log(u),{dob:o,adharNumber:t,fullName:u}}catch(m){console.log(m),console.error("Unable to parse aadhar")}},this.isDocumentOptionDisabled2=function(e){return h.selectedOptions2.includes(e)},this.panCardParser=function(e){try{var t=e.replace(/[^\x00-\x7F]/g,""),o=t.indexOf("Permanent"),n=t.indexOf("Name"),a=t.slice(o,n).match("[A-Z]{5}[0-9]{4}[A-Z]{1}")[0],r=t.indexOf("Father's Name :"),i=t.slice(n,r).split("\n")[1].split(" "),c=t.slice(t.indexOf("Date of Birth"),t.length).split("\n")[1].split(" ")[0];return{panNumber:a,name:"".concat(i[0]," ").concat(i[1]),dateOfBirth:c}}catch(s){console.log(s),console.error("Unable to parse pan card"),h.snack.open("Please Upload Valid Document","OK",{duration:4e3,verticalPosition:"top",horizontalPosition:"right"})}},this.passportParser=function(e){var t;try{var o,n,a=e.replace(/[^\x00-\x7F]/g,""),r=a.indexOf("Given Name"),i=a.slice(r,a.length).split("\n"),c=i.findIndex(function(e){return e.indexOf("Date of Issue")>-1})+1;if(c>0){var s=i[c].split(" ");o=s[s.length-2],n=s[s.length-2]}for(var d,l=a.indexOf("Nationality"),u=null===(t=a.slice(l,a.length))||void 0===t?void 0:t.split("\n")[1].split(" ").pop(),m=a.trim().split("\n"),b=m.length-1;b>=0;b--)if(m[b].includes("<")){d=m[b].substr(0,m[b].indexOf("<"));break}return{dob:u,name:i[1],issueNoString:d,dateOfIssue:o,dateOfExpiry:n}}catch(g){console.error("Unable to parse passport")}}}return o(t,[{key:"ngOnInit",value:function(){var e=this;localStorage.getItem("customer_id")&&this.getCustomerDocuments(localStorage.getItem("customer_id")),this.documentForm=this.fb.group({documentName:["",[u.z.required]],frontSide:["",[u.z.required]],backSide:[""],others:[""],items:this.fb.array([this.inititemrows("")])}),this.doc_name=["Aadhar card","Pan card","Passport"],this.docValArray=["frontSide","backSide","others"],console.log(this.documentForm),console.log(this.docName),this.tokenService.getDropDownValues(this.docName).subscribe(function(t){e.document_name=t,console.log("resp",t),console.log("this.document_name :: ",e.document_name)}),this.api.getName().subscribe(function(t){e.assignName(t.name),console.log("resp.name",t.name)}),this.api.getOCR().subscribe(function(e){console.log("ocr resp from backend ",e)}),this.shareDataService.getCustomerId.subscribe(function(t){e.api.getOCR().subscribe(function(t){console.log("ocr resp from backend ",t),e.assignOCRValues(t)}),console.log("cId=",t),null!==t&&(e.refreshCustomerId=t,e.getCustomerDocuments(t),console.log("cId=",t))}),this.documentForm.valueChanges.subscribe(function(t){console.log("data:: ",t),console.log("this.documentForm",e.documentForm),console.log("data.doc_list.length",t.doc_list),t.doc_list.length>0&&(console.log("data.doc_list.length",t.doc_list.length),e.selectedOptions2=[],t.doc_list.forEach(function(t,o){console.log("index :: ",o),e.selectedOptions2.push(t.documentType)}))}),this.api.getKycDataFetchedInfo().subscribe(function(t){console.log(t),e.documentForm=e.fb.group({documentsList:e.fb.array([e.createItem()]),doc_list:e.fb.array("DATA FETCH"===t?[]:[e.createDocItem()]),id:[""],upload:["",[u.z.required]]}),console.log(e.documentForm.get("documentName")),console.log(e.documentForm.value.documentsList[0].documentName),console.log("this.documentForm",e.documentForm),console.log("documentsList",e.documentsList),console.log("doc_list",e.doc_list),"DATA FETCH"===t?(e.dataFetched=!0,e.dataFetchedValue=t):e.dataFetched=!1}),this.disableNext=!0}},{key:"inititemrows",value:function(e){return this.fb.group({id:e?e.id:[""],fileUrl:e?e.fileUrl:[""]})}},{key:"addDocuments",value:function(){this.newOtherPage=!1,console.log(this.documentForm),console.log(this.documentForm.get("documentsList")),console.log(this.documentForm.get("documentsList")),this.disableNext=!0,this.documentsList=this.documentForm.get("documentsList"),console.log(this.doc_list),this.documentsList.push(this.createItem()),this.doc_list.push(this.createDocItem())}},{key:"createDocItem",value:function(){return this.fb.group({documentName:["",[u.z.required]],frontSide:["",[u.z.required]],backSide:[""],others:[""],fileUrl:[""]})}},{key:"createItem",value:function(){return this.fb.group({id:[""],documentName:["",u.z.required],documentType:["",u.z.required]})}},{key:"assignOCRValues",value:function(e){console.log(e),this.dob=e.dob,this.namePancard=e.namePancard,this.panNumber=e.panNumber,this.frontImageArray[0]=e.imageOCR,this.backImageArray[0]=e.imageOCRBack,e.imageOCRBack&&(this.backImageArray[0]=e.imageOCRBack,this.secondBoxArray[0]=!0,this.address=e.address,this.addressDisplay=!0,this.progressValBackArray[0]=100);var t=Object.values(e).some(function(e){return Boolean(e)});console.log("hasNonEmptyFields",t),t&&(this.documentForm.get("documentName").patchValue("Aadhar card"),console.log(this.documentForm.get("documentName")),this.progressValFrontArray[0]=100,this.disableNext=!0,this.pancard=!0)}},{key:"delete",value:function(e,t,o){var n=this;console.log(e),this.docum_name=e.documentName,this.customerId=sessionStorage.getItem("customer_id"),2==t&&(this.secondBoxArray[o]=!1,this.addressDisplay=!1,this.progressValBackArray[o]=0,this.backImageArray[o]=null,this.backSelected=null,this.document_side=t,this.api.deleteCustDoc(this.customerId,this.docum_name,this.document_side).subscribe(function(e){n.displayVal1=!1})),3==t&&(this.thirdBoxArray[o]=!1,this.progressValOthersArray[o]=0,this.otherImageArray[o]=null,this.othersSelected=null,this.document_side=t,this.api.deleteCustDoc(this.customerId,this.docum_name,this.document_side).subscribe(function(e){})),this.disableNext=!1}},{key:"deleteOtherDocument",value:function(e,t,o){this.docum_name=e.documentName,this.customerId=sessionStorage.getItem("customer_id"),this.newDocumentSide=o+4,this.docarray1[t][o]?(this.docarray1[t].pop(),this.otherDocumentArray[t][o]=null,console.log("this.otherDocumentArray[i][k] ",this.otherDocumentArray[t][o])):console.log("this.docarray1",this.docarray1),this.api.deleteCustDoc(this.customerId,this.docum_name,this.newDocumentSide).subscribe(function(e){})}},{key:"assignName",value:function(e){this.name=e.toLowerCase()}},{key:"addotherpage",value:function(e){if(this.docarray1[e])console.log("this.docarray1[a]",this.docarray1[e]),console.log("this.docarray1[a]",this.docarray1[e].boxes),this.docarray1[e].push(this.inititemrows(""));else{var t=[this.inititemrows("")];this.docarray1[e]=t,this.otherDocumentArray[e]=[],this.progressValOtherDocumentArray[e]=[]}console.log("docarray1",this.docarray1)}},{key:"createOtherForm",value:function(e){return this.fb.group({id:[""],fileData:e?e.fileData:[""],fileUrl:e?e.fileUrl:[""]})}},{key:"triggerSnapshot",value:function(e){this.trigger.next(),this.scan1Array[e]=!1,this.scan2Array[e]=!1,this.scan3Array[e]=!1}},{key:"callingBox2",value:function(e){this.secondBoxArray[e]=!0,this.disableNext=!0,console.log(this.secondBoxArray[e])}},{key:"callingBox3",value:function(e){this.thirdBoxArray[e]=!0,this.disableNext=!0,this.newOtherPage=!0}},{key:"doOCR",value:function(e,t,o,n,a){var r=this;this.loader.open(),"Pan card"===this.documentForm.value.documentsList[a].documentName&&this.fileService.uploadPan(o).subscribe(function(i){if(r.loader.close(),"object"==typeof i){if(console.log("api res -- ",i.data),!i.data.name.value||!i.data.pan.value)return void r.snack.open("The document is not a valid Pan card","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"});r.nameDoc=i.data.name.value,r.dialogService.confirmationDialog(r.nameDoc,r.name).subscribe(function(c){console.log(c),"No"==c&&r.changeValue2_Ocr(t,a),"Yes"==c&&(r.nameOnCard[a]=i.data.name.value,r.dobArray[a]=i.data.dob.value,r.idNumberArray[a]=i.data.pan.value,r.openDialogueBoxForOcrDetailsDisplay(r.nameOnCard[a],r.dobArray[a],r.idNumberArray[a],r.addressArray[a],r.pincode[a],r.gender[a],r.state[a]),r.uploadDoc(e,o,t,n,a))})}},function(e){console.log("Something went wrong! Err:: ",e),r.loader.close(),r.snack.open("The document is not a valid Pan card","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"})}),"Passport"==this.documentForm.value.documentsList[a].documentName&&this.fileService.uploadPassport(o).subscribe(function(i){var c,s,d,l;if(r.loader.close(),"object"==typeof i){if(console.log("api res -- ",i.data),!i.data.passport_no.value)return void r.snack.open("The document is not a valid Passport","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"});r.nameDoc=(null===(s=null===(c=i.data)||void 0===c?void 0:c.surname)||void 0===s?void 0:s.value)?"".concat(i.data.given_name.value," ").concat(null===(l=null===(d=i.data)||void 0===d?void 0:d.surname)||void 0===l?void 0:l.value):i.data.given_name.value,r.dialogService.confirmationDialog(r.nameDoc,r.name).subscribe(function(c){var s,d,l,u;console.log(c),"No"==c&&r.changeValue2_Ocr(t,a),"Yes"==c&&(r.nameOnCard[a]=(null===(d=null===(s=i.data)||void 0===s?void 0:s.surname)||void 0===d?void 0:d.value)?"".concat(i.data.given_name.value," ").concat(null===(u=null===(l=i.data)||void 0===l?void 0:l.surname)||void 0===u?void 0:u.value):i.data.given_name.value,r.dobArray[a]=i.data.dob.value,r.idNumberArray[a]=i.data.passport_no.value,r.dateOfIssue=i.data.issue_date.value,r.dateOfExpiry=i.data.expiry_date.value,r.gender[a]=i.data.gender.value,r.openDialogueBoxForOcrDetailsDisplay(r.nameOnCard[a],r.dobArray[a],r.idNumberArray[a],r.addressArray[a],r.pincode[a],r.gender[a],r.state[a]),r.uploadDoc(e,o,t,n,a))})}},function(e){console.log("Something went wrong! Err:: ",e),r.loader.close(),r.snack.open("The document is not a valid Passport","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"})}),"Aadhar card"==this.documentForm.value.documentsList[a].documentName&&"1"==n&&this.fileService.uploadAadhaarFront(o).subscribe(function(i){if(r.loader.close(),"object"==typeof i){if(console.log("api res -- ",i.data),!i.data.no.value)return void r.snack.open("The document is not a valid Aadhaar card","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"});r.nameDoc=i.data.name.value,r.dialogService.confirmationDialog(r.nameDoc,r.name).subscribe(function(c){console.log(c),"No"==c&&r.changeValue2_Ocr(t,a),"Yes"==c&&(r.nameOnCard[a]=i.data.name.value,r.dobArray[a]=i.data.dob.value,r.idNumberArray[a]=i.data.no.value,r.gender[a]=i.data.gender.value,r.openDialogueBoxForOcrDetailsDisplay(r.nameOnCard[a],r.dobArray[a],r.idNumberArray[a],r.addressArray[a],r.pincode[a],r.gender[a],r.state[a]),r.uploadDoc(e,o,t,n,a))})}},function(e){console.log("Something went wrong! Err:: ",e),r.loader.close(),r.snack.open("The document is not a valid Aadhaar card","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"})}),"Aadhar card"==this.documentForm.value.documentsList[a].documentName&&"2"==n&&this.fileService.uploadAadhaarBack(o).subscribe(function(i){if(r.loader.close(),"object"==typeof i){if(console.log("api res -- ",i.data),!i.data.no.value)return void r.snack.open("The document is not a valid Aadhaar card","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"});r.dialogService.confirmationDialog(r.nameDoc,r.name).subscribe(function(c){console.log(c),"No"==c&&r.changeValue2_Ocr(t,a),"Yes"==c&&(r.addressArray[a]=i.data.address.value,r.pincode[a]=i.data.pin.value,r.state[a]=i.data.state.value,r.openDialogueBoxForOcrDetailsDisplay(r.nameOnCard[a],r.dobArray[a],r.idNumberArray[a],r.addressArray[a],r.pincode[a],r.gender[a],r.state[a]),r.uploadDoc(e,o,t,n,a))})}},function(e){console.log("Something went wrong! Err:: ",e),r.loader.close(),r.snack.open("The document is not a valid Aadhaar card","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"})})}},{key:"openDialogueBoxForOcrDetailsDisplay",value:function(e,t,o,n,a,r,i){this.openDialog1(e,t,o,n,a,r,i)}},{key:"openDialog1",value:function(e,t,o,n,a,r,i){}},{key:"handleImage",value:function(e,t){this.webcamImage=e,this.fun(this.webcamImage,t)}},{key:"handleImage1",value:function(e,t){this.webcamImage1=e,this.fun1(this.webcamImage1,t)}},{key:"changeValue2",value:function(e,t){var o=this;this.disableNext=!0,this.selectedDocumentTypes2[t]&&(this.selectedOptions2=this.selectedOptions2.filter(function(e){return e!==o.selectedDocumentTypes2[t]})),this.selectedDocumentTypes2[t]=e,this.selectedOptions2.push(e),this.secondBoxArray[t]=!1,this.thirdBoxArray[t]=!1,this.frontImageArray[t]="",this.backImageArray[t]="",this.otherImageArray[t]="",this.backSelected="",this.frontSelected="",this.othersSelected="",this.progressValFrontArray[t]=0,this.progressValBackArray[t]=0,this.pancard=!1,console.log("i=",t)}},{key:"changeValue2_Ocr",value:function(e,t){"frontSide"===e&&(this.frontImageArray[t]="",this.frontSelected="",this.progressValFrontArray[t]=0),"backSide"===e&&(this.secondBoxArray[t]=!1,this.backImageArray[t]="",this.backSelected="",this.progressValBackArray[t]=0),"others"===e&&(this.thirdBoxArray[t]=!1,this.otherImageArray[t]="",this.othersSelected="",this.progressValOthersArray[t]=0,this.disableNext=!0)}},{key:"j",value:function(e,t){throw new Error("Method not implemented.")}},{key:"handleImage2",value:function(e,t){console.log(t),this.webcamImage2=e,this.function2(this.webcamImage2,t)}},{key:"function2",value:function(e,t){var o=this;console.log(t);var n=new FormData,a={customerId:this.refreshCustomerId,documentName:this.documentForm.value.documentName,documentType:"3",fileType:e._mimeType,fileName:"doc",verificationType:"KYC verification",documentSide:3,idNumber:this.panNumber};console.log(e.imageAsDataUrl),this.otherImageArray[t]=e.imageAsDataUrl,this.displayVal2=!1;var r=this.dataURLtoFile(e.imageAsDataUrl,"Aadhar");n.append("data",JSON.stringify(a)),n.append("file",r),this.tokenService.upload(n).subscribe(function(e){o.progressValOthersArray[t]=100,4===e.type&&e.body&&(console.log("res.body.id",e.body.id),o.assignIdValues("others",e.body.id)),o.documentForm.get("backSide").patchValue(!0)},function(e){201==e.status&&(o.ff=!0,o.documentForm.get("backSide").patchValue(!0),o.shotToast("Document Uploaded!"))})}},{key:"triggerObservable",get:function(){return this.trigger.asObservable()}},{key:"getCustomerDocuments",value:function(e){var t=this;e&&(this.cId=e),console.log(e),this.router.navigate(["/document"],{queryParams:{customerId:this.cId}});var o=function(o){if(Object.prototype.hasOwnProperty.call(t.document_type,o)){var n=t.document_type[o];console.log(n,o,e),t.tokenService.getCustomerDocuments(e,n).subscribe(function(e){var n,a,r;console.log(o,e,t.documentForm),t.customerDocs=e,t.docuNameArray=["Aadhar card","Pan card","Passport"],console.log(t.documentForm.controls.documentsList.controls),t.documentForm.controls.documentsList.controls[0].controls.documentName.setValue(t.docuNameArray[0]),t.doc_name=["Aadhar card","Pan card","Passport"];for(var i=0;i<(null===(n=t.customerDocs)||void 0===n?void 0:n.length);i++){if(t.customerDocs[i]){console.log(t.customerDocs[i].documentName);for(var c=0;c<3;c++)t.customerDocs[i].documentName==t.doc_name[c]&&1==t.customerDocs[i].documentSide&&(t.frontImageArray[c]=t.customerDocs[i].fileUrl,t.progressValFrontArray[c]=100,console.log("index",c));for(var s=0;s<3;s++)t.customerDocs[i].documentName==t.doc_name[s]&&2==t.customerDocs[i].documentSide&&(t.backImageArray[s]=t.customerDocs[i].fileUrl,t.progressValBackArray[s]=100,t.secondBoxArray[s]=!0);for(var d=0;d<3;d++)t.customerDocs[i].documentName==t.doc_name[d]&&3==t.customerDocs[i].documentSide&&(t.otherImageArray[d]=t.customerDocs[i].fileUrl,t.progressValOthersArray[d]=100,t.thirdBoxArray[d]=!0);for(var l=0;l<3;l++)if(t.customerDocs[i].documentName==t.doc_name[l]&&t.customerDocs[i].documentSide>3){if(t.fetchChildIndex=t.customerDocs[i].documentSide-4,t.progressValOtherDocumentArray[l][t.fetchChildIndex]=t.progressValOtherDocumentArray[l][t.fetchChildIndex]?100:1070,t.newOtherPage=!0,t.docarray1[l])t.docarray1[l].push(t.inititemrows(""));else{var u=[t.inititemrows("")];t.docarray1[l]=u,t.otherDocumentArray[l]=[]}t.otherDocumentArray[l][t.fetchChildIndex]=t.customerDocs[i].fileUrl,console.log("this.otherDocumentArray",t.otherDocumentArray)}}t.disableNext=!1}if((null===(a=t.customerDocs)||void 0===a?void 0:a.length)>0){if(t.page_id=t.ls.getItem("page_id"),console.log(t.page_id),"Pan card"==t.customerDocs[0].documentName&&2!==t.page_id){var m=document.getElementById("auto_trigger");m&&(console.log(m),m.click()),t.disableNext=!1}if(null===(r=t.documentForm.controls.documentsList.controls[1].controls)||void 0===r||r.documentName.setValue(t.docuNameArray[1]),"Passport"==t.customerDocs[0].documentName&&2!==t.page_id){var b=document.getElementById("auto_trigger");b&&(console.log(b),b.click()),t.disableNext=!1}t.documentForm.controls.documentsList.controls[2].controls.documentName.setValue(t.docuNameArray[2]),"Pan card"==t.frontImage.documentName&&(t.panNumber=t.customerDocs.find(function(e){return 2==e.documentSide}).idNumber),"Aadhar card"==t.frontImage.documentName&&(t.panNumber=t.customerDocs.find(function(e){return 1==e.documentSide}).idNumber),t.panNumber&&(t.pancard=!0),null!=t.frontImage&&(t.progressValFrontArray[0]=100),null!=t.backImage&&(t.progressValBackArray[0]=100),null!=t.otherImage&&(t.progressValOthersArray[0]=100),t.documentForm.patchValue({documentName:t.customerDocs[0].documentName,frontSide:t.customerDocs[0].documentName,backSide:t.customerDocs[0].documentName}),console.log(t.customerDocs[0].documentName)}t.cdr.markForCheck(),console.log("end of api")})}};for(var n in this.document_type)o(n)}},{key:"convertBlob",value:function(e){return this.sanitizer.bypassSecurityTrustUrl("data:image/jpeg;base64,"+e)}},{key:"scan",value:function(e){this.scan1Array[e]=!0,this.scan2Array[e]=!1,this.scan3Array[e]=!1,this.disableNext=!1}},{key:"scan12",value:function(e){this.scan1Array[e]=!1,this.scan2Array[e]=!0,this.scan3Array[e]=!1,this.disableNext=!1}},{key:"scan13",value:function(e){this.scan1Array[e]=!1,this.scan2Array[e]=!1,this.scan3Array[e]=!0,this.disableNext=!1}},{key:"fun",value:function(e,t){var o=this,n=new FormData,a={customerId:this.refreshCustomerId,documentName:this.documentForm.value.documentName,documentType:"3",fileType:e._mimeType,fileName:"doc",verificationType:"KYC verification",documentSide:1,idNumber:this.panNumber};this.frontImageArray[t]=e.imageAsDataUrl,this.displayVal=!1;var r=this.dataURLtoFile(e.imageAsDataUrl,"Aadhar");n.append("data",JSON.stringify(a)),n.append("file",r),this.tokenService.upload(n).subscribe(function(e){o.progressValFrontArray[t]=100,o.documentForm.get("frontSide").patchValue(!0)},function(e){201==e.status&&(o.bf=!0,o.documentForm.get("frontSide").patchValue(!0),o.shotToast("Document Uploaded!"))})}},{key:"fun1",value:function(e,t){var o=this;console.log("inside fun1");var n=new FormData,a={customerId:this.refreshCustomerId,documentName:this.documentForm.value.documentName,documentType:"3",fileType:e._mimeType,fileName:"doc",verificationType:"KYC verification",documentSide:2,idNumber:this.panNumber};this.backImageArray[t]=e.imageAsDataUrl,this.displayVal1=!1;var r=this.dataURLtoFile(e.imageAsDataUrl,"Aadhar");n.append("data",JSON.stringify(a)),n.append("file",r),this.tokenService.upload(n).subscribe(function(e){o.progressValBackArray[t]=100,4===e.type&&e.body&&(console.log("res.body.id",e.body.id),o.assignIdValues("backSide",e.body.id)),o.documentForm.get("backSide").patchValue(!0)},function(e){201==e.status&&(o.ff=!0,o.documentForm.get("backSide").patchValue(!0),o.shotToast("Document Uploaded!"))})}},{key:"dataURLtoFile",value:function(e,t){for(var o=e.split(","),n=o[0].match(/:(.*?);/)[1],a=atob(o[1]),r=a.length,i=new Uint8Array(r);r--;)i[r]=a.charCodeAt(r);return new File([i],t,{type:n})}},{key:"assign",value:function(e){this.customerId=e}},{key:"onUpload",value:function(e,t,o,n){var a=this;if(this.newDocumentSide=o,this.childindex=o-4,console.log(e,t,o),"frontSide"===t&&(this.progressValFrontArray[n]=0),"backSide"===t&&(this.progressValBackArray[n]=0),"others"===t&&(this.progressValOthersArray[n]=0),"otherDocument"===t&&(this.progressValOtherDocumentArray[n][this.childindex]=0),this.selectedFiles=e.target.files[0],this.shotToast("Your file size is "+this.formatBytes(e.target.files[0].size,2)),e.target.files){var r=new FileReader;r.readAsDataURL(e.target.files[0]),r.onload=function(e){a.image=e.target.result,"backSide"===t&&(a.backSelected=a.selectedFiles.name,a.doOCR(a.image,t,a.selectedFiles,o,n),a.displayVal1=!0),"frontSide"===t&&(a.frontSelected=a.selectedFiles.name,a.doOCR(a.image,t,a.selectedFiles,o,n),a.displayVal=!0),"others"===t&&(a.othersSelected=a.selectedFiles.name,console.log("this.otherImageArray[i] ::",a.otherImageArray[n]),a.doOCR(a.image,t,a.selectedFiles,o,n),a.displayVal2=!0),"otherDocument"===t&&(a.otherDocumentSelected=a.selectedFiles.name,console.log("indexes",n,a.otherDocumentArray),a.otherDocumentArray[n][a.childindex]=a.image,console.log("final document",a.docarray1),a.doOCR(a.otherDocumentArray[n][a.childindex],t,a.selectedFiles,o,n))}}console.log(this.documentForm.valid),this.disableNext=!1}},{key:"formatBytes",value:function(e,t){if(0===e)return"0 Bytes";var o=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(o))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}},{key:"uploadDoc",value:function(e,t,o,n,a){var r=this;this.childindex=n-4,console.log("URL ---- ",t);var i=new FormData;console.log("cId::",this.refreshCustomerId),console.log(this.documentForm.value.documentsList[a].documentName),"Aadhar card"===this.documentForm.value.documentsList[a].documentName&&(this.docType="6"),"Pan card"===this.documentForm.value.documentsList[a].documentName&&(this.docType="7"),"Passport"===this.documentForm.value.documentsList[a].documentName&&(this.docType="8");var c={customerId:this.refreshCustomerId,documentName:this.documentForm.value.documentsList[a].documentName,documentType:this.docType,fileType:t.type,fileName:t.name,verificationType:"KYC verification",documentSide:n,idNumber:this.panNumber,name:this.namePancard,dob:this.dob};i.append("data",JSON.stringify(c)),i.append("file",t),console.log("URL -- ",t.name,c,i),this.uploadSub=this.tokenService.upload(i).subscribe(function(t){console.log("Response -- ",t),"backSide"===o?t.type&&t.type==l.e.UploadProgress&&(r.progressValBackArray[a]=Math.round(t.loaded/t.total*100),console.log("uploadProgress",r.progressValBackArray[a]),r.backImageArray[a]=e):"frontSide"===o?t.type&&t.type==l.e.UploadProgress&&(r.progressValFrontArray[a]=Math.round(t.loaded/t.total*100),console.log("uploadProgress",r.progressValFrontArray[a]),r.frontImageArray[a]=e):"others"===o?t.type&&t.type==l.e.UploadProgress&&(r.progressValOthersArray[a]=Math.round(t.loaded/t.total*100),console.log("uploadProgress others",r.progressValOthersArray[a]),r.otherImageArray[a]=e):"otherDocument"===o&&t.type==l.e.UploadProgress&&(r.progressValOtherDocumentArray[a][r.childindex]=Math.round(t.loaded/t.total*100)),t.body&&(console.log("res.body.id",t.body.id),r.assignIdValues(o,t.body.id),r.documentForm.get(o).patchValue(!0),console.log("this.documentForm.get(docVal)",r.documentForm.get(o)),r.shotToast("Document Uploaded!"))},function(e){console.log("File upload ::",e),201==e.status?(r.documentForm.get(o).patchValue(!0),r.shotToast("Document Uploaded!")):"backSide"===o?(r.progressValBackArray[a]=0,r.backImageArray[a]=null,r.backSelected=null,r.shotToast(e.message)):(r.progressValFrontArray[a]=0,r.frontImageArray[a]=null,r.frontSelected=null,r.shotToast(e.message))})}},{key:"assignIdValues",value:function(e,t){console.log(e),"backSide"===e&&(this.backSideId=t),"others"===e&&(this.otherSideId=t),"otherDocument"===e&&(this.otherDocumentSideId=t)}},{key:"ngOnDestroy",value:function(){this.shareDataService.shareCustomerId(null)}},{key:"cancelUpload",value:function(e){this.uploadSub.unsubscribe(),this.shotToast("Document Uploaded Cancelled!"),"backSide"==e?(this.progressValBackArray[0]=0,this.backImageArray[0]=null,this.backSelected=null):(this.progressValFrontArray[0]=0,this.frontImageArray[0]=null,this.frontSelected=null)}},{key:"shotToast",value:function(e){this.snack.open(""+e,"OK",{duration:6e3,verticalPosition:"top",horizontalPosition:"right"})}},{key:"deleteDocument",value:function(e,t){console.log(this.customerId,e,t),this.customerId=this.ls.getItem("customerId");var o=this.documentForm.get("documentsList");console.log(o),o.removeAt(t),this.api.delCustDoc(this.customerId,e.documentName).subscribe(function(e){console.log("data after delete",e)})}},{key:"back",value:function(){}},{key:"done",value:function(){this.documentForm.reset(),this.dialog.open(N,{width:"35%",backdropClass:"dialog-bg-trans",height:"50%",disableClose:!0}).afterClosed().subscribe(function(e){console.log("The dialog was closed",e)})}}]),t}(),Ce.\u0275fac=function(e){return new(e||Ce)(P.Rb(l.c),P.Rb(x.b),P.Rb(D.b),P.Rb(d.h),P.Rb(u.f),P.Rb(w.a),P.Rb(A.a),P.Rb(k.a),P.Rb(P.h),P.Rb(x.b),P.Rb(C.a),P.Rb(_.a),P.Rb(I.a))},Ce.\u0275cmp=P.Lb({type:Ce,selectors:[["app-document-upload-from-email"]],viewQuery:function(e,t){var o;1&e&&P.ad(O.a,!0),2&e&&P.Cc(o=P.gc())&&(t.progressBar=o.first)},decls:20,vars:3,consts:[[1,"matCard"],[1,"uploadField"],[1,"line"],[3,"formGroup"],["formArrayName","documentsList",4,"ngFor","ngForOf"],["mat-raised-button","","type","button","id","auto_trigger",3,"disabled","click"],["color","primary"],[1,"button"],["mat-button","",1,"Back",3,"click"],["mat-stroked-button","",1,"Next",3,"click"],["formArrayName","documentsList"],[3,"formGroupName"],["appearance","none",1,"formField"],["formControlName","documentName","placeholder","Choose Document Name","name","documentName",1,"inputMatcard1",3,"ngClass","valueChange"],["value",""],[3,"value","disabled",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"form1"],[1,"flex-grow-2"],[1,"matIcon"],[1,"insertDriveImg"],[4,"ngIf","ngIfElse"],["showAvatar",""],[1,"dived"],[2,"margin-left","30%"],[2,"padding-left","15%"],[1,"Upload","scanButton",3,"disabled"],["type","file","class","changeInput","accept","image/*",3,"change",4,"ngIf"],["style","font-size: 10px;",4,"ngIf"],["id","box"],[1,"insertDrive"],[1,"progressDiv"],[1,"mb-8"],[1,"m-0","text-right"],[1,"rounded",2,"height","6px",3,"value"],["id","row","class","sub_div",3,"click",4,"ngIf"],["class","panCradDiv",4,"ngIf"],["id","row",3,"click",4,"ngIf"],["fxLayout","row wrap","fxFlex","100","fxLayoutGap","50px"],["fxFlex","25",4,"ngFor","ngForOf"],["id","row",4,"ngIf"],[3,"value","disabled"],["alt","",1,"formImg",3,"src"],["type","file","accept","image/*",1,"changeInput",3,"change"],[2,"font-size","10px"],["mat-flat-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"backIcon",3,"click"],["id","row",1,"sub_div",3,"click"],["mat-raised-button","","color","primary"],[1,"formImg",3,"src"],[1,"panCradDiv"],["id","row",3,"click"],[1,"button_2"],["fxFlex","25"],[1,"Upload","scanButton"],["type","file","accept","image/*","accept","image/*",1,"changeInput",3,"change"],["id","row"],[1,"button_3",3,"click"],[1,"backIcon1",3,"click"],[3,"height","width","trigger","imageCapture"]],template:function(e,t){1&e&&(P.Xb(0,"mat-card",0),P.Xb(1,"h1",1),P.Tc(2,"Document Upload"),P.Wb(),P.Sb(3,"hr",2),P.Xb(4,"form",3),P.Rc(5,ke,55,27,"div",4),P.Wb(),P.Xb(6,"div"),P.Xb(7,"table"),P.Xb(8,"tr"),P.Xb(9,"td"),P.Xb(10,"button",5),P.fc("click",function(){return t.addDocuments()}),P.Xb(11,"mat-icon",6),P.Tc(12,"add"),P.Wb(),P.Tc(13,"DOCUMENT "),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Wb(),P.Sb(14,"br"),P.Xb(15,"div",7),P.Xb(16,"button",8),P.fc("click",function(){return t.back()}),P.Tc(17,"Back"),P.Wb(),P.Xb(18,"button",9),P.fc("click",function(){return t.done()}),P.Tc(19,"Done"),P.Wb(),P.Wb()),2&e&&(P.Eb(4),P.rc("formGroup",t.documentForm),P.Eb(1),P.rc("ngForOf",t.documentForm.get("documentsList").controls),P.Eb(5),P.rc("disabled",3==t.selectedOptions2.length))},directives:[v.a,u.A,u.s,u.j,i.m,X.b,c.a,u.e,u.k,S.f,S.c,F.a,u.r,u.i,i.l,M.a,T.n,i.n,S.g,O.a,W.e,W.b,W.f,S.b],styles:[".breadcrumb[_ngcontent-%COMP%]{position:fixed;top:40px;width:100%}.breadcrumb[_ngcontent-%COMP%], .head[_ngcontent-%COMP%]{background-color:#fff}.snapShot[_ngcontent-%COMP%]{margin-top:2%}.panCradDiv[_ngcontent-%COMP%]{height:30%;right:0;width:200px}.backIcon[_ngcontent-%COMP%]{color:red;float:right}.app-container[_ngcontent-%COMP%]{height:100%;width:100%}.basic-container[_ngcontent-%COMP%]{padding:5px}.main-head[_ngcontent-%COMP%]{padding-left:5%;padding-top:16px;padding-bottom:0}mat-tab-group[_ngcontent-%COMP%]{padding-left:2%}.flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;height:60vh;border:1px solid #000;padding:10px 5px;box-sizing:border-box}.flex-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin:0 5px;box-sizing:border-box}.flex-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2), .flex-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(3){margin-top:5px}.flex-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(3){flex:1}.formField1[_ngcontent-%COMP%]{flex-grow:1;width:50px}.formField[_ngcontent-%COMP%]{flex-grow:1;width:30%}.formField2[_ngcontent-%COMP%]{flex-grow:1;width:100%}#row[_ngcontent-%COMP%]{font-size:9px;color:#2680eb}mat-hint[_ngcontent-%COMP%]{font-size:10px;margin-bottom:-12px;display:block}.inputMatcard[_ngcontent-%COMP%]{max-width:500px;padding:10px}.inputMatcard[_ngcontent-%COMP%], .inputMatcard1[_ngcontent-%COMP%]{flex-grow:1;box-shadow:0 3pt 6pt rgba(0,0,0,.1607843137254902);box-sizing:border-box;margin-left:0;width:100%}.inputMatcard1[_ngcontent-%COMP%]{padding:18px}.inputMatcard2[_ngcontent-%COMP%]{flex-grow:1;box-shadow:0 3pt 6pt rgba(0,0,0,.1607843137254902);box-sizing:border-box;margin-left:0;width:20px}.mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}.backIcon1[_ngcontent-%COMP%]{color:red;float:none}.inputClass[_ngcontent-%COMP%]{border-style:hidden;box-shadow:0 3pt 6pt rgba(0,0,0,.1607843137254902);font-weight:bolder}[_nghost-%COMP%]     .mat-form-field-outline-end, [_nghost-%COMP%]     .mat-form-field-outline-gap, [_nghost-%COMP%]     div.mat-form-field-outline-start{border-color:0!important;border-width:0!important}.form[_ngcontent-%COMP%]{gap:20px;justify-content:space-between}.form[_ngcontent-%COMP%], .form1[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.form1[_ngcontent-%COMP%]{gap:50px}.button[_ngcontent-%COMP%]{display:flex;margin-bottom:20px;gap:20px;flex-wrap:wrap;justify-content:space-between;padding-left:24%;padding-right:24%}.matCard[_ngcontent-%COMP%]{max-width:1200px;align-items:center;justify-content:center;margin:10px auto 3%;padding-right:15%;padding-top:5%}.mat-form-field-flex[_ngcontent-%COMP%]{box-shadow:0 3pt 6pt rgba(0,0,0,.1607843137254902)}.flex-grow-1[_ngcontent-%COMP%]{flex-grow:1}mat-label[_ngcontent-%COMP%]{font-weight:700;font-size:12px;letter-spacing:0}.matSelect[_ngcontent-%COMP%]{margin-left:20%;width:80px;font-weight:lighter;font-size:10px;letter-spacing:0;color:#000;background-color:#f4f8f7}.dived[_ngcontent-%COMP%], .matSelect[_ngcontent-%COMP%]{padding-top:10px}.scanButton[_ngcontent-%COMP%]{width:80px;display:inline-block;background-color:#fff;color:#00f;border-color:#d3d3d3;margin-left:5px;border-style:ridge;margin-top:50px;border-radius:5px}.matIcon[_ngcontent-%COMP%]{font-size:30px}.insertDriveImg[_ngcontent-%COMP%], .matIcon[_ngcontent-%COMP%]{color:#456efe;display:block;margin:auto}.insertDriveImg[_ngcontent-%COMP%]{padding-top:30px;width:120px;height:120px;text-align:center}.flex-grow-2[_ngcontent-%COMP%]{padding:40px 50px;border:2px dashed #d3d3d3;border-radius:10px}.flex-grow-2[_ngcontent-%COMP%], .flex-grow-Upload[_ngcontent-%COMP%]{margin-bottom:5%}.alignment[_ngcontent-%COMP%]{border-style:none!important}.line[_ngcontent-%COMP%]{border:thick;border-style:solid;border-block-width:unset;color:#00f;color:#6988f6;width:40px;border-radius:5px;margin:initial;margin-bottom:20px}.uploadField[_ngcontent-%COMP%]{font-size:large}input[_ngcontent-%COMP%]{width:80%;color:#374664;opacity:1%;font-weight:600}.mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%]:not(.mat-tab-disabled):focus, .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]:not(.mat-tab-disabled):focus, .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%]:not(.mat-tab-disabled):focus, .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]:not(.mat-tab-disabled):focus{background:red}.mat-tab-label-active[_ngcontent-%COMP%]{color:green}  .mat-tab-label-active{color:#6988f6!important}.verification[_ngcontent-%COMP%]{float:right;color:#2a59e7}  .mat-tab-group.mat-primary .mat-ink-bar{background-color:#6988f6!important;height:4px}mat-tab-label[_ngcontent-%COMP%]{font-size:8px}.container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center}.line[_ngcontent-%COMP%]{flex:1}.text[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}figure[_ngcontent-%COMP%]{display:block;width:50px;height:50px;border-radius:50px;font-size:25px;text-align:center;margin-right:10px;background:#fff;line-height:1.7em}figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;width:30px;height:auto}.close[_ngcontent-%COMP%]{border-style:none;background-color:#fff;position:relative;top:10px}.Back[_ngcontent-%COMP%]{margin:12px 0 12px -12%;width:150px;color:#a9a9a9;border-radius:45px}.Next[_ngcontent-%COMP%]{margin:12px -13% 12px 0;width:150px;background-color:#426af5;color:#fff;border-radius:55px}.insertDrive[_ngcontent-%COMP%]{color:#456efe;display:block;margin:auto;font-size:25px}.progressDiv[_ngcontent-%COMP%]{flex-grow:1;align-self:flex-end}.progress[_ngcontent-%COMP%]{text-align:end;font-size:7px}.formSectionContainer[_ngcontent-%COMP%]{gap:40px;display:grid;grid-template-columns:200px auto}@media (max-width:768px){.formSectionContainer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}}.formImg[_ngcontent-%COMP%]{background-color:green;max-height:100px}.dropDown[_ngcontent-%COMP%]{display:block}.mat-radio-button.mat-accent.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-outer-circle[_ngcontent-%COMP%]{border-color:#4286f4!important}.mat-radio-button.mat-accent[_ngcontent-%COMP%]   .mat-radio-inner-circle[_ngcontent-%COMP%]{color:#4286f4;background-color:#4286f4}  .egret-navy .mat-progress-bar-buffer{background-color:#add8e6!important}  .egret-navy .mat-progress-bar-fill:after{background-color:#00f!important}#sides[_ngcontent-%COMP%]{width:100px}#box[_ngcontent-%COMP%]{display:flex}.Back[_ngcontent-%COMP%]{background-color:grey;color:#fff}.changeInput[_ngcontent-%COMP%]{opacity:0;position:absolute;top:0;left:0;bottom:0;right:0;text-align:center}.Upload[_ngcontent-%COMP%]{vertical-align:c;align-self:center;position:relative}button[disabled][_ngcontent-%COMP%]{color:#666}.docimg[_ngcontent-%COMP%]{height:100px;width:100%;-o-object-fit:cover;object-fit:cover}.errbd[_ngcontent-%COMP%]{border:1px solid red}.sub_div[_ngcontent-%COMP%]{position:absolute;bottom:0}p[_ngcontent-%COMP%]{margin-left:300px}.button_2[_ngcontent-%COMP%]{margin-left:600px;bottom:100px}.button_2[_ngcontent-%COMP%], .button_3[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content}.button_3[_ngcontent-%COMP%]{bottom:50px}"]}),Ce)}],De=((_e=o(function t(){e(this,t)})).\u0275mod=P.Pb({type:_e}),_e.\u0275inj=P.Ob({factory:function(e){return new(e||_e)},providers:[i.d],imports:[[i.c,l.d,u.x,m.a,b.a,u.l,c.b,v.f,u.x,g.c,h.a,f.a,p.a,s.b,d.l.forChild(Ie)]]}),_e)}}])}();