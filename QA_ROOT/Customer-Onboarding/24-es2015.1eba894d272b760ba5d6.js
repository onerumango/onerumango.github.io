(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{JEza:function(t,e,o){"use strict";o.r(e),o.d(e,"DocumentUploadFromEmailModule",function(){return Ot});var n=o("SVse"),i=o("Tj54"),a=o("r1zJ"),r=o("iInd"),s=o("IheW"),c=o("s7LF"),d=o("u9T3"),l=o("w9WL"),h=o("aLe/"),m=o("aYsj"),b=o("mnDI"),u=o("zMWy"),g=o("PDjf"),p=o("XNiG"),f=o("nm5K"),y=o("BTe0"),v=o("tZUg"),x=o("iiaH"),A=o("laYw"),O=o("3sEA"),C=o("MJbI"),_=o("iELJ"),I=o("8Y7J"),D=o("VDRc"),P=o("Dxy4");let k=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.Title="Successfull Message!",this.Message="Uploaded successfully."}ngOnInit(){}done(){this.dialogRef.close("done")}}return t.\u0275fac=function(e){return new(e||t)(I.Rb(_.g),I.Rb(_.a))},t.\u0275cmp=I.Lb({type:t,selectors:[["app-sucess-popup"]],decls:15,vars:2,consts:[[1,"parentDiv"],["fxLayout","column","fxLayoutGap","10px",1,"full-width"],[1,"tittle"],["fxFlex","25","fxLayoutAlign","center stretch"],["src","assets/images/completed.PNG",1,"coImg"],[1,"messageClass"],["fxLayout","row","fxLayoutAlign","space-between center",1,"full-width",2,"padding-left","35%"],["fxFlex","49%","fxFlex.xs","100%"],["tabindex","-1","mat-raised-button","",1,"full-width","mat-elevation-z0","yesBtn",3,"click"]],template:function(t,e){1&t&&(I.Xb(0,"div",0),I.Xb(1,"div",1),I.Xb(2,"div",2),I.Xb(3,"h1"),I.Tc(4),I.Wb(),I.Wb(),I.Xb(5,"div",3),I.Sb(6,"img",4),I.Wb(),I.Xb(7,"div"),I.Xb(8,"p",5),I.Tc(9),I.Wb(),I.Wb(),I.Xb(10,"div"),I.Xb(11,"div",6),I.Xb(12,"div",7),I.Xb(13,"button",8),I.fc("click",function(){return e.done()}),I.Tc(14,"Done"),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb()),2&t&&(I.Eb(4),I.Uc(e.Title),I.Eb(5),I.Uc(e.Message))},directives:[D.e,D.f,D.b,D.d,P.b],styles:[".yesBtn[_ngcontent-%COMP%]{background-color:#456efe;color:#fff}.NoBtn[_ngcontent-%COMP%], .yesBtn[_ngcontent-%COMP%]{border-radius:20px;padding:.2rem}.NoBtn[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000}.parentDiv[_ngcontent-%COMP%]{padding:1rem}.tittle[_ngcontent-%COMP%]{padding-left:33%}.coImg[_ngcontent-%COMP%]{max-width:200px;margin-bottom:10px}.messageClass[_ngcontent-%COMP%]{font-size:medium;padding-left:33%}"]}),t})();var W=o("zHaW"),X=o("Q2Ze"),N=o("ZTz/"),S=o("ura0"),w=o("UhP/");function F(t,e){if(1&t&&(I.Xb(0,"mat-option",41),I.Tc(1),I.Wb()),2&t){const t=e.$implicit,o=I.jc(2);I.rc("value",t)("disabled",o.isDocumentOptionDisabled2(t)),I.Eb(1),I.Vc("",t," ")}}function M(t,e){1&t&&(I.Xb(0,"mat-error"),I.Tc(1," Please select Document name "),I.Wb())}function T(t,e){1&t&&(I.Xb(0,"div"),I.Sb(1,"img",42),I.Wb()),2&t&&(I.Eb(1),I.rc("src","assets/images/no-image.jpg",I.Jc))}function V(t,e){if(1&t&&I.Sb(0,"img",42),2&t){const t=I.jc().index,e=I.jc();I.rc("src",e.frontImageArray[t],I.Jc)}}function E(t,e){if(1&t){const t=I.Yb();I.Xb(0,"input",43),I.fc("change",function(e){I.Hc(t);const o=I.jc().index;return I.jc().onUpload(e,"frontSide",1,o)}),I.Wb()}}function j(t,e){if(1&t){const t=I.Yb();I.Xb(0,"div",44),I.Xb(1,"button",9),I.fc("click",function(){I.Hc(t);const e=I.jc().index;return I.jc().triggerSnapshot(e)}),I.Tc(2,"Take Snapshot"),I.Wb(),I.Sb(3,"br"),I.Wb()}}function B(t,e){if(1&t){const t=I.Yb();I.Vb(0),I.Xb(1,"button",45),I.fc("click",function(){return I.Hc(t),I.jc(2).cancelUpload("frontSide")}),I.Xb(2,"mat-icon"),I.Tc(3,"clear"),I.Wb(),I.Tc(4," Cancel "),I.Wb(),I.Ub()}}function R(t,e){1&t&&(I.Vb(0),I.Xb(1,"button",46),I.Xb(2,"mat-icon",6),I.Tc(3,"check_circle"),I.Wb(),I.Wb(),I.Ub())}function U(t,e){1&t&&(I.Xb(0,"div"),I.Sb(1,"img",42),I.Wb()),2&t&&(I.Eb(1),I.rc("src","assets/images/no-image.jpg",I.Jc))}function L(t,e){if(1&t&&I.Sb(0,"img",42),2&t){const t=I.jc(2).index,e=I.jc();I.rc("src",e.backImageArray[t],I.Jc)}}function z(t,e){if(1&t){const t=I.Yb();I.Xb(0,"input",43),I.fc("change",function(e){I.Hc(t);const o=I.jc(2).index;return I.jc().onUpload(e,"backSide",2,o)}),I.Wb()}}function Y(t,e){if(1&t){const t=I.Yb();I.Xb(0,"div",44),I.Xb(1,"button",9),I.fc("click",function(){I.Hc(t);const e=I.jc(2).index;return I.jc().triggerSnapshot(e)}),I.Tc(2,"Take Snapshot"),I.Wb(),I.Sb(3,"br"),I.Wb()}}function H(t,e){if(1&t){const t=I.Yb();I.Vb(0),I.Xb(1,"button",45),I.fc("click",function(){return I.Hc(t),I.jc(3).cancelUpload("backSide")}),I.Xb(2,"mat-icon"),I.Tc(3,"clear"),I.Wb(),I.Tc(4," Cancel "),I.Wb(),I.Ub()}}function J(t,e){1&t&&(I.Vb(0),I.Xb(1,"button",46),I.Xb(2,"mat-icon",6),I.Tc(3,"check_circle"),I.Wb(),I.Wb(),I.Ub())}function G(t,e){if(1&t){const t=I.Yb();I.Xb(0,"div"),I.Xb(1,"div"),I.Xb(2,"div",18),I.Xb(3,"mat-icon",19),I.Tc(4,"backup"),I.Wb(),I.Xb(5,"div",20),I.Rc(6,U,2,1,"div",21),I.Rc(7,L,1,1,"ng-template",null,22,I.Sc),I.Wb(),I.Xb(9,"div",23),I.Xb(10,"mat-label",24),I.Tc(11,"Back side "),I.Wb(),I.Sb(12,"br"),I.Wb(),I.Xb(13,"div"),I.Xb(14,"button",26),I.Tc(15," Upload"),I.Rc(16,z,1,0,"input",27),I.Wb(),I.Wb(),I.Rc(17,Y,4,0,"div",28),I.Wb(),I.Wb(),I.Xb(18,"div",29),I.Xb(19,"mat-icon",30),I.Tc(20,"insert_drive_file"),I.Wb(),I.Xb(21,"div",31),I.Xb(22,"div",32),I.Xb(23,"p",33),I.Tc(24),I.Wb(),I.Sb(25,"mat-progress-bar",34),I.Wb(),I.Wb(),I.Rc(26,H,5,0,"ng-container",16),I.Rc(27,J,4,0,"ng-container",16),I.Wb(),I.Xb(28,"mat-icon",47),I.fc("click",function(){I.Hc(t);const e=I.jc(),o=e.$implicit,n=e.index;return I.jc().delete(o.value,2,n)}),I.Tc(29,"delete"),I.Wb(),I.Wb()}if(2&t){const t=I.Dc(8),e=I.jc(),o=e.index,n=e.$implicit,i=I.jc();I.Eb(6),I.rc("ngIf","not_available"==i.backImageArray[o])("ngIfElse",t),I.Eb(8),I.rc("disabled",!n.controls.documentName.value),I.Eb(2),I.rc("ngIf",n.controls.documentName.value),I.Eb(1),I.rc("ngIf",i.scan2Array[o]),I.Eb(7),I.Vc("",i.progressValBackArray[o],"%"),I.Eb(1),I.rc("value",i.progressValBackArray[o]),I.Eb(1),I.rc("ngIf",i.progressValBackArray[o]&&100!=i.progressValBackArray[o]),I.Eb(1),I.rc("ngIf",i.progressValBackArray[o]&&100==i.progressValBackArray[o])}}function $(t,e){if(1&t){const t=I.Yb();I.Xb(0,"div",48),I.fc("click",function(){I.Hc(t);const e=I.jc().index;return I.jc().callingBox2(e)}),I.Xb(1,"p"),I.Xb(2,"button",49),I.Xb(3,"mat-icon"),I.Tc(4,"add"),I.Wb(),I.Tc(5,"BACKSIDE PAGE "),I.Wb(),I.Wb(),I.Wb()}}function K(t,e){if(1&t&&(I.Vb(0),I.Sb(1,"img",50),I.Ub()),2&t){const t=I.jc(2).index,e=I.jc();I.Eb(1),I.rc("src",e.otherImageArray[t],I.Jc)}}function q(t,e){if(1&t){const t=I.Yb();I.Xb(0,"input",43),I.fc("change",function(e){I.Hc(t);const o=I.jc(2).index;return I.jc().onUpload(e,"others",3,o)}),I.Wb()}}function Z(t,e){if(1&t){const t=I.Yb();I.Xb(0,"div",44),I.Xb(1,"button",9),I.fc("click",function(){I.Hc(t);const e=I.jc(2).index;return I.jc().triggerSnapshot(e)}),I.Tc(2,"Take Snapshot"),I.Wb(),I.Sb(3,"br"),I.Wb()}}function Q(t,e){if(1&t){const t=I.Yb();I.Vb(0),I.Xb(1,"button",45),I.fc("click",function(){return I.Hc(t),I.jc(3).cancelUpload("others")}),I.Xb(2,"mat-icon"),I.Tc(3,"clear"),I.Wb(),I.Tc(4," Cancel "),I.Wb(),I.Ub()}}function tt(t,e){1&t&&(I.Vb(0),I.Xb(1,"button",46),I.Xb(2,"mat-icon",6),I.Tc(3,"check_circle"),I.Wb(),I.Wb(),I.Ub())}function et(t,e){if(1&t){const t=I.Yb();I.Xb(0,"div"),I.Xb(1,"div"),I.Xb(2,"div",18),I.Xb(3,"mat-icon",19),I.Tc(4,"backup"),I.Wb(),I.Xb(5,"div",20),I.Rc(6,K,2,1,"ng-container",16),I.Wb(),I.Xb(7,"div",23),I.Xb(8,"mat-label",24),I.Tc(9,"Others"),I.Wb(),I.Sb(10,"br"),I.Wb(),I.Xb(11,"div"),I.Xb(12,"button",26),I.Tc(13," Upload"),I.Rc(14,q,1,0,"input",27),I.Wb(),I.Wb(),I.Rc(15,Z,4,0,"div",28),I.Wb(),I.Wb(),I.Xb(16,"div",29),I.Xb(17,"mat-icon",30),I.Tc(18,"insert_drive_file"),I.Wb(),I.Xb(19,"div",31),I.Xb(20,"div",32),I.Xb(21,"p",33),I.Tc(22),I.Wb(),I.Sb(23,"mat-progress-bar",34),I.Wb(),I.Wb(),I.Rc(24,Q,5,0,"ng-container",16),I.Rc(25,tt,4,0,"ng-container",16),I.Wb(),I.Xb(26,"mat-icon",47),I.fc("click",function(){I.Hc(t);const e=I.jc(),o=e.$implicit,n=e.index;return I.jc().delete(o.value,3,n)}),I.Tc(27,"delete"),I.Wb(),I.Wb()}if(2&t){const t=I.jc(),e=t.index,o=t.$implicit,n=I.jc();I.Eb(6),I.rc("ngIf",n.otherImageArray[e]),I.Eb(6),I.rc("disabled",!o.controls.documentName.value),I.Eb(2),I.rc("ngIf",o.controls.documentName.value),I.Eb(1),I.rc("ngIf",n.scan3Array[e]),I.Eb(7),I.Vc("",n.progressValOthersArray[e],"%"),I.Eb(1),I.rc("value",n.progressValOthersArray[e]),I.Eb(1),I.rc("ngIf",n.progressValOthersArray[e]&&100!=n.progressValOthersArray[e]),I.Eb(1),I.rc("ngIf",n.progressValOthersArray[e]&&100==n.progressValOthersArray[e])}}function ot(t,e){if(1&t&&(I.Xb(0,"tr"),I.Xb(1,"td"),I.Tc(2),I.Wb(),I.Wb()),2&t){const t=I.jc(2).index,e=I.jc();I.Eb(2),I.Vc("Name:",e.nameOnCard[t],"")}}function nt(t,e){if(1&t&&(I.Xb(0,"tr"),I.Xb(1,"td"),I.Tc(2),I.Wb(),I.Wb()),2&t){const t=I.jc(2).index,e=I.jc();I.Eb(2),I.Vc("Id Number:",e.idNumberArray[t],"")}}function it(t,e){if(1&t&&(I.Xb(0,"tr"),I.Xb(1,"td"),I.Tc(2),I.Wb(),I.Wb()),2&t){const t=I.jc(2).index,e=I.jc();I.Eb(2),I.Vc("Dob: ",e.dobArray[t],"")}}function at(t,e){if(1&t&&(I.Xb(0,"td"),I.Tc(1),I.Wb()),2&t){const t=I.jc(3).index,e=I.jc();I.Eb(1),I.Vc("Address: ",e.addressArray[t],"")}}function rt(t,e){if(1&t&&(I.Xb(0,"tr"),I.Rc(1,at,2,1,"td",16),I.Wb()),2&t){const t=I.jc(3);I.Eb(1),I.rc("ngIf",t.addressDisplay)}}function st(t,e){if(1&t&&(I.Xb(0,"tr"),I.Xb(1,"td"),I.Tc(2),I.Wb(),I.Wb()),2&t){const t=I.jc(3);I.Eb(2),I.Vc("Date Of Issue: ",t.dateOfIssue,"")}}function ct(t,e){if(1&t&&(I.Xb(0,"tr"),I.Xb(1,"td"),I.Tc(2),I.Wb(),I.Wb()),2&t){const t=I.jc(3);I.Eb(2),I.Vc("Date Of Expiry: ",t.dateOfExpiry,"")}}function dt(t,e){if(1&t&&(I.Xb(0,"mat-card",51),I.Xb(1,"div"),I.Rc(2,ot,3,1,"tr",16),I.Rc(3,nt,3,1,"tr",16),I.Rc(4,it,3,1,"tr",16),I.Rc(5,rt,2,1,"tr",16),I.Rc(6,st,3,1,"tr",16),I.Rc(7,ct,3,1,"tr",16),I.Wb(),I.Wb()),2&t){const t=I.jc().index,e=I.jc();I.Eb(2),I.rc("ngIf",e.nameOnCard[t]),I.Eb(1),I.rc("ngIf",e.idNumberArray[t]),I.Eb(1),I.rc("ngIf",e.dobArray[t]),I.Eb(1),I.rc("ngIf",e.addressArray[t]),I.Eb(1),I.rc("ngIf","undefined"===e.dateOfIssue&&"Passport"==e.documentForm.controls.documentName.value),I.Eb(1),I.rc("ngIf","undefined"===e.dateOfExpiry&&"Passport"==e.documentForm.controls.documentName.value)}}function lt(t,e){if(1&t){const t=I.Yb();I.Xb(0,"div",52),I.fc("click",function(){I.Hc(t);const e=I.jc().index;return I.jc().callingBox3(e)}),I.Xb(1,"div",53),I.Xb(2,"button",49),I.Xb(3,"mat-icon"),I.Tc(4,"add"),I.Wb(),I.Tc(5,"OTHER PAGE "),I.Wb(),I.Wb(),I.Wb()}}function ht(t,e){1&t&&(I.Xb(0,"div"),I.Sb(1,"img",42),I.Wb()),2&t&&(I.Eb(1),I.rc("src","assets/images/no-image.jpg",I.Jc))}function mt(t,e){if(1&t&&I.Sb(0,"img",42),2&t){const t=I.jc().index,e=I.jc().index,o=I.jc();I.rc("src",o.otherDocumentArray[e][t],I.Jc)}}function bt(t,e){if(1&t){const t=I.Yb();I.Xb(0,"div",54),I.Xb(1,"div",11),I.Xb(2,"div"),I.Xb(3,"div",18),I.Xb(4,"mat-icon",19),I.Tc(5,"backup"),I.Wb(),I.Xb(6,"div",20),I.Rc(7,ht,2,1,"div",21),I.Rc(8,mt,1,1,"ng-template",null,22,I.Sc),I.Wb(),I.Xb(10,"div",23),I.Xb(11,"mat-label",24),I.Tc(12,"another page "),I.Wb(),I.Sb(13,"br"),I.Wb(),I.Xb(14,"div"),I.Xb(15,"button",55),I.Tc(16," Upload"),I.Xb(17,"input",56),I.fc("change",function(o){I.Hc(t);const n=e.index,i=I.jc().index;return I.jc().onUpload(o,"otherDocument",n+4,i)}),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Xb(18,"div",29),I.Xb(19,"mat-icon",30),I.Tc(20,"insert_drive_file"),I.Wb(),I.Xb(21,"div",31),I.Xb(22,"div",32),I.Sb(23,"p",33),I.Xb(24,"p",33),I.Tc(25),I.Wb(),I.Sb(26,"mat-progress-bar",34),I.Wb(),I.Wb(),I.Vb(27),I.Xb(28,"button",46),I.Xb(29,"mat-icon",6),I.Tc(30,"check_circle"),I.Wb(),I.Wb(),I.Ub(),I.Wb(),I.Xb(31,"div"),I.Xb(32,"mat-icon",47),I.fc("click",function(){I.Hc(t);const o=e.index,n=I.jc(),i=n.$implicit,a=n.index;return I.jc().deleteOtherDocument(i.value,a,o)}),I.Tc(33,"delete "),I.Wb(),I.Wb(),I.Wb(),I.Wb()}if(2&t){const t=e.index,o=I.Dc(9),n=I.jc().index,i=I.jc();I.Eb(1),I.rc("formGroupName",t),I.Eb(6),I.rc("ngIf","not_available"==i.otherDocumentArray[n][t])("ngIfElse",o),I.Eb(18),I.Vc("",i.progressValOtherDocumentArray[n][t],"%"),I.Eb(1),I.rc("value",i.progressValOtherDocumentArray[n][t])}}function ut(t,e){if(1&t){const t=I.Yb();I.Xb(0,"div",57),I.Xb(1,"div",58),I.fc("click",function(){I.Hc(t);const e=I.jc().index;return I.jc().addotherpage(e)}),I.Xb(2,"button",49),I.Xb(3,"mat-icon"),I.Tc(4,"add"),I.Wb(),I.Tc(5,"ADD ANOTHER PAGE "),I.Wb(),I.Wb(),I.Wb()}}function gt(t,e){if(1&t){const t=I.Yb();I.Xb(0,"div"),I.Xb(1,"mat-icon",59),I.fc("click",function(){I.Hc(t);const e=I.jc(),o=e.$implicit,n=e.index;return I.jc().deleteDocument(o.value,n)}),I.Tc(2,"delete"),I.Wb(),I.Wb()}}function pt(t,e){if(1&t){const t=I.Yb();I.Xb(0,"div",44),I.Xb(1,"webcam",60),I.fc("imageCapture",function(e){I.Hc(t);const o=I.jc().index;return I.jc().handleImage(e,o)}),I.Wb(),I.Wb()}if(2&t){const t=I.jc(2);I.Eb(1),I.rc("height",500)("width",1200)("trigger",t.triggerObservable)}}function ft(t,e){if(1&t){const t=I.Yb();I.Xb(0,"div",44),I.Xb(1,"webcam",60),I.fc("imageCapture",function(e){I.Hc(t);const o=I.jc().index;return I.jc().handleImage1(e,o)}),I.Wb(),I.Wb()}if(2&t){const t=I.jc(2);I.Eb(1),I.rc("height",500)("width",1200)("trigger",t.triggerObservable)}}function yt(t,e){if(1&t){const t=I.Yb();I.Xb(0,"div",44),I.Xb(1,"webcam",60),I.fc("imageCapture",function(e){I.Hc(t);const o=I.jc().index;return I.jc().handleImage2(e,o)}),I.Wb(),I.Wb()}if(2&t){const t=I.jc(2);I.Eb(1),I.rc("height",500)("width",1200)("trigger",t.triggerObservable)}}const vt=function(t){return{errbd:t}};function xt(t,e){if(1&t){const t=I.Yb();I.Xb(0,"div",10),I.Xb(1,"mat-card",11),I.Xb(2,"div"),I.Xb(3,"div"),I.Xb(4,"div"),I.Tc(5),I.Wb(),I.Sb(6,"br"),I.Xb(7,"mat-hint"),I.Tc(8,"Document Name*"),I.Wb(),I.Xb(9,"mat-form-field",12),I.Xb(10,"mat-select",13),I.fc("valueChange",function(o){I.Hc(t);const n=e.index;return I.jc().changeValue2(o,n)}),I.Xb(11,"mat-option",14),I.Tc(12,"Select"),I.Wb(),I.Rc(13,F,2,3,"mat-option",15),I.Wb(),I.Wb(),I.Rc(14,M,2,0,"mat-error",16),I.Wb(),I.Wb(),I.Xb(15,"div",17),I.Xb(16,"div"),I.Xb(17,"div",18),I.Xb(18,"mat-icon",19),I.Tc(19,"backup"),I.Wb(),I.Xb(20,"div",20),I.Rc(21,T,2,1,"div",21),I.Rc(22,V,1,1,"ng-template",null,22,I.Sc),I.Wb(),I.Xb(24,"div",23),I.Xb(25,"mat-label",24),I.Tc(26,"Front side "),I.Wb(),I.Sb(27,"br"),I.Wb(),I.Xb(28,"div",25),I.Xb(29,"button",26),I.Tc(30," Upload"),I.Rc(31,E,1,0,"input",27),I.Wb(),I.Wb(),I.Rc(32,j,4,0,"div",28),I.Wb(),I.Xb(33,"div",29),I.Xb(34,"mat-icon",30),I.Tc(35,"insert_drive_file"),I.Wb(),I.Xb(36,"div",31),I.Xb(37,"div",32),I.Xb(38,"p",33),I.Tc(39),I.Wb(),I.Sb(40,"mat-progress-bar",34),I.Wb(),I.Wb(),I.Rc(41,B,5,0,"ng-container",16),I.Rc(42,R,4,0,"ng-container",16),I.Wb(),I.Wb(),I.Rc(43,G,30,9,"div",16),I.Rc(44,$,6,0,"div",35),I.Rc(45,et,28,8,"div",16),I.Rc(46,dt,8,6,"mat-card",36),I.Rc(47,lt,6,0,"div",37),I.Xb(48,"div",38),I.Rc(49,bt,34,5,"div",39),I.Wb(),I.Rc(50,ut,6,0,"div",40),I.Wb(),I.Rc(51,gt,3,0,"div",16),I.Wb(),I.Rc(52,pt,2,3,"div",28),I.Rc(53,ft,2,3,"div",28),I.Rc(54,yt,2,3,"div",28),I.Wb()}if(2&t){const t=e.$implicit,o=e.index,n=I.Dc(23),i=I.jc();I.Eb(1),I.rc("formGroupName",o),I.Eb(4),I.Vc("Document ",o+1,""),I.Eb(5),I.rc("ngClass",I.xc(25,vt,!t.controls.documentName.valid&&t.controls.documentName.touched)),I.Eb(3),I.rc("ngForOf",i.document_name),I.Eb(1),I.rc("ngIf",!t.controls.documentName.valid&&t.controls.documentName.touched),I.Eb(7),I.rc("ngIf","not_available"==i.frontImageArray[o])("ngIfElse",n),I.Eb(8),I.rc("disabled",!t.controls.documentName.value),I.Eb(2),I.rc("ngIf",t.controls.documentName.value),I.Eb(1),I.rc("ngIf",i.scan1Array[o]),I.Eb(7),I.Vc("",i.progressValFrontArray[o],"%"),I.Eb(1),I.rc("value",i.progressValFrontArray[o]),I.Eb(1),I.rc("ngIf",i.progressValFrontArray[o]&&100!=i.progressValFrontArray[o]),I.Eb(1),I.rc("ngIf",i.progressValFrontArray[o]&&100==i.progressValFrontArray[o]),I.Eb(1),I.rc("ngIf",i.secondBoxArray[o]),I.Eb(1),I.rc("ngIf",!i.secondBoxArray[o]),I.Eb(1),I.rc("ngIf",i.thirdBoxArray[o]),I.Eb(1),I.rc("ngIf",i.pancard),I.Eb(1),I.rc("ngIf",i.secondBoxArray[o]&&!i.thirdBoxArray[o]),I.Eb(2),I.rc("ngForOf",i.docarray1[o]),I.Eb(1),I.rc("ngIf",i.newOtherPage),I.Eb(1),I.rc("ngIf",0!=o),I.Eb(1),I.rc("ngIf",i.scan1Array[o]),I.Eb(1),I.rc("ngIf",i.scan2Array[o]),I.Eb(1),I.rc("ngIf",i.scan3Array[o])}}const At=[{path:"",component:(()=>{class t{constructor(t,e,o,n,i,a,r,s,c,d,l,h,m){this.http=t,this.tokenService=e,this.dialog=o,this.router=n,this.fb=i,this.snack=a,this.ls=r,this.shareDataService=s,this.cdr=c,this.api=d,this.dialogService=l,this.loader=h,this.fileService=m,this.webcamImage=null,this.webcamImage1=null,this.scan1Array=[],this.scan2Array=[],this.scan3Array=[],this.customerId=null,this.frontImageArray=[],this.backImageArray=[],this.otherImageArray=[],this.otherDocumentArray=[],this.boxArray=[],this.document_type=["6","7","8"],this.custDocExist=!1,this.selectedOptions2=[],this.documentSide=null,this.frontImage=null,this.backImage=null,this.otherImage=null,this.secondBoxArray=[],this.thirdBoxArray=[],this.ocrResult="Recognizing...",this.selectedDocumentTypes2=[],this.nameOnCard=[],this.dobArray=[],this.idNumberArray=[],this.pincode=[],this.gender=[],this.state=[],this.addressArray=[],this.dataFetched=!1,this.boxArray2=[],this.boxArray3=[],this.doc_name=[],this.docuNameArray=[],this.arrayOfImageArrays0=[],this.arrayOfImageArrays1=[],this.arrayOfImageArrays2=[],this.docValArray=[],this.docarray1=[],this.newOtherPage=!1,this.otherDocPages=[],this.otherDocumentArray2=[],this.ff=!1,this.bf=!1,this.docName="document_name",this.progressValFrontArray=[],this.progressValBackArray=[],this.progressValOthersArray=[],this.progressValOtherDocumentArray=[],this.customerDocs=[],this.trigger=new p.a,this.aadharParser=t=>{try{let e,o,n=2;const i=t.replace(/[^\x00-\x7F]/g,"").trim().split("\n");for(let t=i.length-1;t>=0;t--){let o=0,n=-1;for(let e=0;e<i[t].length;e++)i[t][e]>="0"&&i[t][e]<="9"&&(o++,-1===n&&(n=e));o>=12&&(e=i[t].substr(n,n+14))}for(let t=0;t<i.length;t++)["DOB","Year of Birth"].some(e=>{const a=i[t].indexOf(e);-1!==a&&(o=i[t].trim().slice(a,i[t].length).split(" ").pop(),n=t-1,console.log(o))});const a=i[n].split(" ").filter(t=>t.length>1).join(" ");return console.log(a),{dob:o,adharNumber:e,fullName:a}}catch(e){console.log(e),console.error("Unable to parse aadhar")}},this.isDocumentOptionDisabled2=t=>this.selectedOptions2.includes(t),this.panCardParser=t=>{try{const e=t.replace(/[^\x00-\x7F]/g,""),o=e.indexOf("Permanent"),n=e.indexOf("Name"),i=e.slice(o,n).match("[A-Z]{5}[0-9]{4}[A-Z]{1}")[0],a=e.indexOf("Father's Name :"),r=e.slice(n,a).split("\n")[1].split(" "),s=e.slice(e.indexOf("Date of Birth"),e.length).split("\n")[1].split(" ")[0];return{panNumber:i,name:`${r[0]} ${r[1]}`,dateOfBirth:s}}catch(e){console.log(e),console.error("Unable to parse pan card"),this.snack.open("Please Upload Valid Document","OK",{duration:4e3,verticalPosition:"top",horizontalPosition:"right"})}},this.passportParser=t=>{var e;try{let o,n;const i=t.replace(/[^\x00-\x7F]/g,""),a=i.indexOf("Given Name"),r=i.slice(a,i.length).split("\n"),s=r.findIndex(t=>t.indexOf("Date of Issue")>-1)+1;if(s>0){const t=r[s].split(" ");o=t[t.length-2],n=t[t.length-2]}const c=i.indexOf("Nationality"),d=null===(e=i.slice(c,i.length))||void 0===e?void 0:e.split("\n")[1].split(" ").pop();let l;const h=i.trim().split("\n");for(let t=h.length-1;t>=0;t--)if(h[t].includes("<")){l=h[t].substr(0,h[t].indexOf("<"));break}return{dob:d,name:r[1],issueNoString:l,dateOfIssue:o,dateOfExpiry:n}}catch(o){console.error("Unable to parse passport")}}}ngOnInit(){localStorage.getItem("customer_id")&&this.getCustomerDocuments(localStorage.getItem("customer_id")),this.documentForm=this.fb.group({documentName:["",[c.z.required]],frontSide:["",[c.z.required]],backSide:[""],others:[""],items:this.fb.array([this.inititemrows("")])}),this.doc_name=["Aadhar card","Pan card","Passport"],this.docValArray=["frontSide","backSide","others"],console.log(this.documentForm),console.log(this.docName),this.tokenService.getDropDownValues(this.docName).subscribe(t=>{this.document_name=t,console.log("resp",t),console.log("this.document_name :: ",this.document_name)}),this.api.getName().subscribe(t=>{this.assignName(t.name),console.log("resp.name",t.name)}),this.api.getOCR().subscribe(t=>{console.log("ocr resp from backend ",t)}),this.shareDataService.getCustomerId.subscribe(t=>{this.api.getOCR().subscribe(t=>{console.log("ocr resp from backend ",t),this.assignOCRValues(t)}),console.log("cId=",t),null!==t&&(this.refreshCustomerId=t,this.getCustomerDocuments(t),console.log("cId=",t))}),this.documentForm.valueChanges.subscribe(t=>{console.log("data:: ",t),console.log("this.documentForm",this.documentForm),console.log("data.doc_list.length",t.doc_list),t.doc_list.length>0&&(console.log("data.doc_list.length",t.doc_list.length),this.selectedOptions2=[],t.doc_list.forEach((t,e)=>{console.log("index :: ",e),this.selectedOptions2.push(t.documentType)}))}),this.api.getKycDataFetchedInfo().subscribe(t=>{console.log(t),this.documentForm=this.fb.group({documentsList:this.fb.array([this.createItem()]),doc_list:this.fb.array("DATA FETCH"===t?[]:[this.createDocItem()]),id:[""],upload:["",[c.z.required]]}),console.log(this.documentForm.get("documentName")),console.log(this.documentForm.value.documentsList[0].documentName),console.log("this.documentForm",this.documentForm),console.log("documentsList",this.documentsList),console.log("doc_list",this.doc_list),"DATA FETCH"===t?(this.dataFetched=!0,this.dataFetchedValue=t):this.dataFetched=!1}),this.disableNext=!0}inititemrows(t){return this.fb.group({id:t?t.id:[""],fileUrl:t?t.fileUrl:[""]})}addDocuments(){this.newOtherPage=!1,console.log(this.documentForm),console.log(this.documentForm.get("documentsList")),console.log(this.documentForm.get("documentsList")),this.disableNext=!0,this.documentsList=this.documentForm.get("documentsList"),console.log(this.doc_list),this.documentsList.push(this.createItem()),this.doc_list.push(this.createDocItem())}createDocItem(){return this.fb.group({documentName:["",[c.z.required]],frontSide:["",[c.z.required]],backSide:[""],others:[""],fileUrl:[""]})}createItem(){return this.fb.group({id:[""],documentName:["",c.z.required],documentType:["",c.z.required]})}assignOCRValues(t){console.log(t),this.dob=t.dob,this.namePancard=t.namePancard,this.panNumber=t.panNumber,this.frontImageArray[0]=t.imageOCR,this.backImageArray[0]=t.imageOCRBack,t.imageOCRBack&&(this.backImageArray[0]=t.imageOCRBack,this.secondBoxArray[0]=!0,this.address=t.address,this.addressDisplay=!0,this.progressValBackArray[0]=100);const e=Object.values(t).some(t=>Boolean(t));console.log("hasNonEmptyFields",e),e&&(this.documentForm.get("documentName").patchValue("Aadhar card"),console.log(this.documentForm.get("documentName")),this.progressValFrontArray[0]=100,this.disableNext=!0,this.pancard=!0)}delete(t,e,o){console.log(t),this.docum_name=t.documentName,this.customerId=sessionStorage.getItem("customer_id"),2==e&&(this.secondBoxArray[o]=!1,this.addressDisplay=!1,this.progressValBackArray[o]=0,this.backImageArray[o]=null,this.backSelected=null,this.document_side=e,this.api.deleteCustDoc(this.customerId,this.docum_name,this.document_side).subscribe(t=>{this.displayVal1=!1})),3==e&&(this.thirdBoxArray[o]=!1,this.progressValOthersArray[o]=0,this.otherImageArray[o]=null,this.othersSelected=null,this.document_side=e,this.api.deleteCustDoc(this.customerId,this.docum_name,this.document_side).subscribe(t=>{})),this.disableNext=!1}deleteOtherDocument(t,e,o){this.docum_name=t.documentName,this.customerId=sessionStorage.getItem("customer_id"),this.newDocumentSide=o+4,this.docarray1[e][o]?(this.docarray1[e].pop(),this.otherDocumentArray[e][o]=null,console.log("this.otherDocumentArray[i][k] ",this.otherDocumentArray[e][o])):console.log("this.docarray1",this.docarray1),this.api.deleteCustDoc(this.customerId,this.docum_name,this.newDocumentSide).subscribe(t=>{})}assignName(t){this.name=t.toLowerCase()}addotherpage(t){if(this.docarray1[t])console.log("this.docarray1[a]",this.docarray1[t]),console.log("this.docarray1[a]",this.docarray1[t].boxes),this.docarray1[t].push(this.inititemrows(""));else{var e=[this.inititemrows("")];this.docarray1[t]=e,this.otherDocumentArray[t]=[],this.progressValOtherDocumentArray[t]=[]}console.log("docarray1",this.docarray1)}createOtherForm(t){return this.fb.group({id:[""],fileData:t?t.fileData:[""],fileUrl:t?t.fileUrl:[""]})}triggerSnapshot(t){this.trigger.next(),this.scan1Array[t]=!1,this.scan2Array[t]=!1,this.scan3Array[t]=!1}callingBox2(t){this.secondBoxArray[t]=!0,this.disableNext=!0,console.log(this.secondBoxArray[t])}callingBox3(t){this.thirdBoxArray[t]=!0,this.disableNext=!0,this.newOtherPage=!0}doOCR(t,e,o,n,i){this.loader.open(),"Pan card"===this.documentForm.value.documentsList[i].documentName&&this.fileService.uploadPan(o).subscribe(a=>{if(this.loader.close(),"object"==typeof a){if(console.log("api res -- ",a.data),!a.data.name.value||!a.data.pan.value)return void this.snack.open("The document is not a valid Pan card","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"});this.nameDoc=a.data.name.value,this.dialogService.confirmationDialog(this.nameDoc,this.name).subscribe(r=>{console.log(r),"No"==r&&this.changeValue2_Ocr(e,i),"Yes"==r&&(this.nameOnCard[i]=a.data.name.value,this.dobArray[i]=a.data.dob.value,this.idNumberArray[i]=a.data.pan.value,this.openDialogueBoxForOcrDetailsDisplay(this.nameOnCard[i],this.dobArray[i],this.idNumberArray[i],this.addressArray[i],this.pincode[i],this.gender[i],this.state[i]),this.uploadDoc(t,o,e,n,i))})}},t=>{console.log("Something went wrong! Err:: ",t),this.loader.close(),this.snack.open("The document is not a valid Pan card","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"})}),"Passport"==this.documentForm.value.documentsList[i].documentName&&this.fileService.uploadPassport(o).subscribe(a=>{var r,s,c,d;if(this.loader.close(),"object"==typeof a){if(console.log("api res -- ",a.data),!a.data.passport_no.value)return void this.snack.open("The document is not a valid Passport","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"});this.nameDoc=(null===(s=null===(r=a.data)||void 0===r?void 0:r.surname)||void 0===s?void 0:s.value)?`${a.data.given_name.value} ${null===(d=null===(c=a.data)||void 0===c?void 0:c.surname)||void 0===d?void 0:d.value}`:a.data.given_name.value,this.dialogService.confirmationDialog(this.nameDoc,this.name).subscribe(r=>{var s,c,d,l;console.log(r),"No"==r&&this.changeValue2_Ocr(e,i),"Yes"==r&&(this.nameOnCard[i]=(null===(c=null===(s=a.data)||void 0===s?void 0:s.surname)||void 0===c?void 0:c.value)?`${a.data.given_name.value} ${null===(l=null===(d=a.data)||void 0===d?void 0:d.surname)||void 0===l?void 0:l.value}`:a.data.given_name.value,this.dobArray[i]=a.data.dob.value,this.idNumberArray[i]=a.data.passport_no.value,this.dateOfIssue=a.data.issue_date.value,this.dateOfExpiry=a.data.expiry_date.value,this.gender[i]=a.data.gender.value,this.openDialogueBoxForOcrDetailsDisplay(this.nameOnCard[i],this.dobArray[i],this.idNumberArray[i],this.addressArray[i],this.pincode[i],this.gender[i],this.state[i]),this.uploadDoc(t,o,e,n,i))})}},t=>{console.log("Something went wrong! Err:: ",t),this.loader.close(),this.snack.open("The document is not a valid Passport","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"})}),"Aadhar card"==this.documentForm.value.documentsList[i].documentName&&"1"==n&&this.fileService.uploadAadhaarFront(o).subscribe(a=>{if(this.loader.close(),"object"==typeof a){if(console.log("api res -- ",a.data),!a.data.no.value)return void this.snack.open("The document is not a valid Aadhaar card","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"});this.nameDoc=a.data.name.value,this.dialogService.confirmationDialog(this.nameDoc,this.name).subscribe(r=>{console.log(r),"No"==r&&this.changeValue2_Ocr(e,i),"Yes"==r&&(this.nameOnCard[i]=a.data.name.value,this.dobArray[i]=a.data.dob.value,this.idNumberArray[i]=a.data.no.value,this.gender[i]=a.data.gender.value,this.openDialogueBoxForOcrDetailsDisplay(this.nameOnCard[i],this.dobArray[i],this.idNumberArray[i],this.addressArray[i],this.pincode[i],this.gender[i],this.state[i]),this.uploadDoc(t,o,e,n,i))})}},t=>{console.log("Something went wrong! Err:: ",t),this.loader.close(),this.snack.open("The document is not a valid Aadhaar card","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"})}),"Aadhar card"==this.documentForm.value.documentsList[i].documentName&&"2"==n&&this.fileService.uploadAadhaarBack(o).subscribe(a=>{if(this.loader.close(),"object"==typeof a){if(console.log("api res -- ",a.data),!a.data.no.value)return void this.snack.open("The document is not a valid Aadhaar card","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"});this.dialogService.confirmationDialog(this.nameDoc,this.name).subscribe(r=>{console.log(r),"No"==r&&this.changeValue2_Ocr(e,i),"Yes"==r&&(this.addressArray[i]=a.data.address.value,this.pincode[i]=a.data.pin.value,this.state[i]=a.data.state.value,this.openDialogueBoxForOcrDetailsDisplay(this.nameOnCard[i],this.dobArray[i],this.idNumberArray[i],this.addressArray[i],this.pincode[i],this.gender[i],this.state[i]),this.uploadDoc(t,o,e,n,i))})}},t=>{console.log("Something went wrong! Err:: ",t),this.loader.close(),this.snack.open("The document is not a valid Aadhaar card","Cancel",{duration:4e3,verticalPosition:"top",horizontalPosition:"center"})})}openDialogueBoxForOcrDetailsDisplay(t,e,o,n,i,a,r){this.openDialog1(t,e,o,n,i,a,r)}openDialog1(t,e,o,n,i,a,r){}handleImage(t,e){this.webcamImage=t,this.fun(this.webcamImage,e)}handleImage1(t,e){this.webcamImage1=t,this.fun1(this.webcamImage1,e)}changeValue2(t,e){this.disableNext=!0,this.selectedDocumentTypes2[e]&&(this.selectedOptions2=this.selectedOptions2.filter(t=>t!==this.selectedDocumentTypes2[e])),this.selectedDocumentTypes2[e]=t,this.selectedOptions2.push(t),this.secondBoxArray[e]=!1,this.thirdBoxArray[e]=!1,this.frontImageArray[e]="",this.backImageArray[e]="",this.otherImageArray[e]="",this.backSelected="",this.frontSelected="",this.othersSelected="",this.progressValFrontArray[e]=0,this.progressValBackArray[e]=0,this.pancard=!1,console.log("i=",e)}changeValue2_Ocr(t,e){"frontSide"===t&&(this.frontImageArray[e]="",this.frontSelected="",this.progressValFrontArray[e]=0),"backSide"===t&&(this.secondBoxArray[e]=!1,this.backImageArray[e]="",this.backSelected="",this.progressValBackArray[e]=0),"others"===t&&(this.thirdBoxArray[e]=!1,this.otherImageArray[e]="",this.othersSelected="",this.progressValOthersArray[e]=0,this.disableNext=!0)}j(t,e){throw new Error("Method not implemented.")}handleImage2(t,e){console.log(e),this.webcamImage2=t,this.function2(this.webcamImage2,e)}function2(t,e){console.log(e);const o=new FormData,n={customerId:this.refreshCustomerId,documentName:this.documentForm.value.documentName,documentType:"3",fileType:t._mimeType,fileName:"doc",verificationType:"KYC verification",documentSide:3,idNumber:this.panNumber};console.log(t.imageAsDataUrl),this.otherImageArray[e]=t.imageAsDataUrl,this.displayVal2=!1;let i=this.dataURLtoFile(t.imageAsDataUrl,"Aadhar");o.append("data",JSON.stringify(n)),o.append("file",i),this.tokenService.upload(o).subscribe(t=>{this.progressValOthersArray[e]=100,4===t.type&&t.body&&(console.log("res.body.id",t.body.id),this.assignIdValues("others",t.body.id)),this.documentForm.get("backSide").patchValue(!0)},t=>{201==t.status&&(this.ff=!0,this.documentForm.get("backSide").patchValue(!0),this.shotToast("Document Uploaded!"))})}get triggerObservable(){return this.trigger.asObservable()}getCustomerDocuments(t){t&&(this.cId=t),console.log(t),this.router.navigate(["/document"],{queryParams:{customerId:this.cId}});for(const e in this.document_type)if(Object.prototype.hasOwnProperty.call(this.document_type,e)){const o=this.document_type[e];console.log(o,e,t),this.tokenService.getCustomerDocuments(t,o).subscribe(t=>{var o,n,i;console.log(e,t,this.documentForm),this.customerDocs=t,this.docuNameArray=["Aadhar card","Pan card","Passport"],console.log(this.documentForm.controls.documentsList.controls),this.documentForm.controls.documentsList.controls[0].controls.documentName.setValue(this.docuNameArray[0]),this.doc_name=["Aadhar card","Pan card","Passport"];for(let e=0;e<(null===(o=this.customerDocs)||void 0===o?void 0:o.length);e++){if(this.customerDocs[e]){console.log(this.customerDocs[e].documentName);for(let t=0;t<3;t++)this.customerDocs[e].documentName==this.doc_name[t]&&1==this.customerDocs[e].documentSide&&(this.frontImageArray[t]=this.customerDocs[e].fileUrl,this.progressValFrontArray[t]=100,console.log("index",t));for(let t=0;t<3;t++)this.customerDocs[e].documentName==this.doc_name[t]&&2==this.customerDocs[e].documentSide&&(this.backImageArray[t]=this.customerDocs[e].fileUrl,this.progressValBackArray[t]=100,this.secondBoxArray[t]=!0);for(let t=0;t<3;t++)this.customerDocs[e].documentName==this.doc_name[t]&&3==this.customerDocs[e].documentSide&&(this.otherImageArray[t]=this.customerDocs[e].fileUrl,this.progressValOthersArray[t]=100,this.thirdBoxArray[t]=!0);for(let t=0;t<3;t++)if(this.customerDocs[e].documentName==this.doc_name[t]&&this.customerDocs[e].documentSide>3){if(this.fetchChildIndex=this.customerDocs[e].documentSide-4,this.progressValOtherDocumentArray[t][this.fetchChildIndex]=this.progressValOtherDocumentArray[t][this.fetchChildIndex]?100:1070,this.newOtherPage=!0,this.docarray1[t])this.docarray1[t].push(this.inititemrows(""));else{var a=[this.inititemrows("")];this.docarray1[t]=a,this.otherDocumentArray[t]=[]}this.otherDocumentArray[t][this.fetchChildIndex]=this.customerDocs[e].fileUrl,console.log("this.otherDocumentArray",this.otherDocumentArray)}}this.disableNext=!1}if((null===(n=this.customerDocs)||void 0===n?void 0:n.length)>0){if(this.page_id=this.ls.getItem("page_id"),console.log(this.page_id),"Pan card"==this.customerDocs[0].documentName&&2!==this.page_id){let t=document.getElementById("auto_trigger");t&&(console.log(t),t.click()),this.disableNext=!1}if(null===(i=this.documentForm.controls.documentsList.controls[1].controls)||void 0===i||i.documentName.setValue(this.docuNameArray[1]),"Passport"==this.customerDocs[0].documentName&&2!==this.page_id){let t=document.getElementById("auto_trigger");t&&(console.log(t),t.click()),this.disableNext=!1}this.documentForm.controls.documentsList.controls[2].controls.documentName.setValue(this.docuNameArray[2]),"Pan card"==this.frontImage.documentName&&(this.panNumber=this.customerDocs.find(t=>2==t.documentSide).idNumber),"Aadhar card"==this.frontImage.documentName&&(this.panNumber=this.customerDocs.find(t=>1==t.documentSide).idNumber),this.panNumber&&(this.pancard=!0),null!=this.frontImage&&(this.progressValFrontArray[0]=100),null!=this.backImage&&(this.progressValBackArray[0]=100),null!=this.otherImage&&(this.progressValOthersArray[0]=100),this.documentForm.patchValue({documentName:this.customerDocs[0].documentName,frontSide:this.customerDocs[0].documentName,backSide:this.customerDocs[0].documentName}),console.log(this.customerDocs[0].documentName)}this.cdr.markForCheck(),console.log("end of api")})}}convertBlob(t){return this.sanitizer.bypassSecurityTrustUrl("data:image/jpeg;base64,"+t)}scan(t){this.scan1Array[t]=!0,this.scan2Array[t]=!1,this.scan3Array[t]=!1,this.disableNext=!1}scan12(t){this.scan1Array[t]=!1,this.scan2Array[t]=!0,this.scan3Array[t]=!1,this.disableNext=!1}scan13(t){this.scan1Array[t]=!1,this.scan2Array[t]=!1,this.scan3Array[t]=!0,this.disableNext=!1}fun(t,e){const o=new FormData,n={customerId:this.refreshCustomerId,documentName:this.documentForm.value.documentName,documentType:"3",fileType:t._mimeType,fileName:"doc",verificationType:"KYC verification",documentSide:1,idNumber:this.panNumber};this.frontImageArray[e]=t.imageAsDataUrl,this.displayVal=!1;let i=this.dataURLtoFile(t.imageAsDataUrl,"Aadhar");o.append("data",JSON.stringify(n)),o.append("file",i),this.tokenService.upload(o).subscribe(t=>{this.progressValFrontArray[e]=100,this.documentForm.get("frontSide").patchValue(!0)},t=>{201==t.status&&(this.bf=!0,this.documentForm.get("frontSide").patchValue(!0),this.shotToast("Document Uploaded!"))})}fun1(t,e){console.log("inside fun1");const o=new FormData,n={customerId:this.refreshCustomerId,documentName:this.documentForm.value.documentName,documentType:"3",fileType:t._mimeType,fileName:"doc",verificationType:"KYC verification",documentSide:2,idNumber:this.panNumber};this.backImageArray[e]=t.imageAsDataUrl,this.displayVal1=!1;let i=this.dataURLtoFile(t.imageAsDataUrl,"Aadhar");o.append("data",JSON.stringify(n)),o.append("file",i),this.tokenService.upload(o).subscribe(t=>{this.progressValBackArray[e]=100,4===t.type&&t.body&&(console.log("res.body.id",t.body.id),this.assignIdValues("backSide",t.body.id)),this.documentForm.get("backSide").patchValue(!0)},t=>{201==t.status&&(this.ff=!0,this.documentForm.get("backSide").patchValue(!0),this.shotToast("Document Uploaded!"))})}dataURLtoFile(t,e){for(var o=t.split(","),n=o[0].match(/:(.*?);/)[1],i=atob(o[1]),a=i.length,r=new Uint8Array(a);a--;)r[a]=i.charCodeAt(a);return new File([r],e,{type:n})}assign(t){this.customerId=t}onUpload(t,e,o,n){if(this.newDocumentSide=o,this.childindex=o-4,console.log(t,e,o),"frontSide"===e&&(this.progressValFrontArray[n]=0),"backSide"===e&&(this.progressValBackArray[n]=0),"others"===e&&(this.progressValOthersArray[n]=0),"otherDocument"===e&&(this.progressValOtherDocumentArray[n][this.childindex]=0),this.selectedFiles=t.target.files[0],this.shotToast("Your file size is "+this.formatBytes(t.target.files[0].size,2)),t.target.files){var i=new FileReader;i.readAsDataURL(t.target.files[0]),i.onload=t=>{this.image=t.target.result,"backSide"===e&&(this.backSelected=this.selectedFiles.name,this.doOCR(this.image,e,this.selectedFiles,o,n),this.displayVal1=!0),"frontSide"===e&&(this.frontSelected=this.selectedFiles.name,this.doOCR(this.image,e,this.selectedFiles,o,n),this.displayVal=!0),"others"===e&&(this.othersSelected=this.selectedFiles.name,console.log("this.otherImageArray[i] ::",this.otherImageArray[n]),this.doOCR(this.image,e,this.selectedFiles,o,n),this.displayVal2=!0),"otherDocument"===e&&(this.otherDocumentSelected=this.selectedFiles.name,console.log("indexes",n,this.otherDocumentArray),this.otherDocumentArray[n][this.childindex]=this.image,console.log("final document",this.docarray1),this.doOCR(this.otherDocumentArray[n][this.childindex],e,this.selectedFiles,o,n))}}console.log(this.documentForm.valid),this.disableNext=!1}formatBytes(t,e){if(0===t)return"0 Bytes";const o=e<0?0:e,n=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,n)).toFixed(o))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}uploadDoc(t,e,o,n,i){this.childindex=n-4,console.log("URL ---- ",e);const a=new FormData;console.log("cId::",this.refreshCustomerId),console.log(this.documentForm.value.documentsList[i].documentName),"Aadhar card"===this.documentForm.value.documentsList[i].documentName&&(this.docType="6"),"Pan card"===this.documentForm.value.documentsList[i].documentName&&(this.docType="7"),"Passport"===this.documentForm.value.documentsList[i].documentName&&(this.docType="8");const r={customerId:this.refreshCustomerId,documentName:this.documentForm.value.documentsList[i].documentName,documentType:this.docType,fileType:e.type,fileName:e.name,verificationType:"KYC verification",documentSide:n,idNumber:this.panNumber,name:this.namePancard,dob:this.dob};a.append("data",JSON.stringify(r)),a.append("file",e),console.log("URL -- ",e.name,r,a),this.uploadSub=this.tokenService.upload(a).subscribe(e=>{console.log("Response -- ",e),"backSide"===o?e.type&&e.type==s.e.UploadProgress&&(this.progressValBackArray[i]=Math.round(e.loaded/e.total*100),console.log("uploadProgress",this.progressValBackArray[i]),this.backImageArray[i]=t):"frontSide"===o?e.type&&e.type==s.e.UploadProgress&&(this.progressValFrontArray[i]=Math.round(e.loaded/e.total*100),console.log("uploadProgress",this.progressValFrontArray[i]),this.frontImageArray[i]=t):"others"===o?e.type&&e.type==s.e.UploadProgress&&(this.progressValOthersArray[i]=Math.round(e.loaded/e.total*100),console.log("uploadProgress others",this.progressValOthersArray[i]),this.otherImageArray[i]=t):"otherDocument"===o&&e.type==s.e.UploadProgress&&(this.progressValOtherDocumentArray[i][this.childindex]=Math.round(e.loaded/e.total*100)),e.body&&(console.log("res.body.id",e.body.id),this.assignIdValues(o,e.body.id),this.documentForm.get(o).patchValue(!0),console.log("this.documentForm.get(docVal)",this.documentForm.get(o)),this.shotToast("Document Uploaded!"))},t=>{console.log("File upload ::",t),201==t.status?(this.documentForm.get(o).patchValue(!0),this.shotToast("Document Uploaded!")):"backSide"===o?(this.progressValBackArray[i]=0,this.backImageArray[i]=null,this.backSelected=null,this.shotToast(t.message)):(this.progressValFrontArray[i]=0,this.frontImageArray[i]=null,this.frontSelected=null,this.shotToast(t.message))})}assignIdValues(t,e){console.log(t),"backSide"===t&&(this.backSideId=e),"others"===t&&(this.otherSideId=e),"otherDocument"===t&&(this.otherDocumentSideId=e)}ngOnDestroy(){this.shareDataService.shareCustomerId(null)}cancelUpload(t){this.uploadSub.unsubscribe(),this.shotToast("Document Uploaded Cancelled!"),"backSide"==t?(this.progressValBackArray[0]=0,this.backImageArray[0]=null,this.backSelected=null):(this.progressValFrontArray[0]=0,this.frontImageArray[0]=null,this.frontSelected=null)}shotToast(t){this.snack.open(""+t,"OK",{duration:6e3,verticalPosition:"top",horizontalPosition:"right"})}deleteDocument(t,e){console.log(this.customerId,t,e),this.customerId=this.ls.getItem("customerId");const o=this.documentForm.get("documentsList");console.log(o),o.removeAt(e),this.api.delCustDoc(this.customerId,t.documentName).subscribe(t=>{console.log("data after delete",t)})}back(){}done(){this.documentForm.reset(),this.dialog.open(k,{width:"35%",backdropClass:"dialog-bg-trans",height:"50%",disableClose:!0}).afterClosed().subscribe(t=>{console.log("The dialog was closed",t)})}}return t.\u0275fac=function(e){return new(e||t)(I.Rb(s.c),I.Rb(f.b),I.Rb(_.b),I.Rb(r.h),I.Rb(c.f),I.Rb(W.a),I.Rb(v.a),I.Rb(x.a),I.Rb(I.h),I.Rb(f.b),I.Rb(A.a),I.Rb(O.a),I.Rb(C.a))},t.\u0275cmp=I.Lb({type:t,selectors:[["app-document-upload-from-email"]],viewQuery:function(t,e){if(1&t&&I.ad(y.a,!0),2&t){let t;I.Cc(t=I.gc())&&(e.progressBar=t.first)}},decls:20,vars:3,consts:[[1,"matCard"],[1,"uploadField"],[1,"line"],[3,"formGroup"],["formArrayName","documentsList",4,"ngFor","ngForOf"],["mat-raised-button","","type","button","id","auto_trigger",3,"disabled","click"],["color","primary"],[1,"button"],["mat-button","",1,"Back",3,"click"],["mat-stroked-button","",1,"Next",3,"click"],["formArrayName","documentsList"],[3,"formGroupName"],["appearance","none",1,"formField"],["formControlName","documentName","placeholder","Choose Document Name","name","documentName",1,"inputMatcard1",3,"ngClass","valueChange"],["value",""],[3,"value","disabled",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"form1"],[1,"flex-grow-2"],[1,"matIcon"],[1,"insertDriveImg"],[4,"ngIf","ngIfElse"],["showAvatar",""],[1,"dived"],[2,"margin-left","30%"],[2,"padding-left","15%"],[1,"Upload","scanButton",3,"disabled"],["type","file","class","changeInput","accept","image/*",3,"change",4,"ngIf"],["style","font-size: 10px;",4,"ngIf"],["id","box"],[1,"insertDrive"],[1,"progressDiv"],[1,"mb-8"],[1,"m-0","text-right"],[1,"rounded",2,"height","6px",3,"value"],["id","row","class","sub_div",3,"click",4,"ngIf"],["class","panCradDiv",4,"ngIf"],["id","row",3,"click",4,"ngIf"],["fxLayout","row wrap","fxFlex","100","fxLayoutGap","50px"],["fxFlex","25",4,"ngFor","ngForOf"],["id","row",4,"ngIf"],[3,"value","disabled"],["alt","",1,"formImg",3,"src"],["type","file","accept","image/*",1,"changeInput",3,"change"],[2,"font-size","10px"],["mat-flat-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"backIcon",3,"click"],["id","row",1,"sub_div",3,"click"],["mat-raised-button","","color","primary"],[1,"formImg",3,"src"],[1,"panCradDiv"],["id","row",3,"click"],[1,"button_2"],["fxFlex","25"],[1,"Upload","scanButton"],["type","file","accept","image/*","accept","image/*",1,"changeInput",3,"change"],["id","row"],[1,"button_3",3,"click"],[1,"backIcon1",3,"click"],[3,"height","width","trigger","imageCapture"]],template:function(t,e){1&t&&(I.Xb(0,"mat-card",0),I.Xb(1,"h1",1),I.Tc(2,"Document Upload"),I.Wb(),I.Sb(3,"hr",2),I.Xb(4,"form",3),I.Rc(5,xt,55,27,"div",4),I.Wb(),I.Xb(6,"div"),I.Xb(7,"table"),I.Xb(8,"tr"),I.Xb(9,"td"),I.Xb(10,"button",5),I.fc("click",function(){return e.addDocuments()}),I.Xb(11,"mat-icon",6),I.Tc(12,"add"),I.Wb(),I.Tc(13,"DOCUMENT "),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Wb(),I.Sb(14,"br"),I.Xb(15,"div",7),I.Xb(16,"button",8),I.fc("click",function(){return e.back()}),I.Tc(17,"Back"),I.Wb(),I.Xb(18,"button",9),I.fc("click",function(){return e.done()}),I.Tc(19,"Done"),I.Wb(),I.Wb()),2&t&&(I.Eb(4),I.rc("formGroup",e.documentForm),I.Eb(1),I.rc("ngForOf",e.documentForm.get("documentsList").controls),I.Eb(5),I.rc("disabled",3==e.selectedOptions2.length))},directives:[g.a,c.A,c.s,c.j,n.m,P.b,i.a,c.e,c.k,X.f,X.c,N.a,c.r,c.i,n.l,S.a,w.n,n.n,X.g,y.a,D.e,D.b,D.f,X.b],styles:[".breadcrumb[_ngcontent-%COMP%]{position:fixed;top:40px;width:100%}.breadcrumb[_ngcontent-%COMP%], .head[_ngcontent-%COMP%]{background-color:#fff}.snapShot[_ngcontent-%COMP%]{margin-top:2%}.panCradDiv[_ngcontent-%COMP%]{height:30%;right:0;width:200px}.backIcon[_ngcontent-%COMP%]{color:red;float:right}.app-container[_ngcontent-%COMP%]{height:100%;width:100%}.basic-container[_ngcontent-%COMP%]{padding:5px}.main-head[_ngcontent-%COMP%]{padding-left:5%;padding-top:16px;padding-bottom:0}mat-tab-group[_ngcontent-%COMP%]{padding-left:2%}.flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;height:60vh;border:1px solid #000;padding:10px 5px;box-sizing:border-box}.flex-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin:0 5px;box-sizing:border-box}.flex-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2), .flex-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(3){margin-top:5px}.flex-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(3){flex:1}.formField1[_ngcontent-%COMP%]{flex-grow:1;width:50px}.formField[_ngcontent-%COMP%]{flex-grow:1;width:30%}.formField2[_ngcontent-%COMP%]{flex-grow:1;width:100%}#row[_ngcontent-%COMP%]{font-size:9px;color:#2680eb}mat-hint[_ngcontent-%COMP%]{font-size:10px;margin-bottom:-12px;display:block}.inputMatcard[_ngcontent-%COMP%]{max-width:500px;padding:10px}.inputMatcard[_ngcontent-%COMP%], .inputMatcard1[_ngcontent-%COMP%]{flex-grow:1;box-shadow:0 3pt 6pt rgba(0,0,0,.1607843137254902);box-sizing:border-box;margin-left:0;width:100%}.inputMatcard1[_ngcontent-%COMP%]{padding:18px}.inputMatcard2[_ngcontent-%COMP%]{flex-grow:1;box-shadow:0 3pt 6pt rgba(0,0,0,.1607843137254902);box-sizing:border-box;margin-left:0;width:20px}.mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}.backIcon1[_ngcontent-%COMP%]{color:red;float:none}.inputClass[_ngcontent-%COMP%]{border-style:hidden;box-shadow:0 3pt 6pt rgba(0,0,0,.1607843137254902);font-weight:bolder}[_nghost-%COMP%]     .mat-form-field-outline-end, [_nghost-%COMP%]     .mat-form-field-outline-gap, [_nghost-%COMP%]     div.mat-form-field-outline-start{border-color:0!important;border-width:0!important}.form[_ngcontent-%COMP%]{gap:20px;justify-content:space-between}.form[_ngcontent-%COMP%], .form1[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.form1[_ngcontent-%COMP%]{gap:50px}.button[_ngcontent-%COMP%]{display:flex;margin-bottom:20px;gap:20px;flex-wrap:wrap;justify-content:space-between;padding-left:24%;padding-right:24%}.matCard[_ngcontent-%COMP%]{max-width:1200px;align-items:center;justify-content:center;margin:10px auto 3%;padding-right:15%;padding-top:5%}.mat-form-field-flex[_ngcontent-%COMP%]{box-shadow:0 3pt 6pt rgba(0,0,0,.1607843137254902)}.flex-grow-1[_ngcontent-%COMP%]{flex-grow:1}mat-label[_ngcontent-%COMP%]{font-weight:700;font-size:12px;letter-spacing:0}.matSelect[_ngcontent-%COMP%]{margin-left:20%;width:80px;font-weight:lighter;font-size:10px;letter-spacing:0;color:#000;background-color:#f4f8f7}.dived[_ngcontent-%COMP%], .matSelect[_ngcontent-%COMP%]{padding-top:10px}.scanButton[_ngcontent-%COMP%]{width:80px;display:inline-block;background-color:#fff;color:#00f;border-color:#d3d3d3;margin-left:5px;border-style:ridge;margin-top:50px;border-radius:5px}.matIcon[_ngcontent-%COMP%]{font-size:30px}.insertDriveImg[_ngcontent-%COMP%], .matIcon[_ngcontent-%COMP%]{color:#456efe;display:block;margin:auto}.insertDriveImg[_ngcontent-%COMP%]{padding-top:30px;width:120px;height:120px;text-align:center}.flex-grow-2[_ngcontent-%COMP%]{padding:40px 50px;border:2px dashed #d3d3d3;border-radius:10px}.flex-grow-2[_ngcontent-%COMP%], .flex-grow-Upload[_ngcontent-%COMP%]{margin-bottom:5%}.alignment[_ngcontent-%COMP%]{border-style:none!important}.line[_ngcontent-%COMP%]{border:thick;border-style:solid;border-block-width:unset;color:#00f;color:#6988f6;width:40px;border-radius:5px;margin:initial;margin-bottom:20px}.uploadField[_ngcontent-%COMP%]{font-size:large}input[_ngcontent-%COMP%]{width:80%;color:#374664;opacity:1%;font-weight:600}.mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%]:not(.mat-tab-disabled):focus, .mat-tab-group.mat-primary[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]:not(.mat-tab-disabled):focus, .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%]:not(.mat-tab-disabled):focus, .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]:not(.mat-tab-disabled):focus{background:red}.mat-tab-label-active[_ngcontent-%COMP%]{color:green}  .mat-tab-label-active{color:#6988f6!important}.verification[_ngcontent-%COMP%]{float:right;color:#2a59e7}  .mat-tab-group.mat-primary .mat-ink-bar{background-color:#6988f6!important;height:4px}mat-tab-label[_ngcontent-%COMP%]{font-size:8px}.container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center}.line[_ngcontent-%COMP%]{flex:1}.text[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}figure[_ngcontent-%COMP%]{display:block;width:50px;height:50px;border-radius:50px;font-size:25px;text-align:center;margin-right:10px;background:#fff;line-height:1.7em}figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;width:30px;height:auto}.close[_ngcontent-%COMP%]{border-style:none;background-color:#fff;position:relative;top:10px}.Back[_ngcontent-%COMP%]{margin:12px 0 12px -12%;width:150px;color:#a9a9a9;border-radius:45px}.Next[_ngcontent-%COMP%]{margin:12px -13% 12px 0;width:150px;background-color:#426af5;color:#fff;border-radius:55px}.insertDrive[_ngcontent-%COMP%]{color:#456efe;display:block;margin:auto;font-size:25px}.progressDiv[_ngcontent-%COMP%]{flex-grow:1;align-self:flex-end}.progress[_ngcontent-%COMP%]{text-align:end;font-size:7px}.formSectionContainer[_ngcontent-%COMP%]{gap:40px;display:grid;grid-template-columns:200px auto}@media (max-width:768px){.formSectionContainer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}}.formImg[_ngcontent-%COMP%]{background-color:green;max-height:100px}.dropDown[_ngcontent-%COMP%]{display:block}.mat-radio-button.mat-accent.mat-radio-checked[_ngcontent-%COMP%]   .mat-radio-outer-circle[_ngcontent-%COMP%]{border-color:#4286f4!important}.mat-radio-button.mat-accent[_ngcontent-%COMP%]   .mat-radio-inner-circle[_ngcontent-%COMP%]{color:#4286f4;background-color:#4286f4}  .egret-navy .mat-progress-bar-buffer{background-color:#add8e6!important}  .egret-navy .mat-progress-bar-fill:after{background-color:#00f!important}#sides[_ngcontent-%COMP%]{width:100px}#box[_ngcontent-%COMP%]{display:flex}.Back[_ngcontent-%COMP%]{background-color:grey;color:#fff}.changeInput[_ngcontent-%COMP%]{opacity:0;position:absolute;top:0;left:0;bottom:0;right:0;text-align:center}.Upload[_ngcontent-%COMP%]{vertical-align:c;align-self:center;position:relative}button[disabled][_ngcontent-%COMP%]{color:#666}.docimg[_ngcontent-%COMP%]{height:100px;width:100%;-o-object-fit:cover;object-fit:cover}.errbd[_ngcontent-%COMP%]{border:1px solid red}.sub_div[_ngcontent-%COMP%]{position:absolute;bottom:0}p[_ngcontent-%COMP%]{margin-left:300px}.button_2[_ngcontent-%COMP%]{margin-left:600px;bottom:100px}.button_2[_ngcontent-%COMP%], .button_3[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content}.button_3[_ngcontent-%COMP%]{bottom:50px}"]}),t})()}];let Ot=(()=>{class t{}return t.\u0275mod=I.Pb({type:t}),t.\u0275inj=I.Ob({factory:function(e){return new(e||t)},providers:[n.d],imports:[[n.c,s.d,c.x,d.a,l.a,c.l,i.b,g.f,c.x,h.c,m.a,b.a,u.a,a.b,r.l.forChild(At)]]}),t})()}}]);