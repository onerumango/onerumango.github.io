!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,"symbol"==typeof(c=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"))?c:String(c)),i)}var a,c}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"/Pd4":function(e,i,a){"use strict";a.d(i,"a",function(){return b});var c=a("ngOV"),o=a("2Vo4"),s=a("z6cu"),r=a("JIr8"),u=a("x/2q"),l=a("8Y7J"),d=a("IheW"),g=c.a.baseURL,b=function(){var e=function(){function e(n,i){var a=this;t(this,e),this.http=n,this.showMessageService=i,this.addEditOrViewsummary=new o.a(""),this.isSubmitted=new o.a(""),this.fundsEdit=new o.a(""),this.errorHandler=function(t){return console.error("Error : "+t.message),console.error("status : "+t.status),a.showMessageService.errorMessage(t.status,t),Object(s.a)(t)}}return n(e,[{key:"addEditOrViewsummaryData",value:function(t){this.addEditOrViewsummary.next(t)}},{key:"isSubmittedResp",value:function(t){this.isSubmitted.next(t)}},{key:"fundsEditResp",value:function(t){this.fundsEdit.next(t)}},{key:"saveOrUpdateFundStageDetails",value:function(t){return console.log("in service"),this.http.post(g+"/fundingStage/saveOrUpdateFunds",t).pipe(Object(r.a)(this.errorHandler))}},{key:"getFundById",value:function(t){return this.http.get("".concat(g,"/fundingStage/getFundById/").concat(t)).pipe(Object(r.a)(this.errorHandler))}},{key:"getFundByTellerTrxnRefNo",value:function(t){return this.http.get("".concat(g,"/fundingStage/getFundByTellerTxRefNo/").concat(t)).pipe(Object(r.a)(this.errorHandler))}},{key:"getFundByAccountId",value:function(t){return this.http.get("".concat(g,"/fundingStage/getFundByAccId/").concat(t)).pipe(Object(r.a)(this.errorHandler))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.bc(d.c),l.bc(u.a))},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"2ocR":function(e,i,a){"use strict";a.d(i,"a",function(){return S});var c=a("iELJ"),o=a("r1zJ"),s=a("nm5K"),r=a("qMRc"),u=a("tZUg"),l=a("kA6c"),d=a("8Y7J"),g=a("iInd"),b=a("VDRc"),f=a("SVse"),h=a("Dxy4"),m=a("Tj54"),p=a("PDjf");function v(t,e){if(1&t){var n=d.Yb();d.Xb(0,"button",7),d.fc("click",function(){return d.Hc(n),d.jc().close1()}),d.Xb(1,"mat-icon"),d.Tc(2,"close"),d.Wb(),d.Wb()}}function I(t,e){if(1&t){var n=d.Yb();d.Xb(0,"button",7),d.fc("click",function(){return d.Hc(n),d.jc().close()}),d.Xb(1,"mat-icon"),d.Tc(2,"close"),d.Wb(),d.Wb()}}function y(t,e){1&t&&(d.Xb(0,"div",4),d.Xb(1,"div",8),d.Sb(2,"img",9),d.Wb(),d.Wb())}function x(t,e){if(1&t){var n=d.Yb();d.Xb(0,"div",10),d.Xb(1,"h5",11),d.Tc(2,"Please e-sign the application!"),d.Wb(),d.Xb(3,"mat-card",12),d.Xb(4,"mat-card-content"),d.Xb(5,"signature-pad",13),d.fc("onBeginEvent",function(){return d.Hc(n),d.jc().drawStart()})("onEndEvent",function(){return d.Hc(n),d.jc().drawComplete()}),d.Wb(),d.Wb(),d.Wb(),d.Xb(6,"div",14),d.Xb(7,"button",15),d.fc("click",function(){return d.Hc(n),d.jc().onSubmit()}),d.Tc(8," SUBMIT "),d.Wb(),d.Wb(),d.Wb()}if(2&t){var i=d.jc();d.Eb(5),d.rc("options",i.signaturePadOptions),d.Eb(2),d.rc("disabled",i.disableDone)}}var S=function(){var e=function(){function e(n,i,a,c,o,s,r,u){t(this,e),this.data=n,this.dialogRef=i,this.ls=a,this.accountService=c,this.apiService=o,this.router=s,this.appEntryService=r,this.cdr=u,this.isDone=!1,this.signaturePadOptions={minWidth:2,canvasWidth:250,canvasHeight:150},this.count=0,this.res={enable:!1,image:null},this.disableDone=!0}return n(e,[{key:"ngOnInit",value:function(){this.accountId=this.ls.getItem("accountId"),this.accountInfo=this.ls.getItem("EDIT-CREATEACCCIF"),this.accountInfo&&(this.accountId=this.accountInfo.businessProductAccount.accountId),this.isDone=null==this.data.isDone?this.data.isSignLater:this.data.isDone,this.cdr.markForCheck()}},{key:"ngAfterViewInit",value:function(){this.signaturePad.set("minWidth",2),this.signaturePad.clear()}},{key:"drawComplete",value:function(){console.log(this.signaturePad.toDataURL()),this.esignUrl=this.signaturePad.toDataURL(),this.disableDone=!this.esignUrl.toString().includes("data:image/png;base64")}},{key:"drawStart",value:function(){console.log("begin drawing")}},{key:"clearSignature",value:function(){this.signaturePad.clear()}},{key:"savePad",value:function(){var t=this.signaturePad.toDataURL();this.signatureImg=t}},{key:"close1",value:function(){"NewCustomerOnboarding"===this.data.screen?this.dialogRef.close(this.res):(this.dialogRef.close(this.ls.getItem("signedImage")?{image:this.ls.getItem("signedImage")}:null),this.ls.setItem("enable",!1))}},{key:"close",value:function(){this.dialogRef.close("NewCustomerOnboarding"===this.data.screen?this.res:{image:this.esignUrl})}},{key:"onSubmit",value:function(){var t=this;console.log(this.signaturePad.toDataURL());var e={};console.log("this.data::",this.data),"NewCustomerOnboarding"!==this.data.screen?(e.accountId=this.ls.getItem("accountId"),this.getByAccountId(e.accountId)):(this.apiService.getAccountIdByCusId(this.data.customerId).subscribe(function(t){console.log("Account Id response -- ",t),e.accountId=t}),this.res={enable:!0,image:this.signaturePad.toDataURL()}),e.customerId=this.data.customerId,e.documentName=this.data.customerId+"Signature",e.documentType="10",e.fileType="image/jpeg",e.fileName="signature";var n=this.signaturePad.toDataURL("image/png");this.ls.setItem("signedImage",n);for(var i=atob(n.substring("data:image/png;base64,".length)),a=new Uint8Array(i.length),c=0,o=i.length;c<o;++c)a[c]=i.charCodeAt(c);var s=new Blob([a],{type:"image/png"}),r=new FormData;r.append("data",JSON.stringify(e)),r.append("file",s),r.append("accType","savings"),this.apiService.uploadDocument(r).subscribe(function(e){console.log(e),e&&(t.close(),t.show=!0,t.res=e)},function(e){t.close(),t.res=!1}),"NewCustomerOnboarding"!==this.data.screen?this.isDone=!1:this.close(),console.log(this.isDone),this.ls.setItem("eSignStage",!0)}},{key:"getByAccountId",value:function(t){var e=this;this.appEntryService.getByAccountId(t).subscribe(function(t){console.log("updateStatus :: ",t),e.accountdetailsForStatusUpdate=t,e.updateAccountStatus(t)})}},{key:"updateAccountStatus",value:function(t){t.status="BACKLOG",this.appEntryService.updateAccountStatusService(t).subscribe(function(t){console.log("updateResp:: ",t)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Rb(c.a),d.Rb(c.g),d.Rb(u.a),d.Rb(l.a),d.Rb(s.b),d.Rb(g.h),d.Rb(r.a),d.Rb(d.h))},e.\u0275cmp=d.Lb({type:e,selectors:[["app-esign-pop"]],viewQuery:function(t,e){var n;(1&t&&d.ad(o.a,!0),2&t)&&(d.Cc(n=d.gc())&&(e.signaturePad=n.first))},decls:8,vars:4,consts:[["fxLayout","row wrap"],["fxFlex","100","fxLayoutAlign","end center"],["mat-icon-button","",3,"click",4,"ngIf"],["fxFlex","100",4,"ngIf"],["fxFlex","100"],["fxLayout","row","fxLayoutAlign","center center"],["fxFlex","50","fxFlexOffset","20px",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"propic","text-center"],["src","assets/images/esign.png","alt",""],["fxFlex","50","fxFlexOffset","20px"],[1,"text-center","mt-16"],[1,"mt-16"],[3,"options","onBeginEvent","onEndEvent"],[1,"text-center"],["mat-raised-button","","color","primary",1,"sbmt",3,"disabled","click"]],template:function(t,e){1&t&&(d.Xb(0,"div",0),d.Xb(1,"div",1),d.Rc(2,v,3,0,"button",2),d.Rc(3,I,3,0,"button",2),d.Wb(),d.Rc(4,y,3,0,"div",3),d.Xb(5,"div",4),d.Xb(6,"div",5),d.Rc(7,x,9,2,"div",6),d.Wb(),d.Wb(),d.Wb()),2&t&&(d.Eb(2),d.rc("ngIf",!e.isDone),d.Eb(1),d.rc("ngIf",e.isDone),d.Eb(1),d.rc("ngIf",!e.isDone),d.Eb(3),d.rc("ngIf",!e.isDone))},directives:[b.e,b.b,b.d,f.n,h.b,m.a,b.c,p.a,p.d,o.a],styles:[".sbmt[_ngcontent-%COMP%]{margin:12px 0;width:35%;background-color:#426af5;color:#fff;border-radius:55px}"]}),e}()},"h/GN":function(e,i,a){"use strict";a.d(i,"a",function(){return R});var c=a("iELJ"),o=a("nm5K"),s=a("laYw"),r=a("tZUg"),u=a("2ocR"),l=a("8Y7J"),d=a("iInd"),g=a("VDRc"),b=a("SVse"),f=a("Dxy4"),h=a("Tj54"),m=["profileFile"];function p(t,e){if(1&t){var n=l.Yb();l.Xb(0,"button",7),l.fc("click",function(){return l.Hc(n),l.jc().close1()}),l.Xb(1,"mat-icon"),l.Tc(2,"close"),l.Wb(),l.Wb()}}function v(t,e){if(1&t){var n=l.Yb();l.Xb(0,"button",7),l.fc("click",function(){return l.Hc(n),l.jc().close()}),l.Xb(1,"mat-icon"),l.Tc(2,"close"),l.Wb(),l.Wb()}}function I(t,e){1&t&&(l.Xb(0,"div",4),l.Xb(1,"div",8),l.Sb(2,"img",9),l.Wb(),l.Wb())}function y(t,e){1&t&&(l.Xb(0,"div"),l.Sb(1,"img",23),l.Wb()),2&t&&(l.Eb(1),l.rc("src","assets/images/no-image.jpg",l.Jc))}function x(t,e){if(1&t&&l.Sb(0,"img",24),2&t){var n=l.jc(2);l.rc("src",n.imageURL1,l.Jc)}}function S(t,e){if(1&t){var n=l.Yb();l.Xb(0,"div",10),l.Xb(1,"h5",11),l.Tc(2,"Signatures!"),l.Wb(),l.Xb(3,"div",12),l.Xb(4,"div",13),l.Xb(5,"button",14),l.fc("click",function(){return l.Hc(n),l.jc().openPopUp()}),l.Tc(6," DIGITAL SIGN "),l.Wb(),l.Wb(),l.Xb(7,"div",15),l.Xb(8,"button",14),l.fc("click",function(){return l.Hc(n),l.Dc(11).click()}),l.Tc(9," UPLOAD "),l.Xb(10,"input",16,17),l.fc("change",function(t){return l.Hc(n),l.jc().onFileSelect(t)}),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(12,"div",5),l.Xb(13,"div",13),l.Xb(14,"div",18),l.Rc(15,y,2,1,"div",19),l.Rc(16,x,1,1,"ng-template",null,20,l.Sc),l.Wb(),l.Xb(18,"div",12),l.Xb(19,"button",21),l.fc("click",function(){return l.Hc(n),l.jc().deleteImg()}),l.Tc(20," DELETE "),l.Wb(),l.Xb(21,"button",22),l.fc("click",function(){return l.Hc(n),l.jc().onSubmit()}),l.Tc(22," SUBMIT "),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&t){var i=l.Dc(17),a=l.jc();l.Eb(15),l.rc("ngIf","not_available"==a.imageURL1)("ngIfElse",i),l.Eb(6),l.rc("disabled","not_available"==a.imageURL1)}}var R=function(){var e=function(){function e(n,i,a,c,o,s,r){t(this,e),this.data=n,this.router=i,this.apiService=a,this.dialogService=c,this.dialog=o,this.dialogRef=s,this.ls=r,this.isDone=!1,this.previousUrl="",this.res={enable:!1,image:null},this.disableDone=!0}return n(e,[{key:"ngOnInit",value:function(){this.accountId=this.ls.getItem("accountId"),this.customerId=this.ls.getItem("CIF_NUM_PRIMARY"),this.image=this.ls.getItem("signedImage"),this.imageURL1=this.image?this.image:"not_available",this.accountId=this.ls.getItem("accountId"),this.getSignatureDetails()}},{key:"getSignatureDetails",value:function(){var t=this;this.apiService.getDigitalsignById(this.accountId).subscribe(function(e){e&&e[0].accountSignatureId&&(t.id=e[0].accountSignatureId)})}},{key:"close1",value:function(){"NewCustomerOnboarding"===this.data.screen?this.dialogRef.close(this.res):(this.dialogRef.close(!0),this.ls.setItem("enable",!!this.ls.getItem("signedImage")))}},{key:"openPopUp",value:function(t){var e,n=this;null==t&&(e={isSignLater:!1,screen:"Create Account"}),this.show||this.dialog.open(u.a,{width:"720px",disableClose:!0,data:null==t?e:t}).afterClosed().subscribe(function(t){console.log("dismiss res",t),t&&(n.imageURL1=null==t?void 0:t.image,n.disableDone=!(null==t?void 0:t.image),n.ls.setItem("enable",!0),console.log(n.show))})}},{key:"onFileSelect",value:function(t){var e=this;console.log("event -- ",t.target.files),this.selectedFile=t.target.files[0],console.log(this.selectedFile);var n=new FileReader;n.readAsDataURL(t.target.files[0]),n.onload=function(t){e.imageURL1=n.result};var i=this.selectedFile,a=new FormData;a.append("data",JSON.stringify({accountId:this.accountId,customerId:this.customerId,documentName:this.customerId+"Signature",documentType:"10",fileType:"image/jpeg",fileName:"signature"})),a.append("file",i),a.append("accType","savings"),this.apiService.upload(a).subscribe(function(t){t&&(e.ls.setItem("signedImage",e.imageURL1),e.ls.setItem("eSignStage",!0),e.ls.setItem("enable",!0))})}},{key:"onSubmit",value:function(){this.isDone=!0,console.log(this.isDone),this.dialogRef.close(!0)}},{key:"deleteImg",value:function(){var t=this;this.dialogService.doConfirmDialog("").subscribe(function(e){"Yes"==e&&t.apiService.deleteCustomerDoc(t.customerId,t.id).subscribe(function(e){t.imageURL1="not_available",t.ls.removeItem("signedImage"),t.disableDone=!0,t.ls.setItem("enable",!1)})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Rb(c.a),l.Rb(d.h),l.Rb(o.b),l.Rb(s.a),l.Rb(c.b),l.Rb(c.g),l.Rb(r.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-upload-sign-esign"]],viewQuery:function(t,e){var n;(1&t&&l.ad(m,!0),2&t)&&(l.Cc(n=l.gc())&&(e.profileFile=n.first))},decls:8,vars:4,consts:[["fxLayout","row wrap"],["fxFlex","100","fxLayoutAlign","end center"],["mat-icon-button","",3,"click",4,"ngIf"],["fxFlex","100",4,"ngIf"],["fxFlex","100"],["fxLayout","row","fxLayoutAlign","center center"],["fxFlex","50","fxFlexOffset","20px",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"propic","text-center"],["src","assets/images/esign.png","alt",""],["fxFlex","50","fxFlexOffset","20px"],[1,"text-center","mt-16","size"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","20px"],[1,"sub-section-1"],["mat-raised-button","",1,"btn1",3,"click"],[1,"sub-section-2"],["type","file","accept","image/*","required","",1,"changeInput",2,"display","none",3,"change"],["fileInput",""],[1,"insertDriveImg"],[4,"ngIf","ngIfElse"],["showAvatar",""],["mat-raised-button","","color","red",1,"dltbtn",3,"click"],["mat-raised-button","","color","primary",1,"dbtn",3,"disabled","click"],["alt","No Image",1,"formImg",3,"src"],["required","","alt","",1,"formImg",3,"src"]],template:function(t,e){1&t&&(l.Xb(0,"div",0),l.Xb(1,"div",1),l.Rc(2,p,3,0,"button",2),l.Rc(3,v,3,0,"button",2),l.Wb(),l.Rc(4,I,3,0,"div",3),l.Xb(5,"div",4),l.Xb(6,"div",5),l.Rc(7,S,23,3,"div",6),l.Wb(),l.Wb(),l.Wb()),2&t&&(l.Eb(2),l.rc("ngIf",!e.isDone),l.Eb(1),l.rc("ngIf",e.isDone),l.Eb(1),l.rc("ngIf",!e.isDone),l.Eb(3),l.rc("ngIf",!e.isDone))},directives:[g.e,g.b,g.d,b.n,f.b,h.a,g.c,g.f],styles:[".scanButton[_ngcontent-%COMP%]{display:inline-block;background-color:#fff;color:#00f;border-color:#d3d3d3;margin-left:5px;border-style:ridge;margin-top:0;border-radius:55px;height:35px}.formImg[_ngcontent-%COMP%]{height:200px!important;width:400px!important;background-color:#f5f5f5;border-radius:10%}.dltbtn[_ngcontent-%COMP%]{background-color:red}.dbtn[_ngcontent-%COMP%], .dltbtn[_ngcontent-%COMP%]{margin:12px 0;width:40%;color:#fff;border-radius:55px}.dbtn[_ngcontent-%COMP%]{background-color:#426af5}.size[_ngcontent-%COMP%]{font-size:large;font-weight:300}.btn1[_ngcontent-%COMP%]{margin:12px 0;width:100%;background-color:#426af5;color:#fff;border-radius:55px}"]}),e}()}}])}();