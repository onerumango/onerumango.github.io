"use strict";(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[886],{21886:function(e,t,s){s.r(t),s.d(t,{FileUploadModule:function(){return ge}});var o=s(38583),i=s(39895);class n{}class a{constructor(){this.proceedDuplicates=!1}}var r=s(3679);class l{}var d=s(91841),u=s(35383),c=(s(89019),s(88259)),g=s.n(c),p=s(79765),h=s(37716),Z=s(94761),T=s(59119),A=s(58219),D=s(26215),m=s(3118);let q=(()=>{class e{constructor(e){this.http=e,this.username=new D.X(""),this.tabData=new D.X([]),this.screenLabelList=new D.X(new u.yv),this.labelData=this.screenLabelList.asObservable(),this.screenData=new u.yv,this.screenwisePermissions=new D.X([]),this.httpHeader={header:new d.WM({"Content-type":"application/json"})},this._baseURL=m.$.baseURL+"/role",this._fmosbaseURL=m.$.baseURL+"/medRoles",this.baseURL=m.$.baseURL}createRoles(e){return this.http.post(`${this._baseURL}/createRole`,e)}getRoleByRoleName(e){return this.http.get(`${this._baseURL}/${e}`)}getAllRoles(){return this.http.get(`${this.baseURL}/users/getAllAuthRole`)}getAllDept(){return this.http.get(`${this.baseURL}/users/getAllAuthDepts`)}getAllRolesSummary(){return this.http.get(`${this._fmosbaseURL}/fetchAllRolesSummary`)}fetchAllAuthRoles(){return this.http.get(`${this._baseURL}/fetchAuthRoles`)}modifyRoleService(e){return this.http.put(`${this._baseURL}/modifyRole`,e)}newmodifyRoleService(e){return this.http.put(`${this._fmosbaseURL}/modifyRole`,e)}verifyRole(e,t){return this.http.get(`${this._fmosbaseURL}/authorize/${e}/${t}`)}deleteRole(e,t){return this.http.delete(`${this._fmosbaseURL}/${e}/${t}`,{responseType:"text"})}closelockRecord(e,t){return this.http.get(`${this._fmosbaseURL}/close/${e}/${t}`)}reopenRecord(e,t){return this.http.get(`${this._fmosbaseURL}/reopen/${e}/${t}`)}getAllPermission(){return this.http.get(`${this._baseURL}/permission`)}fetchScreenData(){const e=localStorage.getItem("userFromLogin");return this.http.get(`${this._fmosbaseURL}/allScreenUser/${e}`)}fetchnewscreenlabels(){return this.http.get(`${this._fmosbaseURL}/fetchTabLabelAndScreen`)}createnewrole(e){return this.http.post(`${this._fmosbaseURL}/saveRoleDetails`,e)}fetchfmosroles(){const e=localStorage.getItem("userFromLogin");return this.http.get(`${this._fmosbaseURL}/allRolePermissionForUser/${e}`)}fetchNewRolePermissions(e){this.http.get(`${this._fmosbaseURL}/allRolePermissionForUser/${e}`).subscribe(e=>{localStorage.setItem("userPermissions",JSON.stringify(e)),this.storeuserpermissions=e})}fetchScreenPermissions(e){let t=JSON.parse(localStorage.getItem("userPermissions"));console.log("scr",e,t);let s=[];if(this.screenData=new u.yv,t){let o=t.labels;o&&o.sort((e,t)=>e.labelId-t.labelId);let i=t.screenAndPermissionsDTO;if(console.log(i),i){let t=i.findIndex(function(t){return t.screenName.toLowerCase()==e.toLowerCase()});if(t>=0){let e=i[t].permissions.toString();for(let t=0;t<e.length;t++)1==e.charAt(t)&&(o[t].exist=!0,o[t].labellowercase=o[t].labelName.toLowerCase(),s.push(o[t]),this.screenData[o[t].labellowercase]=o[t])}}}console.log("scr",this.screenData),this.screenLabelList.next(this.screenData)}fetchdynamicrolesdata(e){return this.http.get(`${this._fmosbaseURL}/fetchRoleData/${e}`)}preparingrolesdata(e){let t=[],s=e.screenDto,o=e.labelDto,i=e.permissionDto;e.tabDto.forEach(function(e){let n=[],a=[];s.forEach(t=>{if(e.tabId==t.screensId.tabId){let e=i.findIndex(function(e){return e.permissionId.screenId==t.screensId.screenId});n.push(t.screenName),a.push({screenname:t.screenName,screenid:t.screensId.screenId,permission:i[e].permissions})}});let r=e.visibility.toString(),l=[],d=[];for(let t=0;t<r.length;t++)1==r.charAt(t)&&(l.push(o[t].labelName),d.push(o[t]));t.push({tabname:e.tabName,screens:n,screenlist:a,labels:l,labelslist:d})}),this.tabData.next(t)}EnablescreenPermissions(){let e=JSON.parse(localStorage.getItem("userPermissions")),t=[];if(e){let s=e.labels;s.sort((e,t)=>e.labelId-t.labelId);let o=e.screenAndPermissionsDTO,i=s.findIndex(function(e){return"view"==e.labelName.toLowerCase()});for(let e=0;e<o.length;e++){let s=o[e].permissions.toString();(1==s.charAt(i)||"1"==s.charAt(i))&&t.push(o[e].screenName)}}console.log("methods are ",t),this.screenwisePermissions.next(t)}}return e.\u0275fac=function(t){return new(t||e)(h.LFG(d.eN))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=s(24376);const x=["fileWrapper"];function b(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",26),h.NdJ("click",function(){return h.CHM(e),h.oxw().refreshGl()}),h._uU(1,"Refresh CCY Rate"),h.qZA()}}function _(e,t){if(1&e&&(h.TgZ(0,"ng-option",27),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.Q6J("value",e),h.xp6(1),h.Oqu(e)}}function U(e,t){if(1&e&&(h.TgZ(0,"option",27),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.Q6J("value",e),h.xp6(1),h.Oqu(e)}}function C(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"select",28),h.NdJ("change",function(t){h.CHM(e);const s=h.oxw();return s.getFileNamesBasedOnExtSysNameAndProcessName(s.uploadExcelForm.get("extSysNameData").value,t.target.value)}),h.TgZ(1,"option",13),h._uU(2,"--Please select--"),h.qZA(),h.YNc(3,U,2,2,"option",14),h.qZA()}if(2&e){const e=h.oxw();h.Q6J("disabled",e.dataUploaded),h.xp6(3),h.Q6J("ngForOf",e.processNames)}}function v(e,t){if(1&e&&h._UZ(0,"input",29),2&e){const e=h.oxw();h.Q6J("disabled",e.dataUploaded)}}function M(e,t){if(1&e&&(h.TgZ(0,"option",27),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.Q6J("value",e.trnCode),h.xp6(1),h.AsE("",e.trnCode," ",e.trnDesc," ")}}function y(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",9),h.TgZ(1,"label",17),h._uU(2,"File Name"),h.TgZ(3,"span",11),h._uU(4,"*"),h.qZA(),h.qZA(),h.TgZ(5,"input",30),h.NdJ("keypress",function(t){return h.CHM(e),h.oxw().valuechange(t)})("keyup",function(){h.CHM(e);const t=h.oxw();return t.fun(t.excelDataProcessingReqDTO.fileName)}),h.qZA(),h.qZA()}if(2&e){const e=h.oxw();h.xp6(5),h.Q6J("disabled",e.dataUploaded)}}function S(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",31),h.TgZ(1,"div",32),h.TgZ(2,"div",33),h.TgZ(3,"div",34,35),h.TgZ(5,"input",36,37),h.NdJ("change",function(t){h.CHM(e);const s=h.oxw();return s.getFiledata(t,s.uploadExcelForm.get("extSysNameData").value,s.uploadExcelForm.get("processNameData").value,s.uploadExcelForm.get("fileName").value)}),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=h.oxw();h.xp6(5),h.Q6J("disabled",e.dataUploaded)}}function N(e,t){1&e&&(h.ynx(0),h.TgZ(1,"span",43),h._uU(2,"Uploading, Please wait... "),h._UZ(3,"span",44),h.qZA(),h.BQk())}function O(e,t){1&e&&(h.TgZ(0,"span",45),h._uU(1," Upload Data"),h.qZA())}const w=function(){return["/dashboard"]};function F(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",38),h.TgZ(1,"div",6),h.TgZ(2,"button",39),h.NdJ("click",function(){return h.CHM(e),h.oxw().doFirstValidation()}),h.YNc(3,N,4,0,"ng-container",40),h.YNc(4,O,2,0,"ng-template",null,41,h.W1O),h.qZA(),h.qZA(),h.TgZ(6,"div",6),h.TgZ(7,"a",42),h._uU(8,"Exit"),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=h.MAs(5),t=h.oxw();h.xp6(2),h.Q6J("disabled",!t.uploadExcelForm.valid||!t.showSelectedFilename||t.dataUploaded),h.xp6(1),h.Q6J("ngIf",t.isUploading)("ngIfElse",e),h.xp6(4),h.Q6J("routerLink",h.DdM(4,w))}}function P(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",38),h.TgZ(1,"div",6),h.TgZ(2,"button",39),h.NdJ("click",function(){return h.CHM(e),h.oxw().doFirstValidation()}),h._uU(3," Auto Upload "),h.qZA(),h.qZA(),h.TgZ(4,"div",6),h.TgZ(5,"a",42),h._uU(6,"Exit"),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=h.oxw();h.xp6(2),h.Q6J("disabled",!e.uploadExcelForm.valid||e.dataUploaded),h.xp6(3),h.Q6J("routerLink",h.DdM(2,w))}}function J(e,t){if(1&e&&(h.TgZ(0,"p",50),h._uU(1),h.qZA()),2&e){const e=h.oxw(2);h.xp6(1),h.Oqu(e.date)}}function R(e,t){1&e&&(h.ynx(0),h.TgZ(1,"span",43),h._uU(2,"Processing, Please wait... "),h._UZ(3,"span",44),h.qZA(),h.BQk())}function E(e,t){1&e&&(h.TgZ(0,"span",45),h._uU(1," Process"),h.qZA())}function L(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",4),h.TgZ(1,"div",46),h.TgZ(2,"h2",24),h._uU(3,"File Upload Summary"),h.qZA(),h.qZA(),h.TgZ(4,"div",47),h.TgZ(5,"div",48),h.TgZ(6,"label",49),h._uU(7,"Batch Number"),h.qZA(),h.TgZ(8,"p",50),h._uU(9),h.qZA(),h.qZA(),h.TgZ(10,"div",48),h.TgZ(11,"label",49),h._uU(12,"Total No Of records"),h.qZA(),h.TgZ(13,"p",50),h._uU(14),h.qZA(),h.qZA(),h.TgZ(15,"div",48),h.TgZ(16,"label",49),h._uU(17,"Total Debit Amount"),h.qZA(),h.TgZ(18,"p",50),h._uU(19),h.qZA(),h.qZA(),h.TgZ(20,"div",48),h.TgZ(21,"label",49),h._uU(22,"Total Credit Amount"),h.qZA(),h.TgZ(23,"p",50),h._uU(24),h.qZA(),h.qZA(),h.TgZ(25,"div",48),h.TgZ(26,"label",49),h._uU(27,"Sum (Credit - Debit)"),h.qZA(),h.TgZ(28,"p",50),h._uU(29),h.qZA(),h.qZA(),h.TgZ(30,"div",48),h.TgZ(31,"label",49),h._uU(32,"Transaction Date"),h.qZA(),h.YNc(33,J,2,1,"p",51),h.qZA(),h.TgZ(34,"div",52),h.TgZ(35,"label",53),h._uU(36,"Remarks *"),h.qZA(),h._UZ(37,"textarea",54),h.qZA(),h.TgZ(38,"div",52),h.TgZ(39,"label",55),h._uU(40,"Overrides"),h.qZA(),h._UZ(41,"textarea",56),h.qZA(),h.qZA(),h.TgZ(42,"div",57),h.TgZ(43,"div",6),h.TgZ(44,"button",39),h.NdJ("click",function(){return h.CHM(e),h.oxw().Datacheck()}),h.YNc(45,R,4,0,"ng-container",40),h.YNc(46,E,2,0,"ng-template",null,58,h.W1O),h.qZA(),h.qZA(),h.TgZ(48,"div",6),h.TgZ(49,"button",39),h.NdJ("click",function(){h.CHM(e);const t=h.oxw();return t.deleteDataService(t.uploadExcelForm.get("remarks").value)}),h._uU(50,"Delete"),h.qZA(),h.qZA(),h.TgZ(51,"div",6),h.TgZ(52,"a",59),h.NdJ("click",function(){return h.CHM(e),h.oxw().downloadData()}),h._uU(53,"View Excel"),h.qZA(),h.qZA(),h.TgZ(54,"div",6),h.TgZ(55,"button",60),h.NdJ("click",function(){return h.CHM(e),h.oxw().exit()}),h._uU(56,"Hide"),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=h.MAs(47),t=h.oxw();h.xp6(9),h.Oqu(t.responseDto.batchNo),h.xp6(5),h.Oqu(t.responseDto.totalNoOfRecords),h.xp6(5),h.Oqu(t.responseDto.totalDebitAmount),h.xp6(5),h.hij(" ",t.responseDto.totalCreditAmount,""),h.xp6(5),h.Oqu(t.responseDto.sumAmount),h.xp6(4),h.Q6J("ngIf","Today"===t.valueDate||"Today"!=t.valueDate),h.xp6(4),h.Q6J("disabled",t.dataProcessed),h.xp6(7),h.Q6J("disabled",t.flag||t.dataProcessed),h.xp6(1),h.Q6J("ngIf",t.isProcessing)("ngIfElse",e),h.xp6(4),h.Q6J("disabled",t.deleteBtn)}}const I=g().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});let B=(()=>{class e{constructor(e,t,s,i,r,d,c){this.api=e,this.userApi=t,this.fb=s,this.excelService=i,this.roleService=r,this.router=d,this.cdr=c,this.isSelected=!0,this.showSelectedFilename=!1,this.showDialog=!1,this.subject=new p.xQ,this.deleteBtn=!1,this.processNameField="text",this.autoUpload=!1,this.allExternalSystemNames=[],this.space=!1,this.excelDataProcessingAuditlog=new l,this.allFileNames=[],this.selectorDateData=new Date,this.selected="option2",this.listMedMaster=new Array,this.excelDataProcessingRespDTO=new n,this.excelDataProcessingReqDTO=new a,this.isUploading=!1,this.isProcessing=!1,this.dataUploaded=!1,this.dataProcessed=!1,this.button_permission={},this.button=!0,this.flag=!1,this.pipe=new o.uU("en-US"),this.now=Date.now(),this.myFormattedDate=this.pipe.transform(this.now,"dd-MMM-yy"),this.roleCodes=new u.yv,this.formTouched=!0}ngOnInit(){this.user_id=localStorage.getItem("userFromLogin"),this.department=localStorage.getItem("departmentHeader"),this.departmentString=this.department.replace(/["]+/g,""),this.uploadExcelForm=this.fb.group({extSysNameData:["",[r.kI.required]],processNameData:["",[r.kI.required]],selectorDateData:[new Date],trncode:["",[r.kI.required]],fileName:["",[r.kI.required]],remarks:[""]}),setTimeout(()=>{this.newRolePermissions()},2e3),this.roleService.screenLabelList.subscribe(e=>this.roleCodes=e),this.role=sessionStorage.getItem("user_role"),this.getTrnCodeArray(),this.extSysNameData="",this.processNameData="",this.fileNameData="",this.getAllExternalSystemNames(),console.log("user id",this.user_id)}getAuditLogData(e){this.api.getAuditLogService(e,this.user_id).subscribe(e=>{this.excelDataProcessingAuditlog=e,this.excelDataProcessingAuditlog&&(this.auditdata=!0,"P"===this.excelDataProcessingAuditlog.recordStatus&&(this.excelDataProcessingAuditlog.recordStatus="PROCESSED"),"D"===this.excelDataProcessingAuditlog.recordStatus&&(this.excelDataProcessingAuditlog.recordStatus="DELETED"),"U"===this.excelDataProcessingAuditlog.recordStatus&&(this.excelDataProcessingAuditlog.recordStatus="UNPROCESSED"))})}refreshGl(){this.userApi.refreshGl().subscribe(e=>{this.data=e,console.log(this.data)})}canExit(){let e=!1;return this.uploadExcelForm.touched&&1==this.formTouched?g().fire({text:"There are unsaved changes in the screen. Would you like to navigate to other screen?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(t=>!0===t.isConfirmed?(e=!0,this.cdr.markForCheck(),e):(e=!1,this.cdr.markForCheck(),e)):(e=!0,new Promise((t,s)=>{!0===e&&(e=!0,this.cdr.markForCheck(),t(!0))}))}newRolePermissions(){this.roleService.fetchScreenPermissions("Upload Excel")}doFirstValidation(){if(this.button=!1,this.isUploading=!0,console.log("method call"),!this.uploadExcelForm.get("trncode").value)return g().fire("Enter Data for Trnsaction Code."),void(this.isUploading=!1);if(this.enablefilebrowser&&!this.selectedFiles)return g().fire("Please select a file to upload."),void(this.isUploading=!1);if(this.uploadExcelForm.invalid)this.isUploading=!1,g().fire("Please fill all the details");else{const e=new Date;this.excelDataProcessingReqDTO.extSysName=this.uploadExcelForm.get("extSysNameData").value,this.excelDataProcessingReqDTO.processName=this.uploadExcelForm.get("processNameData").value,this.excelDataProcessingReqDTO.processingDate=e,this.excelDataProcessingReqDTO.trnCode=this.uploadExcelForm.get("trncode").value,this.excelDataProcessingReqDTO.fileName=this.uploadExcelForm.get("fileName").value,this.api.showDetailServiceInExcelDataProcessing(this.excelDataProcessingReqDTO,this.user_id).subscribe(e=>{this.isUploading=!1,this.responseforfileupload=e,null!=this.responseforfileupload?(this.responseforfileupload.errorMessage&&(console.log("here is error of duplicate record"),this.disablebtn2=!0,console.log(this.responseforfileupload.errorMessage),g().fire({text:this.responseforfileupload.errorMessage,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"YES"}).then(e=>{}),"Ppossible duplicate data"===this.responseforfileupload.errorMessage&&(this.excelDataProcessingReqDTO.proceedDuplicates=!0,g().fire({title:"Do you want to proceed?",text:"You're trying to upload duplicate data",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES"}).then(e=>{e.isConfirmed?this.api.showDetailServiceInExcelDataProcessing(this.excelDataProcessingReqDTO,this.user_id).subscribe(e=>{this.responseforfileupload=e,this.valueDate="Today"==this.responseforfileupload.valueDate?"Today":"not Today",this.responsebutton=!0,this.responseDto=this.responseforfileupload,"Amount and LCY amount mismatch"===this.responseforfileupload.errorMessage&&g().fire("Unable to upload","Error:"+this.responseforfileupload.errorMessage,"error"),"Error while reading file"===this.responseforfileupload.errorMessage&&g().fire("Unable to upload","Error: "+this.responseforfileupload.errorMessage),0!==this.responseDto.totalNoOfRecords&&(this.dataUploaded=!0,g().fire({title:"Data uploaded successfully ",text:"For the Batch "+this.responseDto.batchNo}).then(e=>{setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)})}),this.excelFileFlag=!0,this.flag=!1,this.isShow=!0,this.formTouched=!this.uploadExcelForm.touched)},e=>{console.log(e)}):e.dismiss===g().DismissReason.cancel&&I.fire("Cancelled","Duplicate data uploading cancelled, successfully :)","error"),this.resetEntries()})),this.flag=!0,this.disbaleBtn=!0),this.date=(new Date).toLocaleDateString(),this.date=this.pipe.transform(this.date,"MMM dd, yyyy"),this.valueDate="Today"==this.responseforfileupload.valueDate?"Today":"not Today",this.responsebutton=!0,this.responseDto=this.responseforfileupload,0!==this.responseDto.totalNoOfRecords&&(this.dataUploaded=!0,g().fire({title:"Data uploaded successfully ",text:"For the Batch "+this.responseDto.batchNo}).then(e=>{setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)})}),this.formTouched=!this.uploadExcelForm.touched,this.excelFileFlag=!0,this.flag=!1,this.isShow=!0)):g().fire("Server error.")},e=>{g().fire("Server error."),this.isUploading=!1})}}getAllExternalSystemNames(){this.api.getAllExtSysNamesService(this.user_id).subscribe(e=>{console.log("this.departmentString::",this.departmentString);let t=e.find(e=>e.department==this.departmentString);console.log("data before filter ",e),console.log("data after filter ",t),this.allExternalSystemNames=e.sort()})}resetEntries(){this.extSysNameData="",this.isUploading=!1,this.processNameData="",this.fileNameData="",this.trncode="",this.showSelectedFilename=!1,this.enablefilebrowser=!0,this.button=!0,this.disablebtn2=!1,this.excelDataProcessingReqDTO.fileName="",this.disbaleBtn=!1,this.excelDataProcessingReqDTO.proceedDuplicates=!1,this.uploadExcelForm.get("selectorDateData").setValue(new Date),this.fileUploadWrapper.nativeElement.setAttribute("data-text","File Upload"),this.responsebutton=!1}valuechange(e){this.disablebtn2&&(this.disbaleBtn=!1),console.log("event",this.disablebtn2)}getFileNamesBasedOnExtSysNameAndProcessName(e,t){this.disablebtn2&&(this.disbaleBtn=!1),this.api.getUploadPermission(e,t).subscribe(e=>{this.permission=e,"false"==this.permission[0]?(this.enablefilebrowser=!0,this.autoUpload=!1):(this.enablefilebrowser=!1,this.autoUpload=!0,this.uploadExcelForm.controls.fileName.clearValidators(),this.uploadExcelForm.controls.fileName.updateValueAndValidity())})}getProcessNamesBasedOnExtSysNameForUpload(e){console.log(e),this.uploadExcelForm.get("processNameData").setValue(""),this.processNameField="text",this.processNames=[],this.disablebtn2&&(this.disbaleBtn=!1),this.api.getProcessNamesBasedOnExtSysNameService(e).subscribe(e=>{this.processNames=e,1===this.processNames.length&&null!=this.processNames&&(this.processNameField="text",this.uploadExcelForm.get("processNameData").setValue(this.processNames[0]),this.enablefilebrowser=!0),this.processNames.length>1&&(this.processNameField="select")})}getTrnCode(e){this.disablebtn2&&(this.disbaleBtn=!1)}getTrnCodeArray(){this.api.getAllTransactionCode(this.user_id).subscribe(e=>{this.trnCodeArray=e,console.log(this.trnCodeArray)})}deleteDataService(e){this.flag=!1,g().fire("Record is Deleted"),this.router.navigate(["/file-upload/upload-excel"]),this.exit()}Datacheck(){if(console.log("valueDate",this.valueDate),"Today"!=this.valueDate)this.processDataService();else{if(this.isProcessing=!0,0==this.responseDto.totalNoOfRecords)return this.isProcessing=!1,void g().fire("total no. of record is 0","Unable to process.");if(!this.uploadExcelForm.get("remarks").value)return this.isProcessing=!1,void g().fire("Remark is mandatory for process.");this.flag=!0,this.api.processDataService(this.responseforfileupload,this.user_id,this.uploadExcelForm.get("remarks").value).subscribe(e=>{this.isProcessing=!1,this.processDataStatus=e,console.log("this.processDataStatus"),this.processDataStatus?(this.dataProcessed=!0,this.deleteBtn=!0,g().fire("Data processed successfully","For the Batch "+this.responseDto.batchNo),this.isShow=!0):g().fire("Unable to process.")},e=>{this.isProcessing=!1})}}processDataService(){g().fire({text:"Value Date is "+this.responseDto.valueDate+" in few or all uploading records. Would you like to proceed?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"PROCEED."}).then(e=>{if(console.log(e.value),e.value)return console.log("user choose to proceed."),this.isProcessing=!0,0==this.responseDto.totalNoOfRecords?(this.isProcessing=!1,void g().fire("total no. of record is 0","Unable to process.")):this.remarks?(this.flag=!0,void this.api.processDataService(this.responseforfileupload,this.user_id,this.remarks).subscribe(e=>{this.isProcessing=!1,this.processDataStatus=e,console.log("this.processDataStatus"),this.processDataStatus?(g().fire({title:"Data processed successfully",text:"For the Batch "+this.responseDto.batchNo}),this.isShow=!0):g().fire("Unable to process.")},e=>{this.isProcessing=!1})):(this.isProcessing=!1,void g().fire("Remark is mandatory for process."))})}downloadData(){console.log("this.responseforfileupload.fileDownloadUrl",this.responseforfileupload.fileDownloadUrl);const e=document.createElement("a");e.setAttribute("target","_blank"),e.setAttribute("href",`${this.responseforfileupload.fileDownloadUrl}`);let t=`${this.responseforfileupload.fileDownloadUrl}`,s=t.substring(t.lastIndexOf("/")+1);e.setAttribute("download",`${s}`),document.body.appendChild(e),e.click(),e.remove()}exit(){this.responsebutton=!1}checkCheckBoxvalue(e){"false"==this.permission[0]&&(this.enablefilebrowser=!this.enablefilebrowser)}getFiledata(e,t,s,o){if(this.showSelectedFilename=!0,console.log(e.target.value),this.fileUploadWrapper.nativeElement.setAttribute("data-text",e.target.files[0].name),console.log(e,t,s,o),!o)return g().fire("Enter the file name"),void this.resetEntries();!t&&!s&&!o&&g().fire("Enter all the field"),console.log("getFiledatafilename",o),this.selectedFiles=e.target.files,this.api.showDetailServiceInExcelDataWithFile(this.selectedFiles.item(0),t,s,o).subscribe(t=>{this.responseforfileupload=t,e&&200==e.status&&e instanceof d.Zn&&g().fire(e.body)})}fun(e){console.log(e),console.log("enters inside fn");const t=null==e?void 0:e.trim();console.log(t),t?(console.log("valid string"),this.space=!0,console.log(this.space)):(console.log("invalid string"),this.space=!1,console.log(this.space))}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(Z.sM),h.Y36(T.fz),h.Y36(r.qu),h.Y36(A.x),h.Y36(q),h.Y36(i.F0),h.Y36(h.sBO))},e.\u0275cmp=h.Xpm({type:e,selectors:[["npr-file-upload"]],viewQuery:function(e,t){if(1&e&&h.Gf(x,5),2&e){let e;h.iGM(e=h.CRH())&&(t.fileUploadWrapper=e.first)}},decls:49,vars:15,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],["action","",1,"formStyle",3,"formGroup"],[1,"dbCardStyle"],[1,"row","g-3","pb-3","justify-content-end"],[1,"col-auto"],["class","btn smBtn minWdSmBtn btnPrimary",3,"click",4,"ngIf"],[1,"row","gy-4","align-items-end"],[1,"col-lg-3"],["for","extSystem",1,"formLbl"],[1,"colorRed"],["formControlName","extSysNameData","aria-label","Default select example",2,"width","200px",3,"disabled","clearable","change"],["hidden","","value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","form-select","formControlName","processNameData","aria-label","Default select example",3,"disabled","change",4,"ngIf"],["formControlName","processNameData","type","text","class","form-control","value","",3,"disabled",4,"ngIf"],["for","transactionDate",1,"formLbl"],["id","transactionDate","formControlName","selectorDateData","type","text","value","","readonly","",1,"form-control",3,"disabled"],["formControlName","trncode","aria-label","Default select example",1,"form-select",3,"disabled","change"],["class","col-lg-3",4,"ngIf"],["class","col-lg-5",4,"ngIf"],["class","row g-3 pb-3 justify-content-end pt-4",4,"ngIf"],[1,"titleStyle","mt-2","mb-4","text-end"],[1,"pageTitle","darkgreyClr"],["class","dbCardStyle",4,"ngIf"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[3,"value"],["formControlName","processNameData","aria-label","Default select example",1,"form-select",3,"disabled","change"],["formControlName","processNameData","type","text","value","",1,"form-control",3,"disabled"],["required","","id","fileName","formControlName","fileName","type","text","value","",1,"form-control",3,"disabled","keypress","keyup"],[1,"col-lg-5"],[1,"fileUpload"],[1,"formS"],["data-text","File Upload",1,"file-upload-wrapper"],["fileWrapper",""],["name","file-upload-field","type","file","value","",1,"file-upload-field",3,"disabled","change"],["fileInput",""],[1,"row","g-3","pb-3","justify-content-end","pt-4"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["showText",""],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"indicator-label"],[1,"titleStyle","mt-2","mb-4"],[1,"row","gy-4"],[1,"col-lg-4"],["for","codeLbl",1,"formLbl"],[1,"readonlyText"],["class","readonlyText",4,"ngIf"],[1,"col-lg-6"],["for","remarks",1,"formLbl"],["id","remarks","formControlName","remarks","rows","3","placeholder","Remarks",1,"form-control","textAreaCol",3,"disabled"],["for","overrides",1,"formLbl"],["id","exampleFormControlTextarea1","rows","3",1,"form-control","textAreaCol"],[1,"row","g-3","pb-3","pt-4","justify-content-end"],["showProcess",""],[1,"btn","smBtn","minWdSmBtn","btnDarkGrey",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"click"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"h2",2),h._uU(3,"Upload Excel"),h.qZA(),h.qZA(),h.TgZ(4,"form",3),h.TgZ(5,"div",4),h.TgZ(6,"div",5),h.TgZ(7,"div",6),h.YNc(8,b,2,0,"button",7),h.qZA(),h.qZA(),h.TgZ(9,"div",8),h.TgZ(10,"div",9),h.TgZ(11,"label",10),h._uU(12,"External System Code"),h.TgZ(13,"span",11),h._uU(14,"*"),h.qZA(),h.qZA(),h.TgZ(15,"ng-select",12),h.NdJ("change",function(e){return t.getProcessNamesBasedOnExtSysNameForUpload(e)}),h.TgZ(16,"ng-option",13),h._uU(17,"--Please select--"),h.qZA(),h.YNc(18,_,2,2,"ng-option",14),h.qZA(),h.qZA(),h.TgZ(19,"div",9),h.TgZ(20,"label",10),h._uU(21,"Process Name"),h.TgZ(22,"span",11),h._uU(23,"*"),h.qZA(),h.qZA(),h.YNc(24,C,4,2,"select",15),h.YNc(25,v,1,1,"input",16),h.qZA(),h.TgZ(26,"div",9),h.TgZ(27,"label",17),h._uU(28,"Transaction Date"),h.TgZ(29,"span",11),h._uU(30,"*"),h.qZA(),h.qZA(),h._UZ(31,"input",18),h.qZA(),h.TgZ(32,"div",9),h.TgZ(33,"label",10),h._uU(34,"Transaction Code"),h.TgZ(35,"span",11),h._uU(36,"*"),h.qZA(),h.qZA(),h.TgZ(37,"select",19),h.NdJ("change",function(e){return t.getTrnCode(e.target.value)}),h.TgZ(38,"option",13),h._uU(39,"--Please select--"),h.qZA(),h.YNc(40,M,2,3,"option",14),h.qZA(),h.qZA(),h.YNc(41,y,6,1,"div",20),h.YNc(42,S,7,1,"div",21),h.qZA(),h.YNc(43,F,9,5,"div",22),h.YNc(44,P,7,3,"div",22),h.TgZ(45,"div",23),h.TgZ(46,"h2",24),h._uU(47,"Final excel report can be downloaded from Authorize Excel Screen."),h.qZA(),h.qZA(),h.qZA(),h.YNc(48,L,57,11,"div",25),h.qZA(),h.qZA()),2&e&&(h.xp6(4),h.Q6J("formGroup",t.uploadExcelForm),h.xp6(4),h.Q6J("ngIf",t.roleCodes.new),h.xp6(7),h.Q6J("disabled",t.dataUploaded)("clearable",!1),h.xp6(3),h.Q6J("ngForOf",t.allExternalSystemNames),h.xp6(6),h.Q6J("ngIf","select"===t.processNameField),h.xp6(1),h.Q6J("ngIf","text"===t.processNameField),h.xp6(6),h.Q6J("disabled",t.dataUploaded),h.xp6(6),h.Q6J("disabled",t.dataUploaded),h.xp6(3),h.Q6J("ngForOf",t.trnCodeArray),h.xp6(1),h.Q6J("ngIf",t.enablefilebrowser),h.xp6(1),h.Q6J("ngIf",t.enablefilebrowser),h.xp6(1),h.Q6J("ngIf",0==t.autoUpload),h.xp6(1),h.Q6J("ngIf",1==t.autoUpload),h.xp6(4),h.Q6J("ngIf",t.responsebutton))},directives:[r._Y,r.JL,r.sg,o.O5,f.w9,r.JJ,r.u,f.jq,o.sg,r.Fj,r.EJ,r.YN,r.Kr,r.Q7,i.yS],styles:[""]}),e})();var Q=s(27721),k=s(92803),H=(s(46481),s(4108)),Y=s.n(H),$=s(41211),z=s(17988);function G(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"tr"),h.TgZ(1,"td"),h.TgZ(2,"button",13),h.NdJ("click",function(){const t=h.CHM(e),s=t.$implicit,o=t.index;return h.oxw().queryDetailsDataByParam(s,o)}),h._uU(3," Get Details "),h.qZA(),h.qZA(),h.TgZ(4,"td"),h._uU(5),h.qZA(),h.TgZ(6,"td"),h._uU(7),h.qZA(),h.TgZ(8,"td"),h._uU(9),h.qZA(),h.TgZ(10,"td"),h._uU(11),h.ALo(12,"date"),h.qZA(),h.TgZ(13,"td"),h._uU(14),h.qZA(),h.TgZ(15,"td"),h._uU(16),h.qZA(),h.TgZ(17,"td"),h._uU(18),h.qZA(),h.TgZ(19,"td"),h._uU(20),h.qZA(),h.qZA()}if(2&e){const e=t.$implicit,s=t.index,o=h.oxw();h.xp6(2),h.s9C("id","btnGetDetails"+s),h.xp6(3),h.Oqu(e.externalSysName),h.xp6(2),h.Oqu(e.batchNumber),h.xp6(2),h.Oqu(e.processName),h.xp6(2),h.Oqu(h.xi3(12,9,e.processingDate,"medium")),h.xp6(3),h.Oqu(o.extractFilename(e.fileName)),h.xp6(2),h.Oqu(e.totalNoOfRecord),h.xp6(2),h.Oqu(e.totalCredit),h.xp6(2),h.Oqu(e.totalDebit)}}function j(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"tr"),h.TgZ(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td"),h._uU(6),h.qZA(),h.TgZ(7,"td"),h._uU(8),h.qZA(),h.TgZ(9,"td"),h._uU(10),h.qZA(),h.TgZ(11,"td"),h._uU(12),h.qZA(),h.TgZ(13,"td"),h._uU(14),h.qZA(),h.TgZ(15,"td"),h._uU(16),h.qZA(),h.TgZ(17,"td"),h.TgZ(18,"button",14),h.NdJ("click",function(){const t=h.CHM(e).$implicit,s=h.oxw(),o=h.MAs(71);return s.openDialog(o,t)}),h._uU(19," Edit "),h.qZA(),h.qZA(),h.TgZ(20,"td"),h._uU(21),h.qZA(),h.TgZ(22,"td"),h._uU(23),h.qZA(),h.TgZ(24,"td"),h._uU(25),h.qZA(),h.TgZ(26,"td"),h._uU(27),h.qZA(),h.qZA()}if(2&e){const e=t.$implicit;h.xp6(2),h.Oqu(e.account),h.xp6(2),h.Oqu(e.ccyCd),h.xp6(2),h.Oqu(e.id.branchCode),h.xp6(2),h.Oqu(e.amount),h.xp6(2),h.Oqu(e.lcyEquivalent),h.xp6(2),h.Oqu(e.drCr),h.xp6(2),h.Oqu(e.exchRate),h.xp6(2),h.Oqu(e.relatedAccount),h.xp6(5),h.Oqu(e.addlText),h.xp6(2),h.Oqu(e.accDesc),h.xp6(2),h.Oqu(e.errorCode),h.xp6(2),h.Oqu(e.errorDesc)}}function X(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",15),h.TgZ(1,"h2",2),h._uU(2,"Edit Transaction Details"),h.qZA(),h._UZ(3,"br"),h.TgZ(4,"div"),h.TgZ(5,"div",16),h.TgZ(6,"div",17),h.TgZ(7,"label",18),h._uU(8,"Account Number :"),h.qZA(),h.TgZ(9,"input",19),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.account=t}),h.qZA(),h.qZA(),h.TgZ(10,"div",17),h.TgZ(11,"label",18),h._uU(12," Amount :"),h.qZA(),h.TgZ(13,"input",19),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.amount=t}),h.qZA(),h.qZA(),h.TgZ(14,"div",17),h.TgZ(15,"label"),h._uU(16,"Account Currency :"),h.qZA(),h.TgZ(17,"input",20),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.ccyCd=t}),h.qZA(),h.qZA(),h.TgZ(18,"div",17),h.TgZ(19,"label"),h._uU(20,"Account Branch : "),h.qZA(),h.TgZ(21,"input",20),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.accountBranch=t}),h.qZA(),h.qZA(),h.TgZ(22,"div",17),h.TgZ(23,"label"),h._uU(24,"LCY Amount: "),h.qZA(),h.TgZ(25,"input",20),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.lcyEquivalent=t}),h.qZA(),h.qZA(),h.TgZ(26,"div",17),h.TgZ(27,"label"),h._uU(28," Debit / Credit : "),h.qZA(),h.TgZ(29,"input",20),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.drCr=t}),h.qZA(),h.qZA(),h.TgZ(30,"div",17),h.TgZ(31,"label"),h._uU(32," Branch Code: "),h.qZA(),h.TgZ(33,"input",20),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.id.branchCode=t}),h.qZA(),h.qZA(),h.TgZ(34,"div",17),h.TgZ(35,"label"),h._uU(36," Value Date: "),h.qZA(),h.TgZ(37,"p"),h._uU(38),h.ALo(39,"date"),h.qZA(),h.TgZ(40,"input",21),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.valueDate=t}),h.qZA(),h.qZA(),h.TgZ(41,"div",17),h.TgZ(42,"label"),h._uU(43," Initiation Date : "),h.qZA(),h.TgZ(44,"p"),h._uU(45),h.ALo(46,"date"),h.qZA(),h.TgZ(47,"input",21),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.id.initiationDate=t}),h.qZA(),h.qZA(),h.TgZ(48,"div",17),h.TgZ(49,"label"),h._uU(50," Upload Date :"),h.qZA(),h.TgZ(51,"p"),h._uU(52),h.ALo(53,"date"),h.qZA(),h.TgZ(54,"input",21),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.uploadDate=t}),h.qZA(),h.qZA(),h.TgZ(55,"div",17),h.TgZ(56,"label"),h._uU(57," External Reference:"),h.qZA(),h.TgZ(58,"input",21),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.externalRefNo=t}),h.qZA(),h.qZA(),h.TgZ(59,"div",17),h.TgZ(60,"label"),h._uU(61," Related Account :"),h.qZA(),h.TgZ(62,"input",19),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.relatedAccount=t}),h.qZA(),h.qZA(),h.TgZ(63,"div",17),h.TgZ(64,"label"),h._uU(65," Related Customer :"),h.qZA(),h.TgZ(66,"input",19),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.relCust=t}),h.qZA(),h.qZA(),h.TgZ(67,"div",17),h.TgZ(68,"label"),h._uU(69," Exchange Rate :"),h.qZA(),h.TgZ(70,"input",19),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.exchRate=t}),h.qZA(),h.qZA(),h.TgZ(71,"div",17),h.TgZ(72,"label"),h._uU(73," Related Reference :"),h.qZA(),h.TgZ(74,"input",19),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.relatedRef=t}),h.qZA(),h.qZA(),h.TgZ(75,"div",17),h.TgZ(76,"label"),h._uU(77,"Additional Text :"),h.qZA(),h.TgZ(78,"input",19),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.addlText=t}),h.qZA(),h.qZA(),h.TgZ(79,"div",17),h.TgZ(80,"label"),h._uU(81,"Instrument Number :"),h.qZA(),h.TgZ(82,"input",19),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.instrumentNo=t}),h.qZA(),h.qZA(),h.TgZ(83,"div",17),h.TgZ(84,"label"),h._uU(85,"Batch Number :"),h.qZA(),h.TgZ(86,"input",19),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.id.batchNo=t}),h.qZA(),h.qZA(),h.TgZ(87,"div",17),h.TgZ(88,"label"),h._uU(89," Financial Cycle:"),h.qZA(),h.TgZ(90,"input",19),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.finCycle=t}),h.qZA(),h.qZA(),h.TgZ(91,"div",17),h.TgZ(92,"label"),h._uU(93," Period Code:"),h.qZA(),h.TgZ(94,"input",19),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.periodCode=t}),h.qZA(),h.qZA(),h.TgZ(95,"div",17),h.TgZ(96,"label"),h._uU(97," Transaction Code :"),h.qZA(),h.TgZ(98,"input",19),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.txnCode=t}),h.qZA(),h.qZA(),h.TgZ(99,"div",17),h.TgZ(100,"label"),h._uU(101," MIS_CODE:"),h.qZA(),h.TgZ(102,"input",22),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.misCode=t}),h.qZA(),h.qZA(),h.TgZ(103,"div",17),h.TgZ(104,"label"),h._uU(105," POOL_CODE:"),h.qZA(),h.TgZ(106,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.poolCode=t}),h.qZA(),h.qZA(),h.TgZ(107,"div",17),h.TgZ(108,"label"),h._uU(109,"TXN_MIS_1:"),h.qZA(),h.TgZ(110,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.txnMis1=t}),h.qZA(),h.qZA(),h.TgZ(111,"div",17),h.TgZ(112,"label"),h._uU(113,"Error Description:"),h.qZA(),h._UZ(114,"input",24),h.qZA(),h.TgZ(115,"div",17),h.TgZ(116,"label"),h._uU(117,"MIS_GROUP:"),h.qZA(),h.TgZ(118,"input",25),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.misGroup=t}),h.qZA(),h.qZA(),h.TgZ(119,"div",17),h.TgZ(120,"label"),h._uU(121," MIS_FLAG:"),h.qZA(),h.TgZ(122,"input",26),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.misFlag=t}),h.qZA(),h.qZA(),h.TgZ(123,"div",17),h.TgZ(124,"label"),h._uU(125,"TXN_MIS_2:"),h.qZA(),h.TgZ(126,"input",26),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.txnMis2=t}),h.qZA(),h.qZA(),h.TgZ(127,"div",17),h.TgZ(128,"label"),h._uU(129,"MIS_HEAD:"),h.qZA(),h.TgZ(130,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.misHead=t}),h.qZA(),h.qZA(),h.TgZ(131,"div",17),h.TgZ(132,"label"),h._uU(133,"MIS_GROUP_TXN:"),h.qZA(),h.TgZ(134,"input",26),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.misGroupTxn=t}),h.qZA(),h.qZA(),h.TgZ(135,"div",17),h.TgZ(136,"label"),h._uU(137,"TXN_MIS_3:"),h.qZA(),h.TgZ(138,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.txnMis3=t}),h.qZA(),h.qZA(),h.TgZ(139,"div",17),h.TgZ(140,"label"),h._uU(141,"COMP_MIS_1:"),h.qZA(),h.TgZ(142,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.compMis1=t}),h.qZA(),h.qZA(),h.TgZ(143,"div",17),h.TgZ(144,"label"),h._uU(145,"COMP_MIS_3 :"),h.qZA(),h.TgZ(146,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.compMis3=t}),h.qZA(),h.qZA(),h.TgZ(147,"div",17),h.TgZ(148,"label"),h._uU(149,"TXN_MIS_4:"),h.qZA(),h.TgZ(150,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.txnMis4=t}),h.qZA(),h.qZA(),h.TgZ(151,"div",17),h.TgZ(152,"label"),h._uU(153,"COMP_MIS_2:"),h.qZA(),h.TgZ(154,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.compMis2=t}),h.qZA(),h.qZA(),h.TgZ(155,"div",17),h.TgZ(156,"label"),h._uU(157,"COMP_MIS_4:"),h.qZA(),h.TgZ(158,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.compMis4=t}),h.qZA(),h.qZA(),h.TgZ(159,"div",17),h.TgZ(160,"label"),h._uU(161,"TXN_MIS_5:"),h.qZA(),h.TgZ(162,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.txnMis5=t}),h.qZA(),h.qZA(),h.TgZ(163,"div",17),h.TgZ(164,"label"),h._uU(165," COMP_MIS_5:"),h.qZA(),h.TgZ(166,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.compMis5=t}),h.qZA(),h.qZA(),h.TgZ(167,"div",17),h.TgZ(168,"label"),h._uU(169," COST_CODE_1:"),h.qZA(),h.TgZ(170,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.costCode1=t}),h.qZA(),h.qZA(),h.TgZ(171,"div",17),h.TgZ(172,"label"),h._uU(173," TXN_MIS_6:"),h.qZA(),h.TgZ(174,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.txnMis6=t}),h.qZA(),h.qZA(),h.TgZ(175,"div",17),h.TgZ(176,"label"),h._uU(177," COMP_MIS_6:"),h.qZA(),h.TgZ(178,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.compMis6=t}),h.qZA(),h.qZA(),h.TgZ(179,"div",17),h.TgZ(180,"label"),h._uU(181,"COST_CODE_2:"),h.qZA(),h.TgZ(182,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.costCode2=t}),h.qZA(),h.qZA(),h.TgZ(183,"div",17),h.TgZ(184,"label"),h._uU(185,"TXN_MIS_7:"),h.qZA(),h.TgZ(186,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.txnMis7=t}),h.qZA(),h.qZA(),h.TgZ(187,"div",17),h.TgZ(188,"label"),h._uU(189,"COMP_MIS_7:"),h.qZA(),h.TgZ(190,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.compMis7=t}),h.qZA(),h.qZA(),h.TgZ(191,"div",17),h.TgZ(192,"label"),h._uU(193,"COST_CODE_3:"),h.qZA(),h.TgZ(194,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.costCode3=t}),h.qZA(),h.qZA(),h.TgZ(195,"div",17),h.TgZ(196,"label"),h._uU(197,"TXN_MIS_8:"),h.qZA(),h.TgZ(198,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.txnMis8=t}),h.qZA(),h.qZA(),h.TgZ(199,"div",17),h.TgZ(200,"label"),h._uU(201,"COMP_MIS_8:"),h.qZA(),h.TgZ(202,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.compMis8=t}),h.qZA(),h.qZA(),h.TgZ(203,"div",17),h.TgZ(204,"label"),h._uU(205," COST_CODE_4 :"),h.qZA(),h.TgZ(206,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.costCode4=t}),h.qZA(),h.qZA(),h.TgZ(207,"div",17),h.TgZ(208,"label"),h._uU(209,"TXN_MIS_9:"),h.qZA(),h.TgZ(210,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.txnMis9=t}),h.qZA(),h.qZA(),h.TgZ(211,"div",17),h.TgZ(212,"label"),h._uU(213,"COMP_MIS_9:"),h.qZA(),h.TgZ(214,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.compMis9=t}),h.qZA(),h.qZA(),h.TgZ(215,"div",17),h.TgZ(216,"label"),h._uU(217,"COST_CODE_5:"),h.qZA(),h.TgZ(218,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.costCode5=t}),h.qZA(),h.qZA(),h.TgZ(219,"div",17),h.TgZ(220,"label"),h._uU(221,"TXN_MIS_10:"),h.qZA(),h.TgZ(222,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.txnMis10=t}),h.qZA(),h.qZA(),h.TgZ(223,"div",17),h.TgZ(224,"label"),h._uU(225,"COMP_MIS_10:"),h.qZA(),h.TgZ(226,"input",23),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.compMis10=t}),h.qZA(),h.qZA(),h.TgZ(227,"div",17),h.TgZ(228,"label"),h._uU(229,"UPLOAD STATUS:"),h.qZA(),h.TgZ(230,"input",19),h.NdJ("ngModelChange",function(t){return h.CHM(e),h.oxw().responseDto.uploadStat=t}),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h._UZ(231,"br"),h.TgZ(232,"p",27),h.TgZ(233,"button",14),h.NdJ("click",function(){h.CHM(e);const t=h.oxw();return t.insertModifiedDataIntoDetailsData(t.responseDto)}),h._uU(234," Save Data "),h.qZA(),h._uU(235,"\xa0\xa0 "),h.TgZ(236,"button",28),h.NdJ("click",function(){return h.CHM(e).$implicit.dismiss("Cross click")}),h._uU(237,"Exit"),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=h.oxw();h.xp6(9),h.Q6J("ngModel",e.responseDto.account),h.xp6(4),h.Q6J("ngModel",e.responseDto.amount),h.xp6(4),h.Q6J("ngModel",e.responseDto.ccyCd),h.xp6(4),h.Q6J("ngModel",e.responseDto.accountBranch),h.xp6(4),h.Q6J("ngModel",e.responseDto.lcyEquivalent),h.xp6(4),h.Q6J("ngModel",e.responseDto.drCr),h.xp6(4),h.Q6J("ngModel",e.responseDto.id.branchCode),h.xp6(5),h.Oqu(h.lcZ(39,56,e.responseDto.valueDate)),h.xp6(2),h.Q6J("ngModel",e.responseDto.valueDate),h.xp6(5),h.Oqu(h.lcZ(46,58,e.responseDto.id.initiationDate)),h.xp6(2),h.Q6J("ngModel",e.responseDto.id.initiationDate),h.xp6(5),h.Oqu(h.lcZ(53,60,e.responseDto.uploadDate)),h.xp6(2),h.Q6J("ngModel",e.responseDto.uploadDate),h.xp6(4),h.Q6J("ngModel",e.responseDto.externalRefNo),h.xp6(4),h.Q6J("ngModel",e.responseDto.relatedAccount),h.xp6(4),h.Q6J("ngModel",e.responseDto.relCust),h.xp6(4),h.Q6J("ngModel",e.responseDto.exchRate),h.xp6(4),h.Q6J("ngModel",e.responseDto.relatedRef),h.xp6(4),h.Q6J("ngModel",e.responseDto.addlText),h.xp6(4),h.Q6J("ngModel",e.responseDto.instrumentNo),h.xp6(4),h.Q6J("ngModel",e.responseDto.id.batchNo),h.xp6(4),h.Q6J("ngModel",e.responseDto.finCycle),h.xp6(4),h.Q6J("ngModel",e.responseDto.periodCode),h.xp6(4),h.Q6J("ngModel",e.responseDto.txnCode),h.xp6(4),h.Q6J("ngModel",e.responseDto.misCode),h.xp6(4),h.Q6J("ngModel",e.responseDto.poolCode),h.xp6(4),h.Q6J("ngModel",e.responseDto.txnMis1),h.xp6(8),h.Q6J("ngModel",e.responseDto.misGroup),h.xp6(4),h.Q6J("ngModel",e.responseDto.misFlag),h.xp6(4),h.Q6J("ngModel",e.responseDto.txnMis2),h.xp6(4),h.Q6J("ngModel",e.responseDto.misHead),h.xp6(4),h.Q6J("ngModel",e.responseDto.misGroupTxn),h.xp6(4),h.Q6J("ngModel",e.responseDto.txnMis3),h.xp6(4),h.Q6J("ngModel",e.responseDto.compMis1),h.xp6(4),h.Q6J("ngModel",e.responseDto.compMis3),h.xp6(4),h.Q6J("ngModel",e.responseDto.txnMis4),h.xp6(4),h.Q6J("ngModel",e.responseDto.compMis2),h.xp6(4),h.Q6J("ngModel",e.responseDto.compMis4),h.xp6(4),h.Q6J("ngModel",e.responseDto.txnMis5),h.xp6(4),h.Q6J("ngModel",e.responseDto.compMis5),h.xp6(4),h.Q6J("ngModel",e.responseDto.costCode1),h.xp6(4),h.Q6J("ngModel",e.responseDto.txnMis6),h.xp6(4),h.Q6J("ngModel",e.responseDto.compMis6),h.xp6(4),h.Q6J("ngModel",e.responseDto.costCode2),h.xp6(4),h.Q6J("ngModel",e.responseDto.txnMis7),h.xp6(4),h.Q6J("ngModel",e.responseDto.compMis7),h.xp6(4),h.Q6J("ngModel",e.responseDto.costCode3),h.xp6(4),h.Q6J("ngModel",e.responseDto.txnMis8),h.xp6(4),h.Q6J("ngModel",e.responseDto.compMis8),h.xp6(4),h.Q6J("ngModel",e.responseDto.costCode4),h.xp6(4),h.Q6J("ngModel",e.responseDto.txnMis9),h.xp6(4),h.Q6J("ngModel",e.responseDto.compMis9),h.xp6(4),h.Q6J("ngModel",e.responseDto.costCode5),h.xp6(4),h.Q6J("ngModel",e.responseDto.txnMis10),h.xp6(4),h.Q6J("ngModel",e.responseDto.compMis10),h.xp6(4),h.Q6J("ngModel",e.responseDto.uploadStat)}}let W=(()=>{class e{constructor(e,t,s,o){this.api=e,this.userApi=t,this.excelService=s,this.modalService=o,this.respArray=[],this.closeResult="",this.dtOptions={},this.dtTrigger1=new p.xQ,this.dtTrigger2=new p.xQ,this.pendingForAuthData=[],this.PendingForAuthDetailsDTOList=[],this.flag=!0,this.dataModificationDetailsAuditLog=new k.n}queryDetailsDataByParam(e,t){var s=document.getElementById("btnGetDetails"+t);s.innerHTML='<span class="indicator-progress" >Please wait... <span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>',this.spinner1=!0,this.getDetailsQueryToggleReqDTO=new Q.AJ,this.getDetailsQueryToggleReqDTO.externalSysName=e.externalSysName,this.getDetailsQueryToggleReqDTO.processName=e.processName,this.getDetailsQueryToggleReqDTO.processingDate=e.processingDate,this.getDetailsQueryToggleReqDTO.currency=e.currency,this.getDetailsQueryToggleReqDTO.filename=e.fileName,this.getDetailsQueryToggleReqDTO.batchNumber=e.batchNumber,this.api.queryFailedDetailsDataByParamService(this.getDetailsQueryToggleReqDTO).subscribe(e=>{this.PendingForAuthDetailsDTOList=e,s.innerHTML="<span>Get Details</span>",this.dtTrigger2.next(),console.log(this.PendingForAuthDetailsDTOList),this.PendingForAuthDetailsDTOList?(console.log(this.PendingForAuthDetailsDTOList[0].inputBy),this.audit=!0,this.flag=!0,this.dataAvail=!0,this.spinner1=!1):g().fire("No Data")})}ngOnInit(){this.PendingForAuthDetailsDTOList={},this.user_id=localStorage.getItem("userFromLogin").replace(/['"]+/g,""),this.role=sessionStorage.getItem("user_role"),this.getPendingForAuthData(),this.dtOptions[0]={pagingType:"full_numbers",pageLength:5,columnDefs:[{type:"date",targets:[4]}],processing:!0,lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]]},this.dtOptions[1]={pagingType:"full_numbers",pageLength:5,processing:!0,retrieve:!0,lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]]}}ngOnDestroy(){this.dtTrigger1.unsubscribe(),this.dtTrigger2.unsubscribe()}extractFilename(e){const t=e.split("/");return t[t.length-1]}screenpermission(){this.screenName="DataModificationDetails",this.userApi.getRoleScreenPermission(this.user_id,this.screenName,this.role).subscribe(e=>{this.rolepermission=e,console.log(this.rolepermission),this.rolepermission&&(this.button_permission=this.rolepermission[0],console.log(this.button_permission))})}getPendingForAuthData(){this.api.getPendingForAuthDataForModification(this.user_id).subscribe(e=>{this.pendingForAuthData=e,this.dtTrigger1.next(),console.log(this.pendingForAuthData)})}openSnackBar(e,t){g().fire(e)}approveAndProcess(){this.flag=!1,this.api.excelModifyAuthorization(this.PendingForAuthDetailsDTOList,this.user_id).subscribe(e=>{this.authRes=e,console.log(this.authRes),this.authRes?g().fire("Data Send for Authorization. After Authorization you can process the data."):g().fire("Authorization Failed.")})}getAllDetailsData(){this.api.getFailedDetailsListService().subscribe(e=>{this.PendingForAuthDetailsDTOList=e,this.dtTrigger2.next()})}openDialog(e,t){console.log(e,"DetailsDTO"),console.log(t,"data"),this.responseDto=t,this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",windowClass:"my-class"}).result.then(e=>{this.closeResult=`Closed with: ${e}`},e=>{this.closeResult=`Dismissed ${this.getDismissReason(e)}`})}getDismissReason(e){return e===$.If.ESC?"by pressing ESC":e===$.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}insertModifiedDataIntoDetailsData(e){this.api.sendUpdatedDataToDetailsData(e,this.user_id).subscribe(e=>{this.status=e,console.log("insertion status: "+this.status),!0===this.status&&g().fire("data saved successfully.","success"),!1===this.status&&g().fire({icon:"error",text:"data save to DB Failed."})})}openDialog1(e){console.log(e)}downloadData(){this.modify=!0,console.log("response"+this.PendingForAuthDetailsDTOList),this.excelService.exportAsExcelFile(this.PendingForAuthDetailsDTOList,"Excel_Error_Auth")}convert(){var e=new(Y()),t=[];this.PendingForAuthDetailsDTOList.forEach(e=>{t.push([e.account,e.amount,e.txnCode,e.exchRate,e.valueDate,e.deleteStat])}),e.autoTable({head:[["Account","Amount","txnCode","exchRate","valueDate","deleteStat"]],body:t}),e.save("Excel.pdf")}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(Z.sM),h.Y36(T.fz),h.Y36(A.x),h.Y36($.FF))},e.\u0275cmp=h.Xpm({type:e,selectors:[["npr-rejection-queue"]],decls:72,vars:6,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"dbCardStyle","table-responsive"],["id","dbTable1","datatable","",1,"dataTable","table","tableStyle","nowrap","vAlignMdl",2,"width","100%",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[1,"dbCardStyle"],[1,"pageTitle","my-3","text-center"],[1,"table-responsive"],["id","dbTable2","datatable","",1,"table","tableStyle","tableStyleSelect","nowrap","vAlignMdl",2,"width","100%",3,"dtOptions","dtTrigger"],[1,"btnCol","mt-md-4","mt-3"],[1,"btn","smBtn","btnDarkGrey",3,"click"],["content",""],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"id","click"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[1,"templatecontent"],[1,"row","gy-4"],[1,"col-lg-2"],[1,"formLbl"],["type","text",3,"ngModel","ngModelChange"],["type","text","maxlength","3",3,"ngModel","ngModelChange"],["type","date",3,"ngModel","ngModelChange"],["type","text","maxlength","4",3,"ngModel","ngModelChange"],["type","text","maxlength","9",3,"ngModel","ngModelChange"],["type","text"],["type","text","maxlength","10",3,"ngModel","ngModelChange"],["type","text","maxlength","1",3,"ngModel","ngModelChange"],[2,"margin-left","80%"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"click"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"h2",2),h._uU(3,"Rejection Queue"),h.qZA(),h.qZA(),h.TgZ(4,"div",3),h.TgZ(5,"table",4),h.TgZ(6,"thead"),h.TgZ(7,"tr"),h.TgZ(8,"th"),h._uU(9,"process detail"),h.qZA(),h.TgZ(10,"th"),h._uU(11,"external system"),h.qZA(),h.TgZ(12,"th"),h._uU(13,"batch number"),h.qZA(),h.TgZ(14,"th"),h._uU(15,"process name"),h.qZA(),h.TgZ(16,"th"),h._uU(17,"processing date"),h.qZA(),h.TgZ(18,"th"),h._uU(19,"file name"),h.qZA(),h.TgZ(20,"th"),h._uU(21,"total record"),h.qZA(),h.TgZ(22,"th"),h._uU(23,"total credit"),h.qZA(),h.TgZ(24,"th"),h._uU(25,"total debit"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(26,"tbody"),h.YNc(27,G,21,12,"tr",5),h.qZA(),h.qZA(),h.qZA(),h.TgZ(28,"div",6),h.TgZ(29,"h2",7),h._uU(30,"Failed Data"),h.qZA(),h.TgZ(31,"div",8),h.TgZ(32,"table",9),h.TgZ(33,"thead"),h.TgZ(34,"tr"),h.TgZ(35,"th"),h._uU(36,"account"),h.qZA(),h.TgZ(37,"th"),h._uU(38,"currency"),h.qZA(),h.TgZ(39,"th"),h._uU(40,"branch"),h.qZA(),h.TgZ(41,"th"),h._uU(42,"amount"),h.qZA(),h.TgZ(43,"th"),h._uU(44,"lcy ammount"),h.qZA(),h.TgZ(45,"th"),h._uU(46,"dR/cr"),h.qZA(),h.TgZ(47,"th"),h._uU(48,"exchange rate"),h.qZA(),h.TgZ(49,"th"),h._uU(50,"Related Account"),h.qZA(),h.TgZ(51,"th"),h._uU(52,"Process"),h.qZA(),h.TgZ(53,"th"),h._uU(54,"add text"),h.qZA(),h.TgZ(55,"th"),h._uU(56,"account description"),h.qZA(),h.TgZ(57,"th"),h._uU(58,"Error Code"),h.qZA(),h.TgZ(59,"th"),h._uU(60,"Error Description"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(61,"tbody"),h.YNc(62,j,28,12,"tr",5),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(63,"div",10),h.TgZ(64,"button",11),h.NdJ("click",function(){return t.downloadData()}),h._uU(65,"Export Excel"),h.qZA(),h._uU(66,"\xa0 "),h.TgZ(67,"button",11),h.NdJ("click",function(){return t.convert()}),h._uU(68,"Export PDF"),h.qZA(),h._uU(69,"\xa0 "),h.qZA(),h.qZA(),h.YNc(70,X,238,62,"ng-template",null,12,h.W1O)),2&e&&(h.xp6(5),h.Q6J("dtOptions",t.dtOptions[0])("dtTrigger",t.dtTrigger1),h.xp6(22),h.Q6J("ngForOf",t.pendingForAuthData),h.xp6(5),h.Q6J("dtOptions",t.dtOptions[1])("dtTrigger",t.dtTrigger2),h.xp6(30),h.Q6J("ngForOf",t.PendingForAuthDetailsDTOList))},directives:[z.G,o.sg,r.Fj,r.JJ,r.On,r.nD],pipes:[o.uU],styles:["table.tableStyle[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#a6aab5;font-size:9px;text-transform:uppercase;letter-spacing:1px;padding:16px 13px;border-bottom:1px solid #F5F5F5}.templatecontent[_ngcontent-%COMP%]{margin-left:2%}  .my-class .modal-dialog{max-width:90%;width:100%}"]}),e})();class V{}var K=s(17283);function ee(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"tr"),h.TgZ(1,"td"),h.TgZ(2,"button",11),h.NdJ("click",function(){const t=h.CHM(e),s=t.$implicit,o=t.index;return h.oxw().queryDetailsDataByParam(s,o)}),h._uU(3," Get Details "),h.qZA(),h.qZA(),h.TgZ(4,"td"),h._uU(5),h.qZA(),h.TgZ(6,"td"),h._uU(7),h.qZA(),h.TgZ(8,"td"),h._uU(9),h.qZA(),h.TgZ(10,"td"),h._uU(11),h.qZA(),h.TgZ(12,"td"),h._uU(13),h.qZA(),h.TgZ(14,"td"),h._uU(15),h.ALo(16,"date"),h.qZA(),h.TgZ(17,"td"),h._uU(18),h.qZA(),h.TgZ(19,"td"),h._uU(20),h.qZA(),h.TgZ(21,"td"),h._uU(22),h.qZA(),h.TgZ(23,"td"),h._uU(24),h.qZA(),h.TgZ(25,"td"),h._uU(26),h.qZA(),h.TgZ(27,"td"),h._uU(28),h.qZA(),h.qZA()}if(2&e){const e=t.$implicit,s=t.index;h.xp6(2),h.s9C("id","btnGetDetails"+s),h.xp6(3),h.Oqu(e.externalSysName),h.xp6(2),h.Oqu(e.currency),h.xp6(2),h.Oqu(e.inputBy),h.xp6(2),h.Oqu(e.batchNumber),h.xp6(2),h.Oqu(e.processName),h.xp6(2),h.Oqu(h.xi3(16,13,e.processingDate,"medium")),h.xp6(3),h.Oqu(e.authStatus),h.xp6(2),h.Oqu(e.uploadStatus),h.xp6(2),h.Oqu(e.fileName),h.xp6(2),h.Oqu(e.totalNoOfRecord),h.xp6(2),h.Oqu(e.totalCredit),h.xp6(2),h.Oqu(e.totalDebit)}}function te(e,t){if(1&e&&(h.TgZ(0,"div",18),h.TgZ(1,"div",19),h.TgZ(2,"label"),h._uU(3,"Remarks"),h.qZA(),h.TgZ(4,"textarea",20),h._uU(5),h.qZA(),h.qZA(),h.TgZ(6,"div",19),h.TgZ(7,"label"),h._uU(8,"Overrides"),h.qZA(),h.TgZ(9,"textarea",20),h._uU(10),h.qZA(),h.qZA(),h.qZA()),2&e){const e=h.oxw(2);h.xp6(5),h.Oqu(e.remarks),h.xp6(5),h.Oqu(e.overrides)}}function se(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"tr"),h.TgZ(1,"td"),h.TgZ(2,"div",21),h._uU(3),h.qZA(),h.qZA(),h.TgZ(4,"td"),h.TgZ(5,"div",21),h._uU(6),h.qZA(),h.qZA(),h.TgZ(7,"td"),h.TgZ(8,"div",21),h._uU(9),h.qZA(),h.qZA(),h.TgZ(10,"td"),h.TgZ(11,"div",21),h._uU(12),h.qZA(),h.qZA(),h.TgZ(13,"td"),h.TgZ(14,"div",21),h._uU(15),h.qZA(),h.qZA(),h.TgZ(16,"td"),h.TgZ(17,"div",21),h._uU(18),h.qZA(),h.qZA(),h.TgZ(19,"td"),h.TgZ(20,"div",21),h._uU(21),h.qZA(),h.qZA(),h.TgZ(22,"td"),h.TgZ(23,"div",21),h._uU(24),h.qZA(),h.qZA(),h.TgZ(25,"td"),h.TgZ(26,"div",21),h._uU(27),h.qZA(),h.qZA(),h.TgZ(28,"td"),h.TgZ(29,"div",21),h._uU(30),h.qZA(),h.qZA(),h.TgZ(31,"td"),h.TgZ(32,"div",21),h._uU(33),h.qZA(),h.qZA(),h.TgZ(34,"td"),h.TgZ(35,"button",22),h.NdJ("click",function(){const t=h.CHM(e).$implicit,s=h.oxw(2),o=h.MAs(43);return s.openDialog(o,t)}),h._uU(36," View "),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=t.$implicit;h.xp6(3),h.Oqu(e.account),h.xp6(3),h.Oqu(e.ccyCd),h.xp6(3),h.Oqu(e.id.branchCode),h.xp6(3),h.Oqu(e.amount),h.xp6(3),h.Oqu(e.lcyEquivalent),h.xp6(3),h.Oqu(e.drCr),h.xp6(3),h.Oqu(e.exchRate),h.xp6(3),h.Oqu(e.relatedAccount),h.xp6(3),h.Oqu(e.addlText),h.xp6(3),h.Oqu(e.accDesc),h.xp6(3),h.Oqu(e.acumenJournal)}}function oe(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",23),h.NdJ("click",function(){return h.CHM(e),h.oxw(2).downloadData()}),h._uU(1,"Export Excel"),h.qZA()}}function ie(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",23),h.NdJ("click",function(){return h.CHM(e),h.oxw(2).convert()}),h._uU(1,"Export PDF"),h.qZA()}}function ne(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",22),h.NdJ("click",function(){return h.CHM(e),h.oxw(2).approveDetailsData()}),h._uU(1," Approve and Process "),h.qZA()}}function ae(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"button",22),h.NdJ("click",function(){return h.CHM(e),h.oxw(2).reject()}),h._uU(1," Reject "),h.qZA()}}function re(e,t){if(1&e&&(h.TgZ(0,"div",12),h.TgZ(1,"div"),h.YNc(2,te,11,2,"div",13),h.qZA(),h.TgZ(3,"table",14),h.TgZ(4,"thead"),h.TgZ(5,"tr"),h.TgZ(6,"th"),h._uU(7,"account"),h.qZA(),h.TgZ(8,"th"),h._uU(9,"currency"),h.qZA(),h.TgZ(10,"th"),h._uU(11,"branch"),h.qZA(),h.TgZ(12,"th"),h._uU(13,"amount"),h.qZA(),h.TgZ(14,"th"),h._uU(15,"lcy ammount"),h.qZA(),h.TgZ(16,"th"),h._uU(17,"dR/cr"),h.qZA(),h.TgZ(18,"th"),h._uU(19,"exchange rate"),h.qZA(),h.TgZ(20,"th"),h._uU(21,"related acc"),h.qZA(),h.TgZ(22,"th"),h._uU(23,"add text"),h.qZA(),h.TgZ(24,"th"),h._uU(25,"account description"),h.qZA(),h.TgZ(26,"th"),h._uU(27,"Treasury Reference"),h.qZA(),h.TgZ(28,"th"),h._uU(29,"Process"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(30,"tbody"),h.YNc(31,se,37,11,"tr",8),h.qZA(),h.qZA(),h.TgZ(32,"div",15),h.YNc(33,oe,2,0,"button",16),h._uU(34,"\xa0 "),h.YNc(35,ie,2,0,"button",16),h._uU(36,"\xa0 "),h.YNc(37,ne,2,0,"button",17),h._uU(38,"\xa0 "),h.YNc(39,ae,2,0,"button",17),h.qZA(),h.qZA()),2&e){const e=h.oxw();h.xp6(2),h.Q6J("ngIf",e.flag),h.xp6(1),h.Q6J("dtOptions",e.dtOptions[1])("dtTrigger",e.dtTrigger2),h.xp6(28),h.Q6J("ngForOf",e.pendingForAuthDetailsDTOList),h.xp6(2),h.Q6J("ngIf",e.button1),h.xp6(2),h.Q6J("ngIf",e.button1),h.xp6(2),h.Q6J("ngIf",e.approveButtonStatus&&e.roleCodes.auth),h.xp6(2),h.Q6J("ngIf",e.approveButtonStatus&&e.roleCodes.auth)}}function le(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"h2",2),h._uU(3,"Transaction Details"),h.qZA(),h.qZA(),h.TgZ(4,"div"),h.TgZ(5,"div",3),h.TgZ(6,"div",24),h.TgZ(7,"div",25),h.TgZ(8,"label",26),h._uU(9,"Account Number"),h.qZA(),h._UZ(10,"input",27),h.qZA(),h.TgZ(11,"div",25),h.TgZ(12,"label",26),h._uU(13,"Amount"),h.qZA(),h._UZ(14,"input",27),h.qZA(),h.TgZ(15,"div",25),h.TgZ(16,"label",26),h._uU(17,"Account Currency"),h.qZA(),h._UZ(18,"input",27),h.qZA(),h.TgZ(19,"div",25),h.TgZ(20,"label",26),h._uU(21,"Account Branch"),h.qZA(),h._UZ(22,"input",27),h.qZA(),h.TgZ(23,"div",25),h.TgZ(24,"label",26),h._uU(25," LCY Amount"),h.qZA(),h._UZ(26,"input",27),h.qZA(),h.TgZ(27,"div",25),h.TgZ(28,"label",26),h._uU(29," Debit / Credit "),h.qZA(),h._UZ(30,"input",27),h.qZA(),h.TgZ(31,"div",25),h.TgZ(32,"label",26),h._uU(33," Branch Code "),h.qZA(),h._UZ(34,"input",27),h.qZA(),h.TgZ(35,"div",25),h.TgZ(36,"label",26),h._uU(37," Value Date "),h.qZA(),h._UZ(38,"input",27),h.ALo(39,"date"),h.qZA(),h.TgZ(40,"div",25),h.TgZ(41,"label",26),h._uU(42," Initiation Date "),h.qZA(),h._UZ(43,"input",27),h.ALo(44,"date"),h.qZA(),h.TgZ(45,"div",25),h.TgZ(46,"label",26),h._uU(47," External Reference "),h.qZA(),h._UZ(48,"input",27),h.qZA(),h.TgZ(49,"div",25),h.TgZ(50,"label",26),h._uU(51," Related Account "),h.qZA(),h._UZ(52,"input",27),h.qZA(),h.TgZ(53,"div",25),h.TgZ(54,"label",26),h._uU(55," Related Customer "),h.qZA(),h._UZ(56,"input",27),h.qZA(),h.TgZ(57,"div",25),h.TgZ(58,"label",26),h._uU(59," Exchange Rate "),h.qZA(),h._UZ(60,"input",27),h.qZA(),h.TgZ(61,"div",25),h.TgZ(62,"label",26),h._uU(63," Related Reference "),h.qZA(),h._UZ(64,"input",27),h.qZA(),h.TgZ(65,"div",25),h.TgZ(66,"label",26),h._uU(67," Additional Text "),h.qZA(),h._UZ(68,"input",27),h.qZA(),h.TgZ(69,"div",25),h.TgZ(70,"label",26),h._uU(71," Instrument Number "),h.qZA(),h._UZ(72,"input",27),h.qZA(),h.TgZ(73,"div",25),h.TgZ(74,"label",26),h._uU(75," Batch Number "),h.qZA(),h._UZ(76,"input",27),h.qZA(),h.TgZ(77,"div",25),h.TgZ(78,"label",26),h._uU(79," Upload Date "),h.qZA(),h._UZ(80,"input",27),h.qZA(),h.TgZ(81,"div",25),h.TgZ(82,"label",26),h._uU(83," Financial Cycle "),h.qZA(),h._UZ(84,"input",27),h.qZA(),h.TgZ(85,"div",25),h.TgZ(86,"label",26),h._uU(87," Period Code "),h.qZA(),h._UZ(88,"input",27),h.qZA(),h.TgZ(89,"div",25),h.TgZ(90,"label",26),h._uU(91," Transaction Code "),h.qZA(),h._UZ(92,"input",27),h.qZA(),h.TgZ(93,"div",25),h.TgZ(94,"label",26),h._uU(95," MIS_CODE "),h.qZA(),h._UZ(96,"input",27),h.qZA(),h.TgZ(97,"div",25),h.TgZ(98,"label",26),h._uU(99," POOL_CODE "),h.qZA(),h._UZ(100,"input",27),h.qZA(),h.TgZ(101,"div",25),h.TgZ(102,"label",26),h._uU(103," TXN_MIS_1 "),h.qZA(),h._UZ(104,"input",27),h.qZA(),h.TgZ(105,"div",25),h.TgZ(106,"label",26),h._uU(107," MIS_GROUP "),h.qZA(),h._UZ(108,"input",27),h.qZA(),h.TgZ(109,"div",25),h.TgZ(110,"label",26),h._uU(111," MIS_FLAG "),h.qZA(),h._UZ(112,"input",27),h.qZA(),h.TgZ(113,"div",25),h.TgZ(114,"label",26),h._uU(115," TXN_MIS_2 "),h.qZA(),h._UZ(116,"input",27),h.qZA(),h.TgZ(117,"div",25),h.TgZ(118,"label",26),h._uU(119," MIS_HEAD "),h.qZA(),h._UZ(120,"input",27),h.qZA(),h.TgZ(121,"div",25),h.TgZ(122,"label",26),h._uU(123," MIS_GROUP_TXN "),h.qZA(),h._UZ(124,"input",27),h.qZA(),h.TgZ(125,"div",25),h.TgZ(126,"label",26),h._uU(127," TXN_MIS_3 "),h.qZA(),h._UZ(128,"input",27),h.qZA(),h.TgZ(129,"div",25),h.TgZ(130,"label",26),h._uU(131," COMP_MIS_1 "),h.qZA(),h._UZ(132,"input",27),h.qZA(),h.TgZ(133,"div",25),h.TgZ(134,"label",26),h._uU(135," COMP_MIS_3 "),h.qZA(),h._UZ(136,"input",27),h.qZA(),h.TgZ(137,"div",25),h.TgZ(138,"label",26),h._uU(139," TXN_MIS_4 "),h.qZA(),h._UZ(140,"input",27),h.qZA(),h.TgZ(141,"div",25),h.TgZ(142,"label",26),h._uU(143," COMP_MIS_2 "),h.qZA(),h._UZ(144,"input",27),h.qZA(),h.TgZ(145,"div",25),h.TgZ(146,"label",26),h._uU(147," COMP_MIS_4 "),h.qZA(),h._UZ(148,"input",27),h.qZA(),h.TgZ(149,"div",25),h.TgZ(150,"label",26),h._uU(151," TXN_MIS_5 "),h.qZA(),h._UZ(152,"input",27),h.qZA(),h.TgZ(153,"div",25),h.TgZ(154,"label",26),h._uU(155," COMP_MIS_5 "),h.qZA(),h._UZ(156,"input",27),h.qZA(),h.TgZ(157,"div",25),h.TgZ(158,"label",26),h._uU(159," COST_CODE_1 "),h.qZA(),h._UZ(160,"input",27),h.qZA(),h.TgZ(161,"div",25),h.TgZ(162,"label",26),h._uU(163," TXN_MIS_6 "),h.qZA(),h._UZ(164,"input",27),h.qZA(),h.TgZ(165,"div",25),h.TgZ(166,"label",26),h._uU(167," COMP_MIS_6 "),h.qZA(),h._UZ(168,"input",27),h.qZA(),h.TgZ(169,"div",25),h.TgZ(170,"label",26),h._uU(171," COST_CODE_2 "),h.qZA(),h._UZ(172,"input",27),h.qZA(),h.TgZ(173,"div",25),h.TgZ(174,"label",26),h._uU(175," TXN_MIS_7 "),h.qZA(),h._UZ(176,"input",27),h.qZA(),h.TgZ(177,"div",25),h.TgZ(178,"label",26),h._uU(179," COMP_MIS_7 "),h.qZA(),h._UZ(180,"input",27),h.qZA(),h.TgZ(181,"div",25),h.TgZ(182,"label",26),h._uU(183," COST_CODE_3 "),h.qZA(),h._UZ(184,"input",27),h.qZA(),h.TgZ(185,"div",25),h.TgZ(186,"label",26),h._uU(187," TXN_MIS_8 "),h.qZA(),h._UZ(188,"input",27),h.qZA(),h.TgZ(189,"div",25),h.TgZ(190,"label",26),h._uU(191," COMP_MIS_8 "),h.qZA(),h._UZ(192,"input",27),h.qZA(),h.TgZ(193,"div",25),h.TgZ(194,"label",26),h._uU(195," COST_CODE_4 "),h.qZA(),h._UZ(196,"input",27),h.qZA(),h.TgZ(197,"div",25),h.TgZ(198,"label",26),h._uU(199," TXN_MIS_9 "),h.qZA(),h._UZ(200,"input",27),h.qZA(),h.TgZ(201,"div",25),h.TgZ(202,"label",26),h._uU(203," COMP_MIS_9 "),h.qZA(),h._UZ(204,"input",27),h.qZA(),h.TgZ(205,"div",25),h.TgZ(206,"label",26),h._uU(207," COST_CODE_5 "),h.qZA(),h._UZ(208,"input",27),h.qZA(),h.TgZ(209,"div",25),h.TgZ(210,"label",26),h._uU(211," TXN_MIS_10 "),h.qZA(),h._UZ(212,"input",27),h.qZA(),h.TgZ(213,"div",25),h.TgZ(214,"label",26),h._uU(215," COMP_MIS_10 "),h.qZA(),h._UZ(216,"input",27),h.qZA(),h.TgZ(217,"div",25),h.TgZ(218,"label",26),h._uU(219," UDF DETAILS "),h.qZA(),h._UZ(220,"input",27),h.qZA(),h.TgZ(221,"div",25),h.TgZ(222,"label",26),h._uU(223," UPLOAD STATUS "),h.qZA(),h._UZ(224,"input",28),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(225,"div",29),h.TgZ(226,"div",30),h.TgZ(227,"button",31),h.NdJ("click",function(){return h.CHM(e).$implicit.dismiss("Cross click")}),h._uU(228,"Exit"),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=h.oxw();h.xp6(10),h.s9C("value",e.responseDto.account),h.xp6(4),h.s9C("value",e.responseDto.amount),h.xp6(4),h.s9C("value",e.responseDto.ccyCd),h.xp6(4),h.s9C("value",e.responseDto.accountBranch),h.xp6(4),h.s9C("value",e.responseDto.lcyEquivalent),h.xp6(4),h.s9C("value",e.responseDto.drCr),h.xp6(4),h.s9C("value",e.responseDto.id.branchCode),h.xp6(4),h.s9C("value",h.lcZ(39,53,e.responseDto.valueDate)),h.xp6(5),h.s9C("value",h.lcZ(44,55,e.responseDto.id.initiationDate)),h.xp6(5),h.s9C("value",e.responseDto.externalRefNo),h.xp6(4),h.s9C("value",e.responseDto.relatedAccount),h.xp6(4),h.s9C("value",e.responseDto.relCust),h.xp6(4),h.s9C("value",e.responseDto.exchRate),h.xp6(4),h.s9C("value",e.responseDto.relatedRef),h.xp6(4),h.s9C("value",e.responseDto.addlText),h.xp6(4),h.s9C("value",e.responseDto.instrumentNo),h.xp6(4),h.s9C("value",e.responseDto.id.batchNo),h.xp6(4),h.s9C("value",e.responseDto.uploadDate),h.xp6(4),h.s9C("value",e.responseDto.finCycle),h.xp6(4),h.s9C("value",e.responseDto.periodCode),h.xp6(4),h.s9C("value",e.responseDto.txnCode),h.xp6(4),h.s9C("value",e.responseDto.misCode),h.xp6(4),h.s9C("value",e.responseDto.poolCode),h.xp6(4),h.s9C("value",e.responseDto.txnMis1),h.xp6(4),h.s9C("value",e.responseDto.misGroup),h.xp6(4),h.s9C("value",e.responseDto.misFlag),h.xp6(4),h.s9C("value",e.responseDto.txnMis2),h.xp6(4),h.s9C("value",e.responseDto.misHead),h.xp6(4),h.s9C("value",e.responseDto.misGroupTxn),h.xp6(4),h.s9C("value",e.responseDto.txnMis3),h.xp6(4),h.s9C("value",e.responseDto.compMis1),h.xp6(4),h.s9C("value",e.responseDto.compMis3),h.xp6(4),h.s9C("value",e.responseDto.txnMis4),h.xp6(4),h.s9C("value",e.responseDto.compMis2),h.xp6(4),h.s9C("value",e.responseDto.compMis4),h.xp6(4),h.s9C("value",e.responseDto.txnMis5),h.xp6(4),h.s9C("value",e.responseDto.compMis5),h.xp6(4),h.s9C("value",e.responseDto.costCode1),h.xp6(4),h.s9C("value",e.responseDto.txnMis6),h.xp6(4),h.s9C("value",e.responseDto.compMis6),h.xp6(4),h.s9C("value",e.responseDto.costCode2),h.xp6(4),h.s9C("value",e.responseDto.txnMis7),h.xp6(4),h.s9C("value",e.responseDto.compMis7),h.xp6(4),h.s9C("value",e.responseDto.costCode3),h.xp6(4),h.s9C("value",e.responseDto.txnMis8),h.xp6(4),h.s9C("value",e.responseDto.compMis8),h.xp6(4),h.s9C("value",e.responseDto.costCode4),h.xp6(4),h.s9C("value",e.responseDto.txnMis9),h.xp6(4),h.s9C("value",e.responseDto.compMis9),h.xp6(4),h.s9C("value",e.responseDto.costCode5),h.xp6(4),h.s9C("value",e.responseDto.txnMis10),h.xp6(4),h.s9C("value",e.responseDto.compMis10),h.xp6(4),h.s9C("value",e.responseDto.udfDetails)}}let de=(()=>{class e{constructor(e,t,s,i,n){this.api=e,this.roleService=t,this.userApi=s,this.excelService=i,this.modalService=n,this.respArray=[],this.dtOptions=[],this.dtTrigger1=new p.xQ,this.dtTrigger2=new p.xQ,this.closeResult="",this.statusArr=["Authorized","Unauthorized","Open","Close"],this.rejectReason="Testing",this.roleCodes=new u.yv,this.approveButtonStatus=!0,this.spinner=!1,this.firstAndSecondAuthAuditLogRespDTO=new K.U,this.excelDataAuthFirstDetails=new V,this.flag=!1,this.pendingForAuthData=[],this.isLoading=!1,this.dummyQenPMJNuqUwhg5W8UMFs66YBXrBVhhZzMFt=new Array,this.dummyPendingForAuthDataDetails=[],this.items=[10,20,30,40],this.name=new r.NI(""),this.button_permission={},this.pipe=new o.uU("en-US"),this.now=Date.now(),this.dataForProcessScreen=new Array,this.dataForProcessScreenSingle=new K.w,this.dataForProcessScreen1=[]}ngOnInit(){this.dtOptions[0]={pagingType:"full_numbers",pageLength:5,processing:!0,retrieve:!0,columnDefs:[{type:"date",targets:[6]}],lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]]},this.dtOptions[1]={pagingType:"full_numbers",pageLength:5,processing:!0,retrieve:!0,lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]]},setTimeout(()=>{this.newRolePermissions()},2e3),this.roleService.screenLabelList.subscribe(e=>this.roleCodes=e),this.flag=!1,this.firstLevelAuthorizationStatus={},this.approveButtonStatus=!1,this.user_id=localStorage.getItem("userFromLogin").replace(/['"]+/g,""),this.role=sessionStorage.getItem("user_role"),this.getPendingForAuthData(),this.dummyQenPMJNuqUwhg5W8UMFs66YBXrBVhhZzMFt=new Array}ngOnDestroy(){this.dtTrigger1.unsubscribe(),this.dtTrigger2.unsubscribe()}screenpermission(){this.screenName="UploadProcessAuthorization",this.userApi.getRoleScreenPermission(this.user_id,this.screenName,this.role).subscribe(e=>{this.rolepermission=e,this.rolepermission&&(this.button_permission=this.rolepermission[0])})}reject(){this.reasonBoolean=!0,this.rejectReason||g().fire("Enter the reason for Rejection"),console.log("rejectreason"+this.rejectReason),this.pendingForAuthDetailsDTOList[0].inputBy!=this.user_id?(this.authprocess=!0,this.approveButtonStatus=!1,this.deUploadReqDTO=new Q.Qz,this.deUploadReqDTO.pendingForAuthDTO=this.deUploadPendingForAuthDTO,this.deUploadReqDTO.pendingForAuthDetailsDTOList=this.pendingForAuthDetailsDTOList,g().fire({text:"You are trying to Reject record.  Do you want to reject?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"CANCEL",confirmButtonText:"REJECT",icon:"info",input:"textarea",inputValue:"",inputPlaceholder:"Please enter reason for rejection"}).then(e=>{!0===e.isConfirmed&&this.api.rejectCallApi(this.deUploadReqDTO,this.user_id,e.value).subscribe(e=>{this.statusFlag=e,this.statusFlag&&g().fire({text:"Rejected Successfully",icon:"success"}).then(e=>e.isConfirmed&&window.location.reload()),!1===this.statusFlag&&g().fire({icon:"error",text:"Failed to Rejected "})}),!1===e.isConfirmed&&(this.process=!0,this.approveButtonStatus=!0)}),this.getPendingForAuthData(),this.dummyPendingForAuthDataDetails=[],this.dtTrigger2.next()):g().fire("Maker cannot reject the record.")}newRolePermissions(){this.roleService.fetchScreenPermissions("Authorize Excel")}approveDetailsData(){if(this.pendingForAuthDetailsDTOList&&(this.todaydate=this.pipe.transform(this.now,"dd-MMM-yy"),this.uploaddate=this.pipe.transform(this.pendingForAuthDetailsDTOList[0].uploadDate,"dd-MMM-yy"),console.log("date for compare",this.todaydate,this.uploaddate),this.todaydate!==this.uploaddate))return console.log("inside if"),void g().fire("Unable to authorized. Backdated authorization not allowed.");this.pendingForAuthDetailsDTOList[0].inputBy!=this.user_id?(this.authprocess=!0,this.approveButtonStatus=!1,this.deUploadReqDTO=new Q.Qz,this.deUploadReqDTO.pendingForAuthDTO=this.deUploadPendingForAuthDTO,this.deUploadReqDTO.pendingForAuthDetailsDTOList=this.pendingForAuthDetailsDTOList,g().fire({text:"You are trying to Authorize Record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(e=>{console.log(e),!0===e.isConfirmed&&this.api.approveDetailsData(this.deUploadReqDTO,this.user_id).subscribe(e=>{this.firstLevelAuthorizationStatus=e,console.log(this.firstLevelAuthorizationStatus),this.authprocess=!1,this.firstLevelAuthorizationStatus||(console.log(this.approveButtonStatus),g().fire({text:"Data authorization is failed",icon:"error"})),this.firstLevelAuthorizationStatus&&(g().fire({text:"Record is Approved and Processed",icon:"success"}).then(e=>e.isConfirmed&&window.location.reload()),this.process=!0,this.getPendingForAuthData(),this.approval=!1,this.Process())},e=>{g().fire("Data authorization is failed.")}),0==e.isConfirmed&&(this.approveButtonStatus=!0)}),this.getPendingForAuthData(),this.dummyPendingForAuthDataDetails=[],this.dtTrigger2.next()):g().fire("Maker cannot authorize and process the record.").then(e=>e.isConfirmed&&window.location.reload())}Process(){this.spinner=!0,this.deUploadReqDTO=new Q.Qz,this.deUploadReqDTO.pendingForAuthDTO=this.deUploadPendingForAuthDTO,this.deUploadReqDTO.pendingForAuthDetailsDTOList=this.pendingForAuthDetailsDTOList,this.flag=!1,console.log(this.deUploadReqDTO),this.api.processDeUploadt(this.deUploadReqDTO,this.user_id).subscribe(e=>{this.responseforDE=e,console.log("Response ::"+this.responseforDE),this.responseforDE?this.spinner=!1:(this.spinner=!1,g().fire("Unable to connect core banking. Server Failed to process the request."))})}getAuditLogData(e){this.api.getFirstAndSecondAuthAuditService(this.getDetailsQueryToggleReqDTO).subscribe(e=>{this.firstAndSecondAuthAuditLogRespDTO=e})}queryDetailsDataByParam(e,t){var s=document.getElementById("btnGetDetails"+t);s.innerHTML='<span class="indicator-progress" >Please wait... <span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>',this.isLoading=!0,this.process=!1,this.approveButtonStatus=!1,console.log(e),this.spinner1=!0,this.remarks=e.remarks,this.overrides=e.overrides,this.deUploadPendingForAuthDTO=e,this.getDetailsQueryToggleReqDTO=new Q.AJ,this.getDetailsQueryToggleReqDTO.externalSysName=e.externalSysName,this.getDetailsQueryToggleReqDTO.processName=e.processName,this.getDetailsQueryToggleReqDTO.processingDate=e.processingDate,this.getDetailsQueryToggleReqDTO.currency=e.currency,this.getDetailsQueryToggleReqDTO.filename=e.fileName,this.getDetailsQueryToggleReqDTO.batchNumber=e.batchNumber,this.getDetailsQueryToggleReqDTO.overrides=this.overrides,console.log(this.getDetailsQueryToggleReqDTO),this.api.queryDetailsDataByParamService(this.getDetailsQueryToggleReqDTO).subscribe(e=>{this.isLoading=!1,console.log("backend row data after query",e),s.innerHTML="<span>Get Details</span>",this.pendingForAuthDetailsDTOList=e,this.pendingForAuthDetailsDTOList[0].inputBy==this.user_id&&(console.log(this.user_id),console.log("true"),this.reject1=!0),this.pendingForAuthDetailsDTOList.length>0?(this.approveButtonStatus=!0,this.auth=!0,this.spinner1=!1,this.approval=!0,this.flag=!0,this.button1=!0,this.dummyPendingForAuthDataDetails=this.pendingForAuthDetailsDTOList,this.createSubTable(t+1)):g().fire("Data Not Found")},e=>{this.isLoading=!1}),this.spinner1=!1}createSubTable(e){const t=document.getElementById("authorizeExcelTableBody");setTimeout(()=>{const s=document.getElementById("accountDetailsMain");this.previousRow&&t.removeChild(this.previousRow);const o=document.createElement("tr");this.previousRow=o,o.classList.add("trowAuthorization"),o.style.position="relative",o.style.height="408px",s.classList.add("accountDetailsDiv"),o.appendChild(s),t.insertBefore(o,t.children[e])},0)}getAllDetailsData(){this.api.getDetailsListServiceFirst().subscribe(e=>{console.log(e),this.queriedPendingForAuthDetailsDTOList=e,this.dummyPendingForAuthDataDetails=this.queriedPendingForAuthDetailsDTOList,this.dtTrigger2.next()})}getPendingForAuthData(){this.api.getPendingForAuthDataFirst(this.user_id).subscribe(e=>{console.log(e),this.pendingForAuthData=e,this.pendingForAuthData.sort((e,t)=>e.processingDate<t.processingDate?1:-1);for(let t of this.pendingForAuthData)t.authStatus=this.statusArr.find(e=>e.startsWith(t.authStatus)),t.uploadStatus=this.statusArr.find(e=>e.startsWith(t.uploadStatus));if(this.dtTrigger1.next(),this.pendingForAuthData){for(let e=0;e<this.pendingForAuthData.length;e++)this.pendingForAuthData[e].fileName=JSON.stringify(this.pendingForAuthData[e].fileName).split("/").pop().split('"')[0];"A"===this.pendingForAuthData.authStatus&&(this.getAllDetailsData(),this.process=!0)}})}openSnackBar(e,t){g().fire(e)}openSnackBarLongDuration(e,t){g().fire(e)}findRowsPerExtSys(e){this.dummyPendingForAuthDataDetails=new Array;for(const t of this.pendingForAuthDetailsDTOList)t.sourceCode===e&&this.dummyPendingForAuthDataDetails.push(t);this.dtTrigger2.next()}openDialog(e,t){this.responseDto=t,this.modalService.open(e,{windowClass:"md-class"}).result.then(e=>{this.closeResult=`Closed with: ${e}`},e=>{this.closeResult=`Dismissed ${this.getDismissReason(e)}`})}getDismissReason(e){return e===$.If.ESC?"by pressing ESC":e===$.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}openAuditDetails(e){this.api.getAuditDataOfDetailsRecord(e).subscribe(e=>{this.medDeUploadDetailHistEntityList=e})}downloadData(){console.log(this.pendingForAuthDetailsDTOList),this.pendingForAuthDetailsDTOList.forEach(e=>{"C"==e.drCr?(this.credit=e.lcyEquivalent,this.debit=0):(this.debit=e.lcyEquivalent,this.credit=0),this.dataForProcessScreen1.push({Batch_No:e.id.batchNo,Account_Branch:e.accountBranch,Account:e.account,Acc_Desc:e.accDesc,DrCr:e.drCr,Trn_Code:e.txnCode,Transaction_Desc:e.trnDesc,FcyAmount:e.amount,Exch_Rate:e.exchRate,DrLcyAmt:this.debit,CrLcyAmt:this.credit,Instr_code:e.instrumentNo,Value_Date:this.pipe.transform(e.valueDate,"dd-MMM-yy"),User_Id:e.inputBy,Authorizer_ID:e.firstTimeAuthorizer,Treasury_Reference:e.acumenJournal}),console.log(this.dataForProcessScreen1)}),console.log("final data",this.dataForProcessScreen1),this.excelService.exportAsExcelFile(this.dataForProcessScreen1,"Excel_Upload_Data"),this.dataForProcessScreen1=[]}convert(){var e=new(Y())({orientation:"landscape"});e.setFont("helvetica"),e.setFontSize("bold"),e.setFontSize(9);var t=[];console.log(this.pendingForAuthDetailsDTOList),this.pendingForAuthDetailsDTOList.forEach(e=>{"C"==e.drCr?(this.pdfCreditVar=e.lcyEquivalent,this.pdfDebitVar=0):(this.pdfDebitVar=e.lcyEquivalent,this.pdfCreditVar=0),this.valueDate=this.pipe.transform(e.valueDate,"dd-MMM-yy");var s=new Date(e.timeForExport).toLocaleDateString("en-us");console.log(s),t.push([e.id.batchNo,e.accountBranch,e.account,e.accDesc,e.drCr,e.txnCode,e.trnDesc,e.amount,e.exchRate,this.pdfDebitVar,this.pdfCreditVar,e.instrumentNo,this.valueDate,e.inputBy,e.firstTimeAuthorizer,e.acumenJournal])}),e.autoTable({head:[["BatchNo","AccBranch","Acc","AccDesc","DrCr","TrnCode","TrnDesc","FcyAmt","Rate","DrLcyAmt","CrLcyAmt","InstrCode","ValueDate","UserId","AuthId","TreasuryReference"]],body:t,theme:"striped",margin:{top:25,bottom:15},styles:{overflow:"linebreak",fontSize:8},showHeader:"everyPage"}),e.save("ExcelDAtaAuthFirst.pdf")}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(Z.sM),h.Y36(q),h.Y36(T.fz),h.Y36(A.x),h.Y36($.FF))},e.\u0275cmp=h.Xpm({type:e,selectors:[["npr-authorize-excel"]],viewQuery:function(e,t){if(1&e&&h.Gf(z.G,5),2&e){let e;h.iGM(e=h.CRH())&&(t.dtElements=e)}},decls:44,vars:4,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"dbCardStyle"],[1,"pageTitle","my-3","text-center"],[1,"table-responsive"],["id","dbTable1","datatable","",1,"table","tableStyle","tableStyleSelect","nowrap","vAlignMdl",2,"width","100%",3,"dtOptions","dtTrigger"],["id","authorizeExcelTableBody"],[4,"ngFor","ngForOf"],["class","dbCardStyle","id","accountDetailsMain",4,"ngIf"],["content",""],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"id","click"],["id","accountDetailsMain",1,"dbCardStyle"],["class","row",4,"ngIf"],["id","dbTable2","datatable","",1,"dataTable","table","tableStyle",2,"width","100%",3,"dtOptions","dtTrigger"],[1,"btnCol","mt-md-4","mt-3"],["class","btn smBtn btnDarkGrey",3,"click",4,"ngIf"],["class","btn smBtn btnPrimary ",3,"click",4,"ngIf"],[1,"row"],[1,"col-sm-4"],[2,"width","100%"],[1,"tdCell"],[1,"btn","smBtn","btnPrimary",3,"click"],[1,"btn","smBtn","btnDarkGrey",3,"click"],[1,"row","gy-3"],[1,"col-lg-3"],["for","securityLogins",1,"formLbl"],["id","securityLogins","type","text","readonly","",1,"form-control",3,"value"],["id","securityLogins","type","text","value","Unprocessed","readonly","",1,"form-control"],[1,"row","g-3","pb-3","justify-content-end","pt-3"],[1,"col-auto","prClass","pb-3","pt-3"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"click"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"h2",2),h._uU(3,"Authorize Excel"),h.qZA(),h.qZA(),h.TgZ(4,"div",3),h.TgZ(5,"h2",4),h._uU(6,"Authorization"),h.qZA(),h.TgZ(7,"div",5),h.TgZ(8,"table",6),h.TgZ(9,"thead"),h.TgZ(10,"tr"),h.TgZ(11,"th"),h._uU(12,"process detail"),h.qZA(),h.TgZ(13,"th"),h._uU(14,"external system"),h.qZA(),h.TgZ(15,"th"),h._uU(16,"currency"),h.qZA(),h.TgZ(17,"th"),h._uU(18,"Uploaded by"),h.qZA(),h.TgZ(19,"th"),h._uU(20,"batch number"),h.qZA(),h.TgZ(21,"th"),h._uU(22,"process name"),h.qZA(),h.TgZ(23,"th"),h._uU(24,"processing date"),h.qZA(),h.TgZ(25,"th"),h._uU(26,"auth status"),h.qZA(),h.TgZ(27,"th"),h._uU(28,"upload status"),h.qZA(),h.TgZ(29,"th"),h._uU(30,"File Name"),h.qZA(),h.TgZ(31,"th"),h._uU(32,"Total Record"),h.qZA(),h.TgZ(33,"th"),h._uU(34,"Total Credit"),h.qZA(),h.TgZ(35,"th"),h._uU(36,"Total Debit"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(37,"tbody",7),h.YNc(38,ee,29,16,"tr",8),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h._UZ(39,"br"),h._UZ(40,"br"),h.YNc(41,re,40,8,"div",9),h.qZA(),h.YNc(42,le,229,57,"ng-template",null,10,h.W1O)),2&e&&(h.xp6(8),h.Q6J("dtOptions",t.dtOptions[0])("dtTrigger",t.dtTrigger1),h.xp6(30),h.Q6J("ngForOf",t.pendingForAuthData),h.xp6(3),h.Q6J("ngIf",null!=t.pendingForAuthDetailsDTOList))},directives:[z.G,o.sg,o.O5],pipes:[o.uU],styles:["table.tableStyle[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#a6aab5;font-size:9px;text-transform:uppercase;letter-spacing:1px;padding:16px 13px;border-bottom:1px solid #F5F5F5}.prClass[_ngcontent-%COMP%]{padding-right:40px}  .modal-dialog{max-width:800px!important}  .md-class .dbCardStyle{overflow-y:scroll!important;height:250px}.mat-paginator-sticky[_ngcontent-%COMP%]{bottom:0px;position:-webkit-sticky;position:sticky;z-index:10}.trowAuthorization[_ngcontent-%COMP%]{position:relative;height:400px!important}.accountDetailsDiv[_ngcontent-%COMP%]{position:absolute;top:0;max-width:100%}.tdCell[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}#dbTable2[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px;height:30px!important}"]}),e})();const ue=[{path:"upload-excel",component:B,canDeactivate:[s(50215).I]},{path:"rejection_queue",component:W},{path:"authorize_excel",component:de}];let ce=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[i.Bz.forChild(ue)],i.Bz]}),e})(),ge=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[o.ez,ce,r.u5,r.UX,z.T,$.IJ,f.A0]]}),e})()}}]);