!function(){"use strict";function e(e,o){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,o){if(!e)return;if("string"==typeof e)return t(e,o);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,o)}(e))||o&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){l=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function o(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[886],{21886:function(t,o,s){s.r(o),s.d(o,{FileUploadModule:function(){return fe}});var a,r=s(38583),l=s(39895),u=n(function e(){i(this,e)}),c=n(function e(){i(this,e),this.proceedDuplicates=!1}),d=s(3679),g=n(function e(){i(this,e)}),p=s(91841),Z=s(35383),h=(s(89019),s(88259)),f=s.n(h),T=s(79765),A=s(37716),D=s(94761),m=s(59119),q=s(58219),v=s(26215),x=s(3118),b=((a=function(){function e(t){i(this,e),this.http=t,this.username=new v.X(""),this.tabData=new v.X([]),this.screenLabelList=new v.X(new Z.yv),this.labelData=this.screenLabelList.asObservable(),this.screenData=new Z.yv,this.screenwisePermissions=new v.X([]),this.httpHeader={header:new p.WM({"Content-type":"application/json"})},this._baseURL=x.$.baseURL+"/role",this._fmosbaseURL=x.$.baseURL+"/medRoles",this.baseURL=x.$.baseURL}return n(e,[{key:"createRoles",value:function(e){return this.http.post("".concat(this._baseURL,"/createRole"),e)}},{key:"getRoleByRoleName",value:function(e){return this.http.get("".concat(this._baseURL,"/").concat(e))}},{key:"getAllRoles",value:function(){return this.http.get("".concat(this.baseURL,"/users/getAllAuthRole"))}},{key:"getAllDept",value:function(){return this.http.get("".concat(this.baseURL,"/users/getAllAuthDepts"))}},{key:"getAllRolesSummary",value:function(){return this.http.get("".concat(this._fmosbaseURL,"/fetchAllRolesSummary"))}},{key:"fetchAllAuthRoles",value:function(){return this.http.get("".concat(this._baseURL,"/fetchAuthRoles"))}},{key:"modifyRoleService",value:function(e){return this.http.put("".concat(this._baseURL,"/modifyRole"),e)}},{key:"newmodifyRoleService",value:function(e){return this.http.put("".concat(this._fmosbaseURL,"/modifyRole"),e)}},{key:"verifyRole",value:function(e,t){return this.http.get("".concat(this._fmosbaseURL,"/authorize/").concat(e,"/").concat(t))}},{key:"deleteRole",value:function(e,t){return this.http.delete("".concat(this._fmosbaseURL,"/").concat(e,"/").concat(t),{responseType:"text"})}},{key:"closelockRecord",value:function(e,t){return this.http.get("".concat(this._fmosbaseURL,"/close/").concat(e,"/").concat(t))}},{key:"reopenRecord",value:function(e,t){return this.http.get("".concat(this._fmosbaseURL,"/reopen/").concat(e,"/").concat(t))}},{key:"getAllPermission",value:function(){return this.http.get("".concat(this._baseURL,"/permission"))}},{key:"fetchScreenData",value:function(){var e=localStorage.getItem("userFromLogin");return this.http.get("".concat(this._fmosbaseURL,"/allScreenUser/").concat(e))}},{key:"fetchnewscreenlabels",value:function(){return this.http.get("".concat(this._fmosbaseURL,"/fetchTabLabelAndScreen"))}},{key:"createnewrole",value:function(e){return this.http.post("".concat(this._fmosbaseURL,"/saveRoleDetails"),e)}},{key:"fetchfmosroles",value:function(){var e=localStorage.getItem("userFromLogin");return this.http.get("".concat(this._fmosbaseURL,"/allRolePermissionForUser/").concat(e))}},{key:"fetchNewRolePermissions",value:function(e){var t=this;this.http.get("".concat(this._fmosbaseURL,"/allRolePermissionForUser/").concat(e)).subscribe(function(e){localStorage.setItem("userPermissions",JSON.stringify(e)),t.storeuserpermissions=e})}},{key:"fetchScreenPermissions",value:function(e){var t=JSON.parse(localStorage.getItem("userPermissions"));console.log("scr",e,t);var o=[];if(this.screenData=new Z.yv,t){var n=t.labels;n&&n.sort(function(e,t){return e.labelId-t.labelId});var i=t.screenAndPermissionsDTO;if(console.log(i),i){var s=i.findIndex(function(t){return t.screenName.toLowerCase()==e.toLowerCase()});if(s>=0)for(var a=i[s].permissions.toString(),r=0;r<a.length;r++)1==a.charAt(r)&&(n[r].exist=!0,n[r].labellowercase=n[r].labelName.toLowerCase(),o.push(n[r]),this.screenData[n[r].labellowercase]=n[r])}}console.log("scr",this.screenData),this.screenLabelList.next(this.screenData)}},{key:"fetchdynamicrolesdata",value:function(e){return this.http.get("".concat(this._fmosbaseURL,"/fetchRoleData/").concat(e))}},{key:"preparingrolesdata",value:function(e){var t=[],o=e.screenDto,n=e.labelDto,i=e.permissionDto;e.tabDto.forEach(function(e){var s=[],a=[];o.forEach(function(t){if(e.tabId==t.screensId.tabId){var o=i.findIndex(function(e){return e.permissionId.screenId==t.screensId.screenId});s.push(t.screenName),a.push({screenname:t.screenName,screenid:t.screensId.screenId,permission:i[o].permissions})}});for(var r=e.visibility.toString(),l=[],u=[],c=0;c<r.length;c++)1==r.charAt(c)&&(l.push(n[c].labelName),u.push(n[c]));t.push({tabname:e.tabName,screens:s,screenlist:a,labels:l,labelslist:u})}),this.tabData.next(t)}},{key:"EnablescreenPermissions",value:function(){var e=JSON.parse(localStorage.getItem("userPermissions")),t=[];if(e){var o=e.labels;o.sort(function(e,t){return e.labelId-t.labelId});for(var n=e.screenAndPermissionsDTO,i=o.findIndex(function(e){return"view"==e.labelName.toLowerCase()}),s=0;s<n.length;s++){var a=n[s].permissions.toString();(1==a.charAt(i)||"1"==a.charAt(i))&&t.push(n[s].screenName)}}console.log("methods are ",t),this.screenwisePermissions.next(t)}}]),e}()).\u0275fac=function(e){return new(e||a)(A.LFG(p.eN))},a.\u0275prov=A.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a),_=s(24376),U=["fileWrapper"];function C(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"button",26),A.NdJ("click",function(){return A.CHM(o),A.oxw().refreshGl()}),A._uU(1,"Refresh CCY Rate"),A.qZA()}}function y(e,t){if(1&e&&(A.TgZ(0,"ng-option",27),A._uU(1),A.qZA()),2&e){var o=t.$implicit;A.Q6J("value",o),A.xp6(1),A.Oqu(o)}}function M(e,t){if(1&e&&(A.TgZ(0,"option",27),A._uU(1),A.qZA()),2&e){var o=t.$implicit;A.Q6J("value",o),A.xp6(1),A.Oqu(o)}}function S(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"select",28),A.NdJ("change",function(e){A.CHM(o);var t=A.oxw();return t.getFileNamesBasedOnExtSysNameAndProcessName(t.uploadExcelForm.get("extSysNameData").value,e.target.value)}),A.TgZ(1,"option",13),A._uU(2,"--Please select--"),A.qZA(),A.YNc(3,M,2,2,"option",14),A.qZA()}if(2&e){var n=A.oxw();A.Q6J("disabled",n.dataUploaded),A.xp6(3),A.Q6J("ngForOf",n.processNames)}}function N(e,t){if(1&e&&A._UZ(0,"input",29),2&e){var o=A.oxw();A.Q6J("disabled",o.dataUploaded)}}function O(e,t){if(1&e&&(A.TgZ(0,"option",27),A._uU(1),A.qZA()),2&e){var o=t.$implicit;A.Q6J("value",o.trnCode),A.xp6(1),A.AsE("",o.trnCode," ",o.trnDesc," ")}}function w(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"div",9),A.TgZ(1,"label",17),A._uU(2,"File Name"),A.TgZ(3,"span",11),A._uU(4,"*"),A.qZA(),A.qZA(),A.TgZ(5,"input",30),A.NdJ("keypress",function(e){return A.CHM(o),A.oxw().valuechange(e)})("keyup",function(){A.CHM(o);var e=A.oxw();return e.fun(e.excelDataProcessingReqDTO.fileName)}),A.qZA(),A.qZA()}if(2&e){var n=A.oxw();A.xp6(5),A.Q6J("disabled",n.dataUploaded)}}function F(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"div",31),A.TgZ(1,"div",32),A.TgZ(2,"div",33),A.TgZ(3,"div",34,35),A.TgZ(5,"input",36,37),A.NdJ("change",function(e){A.CHM(o);var t=A.oxw();return t.getFiledata(e,t.uploadExcelForm.get("extSysNameData").value,t.uploadExcelForm.get("processNameData").value,t.uploadExcelForm.get("fileName").value)}),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA()}if(2&e){var n=A.oxw();A.xp6(5),A.Q6J("disabled",n.dataUploaded)}}function P(e,t){1&e&&(A.ynx(0),A.TgZ(1,"span",43),A._uU(2,"Uploading, Please wait... "),A._UZ(3,"span",44),A.qZA(),A.BQk())}function J(e,t){1&e&&(A.TgZ(0,"span",45),A._uU(1," Upload Data"),A.qZA())}var R=function(){return["/dashboard"]};function k(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"div",38),A.TgZ(1,"div",6),A.TgZ(2,"button",39),A.NdJ("click",function(){return A.CHM(o),A.oxw().doFirstValidation()}),A.YNc(3,P,4,0,"ng-container",40),A.YNc(4,J,2,0,"ng-template",null,41,A.W1O),A.qZA(),A.qZA(),A.TgZ(6,"div",6),A.TgZ(7,"a",42),A._uU(8,"Exit"),A.qZA(),A.qZA(),A.qZA()}if(2&e){var n=A.MAs(5),i=A.oxw();A.xp6(2),A.Q6J("disabled",!i.uploadExcelForm.valid||!i.showSelectedFilename||i.dataUploaded),A.xp6(1),A.Q6J("ngIf",i.isUploading)("ngIfElse",n),A.xp6(4),A.Q6J("routerLink",A.DdM(4,R))}}function E(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"div",38),A.TgZ(1,"div",6),A.TgZ(2,"button",39),A.NdJ("click",function(){return A.CHM(o),A.oxw().doFirstValidation()}),A._uU(3," Auto Upload "),A.qZA(),A.qZA(),A.TgZ(4,"div",6),A.TgZ(5,"a",42),A._uU(6,"Exit"),A.qZA(),A.qZA(),A.qZA()}if(2&e){var n=A.oxw();A.xp6(2),A.Q6J("disabled",!n.uploadExcelForm.valid||n.dataUploaded),A.xp6(3),A.Q6J("routerLink",A.DdM(2,R))}}function L(e,t){if(1&e&&(A.TgZ(0,"p",50),A._uU(1),A.qZA()),2&e){var o=A.oxw(2);A.xp6(1),A.Oqu(o.date)}}function I(e,t){1&e&&(A.ynx(0),A.TgZ(1,"span",43),A._uU(2,"Processing, Please wait... "),A._UZ(3,"span",44),A.qZA(),A.BQk())}function B(e,t){1&e&&(A.TgZ(0,"span",45),A._uU(1," Process"),A.qZA())}function Q(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"div",4),A.TgZ(1,"div",46),A.TgZ(2,"h2",24),A._uU(3,"File Upload Summary"),A.qZA(),A.qZA(),A.TgZ(4,"div",47),A.TgZ(5,"div",48),A.TgZ(6,"label",49),A._uU(7,"Batch Number"),A.qZA(),A.TgZ(8,"p",50),A._uU(9),A.qZA(),A.qZA(),A.TgZ(10,"div",48),A.TgZ(11,"label",49),A._uU(12,"Total No Of records"),A.qZA(),A.TgZ(13,"p",50),A._uU(14),A.qZA(),A.qZA(),A.TgZ(15,"div",48),A.TgZ(16,"label",49),A._uU(17,"Total Debit Amount"),A.qZA(),A.TgZ(18,"p",50),A._uU(19),A.qZA(),A.qZA(),A.TgZ(20,"div",48),A.TgZ(21,"label",49),A._uU(22,"Total Credit Amount"),A.qZA(),A.TgZ(23,"p",50),A._uU(24),A.qZA(),A.qZA(),A.TgZ(25,"div",48),A.TgZ(26,"label",49),A._uU(27,"Sum (Credit - Debit)"),A.qZA(),A.TgZ(28,"p",50),A._uU(29),A.qZA(),A.qZA(),A.TgZ(30,"div",48),A.TgZ(31,"label",49),A._uU(32,"Transaction Date"),A.qZA(),A.YNc(33,L,2,1,"p",51),A.qZA(),A.TgZ(34,"div",52),A.TgZ(35,"label",53),A._uU(36,"Remarks *"),A.qZA(),A._UZ(37,"textarea",54),A.qZA(),A.TgZ(38,"div",52),A.TgZ(39,"label",55),A._uU(40,"Overrides"),A.qZA(),A._UZ(41,"textarea",56),A.qZA(),A.qZA(),A.TgZ(42,"div",57),A.TgZ(43,"div",6),A.TgZ(44,"button",39),A.NdJ("click",function(){return A.CHM(o),A.oxw().Datacheck()}),A.YNc(45,I,4,0,"ng-container",40),A.YNc(46,B,2,0,"ng-template",null,58,A.W1O),A.qZA(),A.qZA(),A.TgZ(48,"div",6),A.TgZ(49,"button",39),A.NdJ("click",function(){A.CHM(o);var e=A.oxw();return e.deleteDataService(e.uploadExcelForm.get("remarks").value)}),A._uU(50,"Delete"),A.qZA(),A.qZA(),A.TgZ(51,"div",6),A.TgZ(52,"a",59),A.NdJ("click",function(){return A.CHM(o),A.oxw().downloadData()}),A._uU(53,"View Excel"),A.qZA(),A.qZA(),A.TgZ(54,"div",6),A.TgZ(55,"button",60),A.NdJ("click",function(){return A.CHM(o),A.oxw().exit()}),A._uU(56,"Hide"),A.qZA(),A.qZA(),A.qZA(),A.qZA()}if(2&e){var n=A.MAs(47),i=A.oxw();A.xp6(9),A.Oqu(i.responseDto.batchNo),A.xp6(5),A.Oqu(i.responseDto.totalNoOfRecords),A.xp6(5),A.Oqu(i.responseDto.totalDebitAmount),A.xp6(5),A.hij(" ",i.responseDto.totalCreditAmount,""),A.xp6(5),A.Oqu(i.responseDto.sumAmount),A.xp6(4),A.Q6J("ngIf","Today"===i.valueDate||"Today"!=i.valueDate),A.xp6(4),A.Q6J("disabled",i.dataProcessed),A.xp6(7),A.Q6J("disabled",i.flag||i.dataProcessed),A.xp6(1),A.Q6J("ngIf",i.isProcessing)("ngIfElse",n),A.xp6(4),A.Q6J("disabled",i.deleteBtn)}}var H=f().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}),Y=function(){var e=function(){function e(t,o,n,s,a,l,d){i(this,e),this.api=t,this.userApi=o,this.fb=n,this.excelService=s,this.roleService=a,this.router=l,this.cdr=d,this.isSelected=!0,this.showSelectedFilename=!1,this.showDialog=!1,this.subject=new T.xQ,this.deleteBtn=!1,this.processNameField="text",this.autoUpload=!1,this.allExternalSystemNames=[],this.space=!1,this.excelDataProcessingAuditlog=new g,this.allFileNames=[],this.selectorDateData=new Date,this.selected="option2",this.listMedMaster=new Array,this.excelDataProcessingRespDTO=new u,this.excelDataProcessingReqDTO=new c,this.isUploading=!1,this.isProcessing=!1,this.dataUploaded=!1,this.dataProcessed=!1,this.button_permission={},this.button=!0,this.flag=!1,this.pipe=new r.uU("en-US"),this.now=Date.now(),this.myFormattedDate=this.pipe.transform(this.now,"dd-MMM-yy"),this.roleCodes=new Z.yv,this.formTouched=!0}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.user_id=localStorage.getItem("userFromLogin"),this.department=localStorage.getItem("departmentHeader"),this.departmentString=this.department.replace(/["]+/g,""),this.uploadExcelForm=this.fb.group({extSysNameData:["",[d.kI.required]],processNameData:["",[d.kI.required]],selectorDateData:[new Date],trncode:["",[d.kI.required]],fileName:["",[d.kI.required]],remarks:[""]}),setTimeout(function(){e.newRolePermissions()},2e3),this.roleService.screenLabelList.subscribe(function(t){return e.roleCodes=t}),this.role=sessionStorage.getItem("user_role"),this.getTrnCodeArray(),this.extSysNameData="",this.processNameData="",this.fileNameData="",this.getAllExternalSystemNames(),console.log("user id",this.user_id)}},{key:"getAuditLogData",value:function(e){var t=this;this.api.getAuditLogService(e,this.user_id).subscribe(function(e){t.excelDataProcessingAuditlog=e,t.excelDataProcessingAuditlog&&(t.auditdata=!0,"P"===t.excelDataProcessingAuditlog.recordStatus&&(t.excelDataProcessingAuditlog.recordStatus="PROCESSED"),"D"===t.excelDataProcessingAuditlog.recordStatus&&(t.excelDataProcessingAuditlog.recordStatus="DELETED"),"U"===t.excelDataProcessingAuditlog.recordStatus&&(t.excelDataProcessingAuditlog.recordStatus="UNPROCESSED"))})}},{key:"refreshGl",value:function(){var e=this;this.userApi.refreshGl().subscribe(function(t){e.data=t,console.log(e.data)})}},{key:"canExit",value:function(){var e=this,t=!1;return this.uploadExcelForm.touched&&1==this.formTouched?f().fire({text:"There are unsaved changes in the screen. Would you like to navigate to other screen?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(function(o){return!0===o.isConfirmed?(t=!0,e.cdr.markForCheck(),t):(t=!1,e.cdr.markForCheck(),t)}):(t=!0,new Promise(function(o,n){!0===t&&(t=!0,e.cdr.markForCheck(),o(!0))}))}},{key:"newRolePermissions",value:function(){this.roleService.fetchScreenPermissions("Upload Excel")}},{key:"doFirstValidation",value:function(){var e=this;if(this.button=!1,this.isUploading=!0,console.log("method call"),!this.uploadExcelForm.get("trncode").value)return f().fire("Enter Data for Trnsaction Code."),void(this.isUploading=!1);if(this.enablefilebrowser&&!this.selectedFiles)return f().fire("Please select a file to upload."),void(this.isUploading=!1);if(this.uploadExcelForm.invalid)this.isUploading=!1,f().fire("Please fill all the details");else{var t=new Date;this.excelDataProcessingReqDTO.extSysName=this.uploadExcelForm.get("extSysNameData").value,this.excelDataProcessingReqDTO.processName=this.uploadExcelForm.get("processNameData").value,this.excelDataProcessingReqDTO.processingDate=t,this.excelDataProcessingReqDTO.trnCode=this.uploadExcelForm.get("trncode").value,this.excelDataProcessingReqDTO.fileName=this.uploadExcelForm.get("fileName").value,this.api.showDetailServiceInExcelDataProcessing(this.excelDataProcessingReqDTO,this.user_id).subscribe(function(t){e.isUploading=!1,e.responseforfileupload=t,null!=e.responseforfileupload?(e.responseforfileupload.errorMessage&&(console.log("here is error of duplicate record"),e.disablebtn2=!0,console.log(e.responseforfileupload.errorMessage),f().fire({text:e.responseforfileupload.errorMessage,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"YES"}).then(function(e){}),"Ppossible duplicate data"===e.responseforfileupload.errorMessage&&(e.excelDataProcessingReqDTO.proceedDuplicates=!0,f().fire({title:"Do you want to proceed?",text:"You're trying to upload duplicate data",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"NO",confirmButtonText:"YES"}).then(function(t){t.isConfirmed?e.api.showDetailServiceInExcelDataProcessing(e.excelDataProcessingReqDTO,e.user_id).subscribe(function(t){e.responseforfileupload=t,e.valueDate="Today"==e.responseforfileupload.valueDate?"Today":"not Today",e.responsebutton=!0,e.responseDto=e.responseforfileupload,"Amount and LCY amount mismatch"===e.responseforfileupload.errorMessage&&f().fire("Unable to upload","Error:"+e.responseforfileupload.errorMessage,"error"),"Error while reading file"===e.responseforfileupload.errorMessage&&f().fire("Unable to upload","Error: "+e.responseforfileupload.errorMessage),0!==e.responseDto.totalNoOfRecords&&(e.dataUploaded=!0,f().fire({title:"Data uploaded successfully ",text:"For the Batch "+e.responseDto.batchNo}).then(function(e){setTimeout(function(){window.scrollTo(0,document.body.scrollHeight)})}),e.excelFileFlag=!0,e.flag=!1,e.isShow=!0,e.formTouched=!e.uploadExcelForm.touched)},function(e){console.log(e)}):t.dismiss===f().DismissReason.cancel&&H.fire("Cancelled","Duplicate data uploading cancelled, successfully :)","error"),e.resetEntries()})),e.flag=!0,e.disbaleBtn=!0),e.date=(new Date).toLocaleDateString(),e.date=e.pipe.transform(e.date,"MMM dd, yyyy"),e.valueDate="Today"==e.responseforfileupload.valueDate?"Today":"not Today",e.responsebutton=!0,e.responseDto=e.responseforfileupload,0!==e.responseDto.totalNoOfRecords&&(e.dataUploaded=!0,f().fire({title:"Data uploaded successfully ",text:"For the Batch "+e.responseDto.batchNo}).then(function(e){setTimeout(function(){window.scrollTo(0,document.body.scrollHeight)})}),e.formTouched=!e.uploadExcelForm.touched,e.excelFileFlag=!0,e.flag=!1,e.isShow=!0)):f().fire("Server error.")},function(t){f().fire("Server error."),e.isUploading=!1})}}},{key:"getAllExternalSystemNames",value:function(){var e=this;this.api.getAllExtSysNamesService(this.user_id).subscribe(function(t){console.log("this.departmentString::",e.departmentString);var o=t.find(function(t){return t.department==e.departmentString});console.log("data before filter ",t),console.log("data after filter ",o),e.allExternalSystemNames=t.sort()})}},{key:"resetEntries",value:function(){this.extSysNameData="",this.isUploading=!1,this.processNameData="",this.fileNameData="",this.trncode="",this.showSelectedFilename=!1,this.enablefilebrowser=!0,this.button=!0,this.disablebtn2=!1,this.excelDataProcessingReqDTO.fileName="",this.disbaleBtn=!1,this.excelDataProcessingReqDTO.proceedDuplicates=!1,this.uploadExcelForm.get("selectorDateData").setValue(new Date),this.fileUploadWrapper.nativeElement.setAttribute("data-text","File Upload"),this.responsebutton=!1}},{key:"valuechange",value:function(e){this.disablebtn2&&(this.disbaleBtn=!1),console.log("event",this.disablebtn2)}},{key:"getFileNamesBasedOnExtSysNameAndProcessName",value:function(e,t){var o=this;this.disablebtn2&&(this.disbaleBtn=!1),this.api.getUploadPermission(e,t).subscribe(function(e){o.permission=e,"false"==o.permission[0]?(o.enablefilebrowser=!0,o.autoUpload=!1):(o.enablefilebrowser=!1,o.autoUpload=!0,o.uploadExcelForm.controls.fileName.clearValidators(),o.uploadExcelForm.controls.fileName.updateValueAndValidity())})}},{key:"getProcessNamesBasedOnExtSysNameForUpload",value:function(e){var t=this;console.log(e),this.uploadExcelForm.get("processNameData").setValue(""),this.processNameField="text",this.processNames=[],this.disablebtn2&&(this.disbaleBtn=!1),this.api.getProcessNamesBasedOnExtSysNameService(e).subscribe(function(e){t.processNames=e,1===t.processNames.length&&null!=t.processNames&&(t.processNameField="text",t.uploadExcelForm.get("processNameData").setValue(t.processNames[0]),t.enablefilebrowser=!0),t.processNames.length>1&&(t.processNameField="select")})}},{key:"getTrnCode",value:function(e){this.disablebtn2&&(this.disbaleBtn=!1)}},{key:"getTrnCodeArray",value:function(){var e=this;this.api.getAllTransactionCode(this.user_id).subscribe(function(t){e.trnCodeArray=t,console.log(e.trnCodeArray)})}},{key:"deleteDataService",value:function(e){this.flag=!1,f().fire("Record is Deleted"),this.router.navigate(["/file-upload/upload-excel"]),this.exit()}},{key:"Datacheck",value:function(){var e=this;if(console.log("valueDate",this.valueDate),"Today"!=this.valueDate)this.processDataService();else{if(this.isProcessing=!0,0==this.responseDto.totalNoOfRecords)return this.isProcessing=!1,void f().fire("total no. of record is 0","Unable to process.");if(!this.uploadExcelForm.get("remarks").value)return this.isProcessing=!1,void f().fire("Remark is mandatory for process.");this.flag=!0,this.api.processDataService(this.responseforfileupload,this.user_id,this.uploadExcelForm.get("remarks").value).subscribe(function(t){e.isProcessing=!1,e.processDataStatus=t,console.log("this.processDataStatus"),e.processDataStatus?(e.dataProcessed=!0,e.deleteBtn=!0,f().fire("Data processed successfully","For the Batch "+e.responseDto.batchNo),e.isShow=!0):f().fire("Unable to process.")},function(t){e.isProcessing=!1})}}},{key:"processDataService",value:function(){var e=this;f().fire({text:"Value Date is "+this.responseDto.valueDate+" in few or all uploading records. Would you like to proceed?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"PROCEED."}).then(function(t){if(console.log(t.value),t.value)return console.log("user choose to proceed."),e.isProcessing=!0,0==e.responseDto.totalNoOfRecords?(e.isProcessing=!1,void f().fire("total no. of record is 0","Unable to process.")):e.remarks?(e.flag=!0,void e.api.processDataService(e.responseforfileupload,e.user_id,e.remarks).subscribe(function(t){e.isProcessing=!1,e.processDataStatus=t,console.log("this.processDataStatus"),e.processDataStatus?(f().fire({title:"Data processed successfully",text:"For the Batch "+e.responseDto.batchNo}),e.isShow=!0):f().fire("Unable to process.")},function(t){e.isProcessing=!1})):(e.isProcessing=!1,void f().fire("Remark is mandatory for process."))})}},{key:"downloadData",value:function(){console.log("this.responseforfileupload.fileDownloadUrl",this.responseforfileupload.fileDownloadUrl);var e=document.createElement("a");e.setAttribute("target","_blank"),e.setAttribute("href","".concat(this.responseforfileupload.fileDownloadUrl));var t="".concat(this.responseforfileupload.fileDownloadUrl),o=t.substring(t.lastIndexOf("/")+1);e.setAttribute("download","".concat(o)),document.body.appendChild(e),e.click(),e.remove()}},{key:"exit",value:function(){this.responsebutton=!1}},{key:"checkCheckBoxvalue",value:function(e){"false"==this.permission[0]&&(this.enablefilebrowser=!this.enablefilebrowser)}},{key:"getFiledata",value:function(e,t,o,n){var i=this;if(this.showSelectedFilename=!0,console.log(e.target.value),this.fileUploadWrapper.nativeElement.setAttribute("data-text",e.target.files[0].name),console.log(e,t,o,n),!n)return f().fire("Enter the file name"),void this.resetEntries();!t&&!o&&!n&&f().fire("Enter all the field"),console.log("getFiledatafilename",n),this.selectedFiles=e.target.files,this.api.showDetailServiceInExcelDataWithFile(this.selectedFiles.item(0),t,o,n).subscribe(function(t){i.responseforfileupload=t,e&&200==e.status&&e instanceof p.Zn&&f().fire(e.body)})}},{key:"fun",value:function(e){console.log(e),console.log("enters inside fn");var t=null==e?void 0:e.trim();console.log(t),t?(console.log("valid string"),this.space=!0,console.log(this.space)):(console.log("invalid string"),this.space=!1,console.log(this.space))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(A.Y36(D.sM),A.Y36(m.fz),A.Y36(d.qu),A.Y36(q.x),A.Y36(b),A.Y36(l.F0),A.Y36(A.sBO))},e.\u0275cmp=A.Xpm({type:e,selectors:[["npr-file-upload"]],viewQuery:function(e,t){var o;(1&e&&A.Gf(U,5),2&e)&&(A.iGM(o=A.CRH())&&(t.fileUploadWrapper=o.first))},decls:49,vars:14,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],["action","",1,"formStyle",3,"formGroup"],[1,"dbCardStyle"],[1,"row","g-3","pb-3","justify-content-end"],[1,"col-auto"],["class","btn smBtn minWdSmBtn btnPrimary",3,"click",4,"ngIf"],[1,"row","gy-4","align-items-end"],[1,"col-lg-3"],["for","extSystem",1,"formLbl"],[1,"colorRed"],["formControlName","extSysNameData","aria-label","Default select example",1,"form-select",2,"width","200px",3,"disabled","change"],["hidden","","value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","form-select","formControlName","processNameData","aria-label","Default select example",3,"disabled","change",4,"ngIf"],["formControlName","processNameData","type","text","class","form-control","value","",3,"disabled",4,"ngIf"],["for","transactionDate",1,"formLbl"],["id","transactionDate","formControlName","selectorDateData","type","text","value","","readonly","",1,"form-control",3,"disabled"],["formControlName","trncode","aria-label","Default select example",1,"form-select",3,"disabled","change"],["class","col-lg-3",4,"ngIf"],["class","col-lg-5",4,"ngIf"],["class","row g-3 pb-3 justify-content-end pt-4",4,"ngIf"],[1,"titleStyle","mt-2","mb-4","text-end"],[1,"pageTitle","darkgreyClr"],["class","dbCardStyle",4,"ngIf"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[3,"value"],["formControlName","processNameData","aria-label","Default select example",1,"form-select",3,"disabled","change"],["formControlName","processNameData","type","text","value","",1,"form-control",3,"disabled"],["required","","id","fileName","formControlName","fileName","type","text","value","",1,"form-control",3,"disabled","keypress","keyup"],[1,"col-lg-5"],[1,"fileUpload"],[1,"formS"],["data-text","File Upload",1,"file-upload-wrapper"],["fileWrapper",""],["name","file-upload-field","type","file","value","",1,"file-upload-field",3,"disabled","change"],["fileInput",""],[1,"row","g-3","pb-3","justify-content-end","pt-4"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["showText",""],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"indicator-label"],[1,"titleStyle","mt-2","mb-4"],[1,"row","gy-4"],[1,"col-lg-4"],["for","codeLbl",1,"formLbl"],[1,"readonlyText"],["class","readonlyText",4,"ngIf"],[1,"col-lg-6"],["for","remarks",1,"formLbl"],["id","remarks","formControlName","remarks","rows","3","placeholder","Remarks",1,"form-control","textAreaCol",3,"disabled"],["for","overrides",1,"formLbl"],["id","exampleFormControlTextarea1","rows","3",1,"form-control","textAreaCol"],[1,"row","g-3","pb-3","pt-4","justify-content-end"],["showProcess",""],[1,"btn","smBtn","minWdSmBtn","btnDarkGrey",3,"click"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"click"]],template:function(e,t){1&e&&(A.TgZ(0,"div",0),A.TgZ(1,"div",1),A.TgZ(2,"h2",2),A._uU(3,"Upload Excel"),A.qZA(),A.qZA(),A.TgZ(4,"form",3),A.TgZ(5,"div",4),A.TgZ(6,"div",5),A.TgZ(7,"div",6),A.YNc(8,C,2,0,"button",7),A.qZA(),A.qZA(),A.TgZ(9,"div",8),A.TgZ(10,"div",9),A.TgZ(11,"label",10),A._uU(12,"External System Code"),A.TgZ(13,"span",11),A._uU(14,"*"),A.qZA(),A.qZA(),A.TgZ(15,"ng-select",12),A.NdJ("change",function(e){return t.getProcessNamesBasedOnExtSysNameForUpload(e)}),A.TgZ(16,"ng-option",13),A._uU(17,"--Please select--"),A.qZA(),A.YNc(18,y,2,2,"ng-option",14),A.qZA(),A.qZA(),A.TgZ(19,"div",9),A.TgZ(20,"label",10),A._uU(21,"Process Name"),A.TgZ(22,"span",11),A._uU(23,"*"),A.qZA(),A.qZA(),A.YNc(24,S,4,2,"select",15),A.YNc(25,N,1,1,"input",16),A.qZA(),A.TgZ(26,"div",9),A.TgZ(27,"label",17),A._uU(28,"Transaction Date"),A.TgZ(29,"span",11),A._uU(30,"*"),A.qZA(),A.qZA(),A._UZ(31,"input",18),A.qZA(),A.TgZ(32,"div",9),A.TgZ(33,"label",10),A._uU(34,"Transaction Code"),A.TgZ(35,"span",11),A._uU(36,"*"),A.qZA(),A.qZA(),A.TgZ(37,"select",19),A.NdJ("change",function(e){return t.getTrnCode(e.target.value)}),A.TgZ(38,"option",13),A._uU(39,"--Please select--"),A.qZA(),A.YNc(40,O,2,3,"option",14),A.qZA(),A.qZA(),A.YNc(41,w,6,1,"div",20),A.YNc(42,F,7,1,"div",21),A.qZA(),A.YNc(43,k,9,5,"div",22),A.YNc(44,E,7,3,"div",22),A.TgZ(45,"div",23),A.TgZ(46,"h2",24),A._uU(47,"Final excel report can be downloaded from Authorize Excel Screen."),A.qZA(),A.qZA(),A.qZA(),A.YNc(48,Q,57,11,"div",25),A.qZA(),A.qZA()),2&e&&(A.xp6(4),A.Q6J("formGroup",t.uploadExcelForm),A.xp6(4),A.Q6J("ngIf",t.roleCodes.new),A.xp6(7),A.Q6J("disabled",t.dataUploaded),A.xp6(3),A.Q6J("ngForOf",t.allExternalSystemNames),A.xp6(6),A.Q6J("ngIf","select"===t.processNameField),A.xp6(1),A.Q6J("ngIf","text"===t.processNameField),A.xp6(6),A.Q6J("disabled",t.dataUploaded),A.xp6(6),A.Q6J("disabled",t.dataUploaded),A.xp6(3),A.Q6J("ngForOf",t.trnCodeArray),A.xp6(1),A.Q6J("ngIf",t.enablefilebrowser),A.xp6(1),A.Q6J("ngIf",t.enablefilebrowser),A.xp6(1),A.Q6J("ngIf",0==t.autoUpload),A.xp6(1),A.Q6J("ngIf",1==t.autoUpload),A.xp6(4),A.Q6J("ngIf",t.responsebutton))},directives:[d._Y,d.JL,d.sg,r.O5,_.w9,d.JJ,d.u,_.jq,r.sg,d.Fj,d.EJ,d.YN,d.Kr,d.Q7,l.yS],styles:[""]}),e}(),z=s(27721),j=s(92803),G=(s(46481),s(4108)),X=s.n(G),W=s(81770),V=s(17988);function $(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"tr"),A.TgZ(1,"td"),A.TgZ(2,"button",13),A.NdJ("click",function(){var e=A.CHM(o),t=e.$implicit,n=e.index;return A.oxw().queryDetailsDataByParam(t,n)}),A._uU(3," Get Details "),A.qZA(),A.qZA(),A.TgZ(4,"td"),A._uU(5),A.qZA(),A.TgZ(6,"td"),A._uU(7),A.qZA(),A.TgZ(8,"td"),A._uU(9),A.qZA(),A.TgZ(10,"td"),A._uU(11),A.ALo(12,"date"),A.qZA(),A.TgZ(13,"td"),A._uU(14),A.qZA(),A.TgZ(15,"td"),A._uU(16),A.qZA(),A.TgZ(17,"td"),A._uU(18),A.qZA(),A.TgZ(19,"td"),A._uU(20),A.qZA(),A.qZA()}if(2&e){var n=t.$implicit,i=t.index,s=A.oxw();A.xp6(2),A.s9C("id","btnGetDetails"+i),A.xp6(3),A.Oqu(n.externalSysName),A.xp6(2),A.Oqu(n.batchNumber),A.xp6(2),A.Oqu(n.processName),A.xp6(2),A.Oqu(A.xi3(12,9,n.processingDate,"medium")),A.xp6(3),A.Oqu(s.extractFilename(n.fileName)),A.xp6(2),A.Oqu(n.totalNoOfRecord),A.xp6(2),A.Oqu(n.totalCredit),A.xp6(2),A.Oqu(n.totalDebit)}}function K(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"tr"),A.TgZ(1,"td"),A._uU(2),A.qZA(),A.TgZ(3,"td"),A._uU(4),A.qZA(),A.TgZ(5,"td"),A._uU(6),A.qZA(),A.TgZ(7,"td"),A._uU(8),A.qZA(),A.TgZ(9,"td"),A._uU(10),A.qZA(),A.TgZ(11,"td"),A._uU(12),A.qZA(),A.TgZ(13,"td"),A._uU(14),A.qZA(),A.TgZ(15,"td"),A._uU(16),A.qZA(),A.TgZ(17,"td"),A.TgZ(18,"button",14),A.NdJ("click",function(){var e=A.CHM(o).$implicit,t=A.oxw(),n=A.MAs(71);return t.openDialog(n,e)}),A._uU(19," Edit "),A.qZA(),A.qZA(),A.TgZ(20,"td"),A._uU(21),A.qZA(),A.TgZ(22,"td"),A._uU(23),A.qZA(),A.TgZ(24,"td"),A._uU(25),A.qZA(),A.TgZ(26,"td"),A._uU(27),A.qZA(),A.qZA()}if(2&e){var n=t.$implicit;A.xp6(2),A.Oqu(n.account),A.xp6(2),A.Oqu(n.ccyCd),A.xp6(2),A.Oqu(n.id.branchCode),A.xp6(2),A.Oqu(n.amount),A.xp6(2),A.Oqu(n.lcyEquivalent),A.xp6(2),A.Oqu(n.drCr),A.xp6(2),A.Oqu(n.exchRate),A.xp6(2),A.Oqu(n.relatedAccount),A.xp6(5),A.Oqu(n.addlText),A.xp6(2),A.Oqu(n.accDesc),A.xp6(2),A.Oqu(n.errorCode),A.xp6(2),A.Oqu(n.errorDesc)}}function ee(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"div",15),A.TgZ(1,"h2",2),A._uU(2,"Edit Transaction Details"),A.qZA(),A._UZ(3,"br"),A.TgZ(4,"div"),A.TgZ(5,"div",16),A.TgZ(6,"div",17),A.TgZ(7,"label",18),A._uU(8,"Account Number :"),A.qZA(),A.TgZ(9,"input",19),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.account=e}),A.qZA(),A.qZA(),A.TgZ(10,"div",17),A.TgZ(11,"label",18),A._uU(12," Amount :"),A.qZA(),A.TgZ(13,"input",19),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.amount=e}),A.qZA(),A.qZA(),A.TgZ(14,"div",17),A.TgZ(15,"label"),A._uU(16,"Account Currency :"),A.qZA(),A.TgZ(17,"input",20),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.ccyCd=e}),A.qZA(),A.qZA(),A.TgZ(18,"div",17),A.TgZ(19,"label"),A._uU(20,"Account Branch : "),A.qZA(),A.TgZ(21,"input",20),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.accountBranch=e}),A.qZA(),A.qZA(),A.TgZ(22,"div",17),A.TgZ(23,"label"),A._uU(24,"LCY Amount: "),A.qZA(),A.TgZ(25,"input",20),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.lcyEquivalent=e}),A.qZA(),A.qZA(),A.TgZ(26,"div",17),A.TgZ(27,"label"),A._uU(28," Debit / Credit : "),A.qZA(),A.TgZ(29,"input",20),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.drCr=e}),A.qZA(),A.qZA(),A.TgZ(30,"div",17),A.TgZ(31,"label"),A._uU(32," Branch Code: "),A.qZA(),A.TgZ(33,"input",20),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.id.branchCode=e}),A.qZA(),A.qZA(),A.TgZ(34,"div",17),A.TgZ(35,"label"),A._uU(36," Value Date: "),A.qZA(),A.TgZ(37,"p"),A._uU(38),A.ALo(39,"date"),A.qZA(),A.TgZ(40,"input",21),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.valueDate=e}),A.qZA(),A.qZA(),A.TgZ(41,"div",17),A.TgZ(42,"label"),A._uU(43," Initiation Date : "),A.qZA(),A.TgZ(44,"p"),A._uU(45),A.ALo(46,"date"),A.qZA(),A.TgZ(47,"input",21),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.id.initiationDate=e}),A.qZA(),A.qZA(),A.TgZ(48,"div",17),A.TgZ(49,"label"),A._uU(50," Upload Date :"),A.qZA(),A.TgZ(51,"p"),A._uU(52),A.ALo(53,"date"),A.qZA(),A.TgZ(54,"input",21),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.uploadDate=e}),A.qZA(),A.qZA(),A.TgZ(55,"div",17),A.TgZ(56,"label"),A._uU(57," External Reference:"),A.qZA(),A.TgZ(58,"input",21),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.externalRefNo=e}),A.qZA(),A.qZA(),A.TgZ(59,"div",17),A.TgZ(60,"label"),A._uU(61," Related Account :"),A.qZA(),A.TgZ(62,"input",19),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.relatedAccount=e}),A.qZA(),A.qZA(),A.TgZ(63,"div",17),A.TgZ(64,"label"),A._uU(65," Related Customer :"),A.qZA(),A.TgZ(66,"input",19),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.relCust=e}),A.qZA(),A.qZA(),A.TgZ(67,"div",17),A.TgZ(68,"label"),A._uU(69," Exchange Rate :"),A.qZA(),A.TgZ(70,"input",19),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.exchRate=e}),A.qZA(),A.qZA(),A.TgZ(71,"div",17),A.TgZ(72,"label"),A._uU(73," Related Reference :"),A.qZA(),A.TgZ(74,"input",19),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.relatedRef=e}),A.qZA(),A.qZA(),A.TgZ(75,"div",17),A.TgZ(76,"label"),A._uU(77,"Additional Text :"),A.qZA(),A.TgZ(78,"input",19),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.addlText=e}),A.qZA(),A.qZA(),A.TgZ(79,"div",17),A.TgZ(80,"label"),A._uU(81,"Instrument Number :"),A.qZA(),A.TgZ(82,"input",19),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.instrumentNo=e}),A.qZA(),A.qZA(),A.TgZ(83,"div",17),A.TgZ(84,"label"),A._uU(85,"Batch Number :"),A.qZA(),A.TgZ(86,"input",19),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.id.batchNo=e}),A.qZA(),A.qZA(),A.TgZ(87,"div",17),A.TgZ(88,"label"),A._uU(89," Financial Cycle:"),A.qZA(),A.TgZ(90,"input",19),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.finCycle=e}),A.qZA(),A.qZA(),A.TgZ(91,"div",17),A.TgZ(92,"label"),A._uU(93," Period Code:"),A.qZA(),A.TgZ(94,"input",19),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.periodCode=e}),A.qZA(),A.qZA(),A.TgZ(95,"div",17),A.TgZ(96,"label"),A._uU(97," Transaction Code :"),A.qZA(),A.TgZ(98,"input",19),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.txnCode=e}),A.qZA(),A.qZA(),A.TgZ(99,"div",17),A.TgZ(100,"label"),A._uU(101," MIS_CODE:"),A.qZA(),A.TgZ(102,"input",22),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.misCode=e}),A.qZA(),A.qZA(),A.TgZ(103,"div",17),A.TgZ(104,"label"),A._uU(105," POOL_CODE:"),A.qZA(),A.TgZ(106,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.poolCode=e}),A.qZA(),A.qZA(),A.TgZ(107,"div",17),A.TgZ(108,"label"),A._uU(109,"TXN_MIS_1:"),A.qZA(),A.TgZ(110,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.txnMis1=e}),A.qZA(),A.qZA(),A.TgZ(111,"div",17),A.TgZ(112,"label"),A._uU(113,"Error Description:"),A.qZA(),A._UZ(114,"input",24),A.qZA(),A.TgZ(115,"div",17),A.TgZ(116,"label"),A._uU(117,"MIS_GROUP:"),A.qZA(),A.TgZ(118,"input",25),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.misGroup=e}),A.qZA(),A.qZA(),A.TgZ(119,"div",17),A.TgZ(120,"label"),A._uU(121," MIS_FLAG:"),A.qZA(),A.TgZ(122,"input",26),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.misFlag=e}),A.qZA(),A.qZA(),A.TgZ(123,"div",17),A.TgZ(124,"label"),A._uU(125,"TXN_MIS_2:"),A.qZA(),A.TgZ(126,"input",26),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.txnMis2=e}),A.qZA(),A.qZA(),A.TgZ(127,"div",17),A.TgZ(128,"label"),A._uU(129,"MIS_HEAD:"),A.qZA(),A.TgZ(130,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.misHead=e}),A.qZA(),A.qZA(),A.TgZ(131,"div",17),A.TgZ(132,"label"),A._uU(133,"MIS_GROUP_TXN:"),A.qZA(),A.TgZ(134,"input",26),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.misGroupTxn=e}),A.qZA(),A.qZA(),A.TgZ(135,"div",17),A.TgZ(136,"label"),A._uU(137,"TXN_MIS_3:"),A.qZA(),A.TgZ(138,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.txnMis3=e}),A.qZA(),A.qZA(),A.TgZ(139,"div",17),A.TgZ(140,"label"),A._uU(141,"COMP_MIS_1:"),A.qZA(),A.TgZ(142,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.compMis1=e}),A.qZA(),A.qZA(),A.TgZ(143,"div",17),A.TgZ(144,"label"),A._uU(145,"COMP_MIS_3 :"),A.qZA(),A.TgZ(146,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.compMis3=e}),A.qZA(),A.qZA(),A.TgZ(147,"div",17),A.TgZ(148,"label"),A._uU(149,"TXN_MIS_4:"),A.qZA(),A.TgZ(150,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.txnMis4=e}),A.qZA(),A.qZA(),A.TgZ(151,"div",17),A.TgZ(152,"label"),A._uU(153,"COMP_MIS_2:"),A.qZA(),A.TgZ(154,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.compMis2=e}),A.qZA(),A.qZA(),A.TgZ(155,"div",17),A.TgZ(156,"label"),A._uU(157,"COMP_MIS_4:"),A.qZA(),A.TgZ(158,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.compMis4=e}),A.qZA(),A.qZA(),A.TgZ(159,"div",17),A.TgZ(160,"label"),A._uU(161,"TXN_MIS_5:"),A.qZA(),A.TgZ(162,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.txnMis5=e}),A.qZA(),A.qZA(),A.TgZ(163,"div",17),A.TgZ(164,"label"),A._uU(165," COMP_MIS_5:"),A.qZA(),A.TgZ(166,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.compMis5=e}),A.qZA(),A.qZA(),A.TgZ(167,"div",17),A.TgZ(168,"label"),A._uU(169," COST_CODE_1:"),A.qZA(),A.TgZ(170,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.costCode1=e}),A.qZA(),A.qZA(),A.TgZ(171,"div",17),A.TgZ(172,"label"),A._uU(173," TXN_MIS_6:"),A.qZA(),A.TgZ(174,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.txnMis6=e}),A.qZA(),A.qZA(),A.TgZ(175,"div",17),A.TgZ(176,"label"),A._uU(177," COMP_MIS_6:"),A.qZA(),A.TgZ(178,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.compMis6=e}),A.qZA(),A.qZA(),A.TgZ(179,"div",17),A.TgZ(180,"label"),A._uU(181,"COST_CODE_2:"),A.qZA(),A.TgZ(182,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.costCode2=e}),A.qZA(),A.qZA(),A.TgZ(183,"div",17),A.TgZ(184,"label"),A._uU(185,"TXN_MIS_7:"),A.qZA(),A.TgZ(186,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.txnMis7=e}),A.qZA(),A.qZA(),A.TgZ(187,"div",17),A.TgZ(188,"label"),A._uU(189,"COMP_MIS_7:"),A.qZA(),A.TgZ(190,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.compMis7=e}),A.qZA(),A.qZA(),A.TgZ(191,"div",17),A.TgZ(192,"label"),A._uU(193,"COST_CODE_3:"),A.qZA(),A.TgZ(194,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.costCode3=e}),A.qZA(),A.qZA(),A.TgZ(195,"div",17),A.TgZ(196,"label"),A._uU(197,"TXN_MIS_8:"),A.qZA(),A.TgZ(198,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.txnMis8=e}),A.qZA(),A.qZA(),A.TgZ(199,"div",17),A.TgZ(200,"label"),A._uU(201,"COMP_MIS_8:"),A.qZA(),A.TgZ(202,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.compMis8=e}),A.qZA(),A.qZA(),A.TgZ(203,"div",17),A.TgZ(204,"label"),A._uU(205," COST_CODE_4 :"),A.qZA(),A.TgZ(206,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.costCode4=e}),A.qZA(),A.qZA(),A.TgZ(207,"div",17),A.TgZ(208,"label"),A._uU(209,"TXN_MIS_9:"),A.qZA(),A.TgZ(210,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.txnMis9=e}),A.qZA(),A.qZA(),A.TgZ(211,"div",17),A.TgZ(212,"label"),A._uU(213,"COMP_MIS_9:"),A.qZA(),A.TgZ(214,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.compMis9=e}),A.qZA(),A.qZA(),A.TgZ(215,"div",17),A.TgZ(216,"label"),A._uU(217,"COST_CODE_5:"),A.qZA(),A.TgZ(218,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.costCode5=e}),A.qZA(),A.qZA(),A.TgZ(219,"div",17),A.TgZ(220,"label"),A._uU(221,"TXN_MIS_10:"),A.qZA(),A.TgZ(222,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.txnMis10=e}),A.qZA(),A.qZA(),A.TgZ(223,"div",17),A.TgZ(224,"label"),A._uU(225,"COMP_MIS_10:"),A.qZA(),A.TgZ(226,"input",23),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.compMis10=e}),A.qZA(),A.qZA(),A.TgZ(227,"div",17),A.TgZ(228,"label"),A._uU(229,"UPLOAD STATUS:"),A.qZA(),A.TgZ(230,"input",19),A.NdJ("ngModelChange",function(e){return A.CHM(o),A.oxw().responseDto.uploadStat=e}),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A._UZ(231,"br"),A.TgZ(232,"p",27),A.TgZ(233,"button",14),A.NdJ("click",function(){A.CHM(o);var e=A.oxw();return e.insertModifiedDataIntoDetailsData(e.responseDto)}),A._uU(234," Save Data "),A.qZA(),A._uU(235,"\xa0\xa0 "),A.TgZ(236,"button",28),A.NdJ("click",function(){return A.CHM(o).$implicit.dismiss("Cross click")}),A._uU(237,"Exit"),A.qZA(),A.qZA(),A.qZA()}if(2&e){var n=A.oxw();A.xp6(9),A.Q6J("ngModel",n.responseDto.account),A.xp6(4),A.Q6J("ngModel",n.responseDto.amount),A.xp6(4),A.Q6J("ngModel",n.responseDto.ccyCd),A.xp6(4),A.Q6J("ngModel",n.responseDto.accountBranch),A.xp6(4),A.Q6J("ngModel",n.responseDto.lcyEquivalent),A.xp6(4),A.Q6J("ngModel",n.responseDto.drCr),A.xp6(4),A.Q6J("ngModel",n.responseDto.id.branchCode),A.xp6(5),A.Oqu(A.lcZ(39,56,n.responseDto.valueDate)),A.xp6(2),A.Q6J("ngModel",n.responseDto.valueDate),A.xp6(5),A.Oqu(A.lcZ(46,58,n.responseDto.id.initiationDate)),A.xp6(2),A.Q6J("ngModel",n.responseDto.id.initiationDate),A.xp6(5),A.Oqu(A.lcZ(53,60,n.responseDto.uploadDate)),A.xp6(2),A.Q6J("ngModel",n.responseDto.uploadDate),A.xp6(4),A.Q6J("ngModel",n.responseDto.externalRefNo),A.xp6(4),A.Q6J("ngModel",n.responseDto.relatedAccount),A.xp6(4),A.Q6J("ngModel",n.responseDto.relCust),A.xp6(4),A.Q6J("ngModel",n.responseDto.exchRate),A.xp6(4),A.Q6J("ngModel",n.responseDto.relatedRef),A.xp6(4),A.Q6J("ngModel",n.responseDto.addlText),A.xp6(4),A.Q6J("ngModel",n.responseDto.instrumentNo),A.xp6(4),A.Q6J("ngModel",n.responseDto.id.batchNo),A.xp6(4),A.Q6J("ngModel",n.responseDto.finCycle),A.xp6(4),A.Q6J("ngModel",n.responseDto.periodCode),A.xp6(4),A.Q6J("ngModel",n.responseDto.txnCode),A.xp6(4),A.Q6J("ngModel",n.responseDto.misCode),A.xp6(4),A.Q6J("ngModel",n.responseDto.poolCode),A.xp6(4),A.Q6J("ngModel",n.responseDto.txnMis1),A.xp6(8),A.Q6J("ngModel",n.responseDto.misGroup),A.xp6(4),A.Q6J("ngModel",n.responseDto.misFlag),A.xp6(4),A.Q6J("ngModel",n.responseDto.txnMis2),A.xp6(4),A.Q6J("ngModel",n.responseDto.misHead),A.xp6(4),A.Q6J("ngModel",n.responseDto.misGroupTxn),A.xp6(4),A.Q6J("ngModel",n.responseDto.txnMis3),A.xp6(4),A.Q6J("ngModel",n.responseDto.compMis1),A.xp6(4),A.Q6J("ngModel",n.responseDto.compMis3),A.xp6(4),A.Q6J("ngModel",n.responseDto.txnMis4),A.xp6(4),A.Q6J("ngModel",n.responseDto.compMis2),A.xp6(4),A.Q6J("ngModel",n.responseDto.compMis4),A.xp6(4),A.Q6J("ngModel",n.responseDto.txnMis5),A.xp6(4),A.Q6J("ngModel",n.responseDto.compMis5),A.xp6(4),A.Q6J("ngModel",n.responseDto.costCode1),A.xp6(4),A.Q6J("ngModel",n.responseDto.txnMis6),A.xp6(4),A.Q6J("ngModel",n.responseDto.compMis6),A.xp6(4),A.Q6J("ngModel",n.responseDto.costCode2),A.xp6(4),A.Q6J("ngModel",n.responseDto.txnMis7),A.xp6(4),A.Q6J("ngModel",n.responseDto.compMis7),A.xp6(4),A.Q6J("ngModel",n.responseDto.costCode3),A.xp6(4),A.Q6J("ngModel",n.responseDto.txnMis8),A.xp6(4),A.Q6J("ngModel",n.responseDto.compMis8),A.xp6(4),A.Q6J("ngModel",n.responseDto.costCode4),A.xp6(4),A.Q6J("ngModel",n.responseDto.txnMis9),A.xp6(4),A.Q6J("ngModel",n.responseDto.compMis9),A.xp6(4),A.Q6J("ngModel",n.responseDto.costCode5),A.xp6(4),A.Q6J("ngModel",n.responseDto.txnMis10),A.xp6(4),A.Q6J("ngModel",n.responseDto.compMis10),A.xp6(4),A.Q6J("ngModel",n.responseDto.uploadStat)}}var te=function(){var e=function(){function e(t,o,n,s){i(this,e),this.api=t,this.userApi=o,this.excelService=n,this.modalService=s,this.respArray=[],this.closeResult="",this.dtOptions={},this.dtTrigger1=new T.xQ,this.dtTrigger2=new T.xQ,this.pendingForAuthData=[],this.PendingForAuthDetailsDTOList=[],this.flag=!0,this.dataModificationDetailsAuditLog=new j.n}return n(e,[{key:"queryDetailsDataByParam",value:function(e,t){var o=this,n=document.getElementById("btnGetDetails"+t);n.innerHTML='<span class="indicator-progress" >Please wait... <span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>',this.spinner1=!0,this.getDetailsQueryToggleReqDTO=new z.AJ,this.getDetailsQueryToggleReqDTO.externalSysName=e.externalSysName,this.getDetailsQueryToggleReqDTO.processName=e.processName,this.getDetailsQueryToggleReqDTO.processingDate=e.processingDate,this.getDetailsQueryToggleReqDTO.currency=e.currency,this.getDetailsQueryToggleReqDTO.filename=e.fileName,this.getDetailsQueryToggleReqDTO.batchNumber=e.batchNumber,this.api.queryFailedDetailsDataByParamService(this.getDetailsQueryToggleReqDTO).subscribe(function(e){o.PendingForAuthDetailsDTOList=e,n.innerHTML="<span>Get Details</span>",o.dtTrigger2.next(),console.log(o.PendingForAuthDetailsDTOList),o.PendingForAuthDetailsDTOList?(console.log(o.PendingForAuthDetailsDTOList[0].inputBy),o.audit=!0,o.flag=!0,o.dataAvail=!0,o.spinner1=!1):f().fire("No Data")})}},{key:"ngOnInit",value:function(){this.PendingForAuthDetailsDTOList={},this.user_id=localStorage.getItem("userFromLogin").replace(/['"]+/g,""),this.role=sessionStorage.getItem("user_role"),this.getPendingForAuthData(),this.dtOptions[0]={pagingType:"full_numbers",pageLength:5,columnDefs:[{type:"date",targets:[4]}],processing:!0,lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]]},this.dtOptions[1]={pagingType:"full_numbers",pageLength:5,processing:!0,retrieve:!0,lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]]}}},{key:"ngOnDestroy",value:function(){this.dtTrigger1.unsubscribe(),this.dtTrigger2.unsubscribe()}},{key:"extractFilename",value:function(e){var t=e.split("/");return t[t.length-1]}},{key:"screenpermission",value:function(){var e=this;this.screenName="DataModificationDetails",this.userApi.getRoleScreenPermission(this.user_id,this.screenName,this.role).subscribe(function(t){e.rolepermission=t,console.log(e.rolepermission),e.rolepermission&&(e.button_permission=e.rolepermission[0],console.log(e.button_permission))})}},{key:"getPendingForAuthData",value:function(){var e=this;this.api.getPendingForAuthDataForModification(this.user_id).subscribe(function(t){e.pendingForAuthData=t,e.dtTrigger1.next(),console.log(e.pendingForAuthData)})}},{key:"openSnackBar",value:function(e,t){f().fire(e)}},{key:"approveAndProcess",value:function(){var e=this;this.flag=!1,this.api.excelModifyAuthorization(this.PendingForAuthDetailsDTOList,this.user_id).subscribe(function(t){e.authRes=t,console.log(e.authRes),e.authRes?f().fire("Data Send for Authorization. After Authorization you can process the data."):f().fire("Authorization Failed.")})}},{key:"getAllDetailsData",value:function(){var e=this;this.api.getFailedDetailsListService().subscribe(function(t){e.PendingForAuthDetailsDTOList=t,e.dtTrigger2.next()})}},{key:"openDialog",value:function(e,t){var o=this;console.log(e,"DetailsDTO"),console.log(t,"data"),this.responseDto=t,this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",windowClass:"my-class"}).result.then(function(e){o.closeResult="Closed with: ".concat(e)},function(e){o.closeResult="Dismissed ".concat(o.getDismissReason(e))})}},{key:"getDismissReason",value:function(e){return e===W.If.ESC?"by pressing ESC":e===W.If.BACKDROP_CLICK?"by clicking on a backdrop":"with: ".concat(e)}},{key:"insertModifiedDataIntoDetailsData",value:function(e){var t=this;this.api.sendUpdatedDataToDetailsData(e,this.user_id).subscribe(function(e){t.status=e,console.log("insertion status: "+t.status),!0===t.status&&f().fire("data saved successfully.","success"),!1===t.status&&f().fire({icon:"error",text:"data save to DB Failed."})})}},{key:"openDialog1",value:function(e){console.log(e)}},{key:"downloadData",value:function(){this.modify=!0,console.log("response"+this.PendingForAuthDetailsDTOList),this.excelService.exportAsExcelFile(this.PendingForAuthDetailsDTOList,"Excel_Error_Auth")}},{key:"convert",value:function(){var e=new(X()),t=[];this.PendingForAuthDetailsDTOList.forEach(function(e){t.push([e.account,e.amount,e.txnCode,e.exchRate,e.valueDate,e.deleteStat])}),e.autoTable({head:[["Account","Amount","txnCode","exchRate","valueDate","deleteStat"]],body:t}),e.save("Excel.pdf")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(A.Y36(D.sM),A.Y36(m.fz),A.Y36(q.x),A.Y36(W.FF))},e.\u0275cmp=A.Xpm({type:e,selectors:[["npr-rejection-queue"]],decls:72,vars:6,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"dbCardStyle","table-responsive"],["id","dbTable1","datatable","",1,"dataTable","table","tableStyle","nowrap","vAlignMdl",2,"width","100%",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[1,"dbCardStyle"],[1,"pageTitle","my-3","text-center"],[1,"table-responsive"],["id","dbTable2","datatable","",1,"table","tableStyle","tableStyleSelect","nowrap","vAlignMdl",2,"width","100%",3,"dtOptions","dtTrigger"],[1,"btnCol","mt-md-4","mt-3"],[1,"btn","smBtn","btnDarkGrey",3,"click"],["content",""],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"id","click"],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"click"],[1,"templatecontent"],[1,"row","gy-4"],[1,"col-lg-2"],[1,"formLbl"],["type","text",3,"ngModel","ngModelChange"],["type","text","maxlength","3",3,"ngModel","ngModelChange"],["type","date",3,"ngModel","ngModelChange"],["type","text","maxlength","4",3,"ngModel","ngModelChange"],["type","text","maxlength","9",3,"ngModel","ngModelChange"],["type","text"],["type","text","maxlength","10",3,"ngModel","ngModelChange"],["type","text","maxlength","1",3,"ngModel","ngModelChange"],[2,"margin-left","80%"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"click"]],template:function(e,t){1&e&&(A.TgZ(0,"div",0),A.TgZ(1,"div",1),A.TgZ(2,"h2",2),A._uU(3,"Rejection Queue"),A.qZA(),A.qZA(),A.TgZ(4,"div",3),A.TgZ(5,"table",4),A.TgZ(6,"thead"),A.TgZ(7,"tr"),A.TgZ(8,"th"),A._uU(9,"process detail"),A.qZA(),A.TgZ(10,"th"),A._uU(11,"external system"),A.qZA(),A.TgZ(12,"th"),A._uU(13,"batch number"),A.qZA(),A.TgZ(14,"th"),A._uU(15,"process name"),A.qZA(),A.TgZ(16,"th"),A._uU(17,"processing date"),A.qZA(),A.TgZ(18,"th"),A._uU(19,"file name"),A.qZA(),A.TgZ(20,"th"),A._uU(21,"total record"),A.qZA(),A.TgZ(22,"th"),A._uU(23,"total credit"),A.qZA(),A.TgZ(24,"th"),A._uU(25,"total debit"),A.qZA(),A.qZA(),A.qZA(),A.TgZ(26,"tbody"),A.YNc(27,$,21,12,"tr",5),A.qZA(),A.qZA(),A.qZA(),A.TgZ(28,"div",6),A.TgZ(29,"h2",7),A._uU(30,"Failed Data"),A.qZA(),A.TgZ(31,"div",8),A.TgZ(32,"table",9),A.TgZ(33,"thead"),A.TgZ(34,"tr"),A.TgZ(35,"th"),A._uU(36,"account"),A.qZA(),A.TgZ(37,"th"),A._uU(38,"currency"),A.qZA(),A.TgZ(39,"th"),A._uU(40,"branch"),A.qZA(),A.TgZ(41,"th"),A._uU(42,"amount"),A.qZA(),A.TgZ(43,"th"),A._uU(44,"lcy ammount"),A.qZA(),A.TgZ(45,"th"),A._uU(46,"dR/cr"),A.qZA(),A.TgZ(47,"th"),A._uU(48,"exchange rate"),A.qZA(),A.TgZ(49,"th"),A._uU(50,"Related Account"),A.qZA(),A.TgZ(51,"th"),A._uU(52,"Process"),A.qZA(),A.TgZ(53,"th"),A._uU(54,"add text"),A.qZA(),A.TgZ(55,"th"),A._uU(56,"account description"),A.qZA(),A.TgZ(57,"th"),A._uU(58,"Error Code"),A.qZA(),A.TgZ(59,"th"),A._uU(60,"Error Description"),A.qZA(),A.qZA(),A.qZA(),A.TgZ(61,"tbody"),A.YNc(62,K,28,12,"tr",5),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(63,"div",10),A.TgZ(64,"button",11),A.NdJ("click",function(){return t.downloadData()}),A._uU(65,"Export Excel"),A.qZA(),A._uU(66,"\xa0 "),A.TgZ(67,"button",11),A.NdJ("click",function(){return t.convert()}),A._uU(68,"Export PDF"),A.qZA(),A._uU(69,"\xa0 "),A.qZA(),A.qZA(),A.YNc(70,ee,238,62,"ng-template",null,12,A.W1O)),2&e&&(A.xp6(5),A.Q6J("dtOptions",t.dtOptions[0])("dtTrigger",t.dtTrigger1),A.xp6(22),A.Q6J("ngForOf",t.pendingForAuthData),A.xp6(5),A.Q6J("dtOptions",t.dtOptions[1])("dtTrigger",t.dtTrigger2),A.xp6(30),A.Q6J("ngForOf",t.PendingForAuthDetailsDTOList))},directives:[V.G,r.sg,d.Fj,d.JJ,d.On,d.nD],pipes:[r.uU],styles:["table.tableStyle[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#a6aab5;font-size:9px;text-transform:uppercase;letter-spacing:1px;padding:16px 13px;border-bottom:1px solid #F5F5F5}.templatecontent[_ngcontent-%COMP%]{margin-left:2%}  .my-class .modal-dialog{max-width:90%;width:100%}"]}),e}(),oe=n(function e(){i(this,e)}),ne=s(17283);function ie(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"tr"),A.TgZ(1,"td"),A.TgZ(2,"button",11),A.NdJ("click",function(){var e=A.CHM(o),t=e.$implicit,n=e.index;return A.oxw().queryDetailsDataByParam(t,n)}),A._uU(3," Get Details "),A.qZA(),A.qZA(),A.TgZ(4,"td"),A._uU(5),A.qZA(),A.TgZ(6,"td"),A._uU(7),A.qZA(),A.TgZ(8,"td"),A._uU(9),A.qZA(),A.TgZ(10,"td"),A._uU(11),A.qZA(),A.TgZ(12,"td"),A._uU(13),A.qZA(),A.TgZ(14,"td"),A._uU(15),A.ALo(16,"date"),A.qZA(),A.TgZ(17,"td"),A._uU(18),A.qZA(),A.TgZ(19,"td"),A._uU(20),A.qZA(),A.TgZ(21,"td"),A._uU(22),A.qZA(),A.TgZ(23,"td"),A._uU(24),A.qZA(),A.TgZ(25,"td"),A._uU(26),A.qZA(),A.TgZ(27,"td"),A._uU(28),A.qZA(),A.qZA()}if(2&e){var n=t.$implicit,i=t.index;A.xp6(2),A.s9C("id","btnGetDetails"+i),A.xp6(3),A.Oqu(n.externalSysName),A.xp6(2),A.Oqu(n.currency),A.xp6(2),A.Oqu(n.inputBy),A.xp6(2),A.Oqu(n.batchNumber),A.xp6(2),A.Oqu(n.processName),A.xp6(2),A.Oqu(A.xi3(16,13,n.processingDate,"medium")),A.xp6(3),A.Oqu(n.authStatus),A.xp6(2),A.Oqu(n.uploadStatus),A.xp6(2),A.Oqu(n.fileName),A.xp6(2),A.Oqu(n.totalNoOfRecord),A.xp6(2),A.Oqu(n.totalCredit),A.xp6(2),A.Oqu(n.totalDebit)}}function se(e,t){if(1&e&&(A.TgZ(0,"div",18),A.TgZ(1,"div",19),A.TgZ(2,"label"),A._uU(3,"Remarks"),A.qZA(),A.TgZ(4,"textarea",20),A._uU(5),A.qZA(),A.qZA(),A.TgZ(6,"div",19),A.TgZ(7,"label"),A._uU(8,"Overrides"),A.qZA(),A.TgZ(9,"textarea",20),A._uU(10),A.qZA(),A.qZA(),A.qZA()),2&e){var o=A.oxw(2);A.xp6(5),A.Oqu(o.remarks),A.xp6(5),A.Oqu(o.overrides)}}function ae(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"tr"),A.TgZ(1,"td"),A.TgZ(2,"div",21),A._uU(3),A.qZA(),A.qZA(),A.TgZ(4,"td"),A.TgZ(5,"div",21),A._uU(6),A.qZA(),A.qZA(),A.TgZ(7,"td"),A.TgZ(8,"div",21),A._uU(9),A.qZA(),A.qZA(),A.TgZ(10,"td"),A.TgZ(11,"div",21),A._uU(12),A.qZA(),A.qZA(),A.TgZ(13,"td"),A.TgZ(14,"div",21),A._uU(15),A.qZA(),A.qZA(),A.TgZ(16,"td"),A.TgZ(17,"div",21),A._uU(18),A.qZA(),A.qZA(),A.TgZ(19,"td"),A.TgZ(20,"div",21),A._uU(21),A.qZA(),A.qZA(),A.TgZ(22,"td"),A.TgZ(23,"div",21),A._uU(24),A.qZA(),A.qZA(),A.TgZ(25,"td"),A.TgZ(26,"div",21),A._uU(27),A.qZA(),A.qZA(),A.TgZ(28,"td"),A.TgZ(29,"div",21),A._uU(30),A.qZA(),A.qZA(),A.TgZ(31,"td"),A.TgZ(32,"div",21),A._uU(33),A.qZA(),A.qZA(),A.TgZ(34,"td"),A.TgZ(35,"button",22),A.NdJ("click",function(){var e=A.CHM(o).$implicit,t=A.oxw(2),n=A.MAs(43);return t.openDialog(n,e)}),A._uU(36," View "),A.qZA(),A.qZA(),A.qZA()}if(2&e){var n=t.$implicit;A.xp6(3),A.Oqu(n.account),A.xp6(3),A.Oqu(n.ccyCd),A.xp6(3),A.Oqu(n.id.branchCode),A.xp6(3),A.Oqu(n.amount),A.xp6(3),A.Oqu(n.lcyEquivalent),A.xp6(3),A.Oqu(n.drCr),A.xp6(3),A.Oqu(n.exchRate),A.xp6(3),A.Oqu(n.relatedAccount),A.xp6(3),A.Oqu(n.addlText),A.xp6(3),A.Oqu(n.accDesc),A.xp6(3),A.Oqu(n.acumenJournal)}}function re(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"button",23),A.NdJ("click",function(){return A.CHM(o),A.oxw(2).downloadData()}),A._uU(1,"Export Excel"),A.qZA()}}function le(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"button",23),A.NdJ("click",function(){return A.CHM(o),A.oxw(2).convert()}),A._uU(1,"Export PDF"),A.qZA()}}function ue(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"button",22),A.NdJ("click",function(){return A.CHM(o),A.oxw(2).approveDetailsData()}),A._uU(1," Approve and Process "),A.qZA()}}function ce(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"button",22),A.NdJ("click",function(){return A.CHM(o),A.oxw(2).reject()}),A._uU(1," Reject "),A.qZA()}}function de(e,t){if(1&e&&(A.TgZ(0,"div",12),A.TgZ(1,"div"),A.YNc(2,se,11,2,"div",13),A.qZA(),A.TgZ(3,"table",14),A.TgZ(4,"thead"),A.TgZ(5,"tr"),A.TgZ(6,"th"),A._uU(7,"account"),A.qZA(),A.TgZ(8,"th"),A._uU(9,"currency"),A.qZA(),A.TgZ(10,"th"),A._uU(11,"branch"),A.qZA(),A.TgZ(12,"th"),A._uU(13,"amount"),A.qZA(),A.TgZ(14,"th"),A._uU(15,"lcy ammount"),A.qZA(),A.TgZ(16,"th"),A._uU(17,"dR/cr"),A.qZA(),A.TgZ(18,"th"),A._uU(19,"exchange rate"),A.qZA(),A.TgZ(20,"th"),A._uU(21,"related acc"),A.qZA(),A.TgZ(22,"th"),A._uU(23,"add text"),A.qZA(),A.TgZ(24,"th"),A._uU(25,"account description"),A.qZA(),A.TgZ(26,"th"),A._uU(27,"Treasury Reference"),A.qZA(),A.TgZ(28,"th"),A._uU(29,"Process"),A.qZA(),A.qZA(),A.qZA(),A.TgZ(30,"tbody"),A.YNc(31,ae,37,11,"tr",8),A.qZA(),A.qZA(),A.TgZ(32,"div",15),A.YNc(33,re,2,0,"button",16),A._uU(34,"\xa0 "),A.YNc(35,le,2,0,"button",16),A._uU(36,"\xa0 "),A.YNc(37,ue,2,0,"button",17),A._uU(38,"\xa0 "),A.YNc(39,ce,2,0,"button",17),A.qZA(),A.qZA()),2&e){var o=A.oxw();A.xp6(2),A.Q6J("ngIf",o.flag),A.xp6(1),A.Q6J("dtOptions",o.dtOptions[1])("dtTrigger",o.dtTrigger2),A.xp6(28),A.Q6J("ngForOf",o.pendingForAuthDetailsDTOList),A.xp6(2),A.Q6J("ngIf",o.button1),A.xp6(2),A.Q6J("ngIf",o.button1),A.xp6(2),A.Q6J("ngIf",o.approveButtonStatus&&o.roleCodes.auth),A.xp6(2),A.Q6J("ngIf",o.approveButtonStatus&&o.roleCodes.auth)}}function ge(e,t){if(1&e){var o=A.EpF();A.TgZ(0,"div",0),A.TgZ(1,"div",1),A.TgZ(2,"h2",2),A._uU(3,"Transaction Details"),A.qZA(),A.qZA(),A.TgZ(4,"div"),A.TgZ(5,"div",3),A.TgZ(6,"div",24),A.TgZ(7,"div",25),A.TgZ(8,"label",26),A._uU(9,"Account Number"),A.qZA(),A._UZ(10,"input",27),A.qZA(),A.TgZ(11,"div",25),A.TgZ(12,"label",26),A._uU(13,"Amount"),A.qZA(),A._UZ(14,"input",27),A.qZA(),A.TgZ(15,"div",25),A.TgZ(16,"label",26),A._uU(17,"Account Currency"),A.qZA(),A._UZ(18,"input",27),A.qZA(),A.TgZ(19,"div",25),A.TgZ(20,"label",26),A._uU(21,"Account Branch"),A.qZA(),A._UZ(22,"input",27),A.qZA(),A.TgZ(23,"div",25),A.TgZ(24,"label",26),A._uU(25," LCY Amount"),A.qZA(),A._UZ(26,"input",27),A.qZA(),A.TgZ(27,"div",25),A.TgZ(28,"label",26),A._uU(29," Debit / Credit "),A.qZA(),A._UZ(30,"input",27),A.qZA(),A.TgZ(31,"div",25),A.TgZ(32,"label",26),A._uU(33," Branch Code "),A.qZA(),A._UZ(34,"input",27),A.qZA(),A.TgZ(35,"div",25),A.TgZ(36,"label",26),A._uU(37," Value Date "),A.qZA(),A._UZ(38,"input",27),A.ALo(39,"date"),A.qZA(),A.TgZ(40,"div",25),A.TgZ(41,"label",26),A._uU(42," Initiation Date "),A.qZA(),A._UZ(43,"input",27),A.ALo(44,"date"),A.qZA(),A.TgZ(45,"div",25),A.TgZ(46,"label",26),A._uU(47," External Reference "),A.qZA(),A._UZ(48,"input",27),A.qZA(),A.TgZ(49,"div",25),A.TgZ(50,"label",26),A._uU(51," Related Account "),A.qZA(),A._UZ(52,"input",27),A.qZA(),A.TgZ(53,"div",25),A.TgZ(54,"label",26),A._uU(55," Related Customer "),A.qZA(),A._UZ(56,"input",27),A.qZA(),A.TgZ(57,"div",25),A.TgZ(58,"label",26),A._uU(59," Exchange Rate "),A.qZA(),A._UZ(60,"input",27),A.qZA(),A.TgZ(61,"div",25),A.TgZ(62,"label",26),A._uU(63," Related Reference "),A.qZA(),A._UZ(64,"input",27),A.qZA(),A.TgZ(65,"div",25),A.TgZ(66,"label",26),A._uU(67," Additional Text "),A.qZA(),A._UZ(68,"input",27),A.qZA(),A.TgZ(69,"div",25),A.TgZ(70,"label",26),A._uU(71," Instrument Number "),A.qZA(),A._UZ(72,"input",27),A.qZA(),A.TgZ(73,"div",25),A.TgZ(74,"label",26),A._uU(75," Batch Number "),A.qZA(),A._UZ(76,"input",27),A.qZA(),A.TgZ(77,"div",25),A.TgZ(78,"label",26),A._uU(79," Upload Date "),A.qZA(),A._UZ(80,"input",27),A.qZA(),A.TgZ(81,"div",25),A.TgZ(82,"label",26),A._uU(83," Financial Cycle "),A.qZA(),A._UZ(84,"input",27),A.qZA(),A.TgZ(85,"div",25),A.TgZ(86,"label",26),A._uU(87," Period Code "),A.qZA(),A._UZ(88,"input",27),A.qZA(),A.TgZ(89,"div",25),A.TgZ(90,"label",26),A._uU(91," Transaction Code "),A.qZA(),A._UZ(92,"input",27),A.qZA(),A.TgZ(93,"div",25),A.TgZ(94,"label",26),A._uU(95," MIS_CODE "),A.qZA(),A._UZ(96,"input",27),A.qZA(),A.TgZ(97,"div",25),A.TgZ(98,"label",26),A._uU(99," POOL_CODE "),A.qZA(),A._UZ(100,"input",27),A.qZA(),A.TgZ(101,"div",25),A.TgZ(102,"label",26),A._uU(103," TXN_MIS_1 "),A.qZA(),A._UZ(104,"input",27),A.qZA(),A.TgZ(105,"div",25),A.TgZ(106,"label",26),A._uU(107," MIS_GROUP "),A.qZA(),A._UZ(108,"input",27),A.qZA(),A.TgZ(109,"div",25),A.TgZ(110,"label",26),A._uU(111," MIS_FLAG "),A.qZA(),A._UZ(112,"input",27),A.qZA(),A.TgZ(113,"div",25),A.TgZ(114,"label",26),A._uU(115," TXN_MIS_2 "),A.qZA(),A._UZ(116,"input",27),A.qZA(),A.TgZ(117,"div",25),A.TgZ(118,"label",26),A._uU(119," MIS_HEAD "),A.qZA(),A._UZ(120,"input",27),A.qZA(),A.TgZ(121,"div",25),A.TgZ(122,"label",26),A._uU(123," MIS_GROUP_TXN "),A.qZA(),A._UZ(124,"input",27),A.qZA(),A.TgZ(125,"div",25),A.TgZ(126,"label",26),A._uU(127," TXN_MIS_3 "),A.qZA(),A._UZ(128,"input",27),A.qZA(),A.TgZ(129,"div",25),A.TgZ(130,"label",26),A._uU(131," COMP_MIS_1 "),A.qZA(),A._UZ(132,"input",27),A.qZA(),A.TgZ(133,"div",25),A.TgZ(134,"label",26),A._uU(135," COMP_MIS_3 "),A.qZA(),A._UZ(136,"input",27),A.qZA(),A.TgZ(137,"div",25),A.TgZ(138,"label",26),A._uU(139," TXN_MIS_4 "),A.qZA(),A._UZ(140,"input",27),A.qZA(),A.TgZ(141,"div",25),A.TgZ(142,"label",26),A._uU(143," COMP_MIS_2 "),A.qZA(),A._UZ(144,"input",27),A.qZA(),A.TgZ(145,"div",25),A.TgZ(146,"label",26),A._uU(147," COMP_MIS_4 "),A.qZA(),A._UZ(148,"input",27),A.qZA(),A.TgZ(149,"div",25),A.TgZ(150,"label",26),A._uU(151," TXN_MIS_5 "),A.qZA(),A._UZ(152,"input",27),A.qZA(),A.TgZ(153,"div",25),A.TgZ(154,"label",26),A._uU(155," COMP_MIS_5 "),A.qZA(),A._UZ(156,"input",27),A.qZA(),A.TgZ(157,"div",25),A.TgZ(158,"label",26),A._uU(159," COST_CODE_1 "),A.qZA(),A._UZ(160,"input",27),A.qZA(),A.TgZ(161,"div",25),A.TgZ(162,"label",26),A._uU(163," TXN_MIS_6 "),A.qZA(),A._UZ(164,"input",27),A.qZA(),A.TgZ(165,"div",25),A.TgZ(166,"label",26),A._uU(167," COMP_MIS_6 "),A.qZA(),A._UZ(168,"input",27),A.qZA(),A.TgZ(169,"div",25),A.TgZ(170,"label",26),A._uU(171," COST_CODE_2 "),A.qZA(),A._UZ(172,"input",27),A.qZA(),A.TgZ(173,"div",25),A.TgZ(174,"label",26),A._uU(175," TXN_MIS_7 "),A.qZA(),A._UZ(176,"input",27),A.qZA(),A.TgZ(177,"div",25),A.TgZ(178,"label",26),A._uU(179," COMP_MIS_7 "),A.qZA(),A._UZ(180,"input",27),A.qZA(),A.TgZ(181,"div",25),A.TgZ(182,"label",26),A._uU(183," COST_CODE_3 "),A.qZA(),A._UZ(184,"input",27),A.qZA(),A.TgZ(185,"div",25),A.TgZ(186,"label",26),A._uU(187," TXN_MIS_8 "),A.qZA(),A._UZ(188,"input",27),A.qZA(),A.TgZ(189,"div",25),A.TgZ(190,"label",26),A._uU(191," COMP_MIS_8 "),A.qZA(),A._UZ(192,"input",27),A.qZA(),A.TgZ(193,"div",25),A.TgZ(194,"label",26),A._uU(195," COST_CODE_4 "),A.qZA(),A._UZ(196,"input",27),A.qZA(),A.TgZ(197,"div",25),A.TgZ(198,"label",26),A._uU(199," TXN_MIS_9 "),A.qZA(),A._UZ(200,"input",27),A.qZA(),A.TgZ(201,"div",25),A.TgZ(202,"label",26),A._uU(203," COMP_MIS_9 "),A.qZA(),A._UZ(204,"input",27),A.qZA(),A.TgZ(205,"div",25),A.TgZ(206,"label",26),A._uU(207," COST_CODE_5 "),A.qZA(),A._UZ(208,"input",27),A.qZA(),A.TgZ(209,"div",25),A.TgZ(210,"label",26),A._uU(211," TXN_MIS_10 "),A.qZA(),A._UZ(212,"input",27),A.qZA(),A.TgZ(213,"div",25),A.TgZ(214,"label",26),A._uU(215," COMP_MIS_10 "),A.qZA(),A._UZ(216,"input",27),A.qZA(),A.TgZ(217,"div",25),A.TgZ(218,"label",26),A._uU(219," UDF DETAILS "),A.qZA(),A._UZ(220,"input",27),A.qZA(),A.TgZ(221,"div",25),A.TgZ(222,"label",26),A._uU(223," UPLOAD STATUS "),A.qZA(),A._UZ(224,"input",28),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(225,"div",29),A.TgZ(226,"div",30),A.TgZ(227,"button",31),A.NdJ("click",function(){return A.CHM(o).$implicit.dismiss("Cross click")}),A._uU(228,"Exit"),A.qZA(),A.qZA(),A.qZA(),A.qZA()}if(2&e){var n=A.oxw();A.xp6(10),A.s9C("value",n.responseDto.account),A.xp6(4),A.s9C("value",n.responseDto.amount),A.xp6(4),A.s9C("value",n.responseDto.ccyCd),A.xp6(4),A.s9C("value",n.responseDto.accountBranch),A.xp6(4),A.s9C("value",n.responseDto.lcyEquivalent),A.xp6(4),A.s9C("value",n.responseDto.drCr),A.xp6(4),A.s9C("value",n.responseDto.id.branchCode),A.xp6(4),A.s9C("value",A.lcZ(39,53,n.responseDto.valueDate)),A.xp6(5),A.s9C("value",A.lcZ(44,55,n.responseDto.id.initiationDate)),A.xp6(5),A.s9C("value",n.responseDto.externalRefNo),A.xp6(4),A.s9C("value",n.responseDto.relatedAccount),A.xp6(4),A.s9C("value",n.responseDto.relCust),A.xp6(4),A.s9C("value",n.responseDto.exchRate),A.xp6(4),A.s9C("value",n.responseDto.relatedRef),A.xp6(4),A.s9C("value",n.responseDto.addlText),A.xp6(4),A.s9C("value",n.responseDto.instrumentNo),A.xp6(4),A.s9C("value",n.responseDto.id.batchNo),A.xp6(4),A.s9C("value",n.responseDto.uploadDate),A.xp6(4),A.s9C("value",n.responseDto.finCycle),A.xp6(4),A.s9C("value",n.responseDto.periodCode),A.xp6(4),A.s9C("value",n.responseDto.txnCode),A.xp6(4),A.s9C("value",n.responseDto.misCode),A.xp6(4),A.s9C("value",n.responseDto.poolCode),A.xp6(4),A.s9C("value",n.responseDto.txnMis1),A.xp6(4),A.s9C("value",n.responseDto.misGroup),A.xp6(4),A.s9C("value",n.responseDto.misFlag),A.xp6(4),A.s9C("value",n.responseDto.txnMis2),A.xp6(4),A.s9C("value",n.responseDto.misHead),A.xp6(4),A.s9C("value",n.responseDto.misGroupTxn),A.xp6(4),A.s9C("value",n.responseDto.txnMis3),A.xp6(4),A.s9C("value",n.responseDto.compMis1),A.xp6(4),A.s9C("value",n.responseDto.compMis3),A.xp6(4),A.s9C("value",n.responseDto.txnMis4),A.xp6(4),A.s9C("value",n.responseDto.compMis2),A.xp6(4),A.s9C("value",n.responseDto.compMis4),A.xp6(4),A.s9C("value",n.responseDto.txnMis5),A.xp6(4),A.s9C("value",n.responseDto.compMis5),A.xp6(4),A.s9C("value",n.responseDto.costCode1),A.xp6(4),A.s9C("value",n.responseDto.txnMis6),A.xp6(4),A.s9C("value",n.responseDto.compMis6),A.xp6(4),A.s9C("value",n.responseDto.costCode2),A.xp6(4),A.s9C("value",n.responseDto.txnMis7),A.xp6(4),A.s9C("value",n.responseDto.compMis7),A.xp6(4),A.s9C("value",n.responseDto.costCode3),A.xp6(4),A.s9C("value",n.responseDto.txnMis8),A.xp6(4),A.s9C("value",n.responseDto.compMis8),A.xp6(4),A.s9C("value",n.responseDto.costCode4),A.xp6(4),A.s9C("value",n.responseDto.txnMis9),A.xp6(4),A.s9C("value",n.responseDto.compMis9),A.xp6(4),A.s9C("value",n.responseDto.costCode5),A.xp6(4),A.s9C("value",n.responseDto.txnMis10),A.xp6(4),A.s9C("value",n.responseDto.compMis10),A.xp6(4),A.s9C("value",n.responseDto.udfDetails)}}var pe=function(){var t=function(){function t(e,o,n,s,a){i(this,t),this.api=e,this.roleService=o,this.userApi=n,this.excelService=s,this.modalService=a,this.respArray=[],this.dtOptions=[],this.dtTrigger1=new T.xQ,this.dtTrigger2=new T.xQ,this.closeResult="",this.statusArr=["Authorized","Unauthorized","Open","Close"],this.rejectReason="Testing",this.roleCodes=new Z.yv,this.approveButtonStatus=!0,this.spinner=!1,this.firstAndSecondAuthAuditLogRespDTO=new ne.U,this.excelDataAuthFirstDetails=new oe,this.flag=!1,this.pendingForAuthData=[],this.isLoading=!1,this.dummyQenPMJNuqUwhg5W8UMFs66YBXrBVhhZzMFt=new Array,this.dummyPendingForAuthDataDetails=[],this.items=[10,20,30,40],this.name=new d.NI(""),this.button_permission={},this.pipe=new r.uU("en-US"),this.now=Date.now(),this.dataForProcessScreen=new Array,this.dataForProcessScreenSingle=new ne.w,this.dataForProcessScreen1=[]}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.dtOptions[0]={pagingType:"full_numbers",pageLength:5,processing:!0,retrieve:!0,columnDefs:[{type:"date",targets:[6]}],lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]]},this.dtOptions[1]={pagingType:"full_numbers",pageLength:5,processing:!0,retrieve:!0,lengthMenu:[[5,10,20,30,-1],[5,10,20,30,"ALL"]]},setTimeout(function(){e.newRolePermissions()},2e3),this.roleService.screenLabelList.subscribe(function(t){return e.roleCodes=t}),this.flag=!1,this.firstLevelAuthorizationStatus={},this.approveButtonStatus=!1,this.user_id=localStorage.getItem("userFromLogin").replace(/['"]+/g,""),this.role=sessionStorage.getItem("user_role"),this.getPendingForAuthData(),this.dummyQenPMJNuqUwhg5W8UMFs66YBXrBVhhZzMFt=new Array}},{key:"ngOnDestroy",value:function(){this.dtTrigger1.unsubscribe(),this.dtTrigger2.unsubscribe()}},{key:"screenpermission",value:function(){var e=this;this.screenName="UploadProcessAuthorization",this.userApi.getRoleScreenPermission(this.user_id,this.screenName,this.role).subscribe(function(t){e.rolepermission=t,e.rolepermission&&(e.button_permission=e.rolepermission[0])})}},{key:"reject",value:function(){var e=this;this.reasonBoolean=!0,this.rejectReason||f().fire("Enter the reason for Rejection"),console.log("rejectreason"+this.rejectReason),this.pendingForAuthDetailsDTOList[0].inputBy!=this.user_id?(this.authprocess=!0,this.approveButtonStatus=!1,this.deUploadReqDTO=new z.Qz,this.deUploadReqDTO.pendingForAuthDTO=this.deUploadPendingForAuthDTO,this.deUploadReqDTO.pendingForAuthDetailsDTOList=this.pendingForAuthDetailsDTOList,f().fire({text:"You are trying to Reject record.  Do you want to reject?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"CANCEL",confirmButtonText:"REJECT",icon:"info",input:"textarea",inputValue:"",inputPlaceholder:"Please enter reason for rejection"}).then(function(t){!0===t.isConfirmed&&e.api.rejectCallApi(e.deUploadReqDTO,e.user_id,t.value).subscribe(function(t){e.statusFlag=t,e.statusFlag&&f().fire({text:"Rejected Successfully",icon:"success"}).then(function(e){return e.isConfirmed&&window.location.reload()}),!1===e.statusFlag&&f().fire({icon:"error",text:"Failed to Rejected "})}),!1===t.isConfirmed&&(e.process=!0,e.approveButtonStatus=!0)}),this.getPendingForAuthData(),this.dummyPendingForAuthDataDetails=[],this.dtTrigger2.next()):f().fire("Maker cannot reject the record.")}},{key:"newRolePermissions",value:function(){this.roleService.fetchScreenPermissions("Authorize Excel")}},{key:"approveDetailsData",value:function(){var e=this;if(this.pendingForAuthDetailsDTOList&&(this.todaydate=this.pipe.transform(this.now,"dd-MMM-yy"),this.uploaddate=this.pipe.transform(this.pendingForAuthDetailsDTOList[0].uploadDate,"dd-MMM-yy"),console.log("date for compare",this.todaydate,this.uploaddate),this.todaydate!==this.uploaddate))return console.log("inside if"),void f().fire("Unable to authorized. Backdated authorization not allowed.");this.pendingForAuthDetailsDTOList[0].inputBy!=this.user_id?(this.authprocess=!0,this.approveButtonStatus=!1,this.deUploadReqDTO=new z.Qz,this.deUploadReqDTO.pendingForAuthDTO=this.deUploadPendingForAuthDTO,this.deUploadReqDTO.pendingForAuthDetailsDTOList=this.pendingForAuthDetailsDTOList,f().fire({text:"You are trying to Authorize Record.  Do you want to proceed?",showCancelButton:!0,confirmButtonColor:"#E6224A",cancelButtonColor:"#011945",cancelButtonText:"NO",confirmButtonText:"YES",icon:"info"}).then(function(t){console.log(t),!0===t.isConfirmed&&e.api.approveDetailsData(e.deUploadReqDTO,e.user_id).subscribe(function(t){e.firstLevelAuthorizationStatus=t,console.log(e.firstLevelAuthorizationStatus),e.authprocess=!1,e.firstLevelAuthorizationStatus||(console.log(e.approveButtonStatus),f().fire({text:"Data authorization is failed",icon:"error"})),e.firstLevelAuthorizationStatus&&(f().fire({text:"Record is Approved and Processed",icon:"success"}).then(function(e){return e.isConfirmed&&window.location.reload()}),e.process=!0,e.getPendingForAuthData(),e.approval=!1,e.Process())},function(e){f().fire("Data authorization is failed.")}),0==t.isConfirmed&&(e.approveButtonStatus=!0)}),this.getPendingForAuthData(),this.dummyPendingForAuthDataDetails=[],this.dtTrigger2.next()):f().fire("Maker cannot authorize and process the record.").then(function(e){return e.isConfirmed&&window.location.reload()})}},{key:"Process",value:function(){var e=this;this.spinner=!0,this.deUploadReqDTO=new z.Qz,this.deUploadReqDTO.pendingForAuthDTO=this.deUploadPendingForAuthDTO,this.deUploadReqDTO.pendingForAuthDetailsDTOList=this.pendingForAuthDetailsDTOList,this.flag=!1,console.log(this.deUploadReqDTO),this.api.processDeUploadt(this.deUploadReqDTO,this.user_id).subscribe(function(t){e.responseforDE=t,console.log("Response ::"+e.responseforDE),e.responseforDE?e.spinner=!1:(e.spinner=!1,f().fire("Unable to connect core banking. Server Failed to process the request."))})}},{key:"getAuditLogData",value:function(e){var t=this;this.api.getFirstAndSecondAuthAuditService(this.getDetailsQueryToggleReqDTO).subscribe(function(e){t.firstAndSecondAuthAuditLogRespDTO=e})}},{key:"queryDetailsDataByParam",value:function(e,t){var o=this,n=document.getElementById("btnGetDetails"+t);n.innerHTML='<span class="indicator-progress" >Please wait... <span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>',this.isLoading=!0,this.process=!1,this.approveButtonStatus=!1,console.log(e),this.spinner1=!0,this.remarks=e.remarks,this.overrides=e.overrides,this.deUploadPendingForAuthDTO=e,this.getDetailsQueryToggleReqDTO=new z.AJ,this.getDetailsQueryToggleReqDTO.externalSysName=e.externalSysName,this.getDetailsQueryToggleReqDTO.processName=e.processName,this.getDetailsQueryToggleReqDTO.processingDate=e.processingDate,this.getDetailsQueryToggleReqDTO.currency=e.currency,this.getDetailsQueryToggleReqDTO.filename=e.fileName,this.getDetailsQueryToggleReqDTO.batchNumber=e.batchNumber,this.getDetailsQueryToggleReqDTO.overrides=this.overrides,console.log(this.getDetailsQueryToggleReqDTO),this.api.queryDetailsDataByParamService(this.getDetailsQueryToggleReqDTO).subscribe(function(e){o.isLoading=!1,console.log("backend row data after query",e),n.innerHTML="<span>Get Details</span>",o.pendingForAuthDetailsDTOList=e,o.pendingForAuthDetailsDTOList[0].inputBy==o.user_id&&(console.log(o.user_id),console.log("true"),o.reject1=!0),o.pendingForAuthDetailsDTOList.length>0?(o.approveButtonStatus=!0,o.auth=!0,o.spinner1=!1,o.approval=!0,o.flag=!0,o.button1=!0,o.dummyPendingForAuthDataDetails=o.pendingForAuthDetailsDTOList,o.createSubTable(t+1)):f().fire("Data Not Found")},function(e){o.isLoading=!1}),this.spinner1=!1}},{key:"createSubTable",value:function(e){var t=this,o=document.getElementById("authorizeExcelTableBody");setTimeout(function(){var n=document.getElementById("accountDetailsMain");t.previousRow&&o.removeChild(t.previousRow);var i=document.createElement("tr");t.previousRow=i,i.classList.add("trowAuthorization"),i.style.position="relative",i.style.height="408px",n.classList.add("accountDetailsDiv"),i.appendChild(n),o.insertBefore(i,o.children[e])},0)}},{key:"getAllDetailsData",value:function(){var e=this;this.api.getDetailsListServiceFirst().subscribe(function(t){console.log(t),e.queriedPendingForAuthDetailsDTOList=t,e.dummyPendingForAuthDataDetails=e.queriedPendingForAuthDetailsDTOList,e.dtTrigger2.next()})}},{key:"getPendingForAuthData",value:function(){var t=this;this.api.getPendingForAuthDataFirst(this.user_id).subscribe(function(o){console.log(o),t.pendingForAuthData=o,t.pendingForAuthData.sort(function(e,t){return e.processingDate<t.processingDate?1:-1});var n,i=e(t.pendingForAuthData);try{var s=function(){var e=n.value;e.authStatus=t.statusArr.find(function(t){return t.startsWith(e.authStatus)}),e.uploadStatus=t.statusArr.find(function(t){return t.startsWith(e.uploadStatus)})};for(i.s();!(n=i.n()).done;)s()}catch(r){i.e(r)}finally{i.f()}if(t.dtTrigger1.next(),t.pendingForAuthData){for(var a=0;a<t.pendingForAuthData.length;a++)t.pendingForAuthData[a].fileName=JSON.stringify(t.pendingForAuthData[a].fileName).split("/").pop().split('"')[0];"A"===t.pendingForAuthData.authStatus&&(t.getAllDetailsData(),t.process=!0)}})}},{key:"openSnackBar",value:function(e,t){f().fire(e)}},{key:"openSnackBarLongDuration",value:function(e,t){f().fire(e)}},{key:"findRowsPerExtSys",value:function(t){this.dummyPendingForAuthDataDetails=new Array;var o,n=e(this.pendingForAuthDetailsDTOList);try{for(n.s();!(o=n.n()).done;){var i=o.value;i.sourceCode===t&&this.dummyPendingForAuthDataDetails.push(i)}}catch(s){n.e(s)}finally{n.f()}this.dtTrigger2.next()}},{key:"openDialog",value:function(e,t){var o=this;this.responseDto=t,this.modalService.open(e,{windowClass:"md-class"}).result.then(function(e){o.closeResult="Closed with: ".concat(e)},function(e){o.closeResult="Dismissed ".concat(o.getDismissReason(e))})}},{key:"getDismissReason",value:function(e){return e===W.If.ESC?"by pressing ESC":e===W.If.BACKDROP_CLICK?"by clicking on a backdrop":"with: ".concat(e)}},{key:"openAuditDetails",value:function(e){var t=this;this.api.getAuditDataOfDetailsRecord(e).subscribe(function(e){t.medDeUploadDetailHistEntityList=e})}},{key:"downloadData",value:function(){var e=this;console.log(this.pendingForAuthDetailsDTOList),this.pendingForAuthDetailsDTOList.forEach(function(t){"C"==t.drCr?(e.credit=t.lcyEquivalent,e.debit=0):(e.debit=t.lcyEquivalent,e.credit=0),e.dataForProcessScreen1.push({Batch_No:t.id.batchNo,Account_Branch:t.accountBranch,Account:t.account,Acc_Desc:t.accDesc,DrCr:t.drCr,Trn_Code:t.txnCode,Transaction_Desc:t.trnDesc,FcyAmount:t.amount,Exch_Rate:t.exchRate,DrLcyAmt:e.debit,CrLcyAmt:e.credit,Instr_code:t.instrumentNo,Value_Date:e.pipe.transform(t.valueDate,"dd-MMM-yy"),User_Id:t.inputBy,Authorizer_ID:t.firstTimeAuthorizer,Treasury_Reference:t.acumenJournal}),console.log(e.dataForProcessScreen1)}),console.log("final data",this.dataForProcessScreen1),this.excelService.exportAsExcelFile(this.dataForProcessScreen1,"Excel_Upload_Data"),this.dataForProcessScreen1=[]}},{key:"convert",value:function(){var e=this,t=new(X())({orientation:"landscape"});t.setFont("helvetica"),t.setFontSize("bold"),t.setFontSize(9);var o=[];console.log(this.pendingForAuthDetailsDTOList),this.pendingForAuthDetailsDTOList.forEach(function(t){"C"==t.drCr?(e.pdfCreditVar=t.lcyEquivalent,e.pdfDebitVar=0):(e.pdfDebitVar=t.lcyEquivalent,e.pdfCreditVar=0),e.valueDate=e.pipe.transform(t.valueDate,"dd-MMM-yy");var n=new Date(t.timeForExport).toLocaleDateString("en-us");console.log(n),o.push([t.id.batchNo,t.accountBranch,t.account,t.accDesc,t.drCr,t.txnCode,t.trnDesc,t.amount,t.exchRate,e.pdfDebitVar,e.pdfCreditVar,t.instrumentNo,e.valueDate,t.inputBy,t.firstTimeAuthorizer,t.acumenJournal])}),t.autoTable({head:[["BatchNo","AccBranch","Acc","AccDesc","DrCr","TrnCode","TrnDesc","FcyAmt","Rate","DrLcyAmt","CrLcyAmt","InstrCode","ValueDate","UserId","AuthId","TreasuryReference"]],body:o,theme:"striped",margin:{top:25,bottom:15},styles:{overflow:"linebreak",fontSize:8},showHeader:"everyPage"}),t.save("ExcelDAtaAuthFirst.pdf")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(A.Y36(D.sM),A.Y36(b),A.Y36(m.fz),A.Y36(q.x),A.Y36(W.FF))},t.\u0275cmp=A.Xpm({type:t,selectors:[["npr-authorize-excel"]],viewQuery:function(e,t){var o;(1&e&&A.Gf(V.G,5),2&e)&&(A.iGM(o=A.CRH())&&(t.dtElements=o))},decls:44,vars:4,consts:[[1,"pageContentMain"],[1,"pageTitleCol"],[1,"pageTitle"],[1,"dbCardStyle"],[1,"pageTitle","my-3","text-center"],[1,"table-responsive"],["id","dbTable1","datatable","",1,"table","tableStyle","tableStyleSelect","nowrap","vAlignMdl",2,"width","100%",3,"dtOptions","dtTrigger"],["id","authorizeExcelTableBody"],[4,"ngFor","ngForOf"],["class","dbCardStyle","id","accountDetailsMain",4,"ngIf"],["content",""],[1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"id","click"],["id","accountDetailsMain",1,"dbCardStyle"],["class","row",4,"ngIf"],["id","dbTable2","datatable","",1,"dataTable","table","tableStyle",2,"width","100%",3,"dtOptions","dtTrigger"],[1,"btnCol","mt-md-4","mt-3"],["class","btn smBtn btnDarkGrey",3,"click",4,"ngIf"],["class","btn smBtn btnPrimary ",3,"click",4,"ngIf"],[1,"row"],[1,"col-sm-4"],[2,"width","100%"],[1,"tdCell"],[1,"btn","smBtn","btnPrimary",3,"click"],[1,"btn","smBtn","btnDarkGrey",3,"click"],[1,"row","gy-3"],[1,"col-lg-3"],["for","securityLogins",1,"formLbl"],["id","securityLogins","type","text","readonly","",1,"form-control",3,"value"],["id","securityLogins","type","text","value","Unprocessed","readonly","",1,"form-control"],[1,"row","g-3","pb-3","justify-content-end","pt-3"],[1,"col-auto","prClass","pb-3","pt-3"],[1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"click"]],template:function(e,t){1&e&&(A.TgZ(0,"div",0),A.TgZ(1,"div",1),A.TgZ(2,"h2",2),A._uU(3,"Authorize Excel"),A.qZA(),A.qZA(),A.TgZ(4,"div",3),A.TgZ(5,"h2",4),A._uU(6,"Authorization"),A.qZA(),A.TgZ(7,"div",5),A.TgZ(8,"table",6),A.TgZ(9,"thead"),A.TgZ(10,"tr"),A.TgZ(11,"th"),A._uU(12,"process detail"),A.qZA(),A.TgZ(13,"th"),A._uU(14,"external system"),A.qZA(),A.TgZ(15,"th"),A._uU(16,"currency"),A.qZA(),A.TgZ(17,"th"),A._uU(18,"Uploaded by"),A.qZA(),A.TgZ(19,"th"),A._uU(20,"batch number"),A.qZA(),A.TgZ(21,"th"),A._uU(22,"process name"),A.qZA(),A.TgZ(23,"th"),A._uU(24,"processing date"),A.qZA(),A.TgZ(25,"th"),A._uU(26,"auth status"),A.qZA(),A.TgZ(27,"th"),A._uU(28,"upload status"),A.qZA(),A.TgZ(29,"th"),A._uU(30,"File Name"),A.qZA(),A.TgZ(31,"th"),A._uU(32,"Total Record"),A.qZA(),A.TgZ(33,"th"),A._uU(34,"Total Credit"),A.qZA(),A.TgZ(35,"th"),A._uU(36,"Total Debit"),A.qZA(),A.qZA(),A.qZA(),A.TgZ(37,"tbody",7),A.YNc(38,ie,29,16,"tr",8),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A._UZ(39,"br"),A._UZ(40,"br"),A.YNc(41,de,40,8,"div",9),A.qZA(),A.YNc(42,ge,229,57,"ng-template",null,10,A.W1O)),2&e&&(A.xp6(8),A.Q6J("dtOptions",t.dtOptions[0])("dtTrigger",t.dtTrigger1),A.xp6(30),A.Q6J("ngForOf",t.pendingForAuthData),A.xp6(3),A.Q6J("ngIf",null!=t.pendingForAuthDetailsDTOList))},directives:[V.G,r.sg,r.O5],pipes:[r.uU],styles:["table.tableStyle[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#a6aab5;font-size:9px;text-transform:uppercase;letter-spacing:1px;padding:16px 13px;border-bottom:1px solid #F5F5F5}.prClass[_ngcontent-%COMP%]{padding-right:40px}  .modal-dialog{max-width:800px!important}  .md-class .dbCardStyle{overflow-y:scroll!important;height:250px}.mat-paginator-sticky[_ngcontent-%COMP%]{bottom:0px;position:-webkit-sticky;position:sticky;z-index:10}.trowAuthorization[_ngcontent-%COMP%]{position:relative;height:400px!important}.accountDetailsDiv[_ngcontent-%COMP%]{position:absolute;top:0;max-width:100%}.tdCell[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}#dbTable2[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px;height:30px!important}"]}),t}(),Ze=[{path:"upload-excel",component:Y,canDeactivate:[s(50215).I]},{path:"rejection_queue",component:te},{path:"authorize_excel",component:pe}],he=function(){var e=n(function e(){i(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=A.oAB({type:e}),e.\u0275inj=A.cJS({imports:[[l.Bz.forChild(Ze)],l.Bz]}),e}(),fe=function(){var e=n(function e(){i(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=A.oAB({type:e}),e.\u0275inj=A.cJS({imports:[[r.ez,he,d.u5,d.UX,V.T,W.IJ,_.A0]]}),e}()}}])}();