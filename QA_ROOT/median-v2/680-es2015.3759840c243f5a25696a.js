"use strict";(self.webpackChunkmedian=self.webpackChunkmedian||[]).push([[680],{84680:function(s,e,r){r.r(e),r.d(e,{ChangePasswordModule:function(){return S}});var i=r(38583),o=r(39895),t=r(3679);class n{}var a=r(88259),d=r.n(a),c=r(2527),h=r(37716),g=r(94761),u=r(10402);function l(s,e){1&s&&h._UZ(0,"img",25)}function w(s,e){1&s&&h._UZ(0,"img",26)}function m(s,e){1&s&&h._UZ(0,"img",25)}function p(s,e){1&s&&h._UZ(0,"img",26)}function f(s,e){if(1&s&&(h.TgZ(0,"div"),h._uU(1),h.qZA()),2&s){const s=h.oxw(2);h.xp6(1),h.Oqu(s.errorMsg)}}function P(s,e){if(1&s&&(h.TgZ(0,"div",27),h.YNc(1,f,2,1,"div",28),h.qZA()),2&s){const s=h.oxw();h.xp6(1),h.Q6J("ngIf",s.userForm.get("newPassword").errors.pattern)}}function x(s,e){if(1&s&&(h.TgZ(0,"div",27),h._uU(1),h.qZA()),2&s){const s=h.oxw();h.xp6(1),h.hij(" New Password must contain Minimum ",s.minPass," digits. ")}}function Z(s,e){if(1&s&&(h.TgZ(0,"div",27),h._uU(1),h.qZA()),2&s){const s=h.oxw();h.xp6(1),h.hij(" New Password must contain Maximum ",s.maxPass," digits. ")}}function v(s,e){1&s&&h._UZ(0,"img",25)}function I(s,e){1&s&&h._UZ(0,"img",26)}function q(s,e){if(1&s&&(h.TgZ(0,"div"),h._uU(1),h.qZA()),2&s){const s=h.oxw(2);h.xp6(1),h.Oqu(s.errorMsg)}}function b(s,e){if(1&s&&(h.TgZ(0,"div",27),h.YNc(1,q,2,1,"div",28),h.qZA()),2&s){const s=h.oxw();h.xp6(1),h.Q6J("ngIf",s.userForm.get("confirmPassword").errors.pattern)}}function y(s,e){if(1&s&&(h.TgZ(0,"div",27),h._uU(1),h.qZA()),2&s){const s=h.oxw();h.xp6(1),h.hij(" Confirm Password must contain Minimum ",s.minPass," digits. ")}}function A(s,e){if(1&s&&(h.TgZ(0,"div",27),h._uU(1),h.qZA()),2&s){const s=h.oxw();h.xp6(1),h.hij(" Confirm Password must contain Maximum ",s.maxPass," digits. ")}}const N=function(){return["/dashboard"]},T=[{path:"",component:(()=>{class s{constructor(s,e,r,i){this.api=s,this.fb=e,this.router=r,this.apiService=i,this.changePassword=new n,this.enableLoader=!1,this.userObj=new n,this.hide1=!0,this.hide=!0,this.hide2=!0,this.submit=!0}ngOnInit(){this.loggedInUser=localStorage.getItem("userFromLogin"),this.otpEnableFlag=!1,this.userForm=new t.cw({userId:new t.NI("",t.kI.required),oldPassword:new t.NI("",t.kI.required),newPassword:new t.NI("",[t.kI.required,t.kI.compose([t.kI.pattern(this.passwordRegex),t.kI.maxLength(this.maxPass),t.kI.minLength(this.minPass)])]),confirmPassword:new t.NI("",t.kI.required),otp:new t.NI("",t.kI.required)}),this.apiService.fetchSecurityPolicyService().subscribe(s=>{this.security=s,console.log(this.security),this.minPass=this.security.minPswdLength,this.maxPass=this.security.maxPswdLength,this.buildForm(this.minPass,this.maxPass),console.log(this.minPass,this.maxPass),console.log(this.security)}),this.buildForm(this.minPass?this.minPass:void 0,this.maxPass?this.maxPass:void 0)}buildForm(s,e){this.apiService.fetchSecurityPolicyService().subscribe(s=>{this.security1=s,this.ucase=this.security1.pswdComplexUcase,this.lcase=this.security1.pswdComplexLcase,this.num=this.security1.pswdComplexNum,this.splc=this.security1.pswdComplexSplc,this.errorMsg="",this.passwordRegex="",console.log("Upper case",this.ucase),console.log("Lower case",this.lcase),console.log("num case",this.num),console.log("splc case",this.splc),"true"==this.security1.pswdComplexUcase&&(this.passwordRegex="(?=[^A-Z]*[A-Z])",this.errorMsg=" UpperCase"),"true"==this.security1.pswdComplexLcase&&(this.passwordRegex=this.passwordRegex+"(?=[^a-z]*[a-z])",this.errorMsg=""!=this.errorMsg?this.errorMsg+", LowerCase":this.errorMsg+" LowerCase"),"true"==this.splc&&(this.passwordRegex=this.passwordRegex+"(?=.*[!@#$%^&*])",this.errorMsg=""!=this.errorMsg?this.errorMsg+", Special Character":this.errorMsg+" Special Character"),"true"==this.security1.pswdComplexNum&&(this.passwordRegex=this.passwordRegex+"(?=[^0-9]*[0-9])",this.errorMsg=""!=this.errorMsg?this.errorMsg+", Number":this.errorMsg+" Number"),this.passwordRegex=this.passwordRegex+".{"+this.minPass+","+this.maxPass+"}",this.errorMsg="Password must contain atleast one "+this.errorMsg+".",console.log(this.passwordRegex),this.userForm=this.fb.group({newPassword:new t.NI("",[t.kI.required,t.kI.compose([t.kI.pattern(this.passwordRegex),t.kI.maxLength(this.maxPass),t.kI.minLength(this.minPass)])]),oldPassword:new t.NI("",t.kI.required),confirmPassword:new t.NI("",t.kI.required)})}),console.log(this.minPass,this.maxPass),console.log("form",this.userForm)}onSubmit(){if(this.changePassword.userId=this.loggedInUser,this.changePassword.newPassword=this.userForm.get("newPassword").value,this.changePassword.oldPassword=this.userForm.get("oldPassword").value,this.changePassword.confirmPassword=this.userForm.get("confirmPassword").value,this.changePassword.newPassword!=this.changePassword.confirmPassword)d().fire({text:"New Password and Confirm Password values are not same ",icon:"error"});else if(this.changePassword.newPassword&&this.changePassword.confirmPassword&&this.changePassword.oldPassword){this.changePassword.userId=this.loggedInUser;var s=c.AES.encrypt(this.changePassword.newPassword,"@12#90!^*NPR*g&*()$34#$"),e=c.AES.encrypt(this.changePassword.userId,"@12#90!^*NPR*g&*()$34#$"),r=(c.AES.encrypt(this.changePassword.oldPassword,"@12#90!^*NPR*g&*()$34#$"),s.toString()),i=e.toString();s.toString(),this.changePassword.newPassword=r,this.changePassword.userId=i,console.log(this.changePassword),this.enableLoader=!0,this.api.changePasswordService(this.changePassword).subscribe(s=>{this.var1=s,console.log(s[0]),"You cannot use your previous password. Please choose another password"==s&&d().fire({title:"You can not use your last "+this.security.pswdReuseAft+" passwords. Please choose another password.",icon:"error"}),"Incorrect old Password"==s&&d().fire({title:"Incorrect old password.",icon:"error"}),"successfull"==s&&(d().fire({title:"Password Changed Successfully.",icon:"success"}),this.submit=!1)})}else console.log("inside else if"),d().fire({text:"Please enter all the fields ",icon:"info"})}}return s.\u0275fac=function(e){return new(e||s)(h.Y36(g.sM),h.Y36(t.qu),h.Y36(o.F0),h.Y36(u.W))},s.\u0275cmp=h.Xpm({type:s,selectors:[["npr-change-password"]],decls:55,vars:20,consts:[[1,"mt-1"],[1,"pageTitleCol"],[1,"pageTitle"],["action","",1,"formStyle",3,"formGroup"],[1,"dbCardStyle","fieldwidth",2,"width","400px"],[3,"disabled"],[1,"row","gy-4"],[1,"col-12"],[1,"formLbl"],[1,"colorRed"],[1,"d-flex"],["id","oldPassword","placeholder","Old Password","required","","value","","name","oldPassword","formControlName","oldPassword",1,"form-control",3,"type"],["newPassword",""],["toggle","#pwdFld",1,"visibility",3,"click"],["class","showPwd","src","assets/images/show-icon.svg","alt","...",4,"ngIf"],["class","hidePwd","src","assets/images/hide-icon.svg","alt","...",4,"ngIf"],["id","password","placeholder","New Password","required","","value","","name","password","formControlName","newPassword",1,"form-control",3,"type"],["class","invalid-feedback",4,"ngIf"],["id","confirm password","placeholder","Confirm Password","required","","value","","name","confirmPassword","formControlName","confirmPassword",1,"form-control",3,"type"],["confirmPassword",""],[1,"col-lg-12"],[1,"row","g-3","pt-3","mt-2","justify"],[1,"col-auto"],["href","javascript:void(0)",1,"btn","smBtn","minWdSmBtn","btnPrimary",3,"disabled","click"],["href","javascript:void(0)",1,"btn","smBtn","minWdSmBtn","btnSecondary",3,"routerLink"],["src","assets/images/show-icon.svg","alt","...",1,"showPwd"],["src","assets/images/hide-icon.svg","alt","...",1,"hidePwd"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(s,e){1&s&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"h2",2),h._uU(3,"Password Management"),h.qZA(),h.qZA(),h.TgZ(4,"form",3),h.TgZ(5,"div",4),h.TgZ(6,"fieldset",5),h.TgZ(7,"div",6),h.TgZ(8,"div",7),h.TgZ(9,"label",8),h._uU(10,"Old Password"),h.TgZ(11,"span",9),h._uU(12,"*"),h.qZA(),h.qZA(),h.TgZ(13,"div",10),h._UZ(14,"input",11,12),h.TgZ(16,"span",13),h.NdJ("click",function(){return e.hide=!e.hide}),h.YNc(17,l,1,0,"img",14),h.YNc(18,w,1,0,"img",15),h.qZA(),h.qZA(),h.qZA(),h.TgZ(19,"div",7),h.TgZ(20,"label",8),h._uU(21,"New Password"),h.TgZ(22,"span",9),h._uU(23,"*"),h.qZA(),h.qZA(),h.TgZ(24,"div",10),h._UZ(25,"input",16,12),h.TgZ(27,"span",13),h.NdJ("click",function(){return e.hide1=!e.hide1}),h.YNc(28,m,1,0,"img",14),h.YNc(29,p,1,0,"img",15),h.qZA(),h.qZA(),h.YNc(30,P,2,1,"div",17),h.YNc(31,x,2,1,"div",17),h.YNc(32,Z,2,1,"div",17),h.qZA(),h.TgZ(33,"div",7),h.TgZ(34,"label",8),h._uU(35,"Confirm Password"),h.TgZ(36,"span",9),h._uU(37,"*"),h.qZA(),h.qZA(),h.TgZ(38,"div",10),h._UZ(39,"input",18,19),h.TgZ(41,"span",13),h.NdJ("click",function(){return e.hide2=!e.hide2}),h.YNc(42,v,1,0,"img",14),h.YNc(43,I,1,0,"img",15),h.qZA(),h.qZA(),h.YNc(44,b,2,1,"div",17),h.YNc(45,y,2,1,"div",17),h.YNc(46,A,2,1,"div",17),h.qZA(),h.qZA(),h.qZA(),h.TgZ(47,"div",20),h.TgZ(48,"div",21),h.TgZ(49,"div",22),h.TgZ(50,"button",23),h.NdJ("click",function(){return e.onSubmit()}),h._uU(51,"Save"),h.qZA(),h.qZA(),h.TgZ(52,"div",22),h.TgZ(53,"a",24),h._uU(54,"Exit"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&s&&(h.xp6(4),h.Q6J("formGroup",e.userForm),h.xp6(2),h.Q6J("disabled",!e.submit),h.xp6(8),h.Q6J("type",e.hide?"password":"text"),h.xp6(3),h.Q6J("ngIf",!e.hide),h.xp6(1),h.Q6J("ngIf",e.hide),h.xp6(7),h.Q6J("type",e.hide1?"password":"text"),h.xp6(3),h.Q6J("ngIf",!e.hide1),h.xp6(1),h.Q6J("ngIf",e.hide1),h.xp6(1),h.Q6J("ngIf",e.userForm.get("newPassword").touched&&!e.userForm.get("newPassword").valid),h.xp6(1),h.Q6J("ngIf",e.userForm.get("newPassword").hasError("minlength")),h.xp6(1),h.Q6J("ngIf",e.userForm.get("newPassword").hasError("maxlength")),h.xp6(7),h.Q6J("type",e.hide2?"password":"text"),h.xp6(3),h.Q6J("ngIf",!e.hide2),h.xp6(1),h.Q6J("ngIf",e.hide2),h.xp6(1),h.Q6J("ngIf",e.userForm.get("confirmPassword").touched&&!e.userForm.get("confirmPassword").valid),h.xp6(1),h.Q6J("ngIf",e.userForm.get("confirmPassword").hasError("minlength")),h.xp6(1),h.Q6J("ngIf",e.userForm.get("confirmPassword").hasError("maxlength")),h.xp6(4),h.Q6J("disabled",!e.userForm.valid||!e.submit),h.xp6(3),h.Q6J("routerLink",h.DdM(19,N)))},directives:[t._Y,t.JL,t.sg,t.Fj,t.Q7,t.JJ,t.u,i.O5,o.yS],styles:[".visibility[_ngcontent-%COMP%]{position:relative;right:10%;align-self:center}.dbCardStylePassword[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:30px 65px}"]}),s})()}];let U=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[o.Bz.forChild(T)],o.Bz]}),s})(),S=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=h.oAB({type:s}),s.\u0275inj=h.cJS({imports:[[i.ez,U,t.UX]]}),s})()}}]);